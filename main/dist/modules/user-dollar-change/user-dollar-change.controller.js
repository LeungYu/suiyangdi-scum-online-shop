'use strict';const a284_0xaf6bf1=a284_0x1a24;(function(_0x3abba4,_0x3a82b3){const _0x1c54b7=a284_0x1a24,_0x52feac=_0x3abba4();while(!![]){try{const _0x25c0a7=parseInt(_0x1c54b7(0x1bc))/0x1*(parseInt(_0x1c54b7(0x1e5))/0x2)+parseInt(_0x1c54b7(0x1c7))/0x3*(-parseInt(_0x1c54b7(0x21c))/0x4)+-parseInt(_0x1c54b7(0x1fb))/0x5*(-parseInt(_0x1c54b7(0x1c1))/0x6)+-parseInt(_0x1c54b7(0x208))/0x7+parseInt(_0x1c54b7(0x21a))/0x8*(-parseInt(_0x1c54b7(0x1d0))/0x9)+parseInt(_0x1c54b7(0x207))/0xa*(parseInt(_0x1c54b7(0x1bf))/0xb)+parseInt(_0x1c54b7(0x21d))/0xc;if(_0x25c0a7===_0x3a82b3)break;else _0x52feac['push'](_0x52feac['shift']());}catch(_0x40cce3){_0x52feac['push'](_0x52feac['shift']());}}}(a284_0xb02f,0x4fc6a));var __decorate=this&&this['__decorate']||function(_0x468c96,_0x389e1c,_0xe9d3da,_0x528c49){const _0x508179=a284_0x1a24,_0x5ee75c={'TniOX':function(_0x1d8e98,_0x13be08){return _0x1d8e98===_0x13be08;},'udjUe':_0x508179(0x1d2),'iHGjw':function(_0x58ce04,_0x72f6c8){return _0x58ce04===_0x72f6c8;},'UnJXC':function(_0x3012b7,_0x4fa733){return _0x3012b7-_0x4fa733;},'aiqZc':function(_0x410b13,_0x5a529f){return _0x410b13<_0x5a529f;},'wEtGy':function(_0xdba63c,_0x129bb5){return _0xdba63c(_0x129bb5);},'WwqFt':function(_0x3e1a27,_0x4f861a){return _0x3e1a27>_0x4f861a;},'qsSBM':function(_0x41fc80,_0x3c7172,_0x10ce38,_0x11cf5f){return _0x41fc80(_0x3c7172,_0x10ce38,_0x11cf5f);},'zvxTH':function(_0x434633,_0x8488cc,_0x5365d1){return _0x434633(_0x8488cc,_0x5365d1);}};var _0x1388d0=arguments[_0x508179(0x1f2)],_0x295fcf=_0x1388d0<0x3?_0x389e1c:_0x5ee75c['TniOX'](_0x528c49,null)?_0x528c49=Object[_0x508179(0x1ef)](_0x389e1c,_0xe9d3da):_0x528c49,_0x4355bb;if(_0x5ee75c[_0x508179(0x213)](typeof Reflect,_0x5ee75c[_0x508179(0x1f0)])&&_0x5ee75c[_0x508179(0x1e3)](typeof Reflect['decorate'],_0x508179(0x205)))_0x295fcf=Reflect[_0x508179(0x1ec)](_0x468c96,_0x389e1c,_0xe9d3da,_0x528c49);else{for(var _0x3b1618=_0x5ee75c[_0x508179(0x20d)](_0x468c96['length'],0x1);_0x3b1618>=0x0;_0x3b1618--)if(_0x4355bb=_0x468c96[_0x3b1618])_0x295fcf=(_0x5ee75c[_0x508179(0x203)](_0x1388d0,0x3)?_0x5ee75c[_0x508179(0x1d8)](_0x4355bb,_0x295fcf):_0x5ee75c[_0x508179(0x1d6)](_0x1388d0,0x3)?_0x5ee75c[_0x508179(0x1f3)](_0x4355bb,_0x389e1c,_0xe9d3da,_0x295fcf):_0x5ee75c[_0x508179(0x201)](_0x4355bb,_0x389e1c,_0xe9d3da))||_0x295fcf;}return _0x5ee75c[_0x508179(0x1d6)](_0x1388d0,0x3)&&_0x295fcf&&Object[_0x508179(0x1c6)](_0x389e1c,_0xe9d3da,_0x295fcf),_0x295fcf;},__metadata=this&&this['__metadata']||function(_0x4b0f5d,_0x494bb6){const _0x4c5c69=a284_0x1a24,_0x55084c={'CjTYD':function(_0x258a23,_0x4d0731){return _0x258a23===_0x4d0731;},'XeCoy':_0x4c5c69(0x1d2),'hLvbG':'function'};if(_0x55084c[_0x4c5c69(0x1e4)](typeof Reflect,_0x55084c[_0x4c5c69(0x1db)])&&_0x55084c[_0x4c5c69(0x1e4)](typeof Reflect[_0x4c5c69(0x1c4)],_0x55084c[_0x4c5c69(0x1fa)]))return Reflect['metadata'](_0x4b0f5d,_0x494bb6);},__param=this&&this[a284_0xaf6bf1(0x1d9)]||function(_0x2f586a,_0x5aced8){const _0x1ee395={'etVSp':function(_0x45e45d,_0x214b92,_0x4eb0f0,_0x2454f6){return _0x45e45d(_0x214b92,_0x4eb0f0,_0x2454f6);}};return function(_0x4da961,_0x2f6132){const _0x20f378=a284_0x1a24;_0x1ee395[_0x20f378(0x1cf)](_0x5aced8,_0x4da961,_0x2f6132,_0x2f586a);};},__awaiter=this&&this[a284_0xaf6bf1(0x1b9)]||function(_0x1eb682,_0x495339,_0x476873,_0x6be698){const _0x309256={'UkeSN':function(_0x5be5cd,_0x5ad672){return _0x5be5cd(_0x5ad672);},'XGbdX':function(_0x1a6e63,_0x75e8b6){return _0x1a6e63 instanceof _0x75e8b6;},'bqeMT':function(_0x577aef,_0x55e162){return _0x577aef(_0x55e162);},'PAxwy':'throw'};function _0x4fa125(_0x238f34){const _0x4aba48=a284_0x1a24;return _0x309256[_0x4aba48(0x202)](_0x238f34,_0x476873)?_0x238f34:new _0x476873(function(_0x39671f){_0x309256['UkeSN'](_0x39671f,_0x238f34);});}return new(_0x476873||(_0x476873=Promise))(function(_0x4c5138,_0x1fbd33){const _0x3ebf62=a284_0x1a24,_0x3f989b={'YXaSg':function(_0x3f7933,_0x356aae){return _0x3f7933(_0x356aae);}};function _0x55a894(_0x1c1e5c){const _0x2ca1c5=a284_0x1a24;try{_0x1f9e24(_0x6be698[_0x2ca1c5(0x1eb)](_0x1c1e5c));}catch(_0x1e092e){_0x309256[_0x2ca1c5(0x204)](_0x1fbd33,_0x1e092e);}}function _0x252dc9(_0x17b98b){const _0x33dde3=a284_0x1a24;try{_0x309256['bqeMT'](_0x1f9e24,_0x6be698[_0x309256[_0x33dde3(0x1c9)]](_0x17b98b));}catch(_0x2bfa24){_0x1fbd33(_0x2bfa24);}}function _0x1f9e24(_0x18b74b){const _0x3fb02a=a284_0x1a24;_0x18b74b['done']?_0x3f989b[_0x3fb02a(0x218)](_0x4c5138,_0x18b74b[_0x3fb02a(0x209)]):_0x3f989b[_0x3fb02a(0x218)](_0x4fa125,_0x18b74b[_0x3fb02a(0x209)])[_0x3fb02a(0x1bb)](_0x55a894,_0x252dc9);}_0x1f9e24((_0x6be698=_0x6be698[_0x3ebf62(0x1c8)](_0x1eb682,_0x495339||[]))['next']());});};Object[a284_0xaf6bf1(0x1c6)](exports,'__esModule',{'value':!![]}),exports[a284_0xaf6bf1(0x1fd)]=void 0x0;function a284_0x1a24(_0x386acf,_0x30b35f){const _0xb02fa7=a284_0xb02f();return a284_0x1a24=function(_0x1a242e,_0x772464){_0x1a242e=_0x1a242e-0x1b8;let _0x31b479=_0xb02fa7[_0x1a242e];if(a284_0x1a24['Qnstsw']===undefined){var _0x4db6bc=function(_0xdf6a9f){const _0x236fdb='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x534f3e='',_0x11628e='';for(let _0x4c7b6f=0x0,_0x550b9c,_0x2899c3,_0x486bfe=0x0;_0x2899c3=_0xdf6a9f['charAt'](_0x486bfe++);~_0x2899c3&&(_0x550b9c=_0x4c7b6f%0x4?_0x550b9c*0x40+_0x2899c3:_0x2899c3,_0x4c7b6f++%0x4)?_0x534f3e+=String['fromCharCode'](0xff&_0x550b9c>>(-0x2*_0x4c7b6f&0x6)):0x0){_0x2899c3=_0x236fdb['indexOf'](_0x2899c3);}for(let _0xbe6686=0x0,_0x441ace=_0x534f3e['length'];_0xbe6686<_0x441ace;_0xbe6686++){_0x11628e+='%'+('00'+_0x534f3e['charCodeAt'](_0xbe6686)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x11628e);};a284_0x1a24['kNHFqA']=_0x4db6bc,_0x386acf=arguments,a284_0x1a24['Qnstsw']=!![];}const _0x1e5ddb=_0xb02fa7[0x0],_0xfc37c=_0x1a242e+_0x1e5ddb,_0xb4eddd=_0x386acf[_0xfc37c];return!_0xb4eddd?(_0x31b479=a284_0x1a24['kNHFqA'](_0x31b479),_0x386acf[_0xfc37c]=_0x31b479):_0x31b479=_0xb4eddd,_0x31b479;},a284_0x1a24(_0x386acf,_0x30b35f);}const common_1=require('@nestjs/common'),session_user_1=require('../../dto/session-user'),user_dollar_change_1=require('../../dto/user-dollar-change'),user_decorator_1=require(a284_0xaf6bf1(0x1da)),response_builder_1=require(a284_0xaf6bf1(0x1ba)),page_1=require(a284_0xaf6bf1(0x1c3)),user_service_1=require('../user/user.service'),user_dollar_change_service_1=require(a284_0xaf6bf1(0x20c)),format_page_query_1=require(a284_0xaf6bf1(0x1fe)),page_data_builder_1=require(a284_0xaf6bf1(0x21b)),morgan_log_1=require('../../common/morgan-log'),cacheRedisStore_1=require(a284_0xaf6bf1(0x20a));let UserDollarChangeController=class UserDollarChangeController{constructor(_0x1d3124,_0x593446){const _0x4b2638=a284_0xaf6bf1;this[_0x4b2638(0x1e8)]=_0x1d3124,this[_0x4b2638(0x1bd)]=_0x593446;}[a284_0xaf6bf1(0x1df)](_0x5bbf91,_0xfd8d54,_0x1b7450){const _0x513023={'GdXjx':function(_0x242769,_0xb9bc61){return _0x242769===_0xb9bc61;},'jbzkF':'normal','aPrnO':function(_0x2f6354,_0x5d463b){return _0x2f6354===_0x5d463b;},'cvIzQ':function(_0x3bb098,_0x219f50){return _0x3bb098>=_0x219f50;},'uEGbX':'用户不存在/未登录/被冻结'};return __awaiter(this,void 0x0,void 0x0,function*(){const _0x53dcbc=a284_0x1a24;try{_0xfd8d54=(0x0,format_page_query_1[_0x53dcbc(0x1f9)])(_0xfd8d54);const _0x5c9e87=yield this['userService'][_0x53dcbc(0x1d3)](_0x5bbf91);if(_0x5c9e87&&_0x5c9e87['id']>=0x0&&_0x513023[_0x53dcbc(0x219)](_0x5c9e87[_0x53dcbc(0x1f6)],_0x513023[_0x53dcbc(0x20f)])){_0x5c9e87['userDollar'][_0x53dcbc(0x1e0)]=_0x513023[_0x53dcbc(0x1ff)](_0x5c9e87['userDollar'][_0x53dcbc(0x1c5)],null)||_0x5c9e87['userDollar'][_0x53dcbc(0x1c5)]>=Date['now']()?_0x5c9e87[_0x53dcbc(0x1e6)][_0x53dcbc(0x1e0)]:0x0,_0x5c9e87[_0x53dcbc(0x1e6)][_0x53dcbc(0x1de)]=_0x513023[_0x53dcbc(0x1ff)](_0x5c9e87['userDollar'][_0x53dcbc(0x1c5)],null)||_0x513023[_0x53dcbc(0x20e)](_0x5c9e87[_0x53dcbc(0x1e6)][_0x53dcbc(0x1c5)],Date['now']())?_0x5c9e87[_0x53dcbc(0x1e6)][_0x53dcbc(0x1de)]:0x0;const _0x4bb045=yield this[_0x53dcbc(0x1bd)][_0x53dcbc(0x1ca)](_0xfd8d54,{'userId':_0x5bbf91[_0x53dcbc(0x1f4)]});return _0x1b7450['json']((0x0,response_builder_1[_0x53dcbc(0x1ee)])(response_builder_1['ResponseStatusCode']['OK'],(0x0,page_data_builder_1['pageDataBuilder'])(_0x4bb045,_0xfd8d54)));}else return _0x1b7450['json']((0x0,response_builder_1[_0x53dcbc(0x1ee)])(response_builder_1[_0x53dcbc(0x1ed)][_0x53dcbc(0x1ea)],{},_0x513023[_0x53dcbc(0x1dc)]));}catch(_0x1cbb31){return(0x0,morgan_log_1[_0x53dcbc(0x1e1)])(_0x1cbb31),_0x1b7450[_0x53dcbc(0x210)]((0x0,response_builder_1[_0x53dcbc(0x1ee)])(response_builder_1[_0x53dcbc(0x1ed)]['INTERNAL_ERROR'],{},_0x1cbb31['toString']()));}});}[a284_0xaf6bf1(0x1cc)](_0x5d8761,_0x4bb59a){const _0x864723={'tNtWT':function(_0x19e72e,_0x2660ac){return _0x19e72e<=_0x2660ac;},'BhzmS':function(_0xef1101,_0xe62664){return _0xef1101!==_0xe62664;},'vtZIX':function(_0x22b62e,_0x5af998){return _0x22b62e===_0x5af998;},'GLhCj':function(_0x4d46b2,_0x242eae){return _0x4d46b2===_0x242eae;},'xrPPb':function(_0x14ce7a,_0x11fcc9){return _0x14ce7a<=_0x11fcc9;},'KrCqx':function(_0x312d1e,_0x256b7c){return _0x312d1e===_0x256b7c;},'cwSjW':function(_0x178dbd,_0x2e5942){return _0x178dbd*_0x2e5942;},'MMSCm':function(_0xb3a94,_0x290839){return _0xb3a94===_0x290839;}};return __awaiter(this,void 0x0,void 0x0,function*(){const _0x36d349=a284_0x1a24;try{const _0x2424a7=yield(0x0,cacheRedisStore_1[_0x36d349(0x1f7)])(_0x36d349(0x1d5)+(_0x5d8761['recent']&&_0x864723[_0x36d349(0x20b)](_0x5d8761[_0x36d349(0x1dd)],0x14)?_0x5d8761[_0x36d349(0x1dd)]:0x14),!![]);if(_0x864723[_0x36d349(0x1f8)](_0x2424a7,null))return _0x4bb59a[_0x36d349(0x210)]((0x0,response_builder_1[_0x36d349(0x1ee)])(response_builder_1[_0x36d349(0x1ed)]['OK'],_0x864723[_0x36d349(0x1ce)](_0x2424a7,null)||_0x864723['GLhCj'](_0x2424a7,void 0x0)?void 0x0:_0x2424a7[_0x36d349(0x1e7)]));let _0xe2bd8a=yield this[_0x36d349(0x1bd)][_0x36d349(0x200)](_0x5d8761['recent']&&_0x864723['xrPPb'](_0x5d8761[_0x36d349(0x1dd)],0x14)?_0x5d8761[_0x36d349(0x1dd)]:0x14);_0xe2bd8a=_0xe2bd8a['map'](_0x1aa96c=>{const _0x35d52d=_0x36d349;return{'userName':_0x1aa96c[_0x35d52d(0x215)],'total':_0x1aa96c['total']};});let _0x598a30=yield this['userDollarChangeService'][_0x36d349(0x214)]();return yield(0x0,cacheRedisStore_1[_0x36d349(0x1be)])(_0x36d349(0x1d5)+(_0x5d8761[_0x36d349(0x1dd)]&&_0x864723[_0x36d349(0x1fc)](_0x5d8761[_0x36d349(0x1dd)],0x14)?_0x5d8761[_0x36d349(0x1dd)]:0x14),{'content':{'statsFrom':_0x864723[_0x36d349(0x1d1)](_0x598a30,null)||_0x864723[_0x36d349(0x1d1)](_0x598a30,void 0x0)?void 0x0:_0x598a30['createdTimeStamp'],'result':_0xe2bd8a}},_0x864723[_0x36d349(0x1c0)](0x3c,0x5),!![]),_0x4bb59a[_0x36d349(0x210)]((0x0,response_builder_1[_0x36d349(0x1ee)])(response_builder_1[_0x36d349(0x1ed)]['OK'],{'statsFrom':_0x864723[_0x36d349(0x1f1)](_0x598a30,null)||_0x598a30===void 0x0?void 0x0:_0x598a30[_0x36d349(0x217)],'result':_0xe2bd8a}));}catch(_0x40c51e){return(0x0,morgan_log_1['logBussiness'])(_0x40c51e),_0x4bb59a[_0x36d349(0x210)]((0x0,response_builder_1[_0x36d349(0x1ee)])(response_builder_1[_0x36d349(0x1ed)]['OK'],{},_0x40c51e['toString']()));}});}};function a284_0xb02f(){const _0xe8cb3a=['wgvdB3K','DuvhyLG','CMvJzw50','y2HHCMDLrg9SBgfYCW','BgLZDej5vxnLCG','Bgv2zwW','Bg9NqNvZC2LUzxnZ','zgvZAwDUoNr5Cgu','AuHhANC','q2Puwuq','mMDQEwnoyq','DxnLCKrVBgXHCG','y29UDgvUDa','DxnLCLnLCNzPy2u','ChjVDg90ExbL','su5urvjoquXFrvjst1i','BMv4Da','zgvJB3jHDgu','uMvZCg9UC2vtDgf0DxndB2rL','CMvZCg9UC2vcDwLSzgvY','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','DwrQvwu','tu1tq20','BgvUz3rO','CxntqK0','DxnLCKLK','q29UDhjVBgXLCG','C3rHDhvZ','z2v0rgL5q2fJAgu','qMH6Bvm','zM9YBwf0ugfNzvf1zxj5','AeX2yKC','mZvxEfbsA0K','Ehjqugi','vxnLCKrVBgXHCKnOyw5NzunVBNrYB2XSzxi','lI4VlI4Vy29TBw9Ul2zVCM1HDc1WywDLlxf1zxj5','yvbYBK8','y291BNruB3bovxnLCKnVBNn1Bwu','ENz4veG','weDIzfG','ywLXwMm','yNfLtvq','zNvUy3rPB24','vxnLCKrVBgXHCKnOyw5NzvnLCNzPy2u','mteWzK9nDvzO','mJe1mdq2m0vTug1pua','DMfSDwu','lI4VlI4Vy29TBw9Ul2nHy2HLuMvKAxntDg9Yzq','De50v1q','lI91C2vYlwrVBgXHCI1JAgfUz2uUC2vYDMLJzq','vw5kwem','y3zjELe','AMj6A0y','ANnVBG','l2XPC3rcEvvZzxi','ugfNzq','vg5Pt1G','z2v0tgfZDfvZzxjeB2XSyxjdAgfUz2u','DxnLCKrVBgXHCKnOyw5NzvvZzxjFDxnLCK5HBwu','tgLZDfrVCe5vC2vYq29UC3vTzq','y3jLyxrLzfrPBwvtDgfTCa','wvHHu2C','r2ryANG','otqXnKjYCuLPwG','lI4VlI4Vy29TBw9Ul3bHz2uTzgf0ys1IDwLSzgvY','mtC2mJq0q0LjuMTt','odC5nZqWnhPsswrmuG','l3vZzxjeB2XSyxjdAgfUz2u','r2v0','x19HD2fPDgvY','lI4VlI4Vy29TBw9Ul3jLC3bVBNnLlwj1AwXKzxi','DgHLBG','mte5nJDKvg5Xtw8','DxnLCKrVBgXHCKnOyw5NzvnLCNzPy2u','C2v0rgL5q2fJAgu','mZG3mZy1Duj1rK5W','y3DtALC','mtK4mJCWtuTRtLve','uxvLCNK','lI4VlI4VzhrVl3bHz2u','Bwv0ywrHDge','Bgv2zwXfEhbPCMvuAw1Lu3rHBxa','zgvMAw5LuhjVCgvYDhK','mJfTzNrYyMK','yxbWBhK','uef4D3K','z2v0vxnLCKrVBgXHCKnOyw5NzuXPC3q','uMvZ','BgLZDfrVCe5vC2vYq29UC3vTzq','zgvZAwDUoNbHCMfTDhLWzxm','DNrAsvG','zxrwu3a','mZiYmKXhsfneyG','s3jdCxG','B2jQzwn0','z2v0vxnLCG','l2XPC3ruB3bovxnLCKnVBNn1Bwu','r0vul2XPC3ruB3bovxnLCKnVBNn1BwuT','v3DXrNq','u2vZC1vZzxi','D0v0r3K','x19WyxjHBq','lI4VlI4VzgvJB3jHDg9Yl3vZzxiUzgvJB3jHDg9Y'];a284_0xb02f=function(){return _0xe8cb3a;};return a284_0xb02f();}__decorate([(0x0,common_1[a284_0xaf6bf1(0x1b8)])(a284_0xaf6bf1(0x211)),__param(0x0,(0x0,user_decorator_1[a284_0xaf6bf1(0x1d7)])()),__param(0x1,(0x0,common_1[a284_0xaf6bf1(0x1c2)])()),__param(0x2,(0x0,common_1[a284_0xaf6bf1(0x1cb)])()),__metadata('design:type',Function),__metadata(a284_0xaf6bf1(0x1cd),[session_user_1['SessionUser'],page_1[a284_0xaf6bf1(0x212)],Object]),__metadata('design:returntype',Promise)],UserDollarChangeController[a284_0xaf6bf1(0x1e9)],a284_0xaf6bf1(0x1df),null),__decorate([(0x0,common_1[a284_0xaf6bf1(0x1b8)])(a284_0xaf6bf1(0x1d4)),__param(0x0,(0x0,common_1[a284_0xaf6bf1(0x1c2)])()),__param(0x1,(0x0,common_1[a284_0xaf6bf1(0x1cb)])()),__metadata(a284_0xaf6bf1(0x1e2),Function),__metadata('design:paramtypes',[user_dollar_change_1[a284_0xaf6bf1(0x216)],Object]),__metadata('design:returntype',Promise)],UserDollarChangeController[a284_0xaf6bf1(0x1e9)],'listTopNUserConsume',null),UserDollarChangeController=__decorate([(0x0,common_1[a284_0xaf6bf1(0x1f5)])(a284_0xaf6bf1(0x21e)),__metadata('design:paramtypes',[user_service_1['UserService'],user_dollar_change_service_1[a284_0xaf6bf1(0x206)]])],UserDollarChangeController),exports[a284_0xaf6bf1(0x1fd)]=UserDollarChangeController;