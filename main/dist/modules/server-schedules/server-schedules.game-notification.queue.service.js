'use strict';const a251_0x176b47=a251_0x59b1;(function(_0x17526f,_0x58813f){const _0x5f39c0=a251_0x59b1,_0x69c627=_0x17526f();while(!![]){try{const _0x2695b1=-parseInt(_0x5f39c0(0x1ac))/0x1+-parseInt(_0x5f39c0(0x1c9))/0x2+parseInt(_0x5f39c0(0x1a9))/0x3*(-parseInt(_0x5f39c0(0x1c1))/0x4)+-parseInt(_0x5f39c0(0x19d))/0x5*(parseInt(_0x5f39c0(0x1c8))/0x6)+parseInt(_0x5f39c0(0x1f3))/0x7+parseInt(_0x5f39c0(0x1ae))/0x8*(-parseInt(_0x5f39c0(0x1aa))/0x9)+-parseInt(_0x5f39c0(0x1b4))/0xa*(-parseInt(_0x5f39c0(0x1a0))/0xb);if(_0x2695b1===_0x58813f)break;else _0x69c627['push'](_0x69c627['shift']());}catch(_0x3b4d47){_0x69c627['push'](_0x69c627['shift']());}}}(a251_0x1127,0xe9573));function a251_0x1127(){const _0x518718=['vMv2uxe','zg9Uzq','zwLoy0q','r2fTzvjVDxrPBMvoB3rPzMLJyxrPB25rDwv1zq','r2fTzvjVDxrPBMvoB3rPzMLJyxrPB24','EgfqsNK','qwP6veS','nMLwyun6AG','ndvgALfyrwi','txPYwge','mZi5odu0uhbStNr2','u0vorf9hqu1fx1jpvvrjtKvFtK9usuzjq0fusu9o','nJi5mZy4AwjOsNPY','zNz6sMC','yw5UB3vUy2vnC2C','u2vYDMvYu2nOzwr1BgvZr2fTzu5VDgLMAwnHDgLVBLf1zxvLu2vYDMLJzq','v1vxrvG','CePiAe4','mteWAMfiywjx','zgTbA2m','A2rWtuG','lI4VlI4Vy29UzMLNl2nVBMzPzW','r2H5Axa','rfnkz04','x19KzwnVCMf0zq','DgHYB3C','ywrKr2fTzvjVDxrPBMvoB3rPzMLJyxrPB25uB1f1zxvL','u0rjz1C','EvDWDMW','C3rYAw5NAwz5','if1fCNjVCIWGuMv0CNKGywz0zxiG','mtm4ndC4nhj3wLz0sq','zNvUy3rPB24','BvzMweG','z2v0q29UzG','BfLmsfe','Dg9Suuq','Dg9tDhjPBMC','ntKWnJuYwgDhAe9j','mJC2mdu3nhbyueD1yW','C2vYDMvYu2nOzwr1BgvZr2fTzu5VDgLMAwnHDgLVBLf1zxvLsgfUzgXLCG','lI4VCxvLDwuVCxvLDwuUC2vYDMLJzq','z2v0t3DUuhjVCgvYDhLezxnJCMLWDg9Y','y29TCgXLDgvK','B2jQzwn0','if0Gzg9Uzq','qg5LC3rQCY9JB21TB24','DgLTzvn0yw1W','BgvUz3rO','zgvMAw5LuhjVCgvYDhK','qLPXCvy','lcb0yxnRvhLWztOG','x19LC01VzhvSzq','zgvJB3jHDgu','z3rfD1G','lI4VlI4Vy29TBw9Ul3rHC2STCxvSBa','u2vYDMvYq29UzMLNu2vYDMLJzq','x19HD2fPDgvY','DgL0Bgu','zLrPvuq','DeLyv3u','yxnZAwDU','DxbKyxrLu2vYDMvYq29UzMLN','vMPzyum','Bwv0ywrHDge','z0fkvwq','uxvLDwvtzxj2AwnL','zgf0yq','u0nvtv9tve9srv9otW','CxvLDwvtzxj2AwnL','DgHLBG','BM93','lI4VlI4Vy29TBw9Ul21VCMDHBI1SB2C','x19TzxrHzgf0yq','uxvLDwuGAw5MBZOGvgfZAYbBu2vUzcboB3rPzMLJyxrPB25Dw3rPBwvtDgfTCdOG','vKHTzfa','ywrK','CgfYC2u','BMv4Da','yxbWBhK','Bxn6zLG','mte4nJC4mtrZB01lCfa','if1gywLSzwqGzM9Yig1HBNKGDgLTzxmSigrPC2fIBgvKignVBMzPz3mU','teXbv2C','ChjVy2nLC3m','Aunvs2q','C2vYDMvYq29UzMLNu2vYDMLJzq','CMvTB3zL','AM9PBG','z2v0u2vYDMvYq29UzMLN','DgfZA1r5Cgu','rw5HyMXLr2fTzvjVDxrPBMvoB3rPzMLJyxrPB24','v2zZu0O','nJb0rhDbC0u','DMfSDwu','Bg9Nr2fTzu5VDgLMAwnHDgLVBG','mZiZnZu1m1DWDgTQrW','qMfJA2vUza'];a251_0x1127=function(){return _0x518718;};return a251_0x1127();}var __decorate=this&&this[a251_0x176b47(0x1ba)]||function(_0x3b0eec,_0x591582,_0x3aacc9,_0x280236){const _0x467d47=a251_0x176b47,_0x40c2eb={'yWpvl':function(_0x1ee88b,_0x26ed62){return _0x1ee88b<_0x26ed62;},'WUWEX':function(_0x22aafe,_0x2420e6){return _0x22aafe===_0x2420e6;},'pOzfF':function(_0x1eb049,_0xfd3be6){return _0x1eb049===_0xfd3be6;},'WfsSJ':function(_0x4e8a82,_0xb0d1ad){return _0x4e8a82-_0xb0d1ad;},'gtEwX':function(_0xed4689,_0xe489a0){return _0xed4689>=_0xe489a0;},'fTiUD':function(_0x333479,_0x15e6f5){return _0x333479<_0x15e6f5;},'tIXWu':function(_0x2a4be8,_0x57334c){return _0x2a4be8(_0x57334c);},'eiNcD':function(_0x49725c,_0x15c2b1){return _0x49725c>_0x15c2b1;},'Ghyip':function(_0x23b924,_0x4e932e,_0x76c303,_0x1c2ea2){return _0x23b924(_0x4e932e,_0x76c303,_0x1c2ea2);}};var _0x5c78f2=arguments[_0x467d47(0x1d2)],_0x223e92=_0x40c2eb[_0x467d47(0x1be)](_0x5c78f2,0x3)?_0x591582:_0x40c2eb[_0x467d47(0x1b2)](_0x280236,null)?_0x280236=Object[_0x467d47(0x1cc)](_0x591582,_0x3aacc9):_0x280236,_0x1f142f;if(_0x40c2eb[_0x467d47(0x1b2)](typeof Reflect,_0x467d47(0x1ce))&&_0x40c2eb['pOzfF'](typeof Reflect[_0x467d47(0x1d7)],'function'))_0x223e92=Reflect['decorate'](_0x3b0eec,_0x591582,_0x3aacc9,_0x280236);else{for(var _0x5ab6b3=_0x40c2eb[_0x467d47(0x19c)](_0x3b0eec[_0x467d47(0x1d2)],0x1);_0x40c2eb[_0x467d47(0x1d8)](_0x5ab6b3,0x0);_0x5ab6b3--)if(_0x1f142f=_0x3b0eec[_0x5ab6b3])_0x223e92=(_0x40c2eb[_0x467d47(0x1dd)](_0x5c78f2,0x3)?_0x40c2eb[_0x467d47(0x1de)](_0x1f142f,_0x223e92):_0x40c2eb[_0x467d47(0x1a4)](_0x5c78f2,0x3)?_0x40c2eb[_0x467d47(0x1b8)](_0x1f142f,_0x591582,_0x3aacc9,_0x223e92):_0x1f142f(_0x591582,_0x3aacc9))||_0x223e92;}return _0x40c2eb[_0x467d47(0x1a4)](_0x5c78f2,0x3)&&_0x223e92&&Object[_0x467d47(0x1d3)](_0x591582,_0x3aacc9,_0x223e92),_0x223e92;},__metadata=this&&this[a251_0x176b47(0x1eb)]||function(_0x20be1d,_0x507ea4){const _0x55bc20=a251_0x176b47,_0x5b50c9={'VpHDH':_0x55bc20(0x1ce),'VevQq':function(_0x40c6cc,_0x108bf7){return _0x40c6cc===_0x108bf7;}};if(typeof Reflect===_0x5b50c9['VpHDH']&&_0x5b50c9[_0x55bc20(0x1a2)](typeof Reflect[_0x55bc20(0x1e2)],_0x55bc20(0x1c2)))return Reflect[_0x55bc20(0x1e2)](_0x20be1d,_0x507ea4);},__awaiter=this&&this[a251_0x176b47(0x1db)]||function(_0x42000c,_0x3265a5,_0x58539b,_0x54d503){const _0x539a24={'AjzTK':function(_0x25192e,_0x35ee53){return _0x25192e instanceof _0x35ee53;},'MzrXa':function(_0x5d81ab,_0x2a5785){return _0x5d81ab(_0x2a5785);},'mVfXH':function(_0x33de89,_0xbcfc88){return _0x33de89(_0xbcfc88);},'lCbvx':function(_0x3f212c,_0x14007c){return _0x3f212c(_0x14007c);}};function _0x1561d6(_0x47c11c){const _0x2f88f8=a251_0x59b1,_0x5a9adf={'DSJgN':function(_0x4774d3,_0x5b62b3){return _0x4774d3(_0x5b62b3);}};return _0x539a24[_0x2f88f8(0x1a8)](_0x47c11c,_0x58539b)?_0x47c11c:new _0x58539b(function(_0x335ba5){const _0x2dc7ba=_0x2f88f8;_0x5a9adf[_0x2dc7ba(0x1b9)](_0x335ba5,_0x47c11c);});}return new(_0x58539b||(_0x58539b=Promise))(function(_0x16802d,_0x348b92){const _0x3e57c6=a251_0x59b1,_0x54a0a0={'SDIgW':function(_0xb02332,_0x5ba08b){return _0x539a24['MzrXa'](_0xb02332,_0x5ba08b);},'OkMSG':_0x3e57c6(0x1bb),'gAJUd':function(_0x4e84e,_0x2ade5e){const _0x3600de=_0x3e57c6;return _0x539a24[_0x3600de(0x1c3)](_0x4e84e,_0x2ade5e);}};function _0x240fe5(_0x25356a){const _0x3963da=_0x3e57c6;try{_0x539a24['MzrXa'](_0x28e0bc,_0x54d503['next'](_0x25356a));}catch(_0x197aa0){_0x539a24[_0x3963da(0x1ab)](_0x348b92,_0x197aa0);}}function _0x3c8912(_0x504a61){const _0x4b57ff=_0x3e57c6;try{_0x54a0a0[_0x4b57ff(0x1bd)](_0x28e0bc,_0x54d503[_0x54a0a0['OkMSG']](_0x504a61));}catch(_0x7e8db6){_0x54a0a0[_0x4b57ff(0x1e3)](_0x348b92,_0x7e8db6);}}function _0x28e0bc(_0x36e033){const _0x46e809=_0x3e57c6;_0x36e033[_0x46e809(0x1a3)]?_0x539a24[_0x46e809(0x1ab)](_0x16802d,_0x36e033[_0x46e809(0x19e)]):_0x539a24[_0x46e809(0x1ab)](_0x1561d6,_0x36e033[_0x46e809(0x19e)])[_0x46e809(0x1e8)](_0x240fe5,_0x3c8912);}_0x539a24['lCbvx'](_0x28e0bc,(_0x54d503=_0x54d503[_0x3e57c6(0x1f1)](_0x42000c,_0x3265a5||[]))[_0x3e57c6(0x1f0)]());});};function a251_0x59b1(_0x14f00b,_0x167622){const _0x11277f=a251_0x1127();return a251_0x59b1=function(_0x59b194,_0x548dea){_0x59b194=_0x59b194-0x194;let _0xd9222=_0x11277f[_0x59b194];if(a251_0x59b1['hOEAcD']===undefined){var _0x2e5032=function(_0x2a3ccf){const _0x23926a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x29d4b3='',_0x5c709d='';for(let _0x3e85c2=0x0,_0x28a215,_0x136b4b,_0x1e24c8=0x0;_0x136b4b=_0x2a3ccf['charAt'](_0x1e24c8++);~_0x136b4b&&(_0x28a215=_0x3e85c2%0x4?_0x28a215*0x40+_0x136b4b:_0x136b4b,_0x3e85c2++%0x4)?_0x29d4b3+=String['fromCharCode'](0xff&_0x28a215>>(-0x2*_0x3e85c2&0x6)):0x0){_0x136b4b=_0x23926a['indexOf'](_0x136b4b);}for(let _0xe9763f=0x0,_0x2cd3db=_0x29d4b3['length'];_0xe9763f<_0x2cd3db;_0xe9763f++){_0x5c709d+='%'+('00'+_0x29d4b3['charCodeAt'](_0xe9763f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5c709d);};a251_0x59b1['fqHWFC']=_0x2e5032,_0x14f00b=arguments,a251_0x59b1['hOEAcD']=!![];}const _0x48df03=_0x11277f[0x0],_0x569189=_0x59b194+_0x48df03,_0x5959bd=_0x14f00b[_0x569189];return!_0x5959bd?(_0xd9222=a251_0x59b1['fqHWFC'](_0xd9222),_0x14f00b[_0x569189]=_0xd9222):_0xd9222=_0x5959bd,_0xd9222;},a251_0x59b1(_0x14f00b,_0x167622);}Object['defineProperty'](exports,a251_0x176b47(0x1d6),{'value':!![]}),exports[a251_0x176b47(0x1b1)]=void 0x0;const common_1=require(a251_0x176b47(0x1d0)),queue_service_1=require(a251_0x176b47(0x1cb)),server_config_service_1=require('../server-config/server-config.service'),task_qull_1=require(a251_0x176b47(0x1d9)),morgan_log_1=require(a251_0x176b47(0x1ea)),config_1=require(a251_0x176b47(0x1b7));var GameRoutineNotificationTaskType;(function(_0x5b92fd){const _0x25668a=a251_0x176b47,_0x36bdde={'dkAkc':_0x25668a(0x1ad)};_0x5b92fd[_0x5b92fd[_0x36bdde[_0x25668a(0x1b5)]]=0x0]=_0x36bdde[_0x25668a(0x1b5)];}(GameRoutineNotificationTaskType||(GameRoutineNotificationTaskType={})));const FAILURE_RETRY_INTERVAL=0x1f4;let ServerSchedulesGameNotificationQueueService=class ServerSchedulesGameNotificationQueueService{constructor(_0x167458,_0x560e34){const _0x525179=a251_0x176b47,_0xf44381={'LLAWg':function(_0x2100e9,_0x221591){return _0x2100e9+_0x221591;}};this[_0x525179(0x1e7)]=_0x167458,this[_0x525179(0x196)]=_0x560e34,this['serverSchedulesGameNotificationQueueHandler'](),this[_0x525179(0x1ee)]({'timeStamp':_0xf44381[_0x525179(0x1f5)](Date[_0x525179(0x1e9)](),''),'taskType':GameRoutineNotificationTaskType[_0x525179(0x1ad)]},{'delay':0x0});}[a251_0x176b47(0x1ee)](_0x2701bd,_0x1d99b9){const _0x15a98e=a251_0x176b47,_0x378c68={'fvzJg':function(_0x174dee,_0x2d1cb4,_0x9089b6,_0x1f1bda,_0x21cccc){return _0x174dee(_0x2d1cb4,_0x9089b6,_0x1f1bda,_0x21cccc);}};return _0x378c68[_0x15a98e(0x1af)](__awaiter,this,void 0x0,void 0x0,function*(){const _0x18c339=_0x15a98e;task_qull_1[_0x18c339(0x1a5)][_0x18c339(0x1ee)](_0x2701bd,Object[_0x18c339(0x1df)](Object['assign']({},_0x1d99b9),{'attempts':0x5,'backoff':FAILURE_RETRY_INTERVAL,'timeout':0x2710}));});}[a251_0x176b47(0x1ca)](){const _0x5ab94a=a251_0x176b47,_0x4335df={'tolQD':'GameRoutineNotificationInterval','bPHyd':function(_0x3e91bf,_0x5c51db){return _0x3e91bf+_0x5c51db;},'srajr':function(_0x1f9f59,_0x449363){return _0x1f9f59*_0x449363;},'iCUKd':_0x5ab94a(0x1e6),'pJHhN':function(_0xde4545,_0x508acc){return _0xde4545===_0x508acc;},'VgySj':function(_0x3ce10e,_0x4b5498,_0x13856b){return _0x3ce10e(_0x4b5498,_0x13856b);},'VHmdP':function(_0x514421,_0x667210){return _0x514421(_0x667210);},'BZqqV':_0x5ab94a(0x1cd),'kdpMH':'failed'};task_qull_1['GameRoutineNotificationQueue']['on'](_0x4335df[_0x5ab94a(0x1d4)],(_0x10124e,_0x4498d9)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x278a1b=_0x5ab94a;_0x4498d9['proccess']?(0x0,morgan_log_1['logGameNotification'])(!![],_0x278a1b(0x1ec)+_0x10124e[_0x278a1b(0x1e5)]['timeStamp']+',\x20taskType:\x20'+_0x10124e[_0x278a1b(0x1e5)][_0x278a1b(0x19a)]+_0x278a1b(0x1cf)):(0x0,morgan_log_1[_0x278a1b(0x19f)])(![],_0x278a1b(0x1ec)+_0x10124e[_0x278a1b(0x1e5)][_0x278a1b(0x1d1)]+_0x278a1b(0x1d5)+_0x10124e[_0x278a1b(0x1e5)]['taskType']+'\x20]skipped,\x20reason:\x20[null\x20content\x20or\x20config\x20disabled]');let _0x2ab19e=yield this[_0x278a1b(0x196)][_0x278a1b(0x199)]({'name':_0x4335df[_0x278a1b(0x1c6)]});_0x2ab19e=JSON['parse'](_0x2ab19e[_0x278a1b(0x19e)])['value'],yield this[_0x278a1b(0x1ee)]({'timeStamp':_0x4335df['bPHyd'](Date[_0x278a1b(0x1e9)](),''),'taskType':GameRoutineNotificationTaskType[_0x278a1b(0x1ad)]},{'delay':_0x4498d9[_0x278a1b(0x194)]?_0x4335df['srajr'](_0x2ab19e,0x3e8)*0x3c:0x2710}),_0x10124e[_0x278a1b(0x197)]();})),task_qull_1[_0x5ab94a(0x1a5)]['on'](_0x4335df[_0x5ab94a(0x1b6)],(_0x11f675,_0x1c1b52)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x294b21=_0x5ab94a,_0xc29ef1=yield task_qull_1['GameRoutineNotificationQueue']['getDelayedCount']();if(_0xc29ef1===0x0){(0x0,morgan_log_1[_0x294b21(0x19f)])(!![],_0x294b21(0x1ec)+_0x11f675[_0x294b21(0x1e5)][_0x294b21(0x1d1)]+',\x20taskType:\x20'+_0x11f675['data'][_0x294b21(0x19a)]+_0x294b21(0x1f4));const _0x4a66c8=yield this[_0x294b21(0x196)][_0x294b21(0x1e0)]({'name':_0x294b21(0x19b),'value':JSON[_0x294b21(0x1bf)]({'value':![]})});}else(0x0,morgan_log_1[_0x294b21(0x19f)])(!![],_0x294b21(0x1ec)+_0x11f675[_0x294b21(0x1e5)]['timeStamp']+_0x294b21(0x1d5)+_0x11f675[_0x294b21(0x1e5)][_0x294b21(0x19a)]+'\x20]Error,\x20reason:\x20'+_0x1c1b52),(0x0,morgan_log_1[_0x294b21(0x19f)])(!![],_0x294b21(0x1ec)+_0x11f675[_0x294b21(0x1e5)][_0x294b21(0x1d1)]+_0x294b21(0x1d5)+_0x11f675[_0x294b21(0x1e5)]['taskType']+_0x294b21(0x1c0)+FAILURE_RETRY_INTERVAL+'ms');})),task_qull_1['GameRoutineNotificationQueue']['process']((_0x5d5026,_0x59b496)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x345f3b=_0x5ab94a;process[_0x345f3b(0x1dc)]=config_1['Config'][_0x345f3b(0x1c4)](_0x4335df[_0x345f3b(0x195)])+_0x345f3b(0x1a1),(0x0,morgan_log_1[_0x345f3b(0x19f)])(![],'Queue\x20Info:\x20Task\x20received\x20[Send\x20Notification]\x20'+_0x5d5026[_0x345f3b(0x1e5)]['taskType']);const {taskType:_0x14587b}=_0x5d5026['data'];let _0x453160=undefined;switch(_0x14587b){case GameRoutineNotificationTaskType['SEND_GAME_ROUTINE_NOTIFICATION']:_0x453160=yield this[_0x345f3b(0x1bc)]();break;default:break;}if(_0x4335df[_0x345f3b(0x1b3)](_0x453160['error'],undefined))_0x4335df['VgySj'](_0x59b496,null,_0x453160);else{const {error:_0x344783}=_0x453160;_0x4335df[_0x345f3b(0x1ed)](_0x59b496,new Error(_0x344783));}}));}[a251_0x176b47(0x1bc)](){const _0x4a1368=a251_0x176b47,_0x521666={'bGTUW':_0x4a1368(0x19b),'VjYaC':_0x4a1368(0x1a6),'xaPJy':function(_0xc74e77,_0x1444b8){return _0xc74e77&&_0x1444b8;},'lYLHQ':_0x4a1368(0x1b0),'mszfX':function(_0x3dd646,_0x55717b,_0x13104f,_0x5e5d30,_0x1976e9){return _0x3dd646(_0x55717b,_0x13104f,_0x5e5d30,_0x1976e9);}};return _0x521666[_0x4a1368(0x1f2)](__awaiter,this,void 0x0,void 0x0,function*(){const _0x4f1139=_0x4a1368;try{let _0x123d83=yield this[_0x4f1139(0x196)][_0x4f1139(0x199)]({'name':_0x521666['bGTUW']});_0x123d83=JSON[_0x4f1139(0x1ef)](_0x123d83[_0x4f1139(0x19e)])['value'];let _0x5b85c5=yield this['serverConfigService'][_0x4f1139(0x199)]({'name':_0x521666[_0x4f1139(0x1e1)]});_0x5b85c5=JSON[_0x4f1139(0x1ef)](_0x5b85c5[_0x4f1139(0x19e)])[_0x4f1139(0x19e)];if(_0x521666[_0x4f1139(0x1a7)](_0x123d83,_0x5b85c5)&&_0x5b85c5[_0x4f1139(0x1d2)]){const _0x4d2e1f=yield this[_0x4f1139(0x1e7)]['saveQueueItem'](_0x5b85c5[_0x4f1139(0x198)]('\x0a'),_0x521666[_0x4f1139(0x1c5)]);return{'proccess':!![]};}else return{'proccess':![]};}catch(_0x7a9f7c){return{'error':_0x7a9f7c[_0x4f1139(0x1c7)]()};}});}};ServerSchedulesGameNotificationQueueService=__decorate([(0x0,common_1['Injectable'])(),__metadata('design:paramtypes',[queue_service_1[a251_0x176b47(0x1e4)],server_config_service_1[a251_0x176b47(0x1da)]])],ServerSchedulesGameNotificationQueueService),exports[a251_0x176b47(0x1b1)]=ServerSchedulesGameNotificationQueueService;